"use strict";var m1e=Object.defineProperty,g1e=Object.defineProperties,_1e=Object.getOwnPropertyDescriptors,p7=Object.getOwnPropertySymbols,y1e=Object.prototype.hasOwnProperty,v1e=Object.prototype.propertyIsEnumerable,m7=(Wi,ci,Si)=>ci in Wi?m1e(Wi,ci,{enumerable:!0,configurable:!0,writable:!0,value:Si}):Wi[ci]=Si,g7=(Wi,ci)=>{for(var Si in ci||(ci={}))y1e.call(ci,Si)&&m7(Wi,Si,ci[Si]);if(p7)for(var Si of p7(ci))v1e.call(ci,Si)&&m7(Wi,Si,ci[Si]);return Wi},_7=(Wi,ci)=>g1e(Wi,_1e(ci));(self.webpackChunkwynyard=self.webpackChunkwynyard||[]).push([[179],{275:(Wi,ci,Si)=>{var Zd={};function Ze(n){return"function"==typeof n}function gw(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Si.r(Zd),Si.d(Zd,{FirebaseError:()=>Oi,SDK_VERSION:()=>vs,_DEFAULT_ENTRY_NAME:()=>El,_addComponent:()=>J_,_addOrOverwriteComponent:()=>jU,_apps:()=>sa,_clearComponents:()=>Hce,_components:()=>_f,_getProvider:()=>Yr,_registerComponent:()=>cn,_removeServiceInstance:()=>Uce,deleteApp:()=>$U,getApp:()=>aa,getApps:()=>UT,initializeApp:()=>xr,onLog:()=>zU,registerVersion:()=>$e,setLogLevel:()=>GU});const _w=gw(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Vm(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class et{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Ze(i))try{i()}catch(s){e=s instanceof _w?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{mP(s)}catch(o){e=null!=e?e:[],o instanceof _w?e=[...e,...o.errors]:e.push(o)}}if(e)throw new _w(e)}}add(e){var t;if(e&&e!==this)if(this.closed)mP(e);else{if(e instanceof et){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Vm(t,e)}remove(e){const{_finalizers:t}=this;t&&Vm(t,e),e instanceof et&&e._removeParent(this)}}et.EMPTY=(()=>{const n=new et;return n.closed=!0,n})();const fP=et.EMPTY;function pP(n){return n instanceof et||n&&"closed"in n&&Ze(n.remove)&&Ze(n.add)&&Ze(n.unsubscribe)}function mP(n){Ze(n)?n():n.unsubscribe()}const Ka={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Bm={setTimeout(n,e,...t){const{delegate:i}=Bm;return(null==i?void 0:i.setTimeout)?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Bm;return((null==e?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function gP(n){Bm.setTimeout(()=>{const{onUnhandledError:e}=Ka;if(!e)throw n;e(n)})}function Um(){}const y7=yw("C",void 0,void 0);function yw(n,e,t){return{kind:n,value:e,error:t}}let Qa=null;function Hm(n){if(Ka.useDeprecatedSynchronousErrorHandling){const e=!Qa;if(e&&(Qa={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=Qa;if(Qa=null,t)throw i}}else n()}class vw extends et{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,pP(e)&&e.add(this)):this.destination=I7}static create(e,t,i){return new Jd(e,t,i)}next(e){this.isStopped?ww(function b7(n){return yw("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ww(function v7(n){return yw("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ww(y7,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const C7=Function.prototype.bind;function bw(n,e){return C7.call(n,e)}class E7{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){jm(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){jm(i)}else jm(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){jm(t)}}}class Jd extends vw{constructor(e,t,i){let r;if(super(),Ze(e)||!e)r={next:null!=e?e:void 0,error:null!=t?t:void 0,complete:null!=i?i:void 0};else{let s;this&&Ka.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&bw(e.next,s),error:e.error&&bw(e.error,s),complete:e.complete&&bw(e.complete,s)}):r=e}this.destination=new E7(r)}}function jm(n){Ka.useDeprecatedSynchronousErrorHandling?function w7(n){Ka.useDeprecatedSynchronousErrorHandling&&Qa&&(Qa.errorThrown=!0,Qa.error=n)}(n):gP(n)}function ww(n,e){const{onStoppedNotification:t}=Ka;t&&Bm.setTimeout(()=>t(n,e))}const I7={closed:!0,next:Um,error:function T7(n){throw n},complete:Um},Cw="function"==typeof Symbol&&Symbol.observable||"@@observable";function Lo(n){return n}let nt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function S7(n){return n&&n instanceof vw||function D7(n){return n&&Ze(n.next)&&Ze(n.error)&&Ze(n.complete)}(n)&&pP(n)}(t)?t:new Jd(t,i,r);return Hm(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=yP(i))((r,s)=>{const o=new Jd({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Cw](){return this}pipe(...t){return function _P(n){return 0===n.length?Lo:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}(t)(this)}toPromise(t){return new(t=yP(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function yP(n){var e;return null!==(e=null!=n?n:Ka.Promise)&&void 0!==e?e:Promise}const x7=gw(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ne=(()=>{class n extends nt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new vP(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new x7}next(t){Hm(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Hm(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Hm(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?fP:(this.currentObservers=null,s.push(t),new et(()=>{this.currentObservers=null,Vm(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new nt;return t.source=this,t}}return n.create=(e,t)=>new vP(e,t),n})();class vP extends ne{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:fP}}function bP(n){return Ze(null==n?void 0:n.lift)}function Vt(n){return e=>{if(bP(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function It(n,e,t,i,r){return new M7(n,e,t,i,r)}class M7 extends vw{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ae(n,e){return Vt((t,i)=>{let r=0;t.subscribe(It(i,s=>{i.next(n.call(e,s,r++))}))})}function CP(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]])}return t}function Ya(n){return this instanceof Ya?(this.v=n,this):new Ya(n)}function R7(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(h){i[h]&&(r[h]=function(f){return new Promise(function(p,_){s.push([h,f,p,_])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof Ya?Promise.resolve(h.value.v).then(c,u):d(s[0][2],h)}(i[h](f))}catch(p){d(s[0][3],p)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function P7(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function TP(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}const Tw=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function IP(n){return Ze(null==n?void 0:n.then)}function DP(n){return Ze(n[Cw])}function SP(n){return Symbol.asyncIterator&&Ze(null==n?void 0:n[Symbol.asyncIterator])}function xP(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const MP=function N7(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function AP(n){return Ze(null==n?void 0:n[MP])}function kP(n){return R7(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield Ya(t.read());if(r)return yield Ya(void 0);yield yield Ya(i)}}finally{t.releaseLock()}})}function RP(n){return Ze(null==n?void 0:n.getReader)}function xi(n){if(n instanceof nt)return n;if(null!=n){if(DP(n))return function F7(n){return new nt(e=>{const t=n[Cw]();if(Ze(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Tw(n))return function L7(n){return new nt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(IP(n))return function V7(n){return new nt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,gP)})}(n);if(SP(n))return PP(n);if(AP(n))return function B7(n){return new nt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(RP(n))return function U7(n){return PP(kP(n))}(n)}throw xP(n)}function PP(n){return new nt(e=>{(function H7(n,e){var t,i,r,s;return function A7(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=P7(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Gs(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function tn(n,e,t=1/0){return Ze(e)?tn((i,r)=>Ae((s,o)=>e(i,s,r,o))(xi(n(i,r))),t):("number"==typeof e&&(t=e),Vt((i,r)=>function j7(n,e,t,i,r,s,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=_=>c<i?p(_):l.push(_),p=_=>{s&&e.next(_),c++;let y=!1;xi(t(_,u++)).subscribe(It(e,b=>{null==r||r(b),s?f(b):e.next(b)},()=>{y=!0},void 0,()=>{if(y)try{for(c--;l.length&&c<i;){const b=l.shift();o?Gs(e,o,()=>p(b)):p(b)}h()}catch(b){e.error(b)}}))};return n.subscribe(It(e,f,()=>{d=!0,h()})),()=>{null==a||a()}}(i,r,n,t)))}function eh(n=1/0){return tn(Lo,n)}const pr=new nt(n=>n.complete());function OP(n){return n&&Ze(n.schedule)}function Iw(n){return n[n.length-1]}function NP(n){return Ze(Iw(n))?n.pop():void 0}function th(n){return OP(Iw(n))?n.pop():void 0}function $m(n,e=0){return Vt((t,i)=>{t.subscribe(It(i,r=>Gs(i,n,()=>i.next(r),e),()=>Gs(i,n,()=>i.complete(),e),r=>Gs(i,n,()=>i.error(r),e)))})}function zm(n,e=0){return Vt((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function FP(n,e){if(!n)throw new Error("Iterable cannot be null");return new nt(t=>{Gs(t,e,()=>{const i=n[Symbol.asyncIterator]();Gs(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Bn(n,e){return e?function Y7(n,e){if(null!=n){if(DP(n))return function G7(n,e){return xi(n).pipe(zm(e),$m(e))}(n,e);if(Tw(n))return function q7(n,e){return new nt(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(IP(n))return function W7(n,e){return xi(n).pipe(zm(e),$m(e))}(n,e);if(SP(n))return FP(n,e);if(AP(n))return function K7(n,e){return new nt(t=>{let i;return Gs(t,e,()=>{i=n[MP](),Gs(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>Ze(null==i?void 0:i.return)&&i.return()})}(n,e);if(RP(n))return function Q7(n,e){return FP(kP(n),e)}(n,e)}throw xP(n)}(n,e):xi(n)}function Nr(...n){const e=th(n),t=function z7(n,e){return"number"==typeof Iw(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?xi(i[0]):eh(t)(Bn(i,e)):pr}function LP(n={}){const{connector:e=(()=>new ne),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,l,c=0,u=!1,d=!1;const h=()=>{null==a||a.unsubscribe(),a=void 0},f=()=>{h(),o=l=void 0,u=d=!1},p=()=>{const _=o;f(),null==_||_.unsubscribe()};return Vt((_,y)=>{c++,!d&&!u&&h();const b=l=null!=l?l:e();y.add(()=>{c--,0===c&&!d&&!u&&(a=Dw(p,r))}),b.subscribe(y),!o&&c>0&&(o=new Jd({next:v=>b.next(v),error:v=>{d=!0,h(),a=Dw(f,t,v),b.error(v)},complete:()=>{u=!0,h(),a=Dw(f,i),b.complete()}}),xi(_).subscribe(o))})(s)}}function Dw(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new Jd({next:()=>{i.unsubscribe(),n()}});return e(...t).subscribe(i)}function ut(n){for(let e in n)if(n[e]===ut)return e;throw Error("Could not find renamed property on target object.")}function Sw(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function tt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(tt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function xw(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const X7=ut({__forward_ref__:ut});function it(n){return n.__forward_ref__=it,n.toString=function(){return tt(this())},n}function Te(n){return VP(n)?n():n}function VP(n){return"function"==typeof n&&n.hasOwnProperty(X7)&&n.__forward_ref__===it}class q extends Error{constructor(e,t){super(function Mw(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function _e(n){return"string"==typeof n?n:null==n?"":String(n)}function ui(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():_e(n)}function Gm(n,e){const t=e?` in ${e}`:"";throw new q(-201,`No provider for ${ui(n)} found${t}`)}function Ki(n,e){null==n&&function Ct(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function he(n){return{providers:n.providers||[],imports:n.imports||[]}}function Aw(n){return BP(n,Wm)||BP(n,HP)}function BP(n,e){return n.hasOwnProperty(e)?n[e]:null}function UP(n){return n&&(n.hasOwnProperty(kw)||n.hasOwnProperty(rQ))?n[kw]:null}const Wm=ut({\u0275prov:ut}),kw=ut({\u0275inj:ut}),HP=ut({ngInjectableDef:ut}),rQ=ut({ngInjectorDef:ut});var ue=(()=>((ue=ue||{})[ue.Default=0]="Default",ue[ue.Host=1]="Host",ue[ue.Self=2]="Self",ue[ue.SkipSelf=4]="SkipSelf",ue[ue.Optional=8]="Optional",ue))();let Rw;function Vo(n){const e=Rw;return Rw=n,e}function jP(n,e,t){const i=Aw(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&ue.Optional?null:void 0!==e?e:void Gm(tt(n),"Injector")}function Bo(n){return{toString:n}.toString()}var Fr=(()=>((Fr=Fr||{})[Fr.OnPush=0]="OnPush",Fr[Fr.Default=1]="Default",Fr))(),Lr=(()=>{return(n=Lr||(Lr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Lr;var n})();const oQ="undefined"!=typeof globalThis&&globalThis,aQ="undefined"!=typeof window&&window,lQ="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,rt=oQ||"undefined"!=typeof global&&global||aQ||lQ,Fc={},dt=[],qm=ut({\u0275cmp:ut}),Pw=ut({\u0275dir:ut}),Ow=ut({\u0275pipe:ut}),$P=ut({\u0275mod:ut}),qs=ut({\u0275fac:ut}),nh=ut({__NG_ELEMENT_ID__:ut});let cQ=0;function Ie(n){return Bo(()=>{const t={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Fr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||dt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Lr.Emulated,id:"c",styles:n.styles||dt,_:null,setInput:null,schemas:n.schemas||null,tView:null},r=n.directives,s=n.features,o=n.pipes;return i.id+=cQ++,i.inputs=qP(n.inputs,t),i.outputs=qP(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(zP):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(GP):null,i})}function zP(n){return Xn(n)||function Uo(n){return n[Pw]||null}(n)}function GP(n){return function Xa(n){return n[Ow]||null}(n)}const WP={};function ye(n){return Bo(()=>{const e={type:n.type,bootstrap:n.bootstrap||dt,declarations:n.declarations||dt,imports:n.imports||dt,exports:n.exports||dt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(WP[n.id]=n.type),e})}function qP(n,e){if(null==n)return Fc;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const N=Ie;function Xn(n){return n[qm]||null}function mr(n,e){const t=n[$P]||null;if(!t&&!0===e)throw new Error(`Type ${tt(n)} does not have '\u0275mod' property.`);return t}function os(n){return Array.isArray(n)&&"object"==typeof n[1]}function Br(n){return Array.isArray(n)&&!0===n[1]}function Lw(n){return 0!=(8&n.flags)}function Xm(n){return 2==(2&n.flags)}function Zm(n){return 1==(1&n.flags)}function Ur(n){return null!==n.template}function mQ(n){return 0!=(512&n[2])}function tl(n,e){return n.hasOwnProperty(qs)?n[qs]:null}class yQ{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Kt(){return QP}function QP(n){return n.type.prototype.ngOnChanges&&(n.setInput=bQ),vQ}function vQ(){const n=XP(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===Fc)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function bQ(n,e,t,i){const r=XP(n)||function wQ(n,e){return n[YP]=e}(n,{previous:Fc,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],l=o[a];s[a]=new yQ(l&&l.currentValue,e,o===Fc),n[i]=e}Kt.ngInherit=!0;const YP="__ngSimpleChanges__";function XP(n){return n[YP]||null}let jw;function Bt(n){return!!n.listen}const ZP={createRenderer:(n,e)=>function $w(){return void 0!==jw?jw:"undefined"!=typeof document?document:void 0}()};function nn(n){for(;Array.isArray(n);)n=n[0];return n}function Jm(n,e){return nn(e[n])}function yr(n,e){return nn(e[n.index])}function zw(n,e){return n.data[e]}function Yi(n,e){const t=e[n];return os(t)?t:t[0]}function JP(n){return 4==(4&n[2])}function Gw(n){return 128==(128&n[2])}function Ho(n,e){return null==e?null:n[e]}function eO(n){n[18]=0}function Ww(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const de={lFrame:lO(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function tO(){return de.bindingsEnabled}function M(){return de.lFrame.lView}function Ge(){return de.lFrame.tView}function st(n){return de.lFrame.contextLView=n,n[8]}function fn(){let n=nO();for(;null!==n&&64===n.type;)n=n.parent;return n}function nO(){return de.lFrame.currentTNode}function as(n,e){const t=de.lFrame;t.currentTNode=n,t.isParent=e}function qw(){return de.lFrame.isParent}function Kw(){de.lFrame.isParent=!1}function eg(){return de.isInCheckNoChangesMode}function tg(n){de.isInCheckNoChangesMode=n}function di(){const n=de.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function jc(){return de.lFrame.bindingIndex++}function VQ(n,e){const t=de.lFrame;t.bindingIndex=t.bindingRootIndex=n,Qw(e)}function Qw(n){de.lFrame.currentDirectiveIndex=n}function Yw(n){const e=de.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function sO(){return de.lFrame.currentQueryIndex}function Xw(n){de.lFrame.currentQueryIndex=n}function UQ(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function oO(n,e,t){if(t&ue.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&ue.Host||(r=UQ(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=de.lFrame=aO();return i.currentTNode=e,i.lView=n,!0}function ng(n){const e=aO(),t=n[1];de.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function aO(){const n=de.lFrame,e=null===n?null:n.child;return null===e?lO(n):e}function lO(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function cO(){const n=de.lFrame;return de.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const uO=cO;function ig(){const n=cO();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function hi(){return de.lFrame.selectedIndex}function jo(n){de.lFrame.selectedIndex=n}function Ut(){const n=de.lFrame;return zw(n.tView,n.selectedIndex)}function rg(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function sg(n,e,t){hO(n,e,3,t)}function og(n,e,t,i){(3&n[2])===t&&hO(n,e,t,i)}function Zw(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function hO(n,e,t,i){const s=null!=i?i:-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(KQ(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function KQ(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class ah{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function ag(n,e,t){const i=Bt(n);let r=0;for(;r<t.length;){const s=t[r];if("number"==typeof s){if(0!==s)break;r++;const o=t[r++],a=t[r++],l=t[r++];i?n.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=t[++r];eC(o)?i&&n.setProperty(e,o,a):i?n.setAttribute(e,o,a):e.setAttribute(o,a),r++}}return r}function fO(n){return 3===n||4===n||6===n}function eC(n){return 64===n.charCodeAt(0)}function lg(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||pO(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function pO(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function mO(n){return-1!==n}function $c(n){return 32767&n}function zc(n,e){let t=function JQ(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let tC=!0;function cg(n){const e=tC;return tC=n,e}let eY=0;function ch(n,e){const t=iC(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,nC(i.data,n),nC(e,null),nC(i.blueprint,null));const r=ug(n,e),s=n.injectorIndex;if(mO(r)){const o=$c(r),a=zc(r,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function nC(n,e){n.push(0,0,0,0,0,0,0,0,e)}function iC(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function ug(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){const s=r[1],o=s.type;if(i=2===o?s.declTNode:1===o?r[6]:null,null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function dg(n,e,t){!function tY(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(nh)&&(i=t[nh]),null==i&&(i=t[nh]=eY++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function yO(n,e,t){if(t&ue.Optional)return n;Gm(e,"NodeInjector")}function vO(n,e,t,i){if(t&ue.Optional&&void 0===i&&(i=null),0==(t&(ue.Self|ue.Host))){const r=n[9],s=Vo(void 0);try{return r?r.get(e,i,t&ue.Optional):jP(e,i,t&ue.Optional)}finally{Vo(s)}}return yO(i,e,t)}function bO(n,e,t,i=ue.Default,r){if(null!==n){const s=function sY(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(nh)?n[nh]:void 0;return"number"==typeof e?e>=0?255&e:iY:e}(t);if("function"==typeof s){if(!oO(e,n,i))return i&ue.Host?yO(r,t,i):vO(e,t,i,r);try{const o=s(i);if(null!=o||i&ue.Optional)return o;Gm(t)}finally{uO()}}else if("number"==typeof s){let o=null,a=iC(n,e),l=-1,c=i&ue.Host?e[16][6]:null;for((-1===a||i&ue.SkipSelf)&&(l=-1===a?ug(n,e):e[a+8],-1!==l&&EO(i,!1)?(o=e[1],a=$c(l),e=zc(l,e)):a=-1);-1!==a;){const u=e[1];if(CO(s,a,u.data)){const d=rY(a,e,t,o,i,c);if(d!==wO)return d}l=e[a+8],-1!==l&&EO(i,e[1].data[a+8]===c)&&CO(s,a,e)?(o=u,a=$c(l),e=zc(l,e)):a=-1}}}return vO(e,t,i,r)}const wO={};function iY(){return new Gc(fn(),M())}function rY(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],u=hg(a,o,t,null==i?Xm(a)&&tC:i!=o&&0!=(3&a.type),r&ue.Host&&s===a);return null!==u?uh(e,o,u,a):wO}function hg(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,h=r?a+u:n.directiveEnd;for(let f=i?a:a+u;f<h;f++){const p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(r){const f=o[l];if(f&&Ur(f)&&f.type===t)return l}return null}function uh(n,e,t,i){let r=n[t];const s=e.data;if(function QQ(n){return n instanceof ah}(r)){const o=r;o.resolving&&function Z7(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new q(-200,`Circular dependency in DI detected for ${n}${t}`)}(ui(s[t]));const a=cg(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Vo(o.injectImpl):null;oO(n,i,ue.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function qQ(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=QP(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&Vo(l),cg(a),o.resolving=!1,uO()}}return r}function CO(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function EO(n,e){return!(n&ue.Self||n&ue.Host&&e)}class Gc{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return bO(this._tNode,this._lView,e,i,t)}}function Cn(n){return Bo(()=>{const e=n.prototype.constructor,t=e[qs]||rC(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[qs]||rC(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function rC(n){return VP(n)?()=>{const e=rC(Te(n));return e&&e()}:tl(n)}function nl(n){return function nY(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(fO(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(fn(),n)}const qc="__parameters__";function Qc(n,e,t){return Bo(()=>{const i=function sC(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(qc)?l[qc]:Object.defineProperty(l,qc,{value:[]})[qc];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class P{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=z({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const aY=new P("AnalyzeForEntryComponents");function vr(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),vr(i,e)):e!==n&&e.push(i)}return e}function ls(n,e){n.forEach(t=>Array.isArray(t)?ls(t,e):e(t))}function IO(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function fg(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function fh(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function Xi(n,e,t){let i=Yc(n,e);return i>=0?n[1|i]=t:(i=~i,function uY(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function aC(n,e){const t=Yc(n,e);if(t>=0)return n[1|t]}function Yc(n,e){return function xO(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const ph={},cC="__NG_DI_FLAG__",mg="ngTempTokenPath",_Y=/\n/gm,AO="__source",vY=ut({provide:String,useValue:ut});let mh;function kO(n){const e=mh;return mh=n,e}function bY(n,e=ue.Default){if(void 0===mh)throw new q(203,"");return null===mh?jP(n,void 0,e):mh.get(n,e&ue.Optional?null:void 0,e)}function I(n,e=ue.Default){return(function sQ(){return Rw}()||bY)(Te(n),e)}const gg=I;function uC(n){const e=[];for(let t=0;t<n.length;t++){const i=Te(n[t]);if(Array.isArray(i)){if(0===i.length)throw new q(900,"");let r,s=ue.Default;for(let o=0;o<i.length;o++){const a=i[o],l=wY(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(I(r,s))}else e.push(I(i))}return e}function gh(n,e){return n[cC]=e,n.prototype[cC]=e,n}function wY(n){return n[cC]}const _g=gh(Qc("Inject",n=>({token:n})),-1),Le=gh(Qc("Optional"),8),Xc=gh(Qc("SkipSelf"),4);let vg;function Jc(n){var e;return(null===(e=function hC(){if(void 0===vg&&(vg=null,rt.trustedTypes))try{vg=rt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return vg}())||void 0===e?void 0:e.createHTML(n))||n}class il{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class OY extends il{getTypeName(){return"HTML"}}class NY extends il{getTypeName(){return"Style"}}class FY extends il{getTypeName(){return"Script"}}class LY extends il{getTypeName(){return"URL"}}class VY extends il{getTypeName(){return"ResourceURL"}}function Zi(n){return n instanceof il?n.changingThisBreaksApplicationSecurity:n}function cs(n,e){const t=UO(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}function UO(n){return n instanceof il&&n.getTypeName()||null}class zY{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Jc(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class GY{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const i=this.inertDocument.createElement("body");t.appendChild(i)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Jc(e),t;const i=this.inertDocument.createElement("body");return i.innerHTML=Jc(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let i=e.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const qY=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,KY=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function yh(n){return(n=String(n)).match(qY)||n.match(KY)?n:"unsafe:"+n}function jO(n){return(n=String(n)).split(",").map(e=>yh(e.trim())).join(", ")}function us(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function vh(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const $O=us("area,br,col,hr,img,wbr"),zO=us("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),GO=us("rp,rt"),pC=vh($O,vh(zO,us("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vh(GO,us("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),vh(GO,zO)),mC=us("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),gC=us("srcset"),WO=vh(mC,gC,us("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),us("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),QY=us("script,style,template");class YY{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!pC.hasOwnProperty(t))return this.sanitizedSomething=!0,!QY.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!WO.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;mC[a]&&(l=yh(l)),gC[a]&&(l=jO(l)),this.buf.push(" ",o,'="',qO(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();pC.hasOwnProperty(t)&&!$O.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(qO(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const XY=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ZY=/([^\#-~ |!])/g;function qO(n){return n.replace(/&/g,"&amp;").replace(XY,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(ZY,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let wg;function KO(n,e){let t=null;try{wg=wg||function HO(n){const e=new GY(n);return function WY(){try{return!!(new window.DOMParser).parseFromString(Jc(""),"text/html")}catch(n){return!1}}()?new zY(e):e}(n);let i=e?String(e):"";t=wg.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=wg.getInertBodyElement(i)}while(i!==s);return Jc((new YY).sanitizeChildren(_C(t)||t))}finally{if(t){const i=_C(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function _C(n){return"content"in n&&function JY(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Ye=(()=>((Ye=Ye||{})[Ye.NONE=0]="NONE",Ye[Ye.HTML=1]="HTML",Ye[Ye.STYLE=2]="STYLE",Ye[Ye.SCRIPT=3]="SCRIPT",Ye[Ye.URL=4]="URL",Ye[Ye.RESOURCE_URL=5]="RESOURCE_URL",Ye))();function Un(n){const e=function bh(){const n=M();return n&&n[12]}();return e?e.sanitize(Ye.URL,n)||"":cs(n,"URL")?Zi(n):yh(_e(n))}const XO="__ngContext__";function Jn(n,e){n[XO]=e}function vC(n){const e=function wh(n){return n[XO]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function wC(n){return n.ngOriginalError}function g9(n,...e){n.error(...e)}class zo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),i=function m9(n){return n&&n.ngErrorLogger||g9}(e);i(this._console,"ERROR",e),t&&i(this._console,"ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&wC(e);for(;t&&wC(t);)t=wC(t);return t||null}}const D9=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(rt))();function ds(n){return n instanceof Function?n():n}var Ji=(()=>((Ji=Ji||{})[Ji.Important=1]="Important",Ji[Ji.DashCase=2]="DashCase",Ji))();function EC(n,e){return undefined(n,e)}function Ch(n){const e=n[3];return Br(e)?e[3]:e}function TC(n){return oN(n[13])}function IC(n){return oN(n[4])}function oN(n){for(;null!==n&&!Br(n);)n=n[4];return n}function tu(n,e,t,i,r){if(null!=i){let s,o=!1;Br(i)?s=i:os(i)&&(o=!0,i=i[0]);const a=nn(i);0===n&&null!==t?null==r?hN(e,t,a):rl(e,t,a,r||null,!0):1===n&&null!==t?rl(e,t,a,r||null,!0):2===n?function vN(n,e,t){const i=Cg(n,e);i&&function U9(n,e,t,i){Bt(n)?n.removeChild(e,t,i):e.removeChild(t)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function $9(n,e,t,i,r){const s=t[7];s!==nn(t)&&tu(e,n,i,s,r);for(let a=10;a<t.length;a++){const l=t[a];Eh(l[1],l,n,e,i,s)}}(e,n,s,t,r)}}function SC(n,e,t){if(Bt(n))return n.createElement(e,t);{const i=null!==t?function IQ(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(t):null;return null===i?n.createElement(e):n.createElementNS(i,e)}}function lN(n,e){const t=n[9],i=t.indexOf(e),r=e[3];1024&e[2]&&(e[2]&=-1025,Ww(r,-1)),t.splice(i,1)}function xC(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&lN(r,i),e>0&&(n[t-1][4]=i[4]);const s=fg(n,10+e);!function R9(n,e){Eh(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function cN(n,e){if(!(256&e[2])){const t=e[11];Bt(t)&&t.destroyNode&&Eh(n,e,t,3,null,null),function N9(n){let e=n[13];if(!e)return MC(n[1],n);for(;e;){let t=null;if(os(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)os(e)&&MC(e[1],e),e=e[3];null===e&&(e=n),os(e)&&MC(e[1],e),t=e&&e[4]}e=t}}(e)}}function MC(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function B9(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof ah)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function V9(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):nn(e[o]),l=i[r=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)i[s]();e[7]=null}}(n,e),1===e[1].type&&Bt(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&Br(e[3])){t!==e[3]&&lN(t,e);const i=e[19];null!==i&&i.detachView(n)}}}function uN(n,e,t){return function dN(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===Lr.None||r===Lr.Emulated)return null}return yr(i,t)}(n,e.parent,t)}function rl(n,e,t,i,r){Bt(n)?n.insertBefore(e,t,i,r):e.insertBefore(t,i,r)}function hN(n,e,t){Bt(n)?n.appendChild(e,t):e.appendChild(t)}function fN(n,e,t,i,r){null!==i?rl(n,e,t,i,r):hN(n,e,t)}function Cg(n,e){return Bt(n)?n.parentNode(e):e.parentNode}function pN(n,e,t){return gN(n,e,t)}let gN=function mN(n,e,t){return 40&n.type?yr(n,t):null};function Eg(n,e,t,i){const r=uN(n,i,e),s=e[11],a=pN(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)fN(s,r,t[l],a,!1);else fN(s,r,t,a,!1)}function Tg(n,e){if(null!==e){const t=e.type;if(3&t)return yr(e,n);if(4&t)return kC(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Tg(n,i);{const r=n[e.index];return Br(r)?kC(-1,r):nn(r)}}if(32&t)return EC(e,n)()||nn(n[e.index]);{const i=yN(n,e);return null!==i?Array.isArray(i)?i[0]:Tg(Ch(n[16]),i):Tg(n,e.next)}}return null}function yN(n,e){return null!==e?n[16][6].projection[e.projection]:null}function kC(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return Tg(i,r)}return e[7]}function RC(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&Jn(nn(a),i),t.flags|=4),64!=(64&t.flags))if(8&l)RC(n,e,t.child,i,r,s,!1),tu(e,n,r,a,s);else if(32&l){const c=EC(t,i);let u;for(;u=c();)tu(e,n,r,u,s);tu(e,n,r,a,s)}else 16&l?bN(n,e,i,t,r,s):tu(e,n,r,a,s);t=o?t.projectionNext:t.next}}function Eh(n,e,t,i,r,s){RC(t,i,n.firstChild,e,r,s,!1)}function bN(n,e,t,i,r,s){const o=t[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)tu(e,n,r,l[c],s);else RC(n,e,l,o[3],r,s,!0)}function wN(n,e,t){Bt(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function PC(n,e,t){Bt(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function CN(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const EN="ng-template";function G9(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==CN(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function TN(n){return 4===n.type&&n.value!==EN}function W9(n,e,t){return e===(4!==n.type||t?n.value:EN)}function q9(n,e,t){let i=4;const r=n.attrs||[],s=function Y9(n){for(let e=0;e<n.length;e++)if(fO(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!W9(n,l,t)||""===l&&1===e.length){if(Hr(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!G9(n.attrs,c,t)){if(Hr(i))return!1;o=!0}continue}const d=K9(8&i?"class":l,r,TN(n),t);if(-1===d){if(Hr(i))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":r[d+1].toLowerCase();const f=8&i?h:null;if(f&&-1!==CN(f,c,0)||2&i&&c!==h){if(Hr(i))return!1;o=!0}}}}else{if(!o&&!Hr(i)&&!Hr(l))return!1;if(o&&Hr(l))continue;o=!1,i=l|1&i}}return Hr(i)||o}function Hr(n){return 0==(1&n)}function K9(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function X9(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function IN(n,e,t=!1){for(let i=0;i<e.length;i++)if(q9(n,e[i],t))return!0;return!1}function Z9(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function DN(n,e){return n?":not("+e.trim()+")":e}function J9(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Hr(o)&&(e+=DN(s,r),r=""),i=o,s=s||!Hr(i);t++}return""!==r&&(e+=DN(s,r)),e}const ve={};function k(n){SN(Ge(),M(),hi()+n,eg())}function SN(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&sg(e,s,t)}else{const s=n.preOrderHooks;null!==s&&og(e,s,0,t)}jo(t)}function Ig(n,e){return n<<17|e<<2}function jr(n){return n>>17&32767}function OC(n){return 2|n}function Ys(n){return(131068&n)>>2}function NC(n,e){return-131069&n|e<<2}function FC(n){return 1|n}function VN(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];Xw(r),o.contentQueries(2,e[s],s)}}}function Th(n,e,t,i,r,s,o,a,l,c){const u=e.blueprint.slice();return u[0]=r,u[2]=140|i,eO(u),u[3]=u[15]=n,u[8]=t,u[10]=o||n&&n[10],u[11]=a||n&&n[11],u[12]=l||n&&n[12]||null,u[9]=c||n&&n[9]||null,u[6]=s,u[16]=2==e.type?n[16]:u,u}function nu(n,e,t,i,r){let s=n.data[e];if(null===s)s=function GC(n,e,t,i,r){const s=nO(),o=qw(),l=n.data[e]=function _X(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,i,r),function LQ(){return de.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function oh(){const n=de.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return as(s,!0),s}function iu(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function Ih(n,e,t){ng(e);try{const i=n.viewQuery;null!==i&&eE(1,i,t);const r=n.template;null!==r&&BN(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&VN(n,e),n.staticViewQueries&&eE(2,n.viewQuery,t);const s=n.components;null!==s&&function pX(n,e){for(let t=0;t<e.length;t++)NX(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,ig()}}function ru(n,e,t,i){const r=e[2];if(256==(256&r))return;ng(e);const s=eg();try{eO(e),function iO(n){return de.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&BN(n,e,t,2,i);const o=3==(3&r);if(!s)if(o){const c=n.preOrderCheckHooks;null!==c&&sg(e,c,null)}else{const c=n.preOrderHooks;null!==c&&og(e,c,0,null),Zw(e,0)}if(function PX(n){for(let e=TC(n);null!==e;e=IC(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(1024&r[2])&&Ww(s,1),r[2]|=1024}}}(e),function RX(n){for(let e=TC(n);null!==e;e=IC(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];Gw(i)&&ru(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&VN(n,e),!s)if(o){const c=n.contentCheckHooks;null!==c&&sg(e,c)}else{const c=n.contentHooks;null!==c&&og(e,c,1),Zw(e,1)}!function hX(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)jo(~r);else{const s=r,o=t[++i],a=t[++i];VQ(o,s),a(2,e[s])}}}finally{jo(-1)}}(n,e);const a=n.components;null!==a&&function fX(n,e){for(let t=0;t<e.length;t++)OX(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&eE(2,l,i),!s)if(o){const c=n.viewCheckHooks;null!==c&&sg(e,c)}else{const c=n.viewHooks;null!==c&&og(e,c,2),Zw(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ww(e[3],-1))}finally{ig()}}function mX(n,e,t,i){const r=e[10],s=!eg(),o=JP(e);try{s&&!o&&r.begin&&r.begin(),o&&Ih(n,e,i),ru(n,e,t,i)}finally{s&&!o&&r.end&&r.end()}}function BN(n,e,t,i,r){const s=hi(),o=2&i;try{jo(-1),o&&e.length>20&&SN(n,e,20,eg()),t(i,r)}finally{jo(s)}}function UN(n,e,t){if(Lw(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function WC(n,e,t){!tO()||(function TX(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||ch(t,e),Jn(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=Ur(l);c&&MX(e,t,l);const u=uh(e,n,a,t);Jn(u,e),null!==o&&AX(0,a-r,u,l,0,o),c&&(Yi(t.index,e)[8]=u)}}(n,e,t,yr(t,e)),128==(128&t.flags)&&function IX(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,a=function BQ(){return de.lFrame.currentDirectiveIndex}();try{jo(o);for(let l=i;l<r;l++){const c=n.data[l],u=e[l];Qw(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&KN(c,u)}}finally{jo(-1),Qw(a)}}(n,e,t))}function qC(n,e,t=yr){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function HN(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=xg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function xg(n,e,t,i,r,s,o,a,l,c){const u=20+i,d=u+r,h=function gX(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:ve);return t}(u,d),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function zN(n,e,t,i){const r=eF(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&tF(n).push(i,r.length-1))}function GN(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,r):t[i]=[e,r]}return t}function er(n,e,t,i,r,s,o,a){const l=yr(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(rF(n,t,u,i,r),Xm(e)&&function bX(n,e){const t=Yi(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(i=function vX(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,Bt(s)?s.setProperty(l,i,r):eC(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function KC(n,e,t,i){let r=!1;if(tO()){const s=function DX(n,e,t){const i=n.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];IN(t,o.selectors,!1)&&(r||(r=[]),dg(ch(t,e),n,o.type),Ur(o)?(QN(n,t),r.unshift(o)):r.push(o))}return r}(n,e,t),o=null===i?null:{"":-1};if(null!==s){r=!0,YN(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const d=s[u];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,c=iu(n,e,s.length,null);for(let u=0;u<s.length;u++){const d=s[u];t.mergedAttrs=lg(t.mergedAttrs,d.hostAttrs),XN(n,t,e,c,d),xX(c,d,o),null!==d.contentQueries&&(t.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}!function yX(n,e){const i=e.directiveEnd,r=n.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<i;c++){const u=r[c],d=u.inputs,h=null===s||TN(e)?null:kX(d,s);o.push(h),a=GN(d,c,a),l=GN(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(n,t)}o&&function SX(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new q(-301,!1);i.push(e[r],s)}}}(t,i,o)}return t.mergedAttrs=lg(t.mergedAttrs,t.attrs),r}function qN(n,e,t,i,r,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function EX(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(i,r,o)}}function KN(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function QN(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function xX(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Ur(e)&&(t[""]=n)}}function YN(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function XN(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=tl(r.type)),o=new ah(s,Ur(r),null);n.blueprint[i]=o,t[i]=o,qN(n,e,0,i,iu(n,t,r.hostVars,ve),r)}function MX(n,e,t){const i=yr(e,n),r=HN(t),s=n[10],o=Mg(n,Th(n,r,null,t.onPush?64:16,i,e,s,s.createRenderer(i,t),null,null));n[e.index]=o}function hs(n,e,t,i,r,s){const o=yr(n,e);!function QC(n,e,t,i,r,s,o){if(null==s)Bt(n)?n.removeAttribute(e,r,t):e.removeAttribute(r);else{const a=null==o?_e(s):o(s,i||"",r);Bt(n)?n.setAttribute(e,r,a,t):t?e.setAttributeNS(t,r,a):e.setAttribute(r,a)}}(e[11],o,s,n.value,t,i,r)}function AX(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==a?i.setInput(t,d,c,u):t[u]=d}}}function kX(n,e){let t=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,n[r],e[i+1])),i+=2}else i+=2;else i+=4}return t}function ZN(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function OX(n,e){const t=Yi(e,n);if(Gw(t)){const i=t[1];80&t[2]?ru(i,t,i.template,t[8]):t[5]>0&&YC(t)}}function YC(n){for(let i=TC(n);null!==i;i=IC(i))for(let r=10;r<i.length;r++){const s=i[r];if(1024&s[2]){const o=s[1];ru(o,s,o.template,s[8])}else s[5]>0&&YC(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=Yi(t[i],n);Gw(r)&&r[5]>0&&YC(r)}}function NX(n,e){const t=Yi(e,n),i=t[1];(function FX(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),Ih(i,t,t[8])}function Mg(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function XC(n){for(;n;){n[2]|=64;const e=Ch(n);if(mQ(n)&&!e)return n;n=e}return null}function JC(n,e,t){const i=e[10];i.begin&&i.begin();try{ru(n,e,n.template,t)}catch(r){throw iF(e,r),r}finally{i.end&&i.end()}}function JN(n){!function ZC(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],i=vC(t),r=i[1];mX(r,i,r.template,t)}}(n[8])}function eE(n,e,t){Xw(0),e(n,t)}const UX=(()=>Promise.resolve(null))();function eF(n){return n[7]||(n[7]=[])}function tF(n){return n.cleanup||(n.cleanup=[])}function nF(n,e,t){return(null===n||Ur(n))&&(t=function xQ(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function iF(n,e){const t=n[9],i=t?t.get(zo,null):null;i&&i.handleError(e)}function rF(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function Xs(n,e,t){const i=Jm(e,n);!function aN(n,e,t){Bt(n)?n.setValue(e,t):e.textContent=t}(n[11],i,t)}function Ag(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=xw(r,a):2==s&&(i=xw(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}const tE=new P("INJECTOR",-1);class sF{get(e,t=ph){if(t===ph){const i=new Error(`NullInjectorError: No provider for ${tt(e)}!`);throw i.name="NullInjectorError",i}return t}}const nE=new P("Set Injector scope."),Dh={},$X={};let iE;function oF(){return void 0===iE&&(iE=new sF),iE}function aF(n,e=null,t=null,i){const r=lF(n,e,t,i);return r._resolveInjectorDefTypes(),r}function lF(n,e=null,t=null,i){return new zX(n,t,e||oF(),i)}class zX{constructor(e,t,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&ls(t,a=>this.processProvider(a,e,t)),ls([e],a=>this.processInjectorType(a,[],s)),this.records.set(tE,su(void 0,this));const o=this.records.get(nE);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof e?null:tt(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=ph,i=ue.Default){this.assertNotDestroyed();const r=kO(this),s=Vo(void 0);try{if(!(i&ue.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function ZX(n){return"function"==typeof n||"object"==typeof n&&n instanceof P}(e)&&Aw(e);a=l&&this.injectableDefInScope(l)?su(rE(e),Dh):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&ue.Self?oF():this.parent).get(e,t=i&ue.Optional&&t===ph?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[mg]=o[mg]||[]).unshift(tt(e)),r)throw o;return function CY(n,e,t,i){const r=n[mg];throw e[AO]&&r.unshift(e[AO]),n.message=function EY(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let r=tt(e);if(Array.isArray(e))r=e.map(tt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):tt(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(_Y,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[mg]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Vo(s),kO(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((i,r)=>e.push(tt(r))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new q(205,!1)}processInjectorType(e,t,i){if(!(e=Te(e)))return!1;let r=UP(e);const s=null==r&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==i.indexOf(o);if(void 0!==s&&(r=UP(s)),null==r)return!1;if(null!=r.imports&&!a){let u;i.push(o);try{ls(r.imports,d=>{this.processInjectorType(d,t,i)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:h,providers:f}=u[d];ls(f,p=>this.processProvider(p,h,f||dt))}}this.injectorDefTypes.add(o);const l=tl(o)||(()=>new o);this.records.set(o,su(l,Dh));const c=r.providers;if(null!=c&&!a){const u=e;ls(c,d=>this.processProvider(d,u,c))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,i){let r=ou(e=Te(e))?e:Te(e&&e.provide);const s=function WX(n,e,t){return uF(n)?su(void 0,n.useValue):su(cF(n),Dh)}(e);if(ou(e)||!0!==e.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=su(void 0,Dh,!0),o.factory=()=>uC(o.multi),this.records.set(r,o)),r=e,o.multi.push(e)}this.records.set(r,s)}hydrate(e,t){return t.value===Dh&&(t.value=$X,t.value=t.factory()),"object"==typeof t.value&&t.value&&function XX(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Te(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function rE(n){const e=Aw(n),t=null!==e?e.factory:tl(n);if(null!==t)return t;if(n instanceof P)throw new q(204,!1);if(n instanceof Function)return function GX(n){const e=n.length;if(e>0)throw fh(e,"?"),new q(204,!1);const t=function nQ(n){const e=n&&(n[Wm]||n[HP]);if(e){const t=function iQ(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new q(204,!1)}function cF(n,e,t){let i;if(ou(n)){const r=Te(n);return tl(r)||rE(r)}if(uF(n))i=()=>Te(n.useValue);else if(function KX(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...uC(n.deps||[]));else if(function qX(n){return!(!n||!n.useExisting)}(n))i=()=>I(Te(n.useExisting));else{const r=Te(n&&(n.useClass||n.provide));if(!function YX(n){return!!n.deps}(n))return tl(r)||rE(r);i=()=>new r(...uC(n.deps))}return i}function su(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function uF(n){return null!==n&&"object"==typeof n&&vY in n}function ou(n){return"function"==typeof n}let ot=(()=>{class n{static create(t,i){var r;if(Array.isArray(t))return aF({name:""},i,t,"");{const s=null!==(r=t.name)&&void 0!==r?r:"";return aF({name:s},t.parent,t.providers,s)}}}return n.THROW_IF_NOT_FOUND=ph,n.NULL=new sF,n.\u0275prov=z({token:n,providedIn:"any",factory:()=>I(tE)}),n.__NG_ELEMENT_ID__=-1,n})();function oZ(n,e){rg(vC(n)[1],fn())}function X(n){let e=function CF(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(Ur(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new q(903,"");r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=aE(n.inputs),o.declaredInputs=aE(n.declaredInputs),o.outputs=aE(n.outputs);const a=r.hostBindings;a&&uZ(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&lZ(n,l),c&&cZ(n,c),Sw(n.inputs,r.inputs),Sw(n.declaredInputs,r.declaredInputs),Sw(n.outputs,r.outputs),Ur(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===X&&(t=!1)}}e=Object.getPrototypeOf(e)}!function aZ(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=lg(r.hostAttrs,t=lg(t,r.hostAttrs))}}(i)}function aE(n){return n===Fc?{}:n===dt?[]:n}function lZ(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function cZ(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function uZ(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}let kg=null;function au(){if(!kg){const n=rt.Symbol;if(n&&n.iterator)kg=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(kg=i)}}}return kg}function Sh(n){return!!lE(n)&&(Array.isArray(n)||!(n instanceof Map)&&au()in n)}function lE(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function fs(n,e,t){return n[e]=t}function ei(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function at(n,e,t,i){const r=M();return ei(r,jc(),e)&&(Ge(),hs(Ut(),r,n,e,t,i)),at}function cu(n,e,t,i){return ei(n,jc(),t)?e+_e(t)+i:ve}function be(n,e,t,i,r,s,o,a){const l=M(),c=Ge(),u=n+20,d=c.firstCreatePass?function _Z(n,e,t,i,r,s,o,a,l){const c=e.consts,u=nu(e,n,4,o||null,Ho(c,a));KC(e,t,u,Ho(c,l)),rg(e,u);const d=u.tViews=xg(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,i,r,s,o):c.data[u];as(d,!1);const h=l[11].createComment("");Eg(c,l,h,d),Jn(h,l),Mg(l,l[u]=ZN(h,l,h,d)),Zm(d)&&WC(c,l,d),null!=o&&qC(l,d,a)}function mt(n){return function Hc(n,e){return n[e]}(function FQ(){return de.lFrame.contextLView}(),20+n)}function g(n,e=ue.Default){const t=M();return null===t?I(n,e):bO(fn(),t,Te(n),e)}function Og(){throw new Error("invalid")}function L(n,e,t){const i=M();return ei(i,jc(),e)&&er(Ge(),Ut(),i,n,e,i[11],t,!1),L}function fE(n,e,t,i,r){const o=r?"class":"style";rF(n,t,e.inputs[o],o,i)}function C(n,e,t,i){const r=M(),s=Ge(),o=20+n,a=r[11],l=r[o]=SC(a,e,function WQ(){return de.lFrame.currentNamespace}()),c=s.firstCreatePass?function VZ(n,e,t,i,r,s,o){const a=e.consts,c=nu(e,n,2,r,Ho(a,s));return KC(e,t,c,Ho(a,o)),null!==c.attrs&&Ag(c,c.attrs,!1),null!==c.mergedAttrs&&Ag(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,0,e,t,i):s.data[o];as(c,!0);const u=c.mergedAttrs;null!==u&&ag(a,l,u);const d=c.classes;null!==d&&PC(a,l,d);const h=c.styles;return null!==h&&wN(a,l,h),64!=(64&c.flags)&&Eg(s,r,l,c),0===function kQ(){return de.lFrame.elementDepthCount}()&&Jn(l,r),function RQ(){de.lFrame.elementDepthCount++}(),Zm(c)&&(WC(s,r,c),UN(s,c,r)),null!==i&&qC(r,c),C}function w(){let n=fn();qw()?Kw():(n=n.parent,as(n,!1));const e=n;!function PQ(){de.lFrame.elementDepthCount--}();const t=Ge();return t.firstCreatePass&&(rg(t,n),Lw(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function XQ(n){return 0!=(16&n.flags)}(e)&&fE(t,e,M(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function ZQ(n){return 0!=(32&n.flags)}(e)&&fE(t,e,M(),e.stylesWithoutHost,!1),w}function j(n,e,t,i){return C(n,e,t,i),w(),j}function Mh(n,e,t){const i=M(),r=Ge(),s=n+20,o=r.firstCreatePass?function BZ(n,e,t,i,r){const s=e.consts,o=Ho(s,i),a=nu(e,n,8,"ng-container",o);return null!==o&&Ag(a,o,!0),KC(e,t,a,Ho(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];as(o,!0);const a=i[s]=i[11].createComment("");return Eg(r,i,a,o),Jn(a,i),Zm(o)&&(WC(r,i,o),UN(r,o,i)),null!=t&&qC(i,o),Mh}function Ah(){let n=fn();const e=Ge();return qw()?Kw():(n=n.parent,as(n,!1)),e.firstCreatePass&&(rg(e,n),Lw(n)&&e.queries.elementEnd(n)),Ah}function En(){return M()}function kh(n){return!!n&&"function"==typeof n.then}const pE=function $F(n){return!!n&&"function"==typeof n.subscribe};function G(n,e,t,i){const r=M(),s=Ge(),o=fn();return zF(s,r,r[11],o,n,e,!!t,i),G}function Ng(n,e){const t=fn(),i=M(),r=Ge();return zF(r,i,nF(Yw(r.data),t,i),t,n,e,!1),Ng}function zF(n,e,t,i,r,s,o,a){const l=Zm(i),u=n.firstCreatePass&&tF(n),d=e[8],h=eF(e);let f=!0;if(3&i.type||a){const y=yr(i,e),b=a?a(y):y,v=h.length,D=a?S=>a(nn(S[i.index])):i.index;if(Bt(t)){let S=null;if(!a&&l&&(S=function UZ(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==S)(S.__ngLastListenerFn__||S).__ngNextListenerFn__=s,S.__ngLastListenerFn__=s,f=!1;else{s=mE(i,e,d,s,!1);const F=t.listen(b,r,s);h.push(s,F),u&&u.push(r,D,v,v+1)}}else s=mE(i,e,d,s,!0),b.addEventListener(r,s,o),h.push(s),u&&u.push(r,D,v,o)}else s=mE(i,e,d,s,!1);const p=i.outputs;let _;if(f&&null!==p&&(_=p[r])){const y=_.length;if(y)for(let b=0;b<y;b+=2){const W=e[_[b]][_[b+1]].subscribe(s),ae=h.length;h.push(s,W),u&&u.push(r,i.index,ae,-(ae+1))}}}function GF(n,e,t,i){try{return!1!==t(i)}catch(r){return iF(n,r),!1}}function mE(n,e,t,i,r){return function s(o){if(o===Function)return i;const a=2&n.flags?Yi(n.index,e):e;0==(32&e[2])&&XC(a);let l=GF(e,0,i,o),c=s.__ngNextListenerFn__;for(;c;)l=GF(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Se(n=1){return function HQ(n){return(de.lFrame.contextLView=function jQ(n,e){for(;n>0;)e=e[15],n--;return e}(n,de.lFrame.contextLView))[8]}(n)}function HZ(n,e){let t=null;const i=function Q9(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?IN(n,s,!0):Z9(i,s))return r}else t=r}return t}function Tn(n){const e=M()[16][6];if(!e.projection){const i=e.projection=fh(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?HZ(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function He(n,e=0,t){const i=M(),r=Ge(),s=nu(r,20+n,16,null,t||null);null===s.projection&&(s.projection=e),Kw(),64!=(64&s.flags)&&function j9(n,e,t){bN(e[11],0,e,t,uN(n,t,e),pN(t.parent||e[6],t,e))}(r,i,s)}function qo(n,e,t){return yu(n,"",e,"",t),qo}function yu(n,e,t,i,r){const s=M(),o=cu(s,e,t,i);return o!==ve&&er(Ge(),Ut(),s,n,o,s[11],r,!1),yu}function eL(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?jr(s):Ys(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];zZ(n[a],e)&&(l=!0,n[a+1]=i?FC(u):OC(u)),a=i?jr(u):Ys(u)}l&&(n[t+1]=i?OC(s):FC(s))}function zZ(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Yc(n,e)>=0}function Fg(n,e,t){return zr(n,e,t,!1),Fg}function Xe(n,e){return zr(n,e,null,!0),Xe}function zr(n,e,t,i){const r=M(),s=Ge(),o=function Qs(n){const e=de.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function lL(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[hi()],o=function aL(n,e){return e>=n.expandoStartIndex}(n,t);(function hL(n,e){return 0!=(n.flags&(e?16:32))})(s,i)&&null===e&&!o&&(e=!1),e=function JZ(n,e,t,i){const r=Yw(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Rh(t=gE(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=gE(r,n,e,t,i),null===s){let l=function eJ(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Ys(i))return n[jr(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=gE(null,n,e,l[1],i),l=Rh(l,e.attrs,i),function tJ(n,e,t,i){n[jr(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function nJ(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Rh(i,n[s].hostAttrs,t);return Rh(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function jZ(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=jr(o),l=Ys(o);n[i]=t;let u,c=!1;if(Array.isArray(t)){const d=t;u=d[1],(null===u||Yc(d,u)>0)&&(c=!0)}else u=t;if(r)if(0!==l){const h=jr(n[a+1]);n[i+1]=Ig(h,a),0!==h&&(n[h+1]=NC(n[h+1],i)),n[a+1]=function nX(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=Ig(a,0),0!==a&&(n[a+1]=NC(n[a+1],i)),a=i;else n[i+1]=Ig(l,0),0===a?a=i:n[l+1]=NC(n[l+1],i),l=i;c&&(n[i+1]=OC(n[i+1])),eL(n,u,i,!0),eL(n,u,i,!1),function $Z(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Yc(s,e)>=0&&(t[i+1]=FC(t[i+1]))}(e,u,n,i,s),o=Ig(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}(s,n,o,i),e!==ve&&ei(r,o,e)&&function uL(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];Lg(function AN(n){return 1==(1&n)}(c)?dL(l,e,t,r,Ys(c),o):void 0)||(Lg(s)||function MN(n){return 2==(2&n)}(c)&&(s=dL(l,null,t,r,a,o)),function z9(n,e,t,i,r){const s=Bt(n);if(e)r?s?n.addClass(t,i):t.classList.add(i):s?n.removeClass(t,i):t.classList.remove(i);else{let o=-1===i.indexOf("-")?void 0:Ji.DashCase;if(null==r)s?n.removeStyle(t,i,o):t.style.removeProperty(i);else{const a="string"==typeof r&&r.endsWith("!important");a&&(r=r.slice(0,-10),o|=Ji.Important),s?n.setStyle(t,i,r,o):t.style.setProperty(i,r,a?"important":"")}}}(i,o,Jm(hi(),t),r,s))}(s,s.data[hi()],r,r[11],n,r[o+1]=function sJ(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=tt(Zi(n)))),n}(e,t),i,o)}function gE(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=Rh(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Rh(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Xi(n,o,!!t||e[++s]))}return void 0===n?null:n}function dL(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[r+1];h===ve&&(h=d?dt:void 0);let f=d?aC(h,i):u===i?h:void 0;if(c&&!Lg(f)&&(f=aC(l,i)),Lg(f)&&(a=f,o))return a;const p=n[r+1];r=o?jr(p):Ys(p)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=aC(l,i))}return a}function Lg(n){return void 0!==n}function R(n,e=""){const t=M(),i=Ge(),r=n+20,s=i.firstCreatePass?nu(i,r,1,e,null):i.data[r],o=t[r]=function DC(n,e){return Bt(n)?n.createText(e):n.createTextNode(e)}(t[11],e);Eg(i,t,o,s),as(s,!1)}function tr(n){return Hn("",n,""),tr}function Hn(n,e,t){const i=M(),r=cu(i,n,e,t);return r!==ve&&Xs(i,hi(),r),Hn}function Ph(n,e,t){const i=M();return ei(i,jc(),e)&&er(Ge(),Ut(),i,n,e,i[11],t,!0),Ph}function Vg(n,e,t){const i=M();if(ei(i,jc(),e)){const s=Ge(),o=Ut();er(s,o,i,n,e,nF(Yw(s.data),o,i),t,!0)}return Vg}const Bg="en-US";let RL=Bg;function vE(n,e,t,i,r){if(n=Te(n),Array.isArray(n))for(let s=0;s<n.length;s++)vE(n[s],e,t,i,r);else{const s=Ge(),o=M();let a=ou(n)?n:Te(n.provide),l=cF(n);const c=fn(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(ou(n)||!n.multi){const f=new ah(l,r,g),p=wE(a,e,r?u:u+h,d);-1===p?(dg(ch(c,o),s,a),bE(s,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=wE(a,e,u+h,d),p=wE(a,e,u,u+h),_=f>=0&&t[f],y=p>=0&&t[p];if(r&&!y||!r&&!_){dg(ch(c,o),s,a);const b=function Tee(n,e,t,i,r){const s=new ah(n,t,g);return s.multi=[],s.index=e,s.componentProviders=0,n2(s,r,i&&!t),s}(r?Eee:Cee,t.length,r,i,l);!r&&y&&(t[p].providerFactory=b),bE(s,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(b),o.push(b)}else bE(s,n,f>-1?f:p,n2(t[r?p:f],l,!r&&i));!r&&i&&y&&t[p].componentProviders++}}}function bE(n,e,t,i){const r=ou(e),s=function QX(n){return!!n.useClass}(e);if(r||s){const l=(s?Te(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function n2(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function wE(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function Cee(n,e,t,i){return CE(this.multi,[])}function Eee(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=uh(t,t[1],this.providerFactory.index,i);s=a.slice(0,o),CE(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],CE(r,s);return s}function CE(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function je(n,e=[]){return t=>{t.providersResolver=(i,r)=>function wee(n,e,t){const i=Ge();if(i.firstCreatePass){const r=Ur(n);vE(t,i.data,i.blueprint,r,!0),vE(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class r2{}class See{resolveComponentFactory(e){throw function Dee(n){const e=Error(`No component factory found for ${tt(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Ko=(()=>{class n{}return n.NULL=new See,n})();function xee(){return Cu(fn(),M())}function Cu(n,e){return new ce(yr(n,e))}let ce=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=xee,n})();function Mee(n){return n instanceof ce?n.nativeElement:n}class Vh{}let Zs=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function kee(){const n=M(),t=Yi(fn().index,n);return function Aee(n){return n[11]}(os(t)?t:n)}(),n})(),Ree=(()=>{class n{}return n.\u0275prov=z({token:n,providedIn:"root",factory:()=>null}),n})();class Qo{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const o2=new Qo("13.2.7"),EE={};function zg(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(nn(s)),Br(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&zg(l[1],l,c,i)}const o=t.type;if(8&o)zg(n,e,t.child,i);else if(32&o){const a=EC(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=yN(e,t);if(Array.isArray(a))i.push(...a);else{const l=Ch(e[16]);zg(l[1],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class Bh{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return zg(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Br(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(xC(e,i),fg(t,i))}this._attachedToViewContainer=!1}cN(this._lView[1],this._lView)}onDestroy(e){zN(this._lView[1],this._lView,null,e)}markForCheck(){XC(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){JC(this._lView[1],this._lView,this.context)}checkNoChanges(){!function VX(n,e,t){tg(!0);try{JC(n,e,t)}finally{tg(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new q(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function O9(n,e){Eh(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new q(902,"");this._appRef=e}}class Pee extends Bh{constructor(e){super(e),this._view=e}detectChanges(){JN(this._view)}checkNoChanges(){!function BX(n){tg(!0);try{JN(n)}finally{tg(!1)}}(this._view)}get context(){return null}}class a2 extends Ko{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Xn(e);return new TE(t,this.ngModule)}}function l2(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class TE extends r2{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function eX(n){return n.map(J9).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return l2(this.componentDef.inputs)}get outputs(){return l2(this.componentDef.outputs)}create(e,t,i,r){const s=(r=r||this.ngModule)?function Nee(n,e){return{get:(t,i,r)=>{const s=n.get(t,EE,r);return s!==EE||i===EE?s:e.get(t,i,r)}}}(e,r.injector):e,o=s.get(Vh,ZP),a=s.get(Ree,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=i?function $N(n,e,t){if(Bt(n))return n.selectRootElement(e,t===Lr.ShadowDom);let i="string"==typeof e?n.querySelector(e):e;return i.textContent="",i}(l,i,this.componentDef.encapsulation):SC(o.createRenderer(null,this.componentDef),c,function Oee(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(c)),d=this.componentDef.onPush?576:528,h=function wF(n,e){return{components:[],scheduler:n||D9,clean:UX,playerHandler:e||null,flags:0}}(),f=xg(0,null,null,1,0,null,null,null,null,null),p=Th(null,f,h,d,null,null,o,l,a,s);let _,y;ng(p);try{const b=function vF(n,e,t,i,r,s){const o=t[1];t[20]=n;const l=nu(o,20,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(Ag(l,c,!0),null!==n&&(ag(r,n,c),null!==l.classes&&PC(r,n,l.classes),null!==l.styles&&wN(r,n,l.styles)));const u=i.createRenderer(n,e),d=Th(t,HN(e),null,e.onPush?64:16,t[20],l,i,u,s||null,null);return o.firstCreatePass&&(dg(ch(l,t),o,e.type),QN(o,l),YN(l,t.length,1)),Mg(t,d),t[20]=d}(u,this.componentDef,p,o,l);if(u)if(i)ag(l,u,["ng-version",o2.full]);else{const{attrs:v,classes:D}=function tX(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!Hr(r))break;r=s}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);v&&ag(l,u,v),D&&D.length>0&&PC(l,u,D.join(" "))}if(y=zw(f,20),void 0!==t){const v=y.projection=[];for(let D=0;D<this.ngContentSelectors.length;D++){const S=t[D];v.push(null!=S?Array.from(S):null)}}_=function bF(n,e,t,i,r){const s=t[1],o=function CX(n,e,t){const i=fn();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),XN(n,i,e,iu(n,e,1,null),t));const r=uh(e,n,i.directiveStart,i);Jn(r,e);const s=yr(i,e);return s&&Jn(s,e),r}(s,t,e);if(i.components.push(o),n[8]=o,r&&r.forEach(l=>l(o,e)),e.contentQueries){const l=fn();e.contentQueries(1,o,l.directiveStart)}const a=fn();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(jo(a.index),qN(t[1],a,0,a.directiveStart,a.directiveEnd,e),KN(e,o)),o}(b,this.componentDef,p,h,[oZ]),Ih(f,p,null)}finally{ig()}return new Lee(this.componentType,_,Cu(y,p),p,y)}}class Lee extends class Iee{}{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new Pee(r),this.componentType=e}get injector(){return new Gc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class Js{}class c2{}const Eu=new Map;class h2 extends Js{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new a2(this);const i=mr(e);this._bootstrapComponents=ds(i.bootstrap),this._r3Injector=lF(e,t,[{provide:Js,useValue:this},{provide:Ko,useValue:this.componentFactoryResolver}],tt(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=ot.THROW_IF_NOT_FOUND,i=ue.Default){return e===ot||e===Js||e===tE?this:this._r3Injector.get(e,t,i)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class IE extends c2{constructor(e){super(),this.moduleType=e,null!==mr(e)&&function Bee(n){const e=new Set;!function t(i){const r=mr(i,!0),s=r.id;null!==s&&(function u2(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${tt(e)} vs ${tt(e.name)}`)}(s,Eu.get(s),i),Eu.set(s,i));const o=ds(r.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new h2(this.moduleType,e)}}function f2(n,e,t,i){return function p2(n,e,t,i,r,s){const o=e+t;return ei(n,o,r)?fs(n,o+1,s?i.call(s,r):i(r)):Uh(n,o+1)}(M(),di(),n,e,t,i)}function al(n,e,t,i,r){return function m2(n,e,t,i,r,s,o){const a=e+t;return function sl(n,e,t,i){const r=ei(n,e,t);return ei(n,e+1,i)||r}(n,a,r,s)?fs(n,a+2,o?i.call(o,r,s):i(r,s)):Uh(n,a+2)}(M(),di(),n,e,t,i,r)}function Uh(n,e){const t=n[e];return t===ve?void 0:t}function DE(n){return e=>{setTimeout(n,void 0,e)}}const ie=class tte extends ne{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){var r,s,o;let a=e,l=t||(()=>null),c=i;if(e&&"object"==typeof e){const d=e;a=null===(r=d.next)||void 0===r?void 0:r.bind(d),l=null===(s=d.error)||void 0===s?void 0:s.bind(d),c=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(l=DE(l),a&&(a=DE(a)),c&&(c=DE(c)));const u=super.subscribe({next:a,error:l,complete:c});return e instanceof et&&e.add(u),u}};function nte(){return this._results[au()]()}class Yo{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=au(),i=Yo.prototype;i[t]||(i[t]=nte)}get changes(){return this._changes||(this._changes=new ie)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=vr(e);(this._changesDetected=!function lY(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let ti=(()=>{class n{}return n.__NG_ELEMENT_ID__=ste,n})();const ite=ti,rte=class extends ite{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e){const t=this._declarationTContainer.tViews,i=Th(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(t)),Ih(t,i,e),new Bh(i)}};function ste(){return Gg(fn(),M())}function Gg(n,e){return 4&n.type?new rte(e,n,Cu(n,e)):null}let In=(()=>{class n{}return n.__NG_ELEMENT_ID__=ote,n})();function ote(){return w2(fn(),M())}const ate=In,v2=class extends ate{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Cu(this._hostTNode,this._hostLView)}get injector(){return new Gc(this._hostTNode,this._hostLView)}get parentInjector(){const e=ug(this._hostTNode,this._hostLView);if(mO(e)){const t=zc(e,this._hostLView),i=$c(e);return new Gc(t[1].data[i+8],t)}return new Gc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=b2(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){const r=e.createEmbeddedView(t||{});return this.insert(r,i),r}createComponent(e,t,i,r,s){const o=e&&!function hh(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const d=t||{};a=d.index,i=d.injector,r=d.projectableNodes,s=d.ngModuleRef}const l=o?e:new TE(Xn(e)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const h=(o?c:this.parentInjector).get(Js,null);h&&(s=h)}const u=l.create(c,r,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const i=e._lView,r=i[1];if(function AQ(n){return Br(n[3])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[3],h=new v2(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function F9(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],IO(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function L9(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(r,i,o,s);const a=kC(s,o),l=i[11],c=Cg(l,o[7]);return null!==c&&function P9(n,e,t,i,r,s){i[0]=r,i[6]=e,Eh(n,i,t,1,r,s)}(r,o[6],l,i,c,a),e.attachToViewContainerRef(),IO(SE(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=b2(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=xC(this._lContainer,t);i&&(fg(SE(this._lContainer),t),cN(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=xC(this._lContainer,t);return i&&null!=fg(SE(this._lContainer),t)?new Bh(i):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function b2(n){return n[8]}function SE(n){return n[8]||(n[8]=[])}function w2(n,e){let t;const i=e[n.index];if(Br(i))t=i;else{let r;if(8&n.type)r=nn(i);else{const s=e[11];r=s.createComment("");const o=yr(n,e);rl(s,Cg(s,o),r,function H9(n,e){return Bt(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=ZN(i,e,r,n),Mg(e,t)}return new v2(t,n,e)}class xE{constructor(e){this.queryList=e,this.matches=null}clone(){return new xE(this.queryList)}setDirty(){this.queryList.setDirty()}}class ME{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new ME(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==D2(e,t).matches&&this.queries[t].setDirty()}}class C2{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class AE{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new AE(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class kE{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new kE(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,ute(t,s)),this.matchTNodeWithReadOption(e,t,hg(t,e,s,!1,!1))}else i===ti?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,hg(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===ce||r===In||r===ti&&4&t.type)this.addMatch(t.index,-2);else{const s=hg(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function ute(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function hte(n,e,t,i){return-1===t?function dte(n,e){return 11&n.type?Cu(n,e):4&n.type?Gg(n,e):null}(e,n):-2===t?function fte(n,e,t){return t===ce?Cu(e,n):t===ti?Gg(e,n):t===In?w2(e,n):void 0}(n,e,i):uh(n,n[1],t,e)}function E2(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:hte(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function RE(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=E2(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&RE(h[1],h,c,i)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];RE(f[1],f,c,i)}}}}}return i}function fe(n){const e=M(),t=Ge(),i=sO();Xw(i+1);const r=D2(t,i);if(n.dirty&&JP(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?RE(t,e,i,[]):E2(t,e,r,i);n.reset(s,Mee),n.notifyOnChanges()}return!0}return!1}function jt(n,e,t){const i=Ge();i.firstCreatePass&&(I2(i,new C2(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),T2(i,M(),e)}function St(n,e,t,i){const r=Ge();if(r.firstCreatePass){const s=fn();I2(r,new C2(e,t,i),s.index),function mte(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}T2(r,M(),t)}function pe(){return function pte(n,e){return n[19].queries[e].queryList}(M(),sO())}function T2(n,e,t){const i=new Yo(4==(4&t));zN(n,e,i,i.destroy),null===e[19]&&(e[19]=new ME),e[19].queries.push(new xE(i))}function I2(n,e,t){null===n.queries&&(n.queries=new AE),n.queries.track(new kE(e,t))}function D2(n,e){return n.queries.getByIndex(e)}function S2(n,e){return Gg(n,e)}function Kg(...n){}const Qg=new P("Application Initializer");let VE=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Kg,this.reject=Kg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(kh(s))t.push(s);else if(pE(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(I(Qg,8))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $h=new P("AppId",{providedIn:"root",factory:function z2(){return`${BE()}${BE()}${BE()}`}});function BE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const G2=new P("Platform Initializer"),Iu=new P("Platform ID"),W2=new P("appBootstrapListener");let q2=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();const eo=new P("LocaleId",{providedIn:"root",factory:()=>gg(eo,ue.Optional|ue.SkipSelf)||function Rte(){return"undefined"!=typeof $localize&&$localize.locale||Bg}()});class Ote{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let K2=(()=>{class n{compileModuleSync(t){return new IE(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=ds(mr(t).declarations).reduce((o,a)=>{const l=Xn(a);return l&&o.push(new TE(l)),o},[]);return new Ote(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Fte=(()=>Promise.resolve(0))();function UE(n){"undefined"==typeof Zone?Fte.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Z{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ie(!1),this.onMicrotaskEmpty=new ie(!1),this.onStable=new ie(!1),this.onError=new ie(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function Lte(){let n=rt.requestAnimationFrame,e=rt.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function Ute(n){const e=()=>{!function Bte(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(rt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,jE(n),n.isCheckStableRunning=!0,HE(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),jE(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return Q2(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),Y2(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return Q2(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),Y2(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,jE(n),HE(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Z.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Z.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,Vte,Kg,Kg);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const Vte={};function HE(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function jE(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Q2(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Y2(n){n._nesting--,HE(n)}class Hte{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ie,this.onMicrotaskEmpty=new ie,this.onStable=new ie,this.onError=new ie}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}let $E=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Z.assertNotInAngularZone(),UE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())UE(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(I(Z))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})(),X2=(()=>{class n{constructor(){this._applications=new Map,zE.addToWindow(this)}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return zE.findTestabilityInTree(this,t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();class jte{addToWindow(e){}findTestabilityInTree(e,t,i){return null}}let Wr,zE=new jte;const Z2=new P("AllowMultipleToken");class J2{constructor(e,t){this.name=e,this.token=t}}function eV(n,e,t=[]){const i=`Platform: ${e}`,r=new P(i);return(s=[])=>{let o=tV();if(!o||o.injector.get(Z2,!1))if(n)n(t.concat(s).concat({provide:r,useValue:!0}));else{const a=t.concat(s).concat({provide:r,useValue:!0},{provide:nE,useValue:"platform"});!function Wte(n){if(Wr&&!Wr.destroyed&&!Wr.injector.get(Z2,!1))throw new q(400,"");Wr=n.get(nV);const e=n.get(G2,null);e&&e.forEach(t=>t())}(ot.create({providers:a,name:i}))}return function qte(n){const e=tV();if(!e)throw new q(401,"");return e}()}}function tV(){return Wr&&!Wr.destroyed?Wr:null}let nV=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const a=function Kte(n,e){let t;return t="noop"===n?new Hte:("zone.js"===n?void 0:n)||new Z({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:Z,useValue:a}];return a.run(()=>{const c=ot.create({providers:l,parent:this.injector,name:t.moduleType.name}),u=t.create(c),d=u.injector.get(zo,null);if(!d)throw new q(402,"");return a.runOutsideAngular(()=>{const h=a.onError.subscribe({next:f=>{d.handleError(f)}});u.onDestroy(()=>{GE(this._modules,u),h.unsubscribe()})}),function Qte(n,e,t){try{const i=t();return kh(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(d,a,()=>{const h=u.injector.get(VE);return h.runInitializers(),h.donePromise.then(()=>(function AJ(n){Ki(n,"Expected localeId to be defined"),"string"==typeof n&&(RL=n.toLowerCase().replace(/_/g,"-"))}(u.injector.get(eo,Bg)||Bg),this._moduleDoBootstrap(u),u))})})}bootstrapModule(t,i=[]){const r=iV({},i);return function zte(n,e,t){const i=new IE(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(Yg);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new q(403,"");t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new q(404,"");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(I(ot))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();function iV(n,e){return Array.isArray(e)?e.reduce(iV,n):Object.assign(Object.assign({},n),e)}let Yg=(()=>{class n{constructor(t,i,r,s,o){this._zone=t,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new nt(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new nt(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{Z.assertNotInAngularZone(),UE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{Z.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=Nr(a,l.pipe(LP()))}bootstrap(t,i){if(!this._initStatus.done)throw new q(405,"");let r;r=t instanceof r2?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(r.componentType);const s=function Gte(n){return n.isBoundToModule}(r)?void 0:this._injector.get(Js),a=r.create(ot.NULL,[],i||r.selector,s),l=a.location.nativeElement,c=a.injector.get($E,null),u=c&&a.injector.get(X2);return c&&u&&u.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),GE(this.components,a),u&&u.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new q(101,"");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;GE(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(W2,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(I(Z),I(ot),I(zo),I(Ko),I(VE))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function GE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let sV=!0,Qt=(()=>{class n{}return n.__NG_ELEMENT_ID__=Zte,n})();function Zte(n){return function Jte(n,e,t){if(Xm(n)&&!t){const i=Yi(n.index,e);return new Bh(i,i)}return 47&n.type?new Bh(e[16],e):null}(fn(),M(),16==(16&n))}class uV{constructor(){}supports(e){return Sh(e)}create(e){return new sne(e)}}const rne=(n,e)=>e;class sne{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||rne}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<hV(i,r,s)?t:i,a=hV(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Sh(e))throw new q(900,"");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function gZ(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[au()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new one(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new dV),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new dV),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class one{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ane{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class dV{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new ane,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function hV(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class fV{constructor(){}supports(e){return e instanceof Map||lE(e)}create(){return new lne}}class lne{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||lE(e)))throw new q(900,"")}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new cne(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class cne{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function pV(){return new Jg([new uV])}let Jg=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||pV()),deps:[[n,new Xc,new Le]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new q(901,"")}}return n.\u0275prov=z({token:n,providedIn:"root",factory:pV}),n})();function mV(){return new zh([new fV])}let zh=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||mV()),deps:[[n,new Xc,new Le]]}}find(t){const i=this.factories.find(s=>s.supports(t));if(i)return i;throw new q(901,"")}}return n.\u0275prov=z({token:n,providedIn:"root",factory:mV}),n})();const hne=eV(null,"core",[{provide:Iu,useValue:"unknown"},{provide:nV,deps:[ot]},{provide:X2,deps:[]},{provide:q2,deps:[]}]);let fne=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(I(Yg))},n.\u0275mod=ye({type:n}),n.\u0275inj=he({}),n})(),e_=null;function gs(){return e_}const xe=new P("DocumentToken");let cl=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=z({token:n,factory:function(){return function _ne(){return I(gV)}()},providedIn:"platform"}),n})();const yne=new P("Location Initialized");let gV=(()=>{class n extends cl{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return gs().getBaseHref(this._doc)}onPopState(t){const i=gs().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=gs().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){_V()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){_V()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(I(xe))},n.\u0275prov=z({token:n,factory:function(){return function vne(){return new gV(I(xe))}()},providedIn:"platform"}),n})();function _V(){return!!window.history.pushState}function YE(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function yV(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function to(n){return n&&"?"!==n[0]?"?"+n:n}let Du=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=z({token:n,factory:function(){return function bne(n){const e=I(xe).location;return new vV(I(cl),e&&e.origin||"")}()},providedIn:"root"}),n})();const XE=new P("appBaseHref");let vV=(()=>{class n extends Du{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return YE(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+to(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+to(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+to(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(I(cl),I(XE,8))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})(),wne=(()=>{class n extends Du{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=YE(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+to(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+to(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(I(cl),I(XE,8))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})(),Xo=(()=>{class n{constructor(t,i){this._subject=new ie,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=yV(bV(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+to(i))}normalize(t){return n.stripTrailingSlash(function Ene(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,bV(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._platformStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+to(i)),r)}replaceState(t,i="",r=null){this._platformStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+to(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=to,n.joinWithSlash=YE,n.stripTrailingSlash=yV,n.\u0275fac=function(t){return new(t||n)(I(Du),I(cl))},n.\u0275prov=z({token:n,factory:function(){return function Cne(){return new Xo(I(Du),I(cl))}()},providedIn:"root"}),n})();function bV(n){return n.replace(/\/index.html$/,"")}let Su=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Sh(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${tt(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(g(Jg),g(zh),g(ce),g(Zs))},n.\u0275dir=N({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class lie{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ul=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new lie(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),MV(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{MV(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(g(In),g(ti),g(Jg))},n.\u0275dir=N({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function MV(n,e){n.context.$implicit=e.item}let Er=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new cie,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){AV("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){AV("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(g(In),g(ti))},n.\u0275dir=N({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class cie{constructor(){this.$implicit=null,this.ngIf=null}}function AV(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${tt(e)}'.`)}class l0{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let u_=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=N({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),kV=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new l0(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(g(In),g(ti),g(u_,9))},n.\u0275dir=N({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),_s=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({}),n})();const OV="browser";let Bie=(()=>{class n{}return n.\u0275prov=z({token:n,providedIn:"root",factory:()=>new Uie(I(xe),window)}),n})();class Uie{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Hie(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=NV(this.window.history)||NV(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function NV(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class d0 extends class $ie extends class gne{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function mne(n){e_||(e_=n)}(new d0)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function zie(){return qh=qh||document.querySelector("base"),qh?qh.getAttribute("href"):null}();return null==t?null:function Gie(n){d_=d_||document.createElement("a"),d_.setAttribute("href",n);const e=d_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){qh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function oie(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let d_,qh=null;const FV=new P("TRANSITION_ID"),qie=[{provide:Qg,useFactory:function Wie(n,e,t){return()=>{t.get(VE).donePromise.then(()=>{const i=gs(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[FV,xe,ot],multi:!0}];class h0{static init(){!function $te(n){zE=n}(new h0)}addToWindow(e){rt.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},rt.getAllAngularTestabilities=()=>e.getAllTestabilities(),rt.getAllAngularRootElements=()=>e.getAllRootElements(),rt.frameworkStabilizers||(rt.frameworkStabilizers=[]),rt.frameworkStabilizers.push(i=>{const r=rt.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?gs().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Kie=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();const h_=new P("EventManagerPlugins");let f_=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(I(h_),I(Z))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();class LV{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=gs().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let VV=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})(),Kh=(()=>{class n extends VV{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(BV),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(BV))}}return n.\u0275fac=function(t){return new(t||n)(I(xe))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();function BV(n){gs().remove(n)}const f0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},p0=/%COMP%/g;function p_(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?p_(n,r,t):(r=r.replace(p0,n),t.push(r))}return t}function jV(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let m_=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new m0(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case Lr.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new ere(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case Lr.ShadowDom:return new tre(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=p_(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(I(f_),I(Kh),I($h))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();class m0{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(f0[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=f0[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=f0[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Ji.DashCase|Ji.Important)?e.style.setProperty(t,i,r&Ji.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Ji.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,jV(i)):this.eventManager.addEventListener(e,t,jV(i))}}class ere extends m0{constructor(e,t,i,r){super(e),this.component=i;const s=p_(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function Xie(n){return"_ngcontent-%COMP%".replace(p0,n)}(r+"-"+i.id),this.hostAttr=function Zie(n){return"_nghost-%COMP%".replace(p0,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class tre extends m0{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=p_(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let nre=(()=>{class n extends LV{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(I(xe))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();const zV=["alt","control","meta","shift"],rre={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},GV={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},sre={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ore=(()=>{class n extends LV{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>gs().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="";if(zV.forEach(l=>{const c=i.indexOf(l);c>-1&&(i.splice(c,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const a={};return a.domEventName=r,a.fullKey=o,a}static getEventFullKey(t){let i="",r=function are(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&GV.hasOwnProperty(e)&&(e=GV[e]))}return rre[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),zV.forEach(s=>{s!=r&&sre[s](t)&&(i+=s+".")}),i+=r,i}static eventCallback(t,i,r){return s=>{n.getEventFullKey(s)===t&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(I(xe))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();const dre=eV(hne,"browser",[{provide:Iu,useValue:OV},{provide:G2,useValue:function lre(){d0.makeCurrent(),h0.init()},multi:!0},{provide:xe,useFactory:function ure(){return function DQ(n){jw=n}(document),document},deps:[]}]),hre=[{provide:nE,useValue:"root"},{provide:zo,useFactory:function cre(){return new zo},deps:[]},{provide:h_,useClass:nre,multi:!0,deps:[xe,Z,Iu]},{provide:h_,useClass:ore,multi:!0,deps:[xe]},{provide:m_,useClass:m_,deps:[f_,Kh,$h]},{provide:Vh,useExisting:m_},{provide:VV,useExisting:Kh},{provide:Kh,useClass:Kh,deps:[xe]},{provide:$E,useClass:$E,deps:[Z]},{provide:f_,useClass:f_,deps:[h_,Z]},{provide:class jie{},useClass:Kie,deps:[]}];let WV=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:$h,useValue:t.appId},{provide:FV,useExisting:$h},qie]}}}return n.\u0275fac=function(t){return new(t||n)(I(n,12))},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:hre,imports:[_s,fne]}),n})();"undefined"!=typeof window&&window;let _0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=z({token:n,factory:function(t){let i=null;return i=t?new(t||n):I(QV),i},providedIn:"root"}),n})(),QV=(()=>{class n extends _0{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case Ye.NONE:return i;case Ye.HTML:return cs(i,"HTML")?Zi(i):KO(this._doc,String(i)).toString();case Ye.STYLE:return cs(i,"Style")?Zi(i):i;case Ye.SCRIPT:if(cs(i,"Script"))return Zi(i);throw new Error("unsafe value used in a script context");case Ye.URL:return UO(i),cs(i,"URL")?Zi(i):yh(String(i));case Ye.RESOURCE_URL:if(cs(i,"ResourceURL"))return Zi(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function BY(n){return new OY(n)}(t)}bypassSecurityTrustStyle(t){return function UY(n){return new NY(n)}(t)}bypassSecurityTrustScript(t){return function HY(n){return new FY(n)}(t)}bypassSecurityTrustUrl(t){return function jY(n){return new LY(n)}(t)}bypassSecurityTrustResourceUrl(t){return function $Y(n){return new VY(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(I(xe))},n.\u0275prov=z({token:n,factory:function(t){let i=null;return i=t?new t:function Cre(n){return new QV(n.get(xe))}(I(ot)),i},providedIn:"root"}),n})();function on(n){return null!=n&&"false"!=`${n}`}function Jo(n,e=0){return function Ere(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function YV(n){return Array.isArray(n)?n:[n]}function an(n){return null==n?"":"string"==typeof n?n:`${n}px`}function io(n){return n instanceof ce?n.nativeElement:n}function J(...n){return Bn(n,th(n))}const{isArray:Tre}=Array;function y0(n){return Ae(e=>function Ire(n,e){return Tre(e)?n(...e):n(e)}(n,e))}const Dre=["addListener","removeListener"],Sre=["addEventListener","removeEventListener"],xre=["on","off"];function ro(n,e,t,i){if(Ze(t)&&(i=t,t=void 0),i)return ro(n,e,t).pipe(y0(i));const[r,s]=function kre(n){return Ze(n.addEventListener)&&Ze(n.removeEventListener)}(n)?Sre.map(o=>a=>n[o](e,a,t)):function Mre(n){return Ze(n.addListener)&&Ze(n.removeListener)}(n)?Dre.map(XV(n,e)):function Are(n){return Ze(n.on)&&Ze(n.off)}(n)?xre.map(XV(n,e)):[];if(!r&&Tw(n))return tn(o=>ro(o,e,t))(xi(n));if(!r)throw new TypeError("Invalid event target");return new nt(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function XV(n,e){return t=>i=>n[t](e,i)}class Rre extends et{constructor(e,t){super()}schedule(e,t=0){return this}}const g_={setInterval(n,e,...t){const{delegate:i}=g_;return(null==i?void 0:i.setInterval)?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=g_;return((null==e?void 0:e.clearInterval)||clearInterval)(n)},delegate:void 0};class __ extends Rre{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return g_.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;g_.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Vm(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Qh={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=Qh;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new et(()=>null==t?void 0:t(r))},requestAnimationFrame(...n){const{delegate:e}=Qh;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Qh;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0},ZV={now:()=>(ZV.delegate||Date).now(),delegate:void 0};class Yh{constructor(e,t=Yh.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}Yh.now=ZV.now;class y_ extends Yh{constructor(e,t=Yh.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}new class Ore extends y_{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Pre extends __{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Qh.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(Qh.cancelAnimationFrame(t),e._scheduled=void 0)}});let v0,Fre=1;const v_={};function JV(n){return n in v_&&(delete v_[n],!0)}const Lre={setImmediate(n){const e=Fre++;return v_[e]=!0,v0||(v0=Promise.resolve()),v0.then(()=>JV(e)&&n()),e},clearImmediate(n){JV(n)}},{setImmediate:Vre,clearImmediate:Bre}=Lre,b_={setImmediate(...n){const{delegate:e}=b_;return((null==e?void 0:e.setImmediate)||Vre)(...n)},clearImmediate(n){const{delegate:e}=b_;return((null==e?void 0:e.clearImmediate)||Bre)(n)},delegate:void 0},b0=new class Hre extends y_{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Ure extends __{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=b_.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(b_.clearImmediate(t),e._scheduled=void 0)}}),Xh=new y_(__),jre=Xh;function w0(n=0,e,t=jre){let i=-1;return null!=e&&(OP(e)?t=e:i=e),new nt(r=>{let s=function zre(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function eB(n,e=Xh){return function $re(n){return Vt((e,t)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(null==s||s.unsubscribe(),s=null,i){i=!1;const c=r;r=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(It(t,c=>{i=!0,r=c,s||xi(n(c)).subscribe(s=It(t,a,l))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>w0(n,e))}function lt(n,e){return Vt((t,i)=>{let r=0;t.subscribe(It(i,s=>n.call(e,s,r++)&&i.next(s)))})}function xt(n){return Vt((e,t)=>{xi(n).subscribe(It(t,()=>t.complete(),Um)),!t.closed&&e.subscribe(t)})}let C0;try{C0="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){C0=!1}let xu,Dn=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Vie(n){return n===OV}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!C0)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(I(Iu))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tB=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function nB(){if(xu)return xu;if("object"!=typeof document||!document)return xu=new Set(tB),xu;let n=document.createElement("input");return xu=new Set(tB.filter(e=>(n.setAttribute("type",e),n.type===e))),xu}let Zh,w_,dl,E0;function Mu(n){return function Gre(){if(null==Zh&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Zh=!0}))}finally{Zh=Zh||!1}return Zh}()?n:!!n.capture}function iB(){if(null==dl){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return dl=!1,dl;if("scrollBehavior"in document.documentElement.style)dl=!0;else{const n=Element.prototype.scrollTo;dl=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return dl}function Jh(){if("object"!=typeof document||!document)return 0;if(null==w_){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),w_=0,0===n.scrollLeft&&(n.scrollLeft=1,w_=0===n.scrollLeft?1:2),n.remove()}return w_}function T0(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function hl(n){return n.composedPath?n.composedPath()[0]:n.target}function I0(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}const Kre=new P("cdk-dir-doc",{providedIn:"root",factory:function Qre(){return gg(xe)}}),Yre=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let nr=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new ie,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function Xre(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?Yre.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(I(Kre,8))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ef=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({}),n})(),D0=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new ne,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new nt(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(eB(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):J()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(lt(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=io(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>ro(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(I(Z),I(Dn),I(xe,8))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),S0=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new ne,this._elementScrolled=new nt(o=>this.ngZone.runOutsideAngular(()=>ro(this.elementRef.nativeElement,"scroll").pipe(xt(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=r?t.end:t.start),null==t.right&&(t.right=r?t.start:t.end),null!=t.bottom&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),r&&0!=Jh()?(null!=t.left&&(t.right=i.scrollWidth-i.clientWidth-t.left),2==Jh()?t.left=t.right:1==Jh()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const i=this.elementRef.nativeElement;iB()?i.scrollTo(t):(null!=t.top&&(i.scrollTop=t.top),null!=t.left&&(i.scrollLeft=t.left))}measureScrollOffset(t){const i="left",r="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==t?t=o?r:i:"end"==t&&(t=o?i:r),o&&2==Jh()?t==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&1==Jh()?t==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(g(ce),g(D0),g(Z),g(nr,8))},n.\u0275dir=N({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),Au=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new ne,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(eB(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(I(Dn),I(Z),I(xe,8))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({}),n})(),rB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[ef,tf],ef,tf]}),n})();class x0{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class M0 extends x0{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class ku extends x0{constructor(e,t,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class ese extends x0{constructor(e){super(),this.element=e instanceof ce?e.nativeElement:e}}class A0{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof M0?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof ku?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof ese?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class tse extends A0{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||ot.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let nse=(()=>{class n extends ku{constructor(t,i){super(t,i)}}return n.\u0275fac=function(t){return new(t||n)(g(ti),g(In))},n.\u0275dir=N({type:n,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[X]}),n})(),Ru=(()=>{class n extends A0{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new ie,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(g(Ko),g(In),g(xe))},n.\u0275dir=N({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[X]}),n})(),C_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({}),n})();function ln(n){return n<=0?()=>pr:Vt((e,t)=>{let i=0;e.subscribe(It(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}const sB=iB();class ise{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=an(-this._previousScrollPosition.left),e.style.top=an(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),sB&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),sB&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class rse{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class oB{enable(){}disable(){}attach(){}}function k0(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function aB(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class sse{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();k0(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let ose=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new oB,this.close=o=>new rse(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new ise(this._viewportRuler,this._document),this.reposition=o=>new sse(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(I(D0),I(Au),I(Z),I(xe))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class R0{constructor(e){if(this.scrollStrategy=new oB,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class ase{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}class lse{constructor(e,t,i,r,s,o,a,l,c){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._backdropElement=null,this._backdropClick=new ne,this._attachments=new ne,this._detachments=new ne,this._locationChanges=et.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._backdropTransitionendHandler=u=>{this._disposeBackdrop(u.target)},this._keydownEvents=new ne,this._outsidePointerEvents=new ne,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ln(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(e=this._host)||void 0===e||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=an(this._config.width),e.height=an(this._config.height),e.minWidth=an(this._config.minWidth),e.minHeight=an(this._config.minHeight),e.maxWidth=an(this._config.maxWidth),e.maxHeight=an(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,i){const r=YV(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(xt(Nr(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let P0=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||I0()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),I0()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(I(xe),I(Dn))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lB="cdk-overlay-connected-position-bounding-box",cse=/([A-Za-z%]+)$/;class use{constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ne,this._resizeSubscription=et.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(lB),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,i)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&fl(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(lB),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=uB(t);let{x:o,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let h=0-a,f=a+s.height-i.height,p=this._subtractOverflows(s.width,0-o,o+s.width-i.width),_=this._subtractOverflows(s.height,h,f),y=p*_;return{visibleArea:y,isCompletelyWithinViewport:s.width*s.height===y,fitsInViewportVertically:_===s.height,fitsInViewportHorizontally:p==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=cB(this._overlayRef.getConfig().minHeight),a=cB(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=r)&&c}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=uB(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-i.top-e.y,0),c=Math.max(s.left-i.left-e.x,0);let u=0,d=0;return u=r.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,d=r.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new ase(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,d,h;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const f=Math.min(i.bottom-e.y+i.top,e.y),p=this._lastBoundingBoxSize.height;s=2*f,o=e.y-f,s>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-p/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)h=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)d=e.x,u=i.right-e.x;else{const f=Math.min(i.right-e.x+i.left,e.x),p=this._lastBoundingBoxSize.width;u=2*f,d=e.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-p/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=an(i.height),r.top=an(i.top),r.bottom=an(i.bottom),r.width=an(i.width),r.left=an(i.left),r.right=an(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=an(s)),o&&(r.maxWidth=an(o))}this._lastBoundingBoxSize=i,fl(this._boundingBox.style,r)}_resetBoundingBoxStyles(){fl(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){fl(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();fl(i,this._getExactOverlayY(t,e,u)),fl(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=an(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=an(o.maxWidth):s&&(i.maxWidth="")),fl(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=an(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=an(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:aB(e,i),isOriginOutsideView:k0(e,i),isOverlayClipped:aB(t,i),isOverlayOutsideView:k0(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&YV(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof ce)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function fl(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function cB(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(cse);return t&&"px"!==t?null:parseFloat(e)}return n||null}function uB(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const dB="cdk-global-overlay-wrapper";class dse{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(dB),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a);e.position=this._cssPosition,e.marginLeft=l?"0":this._leftOffset,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,l?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(dB),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let hse=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new dse}flexibleConnectedTo(t){return new use(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(I(Au),I(xe),I(Dn),I(P0))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hB=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(I(xe))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fse=(()=>{class n extends hB{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(I(xe),I(Z,8))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pse=(()=>{class n extends hB{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=hl(s)},this._clickListener=s=>{const o=hl(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const d=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(s)):d.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(I(xe),I(Dn),I(Z,8))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mse=0,Pu=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u,d,h){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=d,this._outsideClickDispatcher=h}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new R0(t);return o.direction=o.direction||this._directionality.value,new lse(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+mse++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Yg)),new tse(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(I(ose),I(P0),I(Ko),I(hse),I(fse),I(ot),I(Z),I(xe),I(nr),I(Xo),I(pse))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();const yse={provide:new P("cdk-connected-overlay-scroll-strategy"),deps:[Pu],useFactory:function _se(n){return()=>n.scrollStrategies.reposition()}};let fB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[Pu,yse],imports:[[ef,C_,rB],rB]}),n})();class Tr extends ne{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function Ou(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function Sn(n,e,t){const i=Ze(n)||e||t?{next:n,error:e,complete:t}:n;return i?Vt((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(It(s,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),s.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):Lo}function B0(n,e=Xh){return Vt((t,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,i.next(c)}};function l(){const c=o+n,u=e.now();if(u<c)return r=this.schedule(void 0,c-u),void i.add(r);a()}t.subscribe(It(i,c=>{s=c,o=e.now(),r||(r=e.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function _B(n){return lt((e,t)=>n<=t)}function E_(n,e=Lo){return n=null!=n?n:kse,Vt((t,i)=>{let r,s=!0;t.subscribe(It(i,o=>{const a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function kse(n,e){return n===e}let yB=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Rse=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=io(t);return new nt(r=>{const o=this._observeElement(i).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new ne,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(I(yB))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vB=(()=>{class n{constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new ie,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=on(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Jo(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(B0(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(g(Rse),g(ce),g(Z))},n.\u0275dir=N({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),U0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[yB]}),n})();class CB extends class Nse{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new ne,this._typeaheadSubscription=et.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new ne,this.change=new ne,e instanceof Yo&&e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Sn(t=>this._pressedLetters.push(t)),B0(e),lt(()=>this._pressedLetters.length>0),Ae(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,o=i[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||Ou(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e),r=t[i];this._activeItem=null==r?null:r,this._activeItemIndex=i}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof Yo?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let H0=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function Lse(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function Fse(n){try{return n.frameElement}catch(e){return null}}(function Gse(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===TB(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=TB(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function $se(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function zse(n){return!function Bse(n){return function Hse(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function Vse(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function Use(n){return function jse(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||EB(n))}(t)&&!this.isDisabled(t)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(I(Dn))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function EB(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function TB(n){if(!EB(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Wse{constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return null==i||i.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(ln(1)).subscribe(e)}}let IB=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new Wse(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(I(H0),I(Z),I(xe))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function j0(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function $0(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const qse=new P("cdk-input-modality-detector-options"),Kse={ignoreKeys:[18,17,224,91,16]},Nu=Mu({passive:!0,capture:!0});let Qse=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Tr(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,l;(null===(l=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===l?void 0:l.some(c=>c===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=hl(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(j0(o)?"keyboard":"mouse"),this._mostRecentTarget=hl(o))},this._onTouchstart=o=>{$0(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=hl(o))},this._options=Object.assign(Object.assign({},Kse),s),this.modalityDetected=this._modality.pipe(_B(1)),this.modalityChanged=this.modalityDetected.pipe(E_()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Nu),r.addEventListener("mousedown",this._onMousedown,Nu),r.addEventListener("touchstart",this._onTouchstart,Nu)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Nu),document.removeEventListener("mousedown",this._onMousedown,Nu),document.removeEventListener("touchstart",this._onTouchstart,Nu))}}return n.\u0275fac=function(t){return new(t||n)(I(Dn),I(Z),I(xe),I(qse,8))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Xse=new P("cdk-focus-monitor-default-options"),T_=Mu({passive:!0,capture:!0});let pl=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ne,this._rootNodeFocusAndBlurListener=a=>{const l=hl(a),c="focus"===a.type?this._onFocus:this._onBlur;for(let u=l;u;u=u.parentElement)c.call(this,a,u)},this._document=s,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(t,i=!1){const r=io(t);if(!this._platform.isBrowser||1!==r.nodeType)return J(null);const s=function qre(n){if(function Wre(){if(null==E0){const n="undefined"!=typeof document?document.head:null;E0=!(!n||!n.createShadowRoot&&!n.attachShadow)}return E0}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new ne,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=io(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=io(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=hl(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(t,i){this._ngZone.run(()=>t.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,T_),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,T_)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(xt(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,T_),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,T_),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}}return n.\u0275fac=function(t){return new(t||n)(I(Z),I(Dn),I(Qse),I(xe,8),I(Xse,8))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Zse=(()=>{class n{constructor(t,i){this._elementRef=t,this._focusMonitor=i,this.cdkFocusChange=new ie}ngAfterViewInit(){const t=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(t,1===t.nodeType&&t.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(i=>this.cdkFocusChange.emit(i))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(g(ce),g(pl))},n.\u0275dir=N({type:n,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),n})();const SB="cdk-high-contrast-black-on-white",xB="cdk-high-contrast-white-on-black",z0="cdk-high-contrast-active";let MB=(()=>{class n{constructor(t,i){this._platform=t,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(z0),t.remove(SB),t.remove(xB),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(t.add(z0),t.add(SB)):2===i&&(t.add(z0),t.add(xB))}}}return n.\u0275fac=function(t){return new(t||n)(I(Dn),I(xe))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Jse=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(I(MB))},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[U0]]}),n})();class AB{}const so="*";function ea(n,e){return{type:7,name:n,definitions:e,options:{}}}function ir(n,e=null){return{type:4,styles:e,timings:n}}function kB(n,e=null){return{type:3,steps:n,options:e}}function RB(n,e=null){return{type:2,steps:n,options:e}}function Mt(n){return{type:6,styles:n,offset:null}}function Ri(n,e,t){return{type:0,name:n,styles:e,options:t}}function rr(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function PB(n=null){return{type:9,options:n}}function OB(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function NB(n){Promise.resolve(null).then(n)}class nf{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){NB(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class FB{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?NB(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const Ve=!1;function LB(n){return new q(3e3,Ve)}function Ooe(){return"undefined"!=typeof window&&void 0!==window.document}function W0(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ta(n){switch(n.length){case 0:return new nf;case 1:return n[0];default:return new FB(n)}}function VB(n,e,t,i,r={},s={}){const o=[],a=[];let l=-1,c=null;if(i.forEach(u=>{const d=u.offset,h=d==l,f=h&&c||{};Object.keys(u).forEach(p=>{let _=p,y=u[p];if("offset"!==p)switch(_=e.normalizePropertyName(_,o),y){case"!":y=r[p];break;case so:y=s[p];break;default:y=e.normalizeStyleValue(p,_,y,o)}f[_]=y}),h||a.push(f),c=f,l=d}),o.length)throw function Eoe(n){return new q(3502,Ve)}();return a}function q0(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&K0(t,"start",n)));break;case"done":n.onDone(()=>i(t&&K0(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&K0(t,"destroy",n)))}}function K0(n,e,t){const i=t.totalTime,s=Q0(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function Q0(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function sr(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function BB(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let Y0=(n,e)=>!1,UB=(n,e,t)=>[],HB=null;function X0(n){const e=n.parentNode||n.host;return e===HB?null:e}(W0()||"undefined"!=typeof Element)&&(Ooe()?(HB=(()=>document.documentElement)(),Y0=(n,e)=>{for(;e;){if(e===n)return!0;e=X0(e)}return!1}):Y0=(n,e)=>n.contains(e),UB=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let ml=null,jB=!1;function $B(n){ml||(ml=function Foe(){return"undefined"!=typeof document?document.body:null}()||{},jB=!!ml.style&&"WebkitAppearance"in ml.style);let e=!0;return ml.style&&!function Noe(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in ml.style,!e&&jB&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in ml.style)),e}const zB=Y0,GB=UB;let WB=(()=>{class n{validateStyleProperty(t){return $B(t)}matchesElement(t,i){return!1}containsElement(t,i){return zB(t,i)}getParentElement(t){return X0(t)}query(t,i,r){return GB(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],l){return new nf(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})(),Z0=(()=>{class n{}return n.NOOP=new WB,n})();const J0="ng-enter",D_="ng-leave",S_="ng-trigger",x_=".ng-trigger",KB="ng-animating",eT=".ng-animating";function gl(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:tT(parseFloat(e[1]),e[2])}function tT(n,e){return"s"===e?1e3*n:n}function M_(n,e,t){return n.hasOwnProperty("duration")?n:function Boe(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(LB()),{duration:0,delay:0,easing:""};r=tT(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=tT(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(function toe(){return new q(3100,Ve)}()),a=!0),s<0&&(e.push(function noe(){return new q(3101,Ve)}()),a=!0),a&&e.splice(l,0,LB())}return{duration:r,delay:s,easing:o}}(n,e,t)}function Fu(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function na(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else Fu(n,t);return t}function YB(n,e,t){return t?e+":"+t+";":""}function XB(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=YB(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=YB(0,joe(t),n.style[t]));n.setAttribute("style",e)}function ys(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const r=iT(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[r]),n.style[r]=e[i]}),W0()&&XB(n))}function _l(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=iT(t);n.style[i]=""}),W0()&&XB(n))}function rf(n){return Array.isArray(n)?1==n.length?n[0]:RB(n):n}const nT=new RegExp("{{\\s*(.+?)\\s*}}","g");function ZB(n){let e=[];if("string"==typeof n){let t;for(;t=nT.exec(n);)e.push(t[1]);nT.lastIndex=0}return e}function A_(n,e,t){const i=n.toString(),r=i.replace(nT,(s,o)=>{let a=e[o];return e.hasOwnProperty(o)||(t.push(function roe(n){return new q(3003,Ve)}()),a=""),a.toString()});return r==i?n:r}function k_(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Hoe=/-+([a-z0-9])/g;function iT(n){return n.replace(Hoe,(...e)=>e[1].toUpperCase())}function joe(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function or(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function soe(n){return new q(3004,Ve)}()}}function JB(n,e){return window.getComputedStyle(n)[e]}function Koe(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function Qoe(n,e,t){if(":"==n[0]){const l=function Yoe(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function voe(n){return new q(3016,Ve)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function yoe(n){return new q(3015,Ve)}()),e;const r=i[1],s=i[2],o=i[3];e.push(eU(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(eU(o,r))}(i,t,e)):t.push(n),t}const N_=new Set(["true","1"]),F_=new Set(["false","0"]);function eU(n,e){const t=N_.has(n)||F_.has(n),i=N_.has(e)||F_.has(e);return(r,s)=>{let o="*"==n||n==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?N_.has(n):F_.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?N_.has(e):F_.has(e)),o&&a}}const Xoe=new RegExp("s*:selfs*,?","g");function rT(n,e,t,i){return new Zoe(n).build(e,t,i)}class Zoe{constructor(e){this._driver=e}build(e,t,i){const r=new tae(t);this._resetContextStyleTimingState(r);const s=or(this,rf(e),r);return r.unsupportedCSSPropertiesFound.size&&r.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function aoe(){return new q(3006,Ve)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(function loe(){return new q(3007,Ve)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{if(L_(a)){const l=a;Object.keys(l).forEach(c=>{ZB(l[c]).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}}),s.size&&(k_(s.values()),t.errors.push(function coe(n,e){return new q(3008,Ve)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=or(this,rf(e.animation),t);return{type:1,matchers:Koe(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:yl(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>or(this,i,t)),options:yl(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=or(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:yl(e.options)}}visitAnimate(e,t){const i=function iae(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return sT(M_(n,e).duration,0,"");const i=n;if(i.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=sT(0,0,"");return s.dynamic=!0,s.strValue=i,s}return t=t||M_(i,e),sT(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:Mt({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=Mt(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(o=>{"string"==typeof o?o==so?i.push(o):t.errors.push(function uoe(n){return new q(3002,Ve)}()):i.push(o)}):i.push(e.styles);let r=!1,s=null;return i.forEach(o=>{if(L_(o)){const a=o,l=a.easing;if(l&&(s=l,delete a.easing),!r)for(let c in a)if(a[c].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return delete o[a],void t.unsupportedCSSPropertiesFound.add(a);const l=t.collectedStyles[t.currentQuerySelector],c=l[a];let u=!0;c&&(s!=r&&s>=c.startTime&&r<=c.endTime&&(t.errors.push(function doe(n,e,t,i,r){return new q(3010,Ve)}()),u=!1),s=c.startTime),u&&(l[a]={startTime:s,endTime:r}),t.options&&function Uoe(n,e,t){const i=e.params||{},r=ZB(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function ioe(n){return new q(3001,Ve)}())})}(o[a],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function hoe(){return new q(3011,Ve)}()),i;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(b=>{const v=this._makeStyleAst(b,t);let D=null!=v.offset?v.offset:function nae(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(L_(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(L_(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(v.styles),S=0;return null!=D&&(s++,S=v.offset=D),l=l||S<0||S>1,a=a||S<c,c=S,o.push(S),v});l&&t.errors.push(function foe(){return new q(3012,Ve)}()),a&&t.errors.push(function poe(){return new q(3200,Ve)}());const d=e.steps.length;let h=0;s>0&&s<d?t.errors.push(function moe(){return new q(3202,Ve)}()):0==s&&(h=1/(d-1));const f=d-1,p=t.currentTime,_=t.currentAnimateTimings,y=_.duration;return u.forEach((b,v)=>{const D=h>0?v==f?1:h*v:o[v],S=D*y;t.currentTime=p+_.delay+S,_.duration=S,this._validateStyleAst(b,t),b.offset=D,i.styles.push(b)}),i}visitReference(e,t){return{type:8,animation:or(this,rf(e.animation),t),options:yl(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:yl(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:yl(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function Joe(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Xoe,"")),n=n.replace(/@\*/g,x_).replace(/@\w+/g,t=>x_+"-"+t.substr(1)).replace(/:animating/g,eT),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,sr(t.collectedStyles,t.currentQuerySelector,{});const a=or(this,rf(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:yl(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function goe(){return new q(3013,Ve)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:M_(e.timings,t.errors,!0);return{type:12,animation:or(this,rf(e.animation),t),timings:i,options:null}}}class tae{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function L_(n){return!Array.isArray(n)&&"object"==typeof n}function yl(n){return n?(n=Fu(n)).params&&(n.params=function eae(n){return n?Fu(n):null}(n.params)):n={},n}function sT(n,e,t){return{duration:n,delay:e,easing:t}}function oT(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class V_{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const oae=new RegExp(":enter","g"),lae=new RegExp(":leave","g");function aT(n,e,t,i,r,s={},o={},a,l,c=[]){return(new cae).buildKeyframes(n,e,t,i,r,s,o,a,l,c)}class cae{buildKeyframes(e,t,i,r,s,o,a,l,c,u=[]){c=c||new V_;const d=new lT(e,t,c,r,s,u,[]);d.options=l,d.currentTimeline.setStyles([o],null,d.errors,l),or(this,i,d);const h=d.timelines.filter(f=>f.containsAnimation());if(Object.keys(a).length){let f;for(let p=h.length-1;p>=0;p--){const _=h[p];if(_.element===t){f=_;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,d.errors,l)}return h.length?h.map(f=>f.buildKeyframes()):[oT(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?gl(i.duration):null,a=null!=i.delay?gl(i.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),or(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=B_);const o=gl(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>or(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?gl(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),or(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return M_(t.params?A_(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?gl(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=B_);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),or(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;or(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}}const B_={};class lT{constructor(e,t,i,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=B_,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new U_(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=gl(i.duration)),null!=i.delay&&(r.delay=gl(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=A_(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new lT(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=B_,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},s=new uae(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(oae,"."+this._enterClassName)).replace(lae,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&0==a.length&&o.push(function _oe(n){return new q(3014,Ve)}()),a}}class U_{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new U_(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||so,this._currentKeyframe[t]=so}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&(this._previousKeyframe.easing=t);const s=r&&r.params||{},o=function dae(n,e){const t={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(e),i.forEach(s=>{t[s]=so})):na(r,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const l=A_(o[a],s,i);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:so),this._updateStyle(a,l)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],r=e._styleSummary[t];(!i||r.time>i.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=na(a,!0);Object.keys(c).forEach(u=>{const d=c[u];"!"==d?e.add(u):d==so&&t.add(u)}),i||(c.offset=l/this.duration),r.push(c)});const s=e.size?k_(e.values()):[],o=t.size?k_(t.values()):[];if(i){const a=r[0],l=Fu(a);a.offset=0,l.offset=1,r=[a,l]}return oT(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class uae extends U_{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,l=na(e[0],!1);l.offset=0,s.push(l);const c=na(e[0],!1);c.offset=iU(a),s.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let h=na(e[d],!1);h.offset=iU((t+h.offset*i)/o),s.push(h)}i=o,t=0,r="",e=s}return oT(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function iU(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class cT{}class hae extends cT{normalizePropertyName(e,t){return iT(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(fae[t]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function ooe(n,e){return new q(3005,Ve)}())}return o+s}}const fae=(()=>function pae(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function rU(n,e,t,i,r,s,o,a,l,c,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const uT={};class sU{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function mae(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){const r=this._stateStyles["*"],s=this._stateStyles[e],o=r?r.buildStyles(t,i):{};return s?s.buildStyles(t,i):o}build(e,t,i,r,s,o,a,l,c,u){const d=[],h=this.ast.options&&this.ast.options.params||uT,p=this.buildStyles(i,a&&a.params||uT,d),_=l&&l.params||uT,y=this.buildStyles(r,_,d),b=new Set,v=new Map,D=new Map,S="void"===r,F={params:Object.assign(Object.assign({},h),_)},W=u?[]:aT(e,t,this.ast.animation,s,o,p,y,F,c,d);let ae=0;if(W.forEach(en=>{ae=Math.max(en.duration+en.delay,ae)}),d.length)return rU(t,this._triggerName,i,r,S,p,y,[],[],v,D,ae,d);W.forEach(en=>{const Ii=en.element,Qd=sr(v,Ii,{});en.preStyleProps.forEach(ss=>Qd[ss]=!0);const Fo=sr(D,Ii,{});en.postStyleProps.forEach(ss=>Fo[ss]=!0),Ii!==t&&b.add(Ii)});const ft=k_(b.values());return rU(t,this._triggerName,i,r,S,p,y,W,ft,v,D,ae)}}class gae{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},r=Fu(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!=o&&(r[s]=o)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const o=s;Object.keys(o).forEach(a=>{let l=o[a];l.length>1&&(l=A_(l,r,t));const c=this.normalizer.normalizePropertyName(a,t);l=this.normalizer.normalizeStyleValue(a,c,l,t),i[c]=l})}}),i}}class yae{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(r=>{this.states[r.name]=new gae(r.style,r.options&&r.options.params||{},i)}),oU(this.states,"true","1"),oU(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new sU(e,r,this.states))}),this.fallbackTransition=function vae(n,e,t){return new sU(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function oU(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const bae=new V_;class wae{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],s=rT(this._driver,t,i,[]);if(i.length)throw function Toe(n){return new q(3503,Ve)}();this._animations[e]=s}_buildPlayer(e,t,i){const r=e.element,s=VB(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations[e];let o;const a=new Map;if(s?(o=aT(this._driver,t,s,J0,D_,{},{},i,bae,r),o.forEach(u=>{const d=sr(a,u.element,{});u.postStyleProps.forEach(h=>d[h]=null)})):(r.push(function Ioe(){return new q(3300,Ve)}()),o=[]),r.length)throw function Doe(n){return new q(3504,Ve)}();a.forEach((u,d)=>{Object.keys(u).forEach(h=>{u[h]=this._driver.computeStyle(d,h,so)})});const c=ta(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,{},d)}));return this._playersById[e]=c,c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function Soe(n){return new q(3301,Ve)}();return t}listen(e,t,i,r){const s=Q0(t,"","","");return q0(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const aU="ng-animate-queued",dT="ng-animate-disabled",Dae=[],lU={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Sae={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ir="__ng_removed";class hT{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function kae(n){return null!=n?n:null}(i?e.value:e),i){const s=Fu(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const sf="void",fT=new hT(sf);class xae{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Dr(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.hasOwnProperty(t))throw function xoe(n,e){return new q(3302,Ve)}();if(null==i||0==i.length)throw function Moe(n){return new q(3303,Ve)}();if(!function Rae(n){return"start"==n||"done"==n}(i))throw function Aoe(n,e){return new q(3400,Ve)}();const s=sr(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=sr(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(Dr(e,S_),Dr(e,S_+"-"+t),a[t]=fT),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function koe(n){return new q(3401,Ve)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new pT(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Dr(e,S_),Dr(e,S_+"-"+t),this._engine.statesByElement.set(e,a={}));let l=a[t];const c=new hT(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a[t]=c,l||(l=fT),c.value!==sf&&l.value===c.value){if(!function Nae(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const _=[],y=s.matchStyles(l.value,l.params,_),b=s.matchStyles(c.value,c.params,_);_.length?this._engine.reportError(_):this._engine.afterFlush(()=>{_l(e,y),ys(e,b)})}return}const h=sr(this._engine.playersByElement,e,[]);h.forEach(_=>{_.namespaceId==this.id&&_.triggerName==t&&_.queued&&_.destroy()});let f=s.matchTransition(l.value,c.value,e,c.params),p=!1;if(!f){if(!r)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(Dr(e,aU),o.onStart(()=>{Lu(e,aU)})),o.onDone(()=>{let _=this.players.indexOf(o);_>=0&&this.players.splice(_,1);const y=this._engine.playersByElement.get(e);if(y){let b=y.indexOf(o);b>=0&&y.splice(b,1)}}),this.players.push(o),h.push(o),o}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,x_,!0);i.forEach(r=>{if(r[Ir])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(Object.keys(s).forEach(l=>{if(o.set(l,s[l].value),this._triggers[l]){const c=this.trigger(e,l,sf,r);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&ta(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers[o].fallbackTransition,c=i[o]||fT,u=new hT(sf),d=new pT(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Ir];(!s||s===lU)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Dr(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=Q0(s,i.triggerName,i.fromState.value,i.toState.value);l._data=e,q0(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class Mae{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new xae(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement,s=i.length-1;if(s>=0){let o=!1;if(void 0!==this.driver.getParentElement){let a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}}else for(let a=s;a>=0;a--)if(this.driver.containsElement(i[a].hostElement,t)){i.splice(a+1,0,e),o=!0;break}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const o=i[r[s]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&t.add(a)}}}return t}trigger(e,t,i,r){if(H_(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!H_(t))return;const s=t[Ir];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Dr(e,dT)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Lu(e,dT))}removeNode(e,t,i,r){if(H_(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[Ir]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return H_(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,x_,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,eT,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ta(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const i=e[Ir];if(i&&i.setForRemoval){if(e[Ir]=lU,i.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,i.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(dT))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Dr(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?ta(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function Roe(n){return new q(3402,Ve)}()}_flushAnimations(e,t){const i=new V_,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(K=>{u.add(K);const ee=this.driver.query(K,".ng-animate-queued",!0);for(let le=0;le<ee.length;le++)u.add(ee[le])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=dU(h,this.collectedEnterElements),p=new Map;let _=0;f.forEach((K,ee)=>{const le=J0+_++;p.set(ee,le),K.forEach(Ke=>Dr(Ke,le))});const y=[],b=new Set,v=new Set;for(let K=0;K<this.collectedLeaveElements.length;K++){const ee=this.collectedLeaveElements[K],le=ee[Ir];le&&le.setForRemoval&&(y.push(ee),b.add(ee),le.hasAnimation?this.driver.query(ee,".ng-star-inserted",!0).forEach(Ke=>b.add(Ke)):v.add(ee))}const D=new Map,S=dU(h,Array.from(b));S.forEach((K,ee)=>{const le=D_+_++;D.set(ee,le),K.forEach(Ke=>Dr(Ke,le))}),e.push(()=>{f.forEach((K,ee)=>{const le=p.get(ee);K.forEach(Ke=>Lu(Ke,le))}),S.forEach((K,ee)=>{const le=D.get(ee);K.forEach(Ke=>Lu(Ke,le))}),y.forEach(K=>{this.processLeaveNode(K)})});const F=[],W=[];for(let K=this._namespaceList.length-1;K>=0;K--)this._namespaceList[K].drainQueuedTransitions(t).forEach(le=>{const Ke=le.player,Vn=le.element;if(F.push(Ke),this.collectedEnterElements.length){const Di=Vn[Ir];if(Di&&Di.setForMove){if(Di.previousTriggersValues&&Di.previousTriggersValues.has(le.triggerName)){const Oc=Di.previousTriggersValues.get(le.triggerName),qa=this.statesByElement.get(le.element);qa&&qa[le.triggerName]&&(qa[le.triggerName].value=Oc)}return void Ke.destroy()}}const zs=!d||!this.driver.containsElement(d,Vn),fr=D.get(Vn),Wa=p.get(Vn),Lt=this._buildInstruction(le,i,Wa,fr,zs);if(Lt.errors&&Lt.errors.length)return void W.push(Lt);if(zs)return Ke.onStart(()=>_l(Vn,Lt.fromStyles)),Ke.onDestroy(()=>ys(Vn,Lt.toStyles)),void r.push(Ke);if(le.isFallbackTransition)return Ke.onStart(()=>_l(Vn,Lt.fromStyles)),Ke.onDestroy(()=>ys(Vn,Lt.toStyles)),void r.push(Ke);const f7=[];Lt.timelines.forEach(Di=>{Di.stretchStartingKeyframe=!0,this.disabledNodes.has(Di.element)||f7.push(Di)}),Lt.timelines=f7,i.append(Vn,Lt.timelines),o.push({instruction:Lt,player:Ke,element:Vn}),Lt.queriedElements.forEach(Di=>sr(a,Di,[]).push(Ke)),Lt.preStyleProps.forEach((Di,Oc)=>{const qa=Object.keys(Di);if(qa.length){let Nc=l.get(Oc);Nc||l.set(Oc,Nc=new Set),qa.forEach(hP=>Nc.add(hP))}}),Lt.postStyleProps.forEach((Di,Oc)=>{const qa=Object.keys(Di);let Nc=c.get(Oc);Nc||c.set(Oc,Nc=new Set),qa.forEach(hP=>Nc.add(hP))})});if(W.length){const K=[];W.forEach(ee=>{K.push(function Poe(n,e){return new q(3505,Ve)}())}),F.forEach(ee=>ee.destroy()),this.reportError(K)}const ae=new Map,ft=new Map;o.forEach(K=>{const ee=K.element;i.has(ee)&&(ft.set(ee,ee),this._beforeAnimationBuild(K.player.namespaceId,K.instruction,ae))}),r.forEach(K=>{const ee=K.element;this._getPreviousPlayers(ee,!1,K.namespaceId,K.triggerName,null).forEach(Ke=>{sr(ae,ee,[]).push(Ke),Ke.destroy()})});const en=y.filter(K=>fU(K,l,c)),Ii=new Map;uU(Ii,this.driver,v,c,so).forEach(K=>{fU(K,l,c)&&en.push(K)});const Fo=new Map;f.forEach((K,ee)=>{uU(Fo,this.driver,new Set(K),l,"!")}),en.forEach(K=>{const ee=Ii.get(K),le=Fo.get(K);Ii.set(K,Object.assign(Object.assign({},ee),le))});const ss=[],Yd=[],Xd={};o.forEach(K=>{const{element:ee,player:le,instruction:Ke}=K;if(i.has(ee)){if(u.has(ee))return le.onDestroy(()=>ys(ee,Ke.toStyles)),le.disabled=!0,le.overrideTotalTime(Ke.totalTime),void r.push(le);let Vn=Xd;if(ft.size>1){let fr=ee;const Wa=[];for(;fr=fr.parentNode;){const Lt=ft.get(fr);if(Lt){Vn=Lt;break}Wa.push(fr)}Wa.forEach(Lt=>ft.set(Lt,Vn))}const zs=this._buildAnimation(le.namespaceId,Ke,ae,s,Fo,Ii);if(le.setRealPlayer(zs),Vn===Xd)ss.push(le);else{const fr=this.playersByElement.get(Vn);fr&&fr.length&&(le.parentPlayer=ta(fr)),r.push(le)}}else _l(ee,Ke.fromStyles),le.onDestroy(()=>ys(ee,Ke.toStyles)),Yd.push(le),u.has(ee)&&r.push(le)}),Yd.forEach(K=>{const ee=s.get(K.element);if(ee&&ee.length){const le=ta(ee);K.setRealPlayer(le)}}),r.forEach(K=>{K.parentPlayer?K.syncPlayerEvents(K.parentPlayer):K.destroy()});for(let K=0;K<y.length;K++){const ee=y[K],le=ee[Ir];if(Lu(ee,D_),le&&le.hasAnimation)continue;let Ke=[];if(a.size){let zs=a.get(ee);zs&&zs.length&&Ke.push(...zs);let fr=this.driver.query(ee,eT,!0);for(let Wa=0;Wa<fr.length;Wa++){let Lt=a.get(fr[Wa]);Lt&&Lt.length&&Ke.push(...Lt)}}const Vn=Ke.filter(zs=>!zs.destroyed);Vn.length?Pae(this,ee,Vn):this.processLeaveNode(ee)}return y.length=0,ss.forEach(K=>{this.players.push(K),K.onDone(()=>{K.destroy();const ee=this.players.indexOf(K);this.players.splice(ee,1)}),K.play()}),ss}elementContainsData(e,t){let i=!1;const r=t[Ir];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==sf;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,d=sr(i,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}_l(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,h=t.timelines.map(p=>{const _=p.element;u.add(_);const y=_[Ir];if(y&&y.removedBeforeQueried)return new nf(p.duration,p.delay);const b=_!==l,v=function Oae(n){const e=[];return hU(n,e),e}((i.get(_)||Dae).map(ae=>ae.getRealPlayer())).filter(ae=>!!ae.element&&ae.element===_),D=s.get(_),S=o.get(_),F=VB(0,this._normalizer,0,p.keyframes,D,S),W=this._buildPlayer(p,F,v);if(p.subTimeline&&r&&d.add(_),b){const ae=new pT(e,a,_);ae.setRealPlayer(W),c.push(ae)}return W});c.forEach(p=>{sr(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function Aae(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>Dr(p,KB));const f=ta(h);return f.onDestroy(()=>{u.forEach(p=>Lu(p,KB)),ys(l,t.toStyles)}),d.forEach(p=>{sr(r,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new nf(e.duration,e.delay)}}class pT{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new nf,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>q0(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){sr(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function H_(n){return n&&1===n.nodeType}function cU(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function uU(n,e,t,i,r){const s=[];t.forEach(l=>s.push(cU(l)));const o=[];i.forEach((l,c)=>{const u={};l.forEach(d=>{const h=u[d]=e.computeStyle(c,d,r);(!h||0==h.length)&&(c[Ir]=Sae,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>cU(l,s[a++])),o}function dU(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function Dr(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Lu(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function Pae(n,e,t){ta(t).onDone(()=>n.processLeaveNode(e))}function hU(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof FB?hU(i.players,e):e.push(i)}}function fU(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class j_{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new Mae(e,t,i),this._timelineEngine=new wae(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],u=rT(this._driver,s,l,[]);if(l.length)throw function Coe(n,e){return new q(3404,Ve)}();a=function _ae(n,e,t){return new yae(n,e,t)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=BB(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=BB(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Lae=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&ys(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ys(this._element,this._initialStyles),this._endStyles&&(ys(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(_l(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(_l(this._element,this._endStyles),this._endStyles=null),ys(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function mT(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=t[i];Vae(r)&&(e=e||{},e[r]=n[r])}return e}function Vae(n){return"display"===n||"position"===n}class pU{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(i=>{"offset"!=i&&(e[i]=this._finished?t[i]:JB(this.element,i))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class Bae{validateStyleProperty(e){return $B(e)}matchesElement(e,t){return!1}containsElement(e,t){return zB(e,t)}getParentElement(e){return X0(e)}query(e,t,i){return GB(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c={},u=o.filter(h=>h instanceof pU);(function $oe(n,e){return 0===n||0===e})(i,r)&&u.forEach(h=>{let f=h.currentSnapshot;Object.keys(f).forEach(p=>c[p]=f[p])}),t=function zoe(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let s=e[0],o=[];if(i.forEach(a=>{s.hasOwnProperty(a)||o.push(a),s[a]=t[a]}),o.length)for(var r=1;r<e.length;r++){let a=e[r];o.forEach(function(l){a[l]=JB(n,l)})}}return e}(e,t=t.map(h=>na(h,!1)),c);const d=function Fae(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=mT(e[0]),e.length>1&&(i=mT(e[e.length-1]))):e&&(t=mT(e)),t||i?new Lae(n,t,i):null}(e,t);return new pU(e,t,l,d)}}let Uae=(()=>{class n extends AB{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:Lr.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?RB(t):t;return mU(this._renderer,null,i,"register",[r]),new Hae(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(I(Vh),I(xe))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();class Hae extends class eoe{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new jae(this._id,e,t||{},this._renderer)}}class jae{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return mU(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function mU(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const gU="@.disabled";let $ae=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const a=null==o?void 0:o.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new _U("",s,this.engine),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,t,u.name,u)};return i.data.animation.forEach(l),new zae(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(I(Vh),I(j_),I(Z))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();class _U{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==gU?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class zae extends _U{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==gU?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function Gae(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Wae(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let qae=(()=>{class n extends j_{constructor(t,i,r){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(I(xe),I(Z0),I(cT))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();const ni=new P("AnimationModuleType"),yU=[{provide:AB,useClass:Uae},{provide:cT,useFactory:function Kae(){return new hae}},{provide:j_,useClass:qae},{provide:Vh,useFactory:function Qae(n,e,t){return new $ae(n,e,t)},deps:[m_,j_,Z]}],vU=[{provide:Z0,useFactory:()=>new Bae},{provide:ni,useValue:"BrowserAnimations"},...yU],Yae=[{provide:Z0,useClass:WB},{provide:ni,useValue:"NoopAnimations"},...yU];let Xae=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Yae:vU}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:vU,imports:[WV]}),n})();const Jae=new P("mat-sanity-checks",{providedIn:"root",factory:function Zae(){return!0}});let _t=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!I0()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(I(MB),I(Jae,8),I(xe))},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[ef],ef]}),n})();function z_(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=on(e)}}}function af(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function gT(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=on(e)}}}function ele(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Jo(t):this.defaultTabIndex}}}function tle(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new ne,this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}let wU=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),CU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[_t],_t]}),n})();class ile{constructor(e,t,i){this._renderer=e,this.element=t,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const EU={enterDuration:225,exitDuration:150},_T=Mu({passive:!0}),TU=["mousedown","touchstart"],IU=["mouseup","mouseleave","touchend","touchcancel"];class sle{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=io(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},EU),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function ale(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u),function ole(n){window.getComputedStyle(n).getPropertyValue("opacity")}(u),u.style.transform="scale(1)";const d=new ile(this,u,i);return d.state=0,this._activeRipples.add(d),i.persistent||(this._mostRecentTransientRipple=d),this._runTimeoutOutsideZone(()=>{const h=d===this._mostRecentTransientRipple;d.state=1,!i.persistent&&(!h||!this._isPointerDown)&&d.fadeOut()},c),d}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const i=e.element,r=Object.assign(Object.assign({},EU),e.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,i.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=io(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(TU))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(IU),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=j0(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!$0(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,_T)})})}_removeTriggerEvents(){this._triggerElement&&(TU.forEach(e=>{this._triggerElement.removeEventListener(e,this,_T)}),this._pointerUpEventsRegistered&&IU.forEach(e=>{this._triggerElement.removeEventListener(e,this,_T)}))}}const lle=new P("mat-ripple-global-options");let cf=(()=>{class n{constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new sle(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(g(ce),g(Z),g(Dn),g(lle,8),g(ni,8))},n.\u0275dir=N({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&Xe("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),yT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[_t],_t]}),n})();function vT(n){return new nt(e=>{xi(n()).subscribe(e)})}function G_(...n){return function cle(){return eh(1)}()(Bn(n,th(n)))}function Pi(...n){const e=th(n);return Vt((t,i)=>{(e?G_(n,t,e):G_(n,t)).subscribe(i)})}function ule(n,e){}class bT{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const dle={dialogContainer:ea("dialogContainer",[Ri("void, exit",Mt({opacity:0,transform:"scale(0.7)"})),Ri("enter",Mt({transform:"none"})),rr("* => enter",kB([ir("150ms cubic-bezier(0, 0, 0.2, 1)",Mt({transform:"none",opacity:1})),OB("@*",PB(),{optional:!0})])),rr("* => void, * => exit",kB([ir("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",Mt({opacity:0})),OB("@*",PB(),{optional:!0})]))])};let hle=(()=>{class n extends A0{constructor(t,i,r,s,o,a,l,c){super(),this._elementRef=t,this._focusTrapFactory=i,this._changeDetectorRef=r,this._config=o,this._interactivityChecker=a,this._ngZone=l,this._focusMonitor=c,this._animationStateChanged=new ie,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=u=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(u)),this._ariaLabelledBy=o.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=T0())}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const i=T0(),r=this._elementRef.nativeElement;(!i||i===this._document.body||i===r||r.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=T0();return t===i||t.contains(i)}}return n.\u0275fac=function(t){return new(t||n)(g(ce),g(IB),g(Qt),g(xe,8),g(bT),g(H0),g(Z),g(pl))},n.\u0275dir=N({type:n,viewQuery:function(t,i){if(1&t&&jt(Ru,7),2&t){let r;fe(r=pe())&&(i._portalOutlet=r.first)}},features:[X]}),n})(),fle=(()=>{class n extends hle{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:i}){"enter"===t?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:i}))}_onAnimationStart({toState:t,totalTime:i}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Cn(n)))(i||n)}}(),n.\u0275cmp=Ie({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,i){1&t&&Ng("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&t&&(Ph("id",i._id),at("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),Vg("@dialogContainer",i._state))},features:[X],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&be(0,ule,0,0,"ng-template",0)},directives:[Ru],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[dle.dialogContainer]}}),n})(),ple=0;class uf{constructor(e,t,i="mat-dialog-"+ple++){this._overlayRef=e,this._containerInstance=t,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new ne,this._afterClosed=new ne,this._beforeClosed=new ne,this._state=0,t._id=i,t._animationStateChanged.pipe(lt(r=>"opened"===r.state),ln(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(lt(r=>"closed"===r.state),ln(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(lt(r=>27===r.keyCode&&!this.disableClose&&!Ou(r))).subscribe(r=>{r.preventDefault(),wT(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():wT(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(lt(t=>"closing"===t.state),ln(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function wT(n,e,t){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=e),n.close(t)}const DU=new P("MatDialogData"),mle=new P("mat-dialog-default-options"),SU=new P("mat-dialog-scroll-strategy"),_le={provide:SU,deps:[Pu],useFactory:function gle(n){return()=>n.scrollStrategies.block()}};let yle=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u,d){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ne,this._afterOpenedAtThisLevel=new ne,this._ariaHiddenElements=new Map,this.afterAllClosed=vT(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Pi(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,i){i=function vle(n,e){return Object.assign(Object.assign({},e),n)}(i,this._defaultOptions||new bT),i.id&&this.getDialogById(i.id);const r=this._createOverlay(i),s=this._attachDialogContainer(r,i),o=this._attachDialogContent(t,s,r,i);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe(()=>this._removeOpenDialog(o)),this.afterOpened.next(o),s._initializeWithAttachedContent(),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const i=this._getOverlayConfig(t);return this._overlay.create(i)}_getOverlayConfig(t){const i=new R0({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachDialogContainer(t,i){const s=ot.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:bT,useValue:i}]}),o=new M0(this._dialogContainerType,i.viewContainerRef,s,i.componentFactoryResolver);return t.attach(o).instance}_attachDialogContent(t,i,r,s){const o=new this._dialogRefConstructor(r,i,s.id);if(t instanceof ti)i.attachTemplatePortal(new ku(t,null,{$implicit:s.data,dialogRef:o}));else{const a=this._createInjector(s,o,i),l=i.attachComponentPortal(new M0(t,s.viewContainerRef,a,s.componentFactoryResolver));o.componentInstance=l.instance}return o.updateSize(s.width,s.height).updatePosition(s.position),o}_createInjector(t,i,r){const s=t&&t.viewContainerRef&&t.viewContainerRef.injector,o=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:i}];return t.direction&&(!s||!s.get(nr,null,ue.Optional))&&o.push({provide:nr,useValue:{value:t.direction,change:J()}}),ot.create({parent:s||this._injector,providers:o})}_removeOpenDialog(t){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){Og()},n.\u0275dir=N({type:n}),n})(),vl=(()=>{class n extends yle{constructor(t,i,r,s,o,a,l,c){super(t,i,s,a,l,o,uf,fle,DU,c)}}return n.\u0275fac=function(t){return new(t||n)(I(Pu),I(ot),I(Xo,8),I(mle,8),I(SU),I(n,12),I(P0),I(ni,8))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})(),ble=0,wle=(()=>{class n{constructor(t,i,r){this.dialogRef=t,this._elementRef=i,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=xU(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const i=t._matDialogClose||t._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(t){wT(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(t){return new(t||n)(g(uf,8),g(ce),g(vl))},n.\u0275dir=N({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,i){1&t&&G("click",function(s){return i._onButtonClick(s)}),2&t&&at("aria-label",i.ariaLabel||null)("type",i.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[Kt]}),n})(),Cle=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r,this.id="mat-dialog-title-"+ble++}ngOnInit(){this._dialogRef||(this._dialogRef=xU(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(t){return new(t||n)(g(uf,8),g(ce),g(vl))},n.\u0275dir=N({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,i){2&t&&Ph("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),Ele=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=N({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),n})(),Tle=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=N({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"]}),n})();function xU(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}let CT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[vl,_le],imports:[[fB,C_,_t],_t]}),n})();function MU(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function m(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){MU(s,i,r,o,a,"next",l)}function a(l){MU(s,i,r,o,a,"throw",l)}o(void 0)})}}const O=function(n,e){if(!n)throw Vu(e)},Vu=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},AU=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=63&r|128):55296==(64512&r)&&i+1<n.length&&56320==(64512&n.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&n.charCodeAt(++i)),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=63&r|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=63&r|128)}return e},W_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const s=n[r],o=r+1<n.length,a=o?n[r+1]:0,l=r+2<n.length,c=l?n[r+2]:0;let h=(15&a)<<2|c>>6,f=63&c;l||(f=64,o||(h=64)),i.push(t[s>>2],t[(3&s)<<4|a>>4],t[h],t[f])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(AU(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=n[t++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const l=((7&r)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(1023&l))}else{const s=n[t++],o=n[t++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;const c=r<n.length?t[n.charAt(r)]:64;++r;const d=r<n.length?t[n.charAt(r)]:64;if(++r,null==s||null==a||null==c||null==d)throw Error();i.push(s<<2|a>>4),64!==c&&(i.push(a<<4&240|c>>2),64!==d&&i.push(c<<6&192|d))}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},kU=function(n){const e=AU(n);return W_.encodeByteArray(e,!0)},q_=function(n){return kU(n).replace(/\./g,"")},TT=function(n){try{return W_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function df(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Sle(t)||(n[t]=df(n[t],e[t]));return n}function Sle(n){return"__proto__"!==n}class bl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,i))}}}function Xt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function IT(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function DT(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function RU(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ia(){return"object"==typeof indexedDB}function hf(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e((null===(s=r.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}function ST(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Oi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,Oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sr.prototype.create)}}class Sr{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?function Ole(n,e){return n.replace(Nle,(t,i)=>{const r=e[i];return null!=r?String(r):`<${i}?>`})}(s,i):"Error";return new Oi(r,`${this.serviceName}: ${o} (${r}).`,i)}}const Nle=/\{\$([^}]+)}/g;function ff(n){return JSON.parse(n)}function _n(n){return JSON.stringify(n)}const K_=function(n){let e={},t={},i={},r="";try{const s=n.split(".");e=ff(TT(s[0])||""),t=ff(TT(s[1])||""),r=s[2],i=t.d||{},delete t.d}catch(s){}return{header:e,claims:t,data:i,signature:r}};function Qr(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Bu(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function xT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Q_(n,e,t){const i={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=e.call(t,n[r],r,n));return i}function Y_(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const s=n[r],o=e[r];if(PU(s)&&PU(o)){if(!Y_(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function PU(n){return null!==n&&"object"==typeof n}function pf(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function mf(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function gf(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class Vle{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)i[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)i[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const h=i[d-3]^i[d-8]^i[d-14]^i[d-16];i[d]=4294967295&(h<<1|h>>>31)}let c,u,r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):d<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const h=(r<<5|r>>>27)+c+l+u+i[d]&4294967295;l=a,a=o,o=4294967295&(s<<30|s>>>2),s=r,r=h}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const i=t-this.blockSize;let r=0;const s=this.buf_;let o=this.inbuf_;for(;r<t;){if(0===o)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(s[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<t;)if(s[o]=e[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}}function OU(n,e){const t=new Ble(n,e);return t.subscribe.bind(t)}class Ble{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(void 0===e&&void 0===t&&void 0===i)throw new Error("Missing Observer.");r=function Ule(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:i},void 0===r.next&&(r.next=MT),void 0===r.error&&(r.error=MT),void 0===r.complete&&(r.complete=MT);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(o){}}),this.observers.push(r),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(i){"undefined"!=typeof console&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function MT(){}function Uu(n,e){return`${n} failed: ${e} argument `}const X_=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};function AT(n,e=1e3,t=2){const i=e*Math.pow(t,n),r=Math.round(.5*i*(Math.random()-.5)*2);return Math.min(144e5,i+r)}function Ce(n){return n&&n._delegate?n._delegate:n}class Zt{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const wl="[DEFAULT]";class qle{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new bl;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch(r){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function Qle(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:wl})}catch(t){}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch(s){}}}}clearInstance(e=wl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return m(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=wl){return this.instances.has(e)}getOptions(e=wl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[s,o]of this.instancesDeferred.entries())i===this.normalizeInstanceIdentifier(s)&&o.resolve(r);return r}onInit(e,t){var i;const r=this.normalizeInstanceIdentifier(t),s=null!==(i=this.onInitCallbacks.get(r))&&void 0!==i?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch(s){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===wl?void 0:n),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch(r){}var n;return i||null}normalizeInstanceIdentifier(e=wl){return this.component?this.component.multipleInstances?e:wl:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Yle{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new qle(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const kT=[];var Be=(()=>{return(n=Be||(Be={}))[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",Be;var n})();const NU={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},Xle=Be.INFO,Zle={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},Jle=(n,e,...t)=>{if(e<n.logLevel)return;const i=(new Date).toISOString(),r=Zle[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${n.name}:`,...t)};class ra{constructor(e){this.name=e,this._logLevel=Xle,this._logHandler=Jle,this._userLogHandler=null,kT.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?NU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}let FU,LU;const VU=new WeakMap,RT=new WeakMap,BU=new WeakMap,PT=new WeakMap,OT=new WeakMap;let NT={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return RT.get(n);if("objectStoreNames"===e)return n.objectStoreNames||BU.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ao(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function cce(n){return"function"==typeof n?function lce(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function rce(){return LU||(LU=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(FT(this),e),ao(VU.get(this))}:function(...e){return ao(n.apply(FT(this),e))}:function(e,...t){const i=n.call(FT(this),e,...t);return BU.set(i,e.sort?e.sort():[e]),ao(i)}}(n):(n instanceof IDBTransaction&&function oce(n){if(RT.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});RT.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,function ice(){return FU||(FU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,NT):n)}function ao(n){if(n instanceof IDBRequest)return function sce(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(ao(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&VU.set(t,n)}).catch(()=>{}),OT.set(e,n),e}(n);if(PT.has(n))return PT.get(n);const e=cce(n);return e!==n&&(PT.set(n,e),OT.set(e,n)),e}const FT=n=>OT.get(n);function Z_(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(n,e),a=ao(o);return i&&o.addEventListener("upgradeneeded",l=>{i(ao(o.result),l.oldVersion,l.newVersion,ao(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}function LT(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),ao(t).then(()=>{})}const uce=["get","getKey","getAll","getAllKeys","count"],dce=["put","add","delete","clear"],VT=new Map;function UU(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(VT.get(e))return VT.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=dce.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!uce.includes(t))return;const s=function(){var o=m(function*(a,...l){const c=this.transaction(a,r?"readwrite":"readonly");let u=c.store;return i&&(u=u.index(l.shift())),(yield Promise.all([u[t](...l),r&&c.done]))[0]});return function(l){return o.apply(this,arguments)}}();return VT.set(e,s),s}!function ace(n){NT=n(NT)}(n=>_7(g7({},n),{get:(e,t,i)=>UU(e,t)||n.get(e,t,i),has:(e,t)=>!!UU(e,t)||n.has(e,t)}));class hce{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function fce(n){const e=n.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}return null}).filter(t=>t).join(" ")}}const BT="@firebase/app",Cl=new ra("@firebase/app"),El="[DEFAULT]",Bce={[BT]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},sa=new Map,_f=new Map;function J_(n,e){try{n.container.addComponent(e)}catch(t){Cl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function jU(n,e){n.container.addOrOverwriteComponent(e)}function cn(n){const e=n.name;if(_f.has(e))return Cl.debug(`There were multiple attempts to register component ${e}.`),!1;_f.set(e,n);for(const t of sa.values())J_(t,n);return!0}function Yr(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Uce(n,e,t=El){Yr(n,e).clearInstance(t)}function Hce(){_f.clear()}const oa=new Sr("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class $ce{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Zt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oa.create("app-deleted",{appName:this._name})}}const vs="9.10.0";function xr(n,e={}){"object"!=typeof e&&(e={name:e});const t=Object.assign({name:El,automaticDataCollectionEnabled:!1},e),i=t.name;if("string"!=typeof i||!i)throw oa.create("bad-app-name",{appName:String(i)});const r=sa.get(i);if(r){if(Y_(n,r.options)&&Y_(t,r.config))return r;throw oa.create("duplicate-app",{appName:i})}const s=new Yle(i);for(const a of _f.values())s.addComponent(a);const o=new $ce(n,t,s);return sa.set(i,o),o}function aa(n=El){const e=sa.get(n);if(!e)throw oa.create("no-app",{appName:n});return e}function UT(){return Array.from(sa.values())}function $U(n){return HT.apply(this,arguments)}function HT(){return(HT=m(function*(n){const e=n.name;sa.has(e)&&(sa.delete(e),yield Promise.all(n.container.getProviders().map(t=>t.delete())),n.isDeleted=!0)})).apply(this,arguments)}function $e(n,e,t){var i;let r=null!==(i=Bce[n])&&void 0!==i?i:n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];return s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Cl.warn(a.join(" "))}cn(new Zt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function zU(n,e){if(null!==n&&"function"!=typeof n)throw oa.create("invalid-log-argument");!function tce(n,e){for(const t of kT){let i=null;e&&e.level&&(i=NU[e.level]),t.userLogHandler=null===n?null:(r,s,...o)=>{const a=o.map(l=>{if(null==l)return null;if("string"==typeof l)return l;if("number"==typeof l||"boolean"==typeof l)return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch(c){return null}}).filter(l=>l).join(" ");s>=(null!=i?i:r.logLevel)&&n({level:Be[s].toLowerCase(),message:a,args:o,type:r.name})}}}(n,e)}function GU(n){!function ece(n){kT.forEach(e=>{e.setLogLevel(n)})}(n)}const yf="firebase-heartbeat-store";let jT=null;function WU(){return jT||(jT=Z_("firebase-heartbeat-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(yf)}}).catch(n=>{throw oa.create("idb-open",{originalErrorMessage:n.message})})),jT}function $T(){return($T=m(function*(n){var e;try{return(yield WU()).transaction(yf).objectStore(yf).get(KU(n))}catch(t){if(t instanceof Oi)Cl.warn(t.message);else{const i=oa.create("idb-get",{originalErrorMessage:null===(e=t)||void 0===e?void 0:e.message});Cl.warn(i.message)}}})).apply(this,arguments)}function qU(n,e){return zT.apply(this,arguments)}function zT(){return(zT=m(function*(n,e){var t;try{const r=(yield WU()).transaction(yf,"readwrite");return yield r.objectStore(yf).put(e,KU(n)),r.done}catch(i){if(i instanceof Oi)Cl.warn(i.message);else{const r=oa.create("idb-set",{originalErrorMessage:null===(t=i)||void 0===t?void 0:t.message});Cl.warn(r.message)}}})).apply(this,arguments)}function KU(n){return`${n.name}!${n.options.appId}`}class Qce{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Xce(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){var e=this;return m(function*(){const i=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=QU();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==r&&!e._heartbeatsCache.heartbeats.some(s=>s.date===r))return e._heartbeatsCache.heartbeats.push({date:r,agent:i}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return m(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=QU(),{heartbeatsToSend:i,unsentEntries:r}=function Yce(n,e=1024){const t=[];let i=n.slice();for(const r of n){const s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),YU(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),YU(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}(e._heartbeatsCache.heartbeats),s=q_(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(e._heartbeatsCache.heartbeats=r,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function QU(){return(new Date).toISOString().substring(0,10)}class Xce{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(function*(){return!!ia()&&hf().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return m(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function Wce(n){return $T.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return m(function*(){var i;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return qU(t.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return m(function*(){var i;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return qU(t.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function YU(n){return q_(JSON.stringify({version:2,heartbeats:n})).length}!function Zce(n){cn(new Zt("platform-logger",e=>new hce(e),"PRIVATE")),cn(new Zt("heartbeat",e=>new Qce(e),"PRIVATE")),$e(BT,"0.7.33",n),$e(BT,"0.7.33","esm2017"),$e("fire-js","")}(""),$e("firebase","9.10.0","app");const ii_firebase={projectId:"site-wynyard",appId:"1:788072440341:web:961357f1f92a55f4eba41c",storageBucket:"site-wynyard.appspot.com",locationId:"asia-south1",apiKey:"AIzaSyDV7W5Hv2CnumoHfr3Tdtq_Xf1Kp8Rsls4",authDomain:"site-wynyard.firebaseapp.com",messagingSenderId:"788072440341"},XU="@firebase/database";let GT="";class nue{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),_n(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ff(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class iue{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Qr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const JU=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new nue(e)}}catch(e){}return new iue},Tl=JU("localStorage"),WT=JU("sessionStorage"),Hu=new ra("@firebase/database"),eH=function(){let n=1;return function(){return n++}}(),tH=function(n){const e=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);if(r>=55296&&r<=56319){const s=r-55296;i++,O(i<n.length,"Surrogate pair missing trail surrogate."),r=65536+(s<<10)+(n.charCodeAt(i)-56320)}r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=63&r|128):r<65536?(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=63&r|128):(e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=63&r|128)}return e}(n),t=new Vle;t.update(e);const i=t.digest();return W_.encodeByteArray(i)},vf=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=vf.apply(null,i):e+="object"==typeof i?_n(i):i,e+=" "}return e};let Il=null,nH=!0;const xn=function(...n){if(!0===nH&&(nH=!1,null===Il&&!0===WT.get("logging_enabled")&&function(n,e){O(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Hu.logLevel=Be.VERBOSE,Il=Hu.log.bind(Hu),e&&WT.set("logging_enabled",!0)):"function"==typeof n?Il=n:(Il=null,WT.remove("logging_enabled"))}(!0)),Il){const e=vf.apply(null,n);Il(e)}},bf=function(n){return function(...e){xn(n,...e)}},qT=function(...n){const e="FIREBASE INTERNAL ERROR: "+vf(...n);Hu.error(e)},bs=function(...n){const e=`FIREBASE FATAL ERROR: ${vf(...n)}`;throw Hu.error(e),new Error(e)},ri=function(...n){const e="FIREBASE WARNING: "+vf(...n);Hu.warn(e)},ey=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},lo="[MIN_NAME]",ws="[MAX_NAME]",Dl=function(n,e){if(n===e)return 0;if(n===lo||e===ws)return-1;if(e===lo||n===ws)return 1;{const t=ty(n),i=ty(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},oue=function(n,e){return n===e?0:n<e?-1:1},wf=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+_n(e))},KT=function(n){if("object"!=typeof n||null===n)return _n(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=_n(e[i]),t+=":",t+=KT(n[e[i]]);return t+="}",t},rH=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function Mn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const sH=function(n){O(!ey(n),"Invalid JSON number");const i=1023;let r,s,o,a,l;0===n?(s=0,o=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=a+i,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(r?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);1===h.length&&(h="0"+h),d+=h}return d.toLowerCase()},uue=new RegExp("^-?(0*)\\d{1,10}$"),ty=function(n){if(uue.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},ju=function(n){try{n()}catch(e){setTimeout(()=>{throw ri("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Cf=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class hue{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){ri(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class fue{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(xn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ri(e)}}let Ef=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const dH=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,pH="websocket",mH="long_polling";class XT{constructor(e,t,i,r,s=!1,o="",a=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Tl.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Tl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function gH(n,e,t){let i;if(O("string"==typeof e,"typeof type must == string"),O("object"==typeof t,"typeof params must == object"),e===pH)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==mH)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function pue(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return Mn(t,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}class mue{constructor(){this.counters_={}}incrementCounter(e,t=1){Qr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return function Dle(n){return df(void 0,n)}(this.counters_)}}const ZT={},JT={};function eI(n){const e=n.toString();return ZT[e]||(ZT[e]=new mue),ZT[e]}class _ue{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&ju(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class la{constructor(e,t,i,r,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bf(e),this.stats_=eI(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),gH(t,mH,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new _ue(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new tI((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&dH.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){la.forceAllow_=!0}static forceDisallow(){la.forceDisallow_=!0}static isAvailable(){return!(!la.forceAllow_&&(la.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=_n(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=kU(t),r=rH(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=_n(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class tI{constructor(e,t,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=eH(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=tI.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){xn("frame writing exception"),a.stack&&xn(a.stack),xn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||xn("No IE domain setting required")}catch(t){const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const o=this.pendingSegs.shift();i=i+"&seg"+r+"="+o.seg+"&ts"+r+"="+o.ts+"&d"+r+"="+o.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{xn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(i){}},Math.floor(1))}}let iy=null;"undefined"!=typeof MozWebSocket?iy=MozWebSocket:"undefined"!=typeof WebSocket&&(iy=WebSocket);let $u=(()=>{class n{constructor(t,i,r,s,o,a,l){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bf(this.connId),this.stats_=eI(i),this.connURL=n.connectionURL_(i,a,l,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,o){const a={v:"5"};return"undefined"!=typeof location&&location.hostname&&dH.test(location.hostname)&&(a.r="f"),i&&(a.s=i),r&&(a.ls=r),s&&(a.ac=s),o&&(a.p=o),gH(t,pH,a)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Tl.set("previous_websocket_failure",!0);try{let r;0,this.mySock=new iy(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==iy&&!n.forceDisallow_}static previouslyFailed(){return Tl.isInMemoryStorage||!0===Tl.get("previous_websocket_failure")}markConnectionHealthy(){Tl.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=ff(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(O(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=_n(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=rH(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),EH=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[la,$u]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=$u&&$u.isAvailable();let r=i&&!$u.previouslyFailed();if(t.webSocketOnly&&(i||ri("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[$u];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class AH{constructor(e,t,i,r,s,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bf("c:"+this.id+":"),this.transportManager_=new EH(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Cf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=wf("t",e),i=wf("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=wf("t",e),i=wf("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=wf("t",e);if("d"in e){const i=e.d;if("h"===t)this.onHandshake_(i);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?qT("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qT("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&ri("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Cf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Cf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Tl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class kH{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class RH{constructor(e){this.allowedEvents_=e,this.listeners_={},O(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(e){O(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class ry extends RH{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!IT()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ry}getInitialEvent(e){return O("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Je{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Qe(){return new Je("")}function ke(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ca(n){return n.pieces_.length-n.pieceNum_}function ht(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Je(n.pieces_,e)}function iI(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Tf(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function NH(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Je(e,0)}function At(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Je)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new Je(t,0)}function Re(n){return n.pieceNum_>=n.pieces_.length}function gi(n,e){const t=ke(n),i=ke(e);if(null===t)return e;if(t===i)return gi(ht(n),ht(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function rI(n,e){if(ca(n)!==ca(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Mr(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(ca(n)>ca(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class Uue{constructor(e,t){this.errorPrefix_=t,this.parts_=Tf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=X_(this.parts_[i]);FH(this)}}function FH(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Sl(n))}function Sl(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class sI extends RH{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new sI}getInitialEvent(e){return O("visible"===e,"Unknown event type: "+e),[this.visible_]}}const If=1e3;let oy,xl=(()=>{class n extends kH{constructor(t,i,r,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=bf("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=If,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");sI.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&ry.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const s=++this.requestNumber_,o={r:s,a:t,b:i};this.log_(_n(o)),O(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const i=new bl,r={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:r,onComplete:a=>{const l=a.d;"ok"===a.s?i.resolve(l):i.reject(l)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),O(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),O(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r};t.tag&&(o.q=i._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,u=l.s;n.warnOnListenWarnings_(c,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(r,s),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&Qr(t,"w")){const r=Bu(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();ri(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=K_(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=function(n){const t=K_(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),O(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);const o={p:t};s&&(o.q=r,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){const o={p:i,d:r};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,o){this.initConnection_();const a={p:i,d:r};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+_n(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):qT("Unrecognized action received from server: "+_n(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){O(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=If,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=If,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=If),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return m(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const u=function(){c?c.close():(l=!0,s())};t.realtime_={close:u,sendRequest:function(f){O(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)}};const h=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[f,p]=yield Promise.all([t.authTokenProvider_.getToken(h),t.appCheckTokenProvider_.getToken(h)]);l?xn("getToken() completed but was canceled"):(xn("getToken() completed. Creating connection."),t.authToken_=f&&f.accessToken,t.appCheckToken_=p&&p.token,c=new AH(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,s,_=>{ri(_+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(f){t.log_("Failed to get token: "+f),l||(t.repoInfo_.nodeAdmin&&ri(f),u())}}})()}interrupt(t){xn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){xn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],xT(this.interruptReasons_)&&(this.reconnectDelay_=If,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(o=>KT(o)).join("$"):"default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){const r=new Je(t).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(i),o.delete(i),0===o.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){xn("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){xn("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";t["sdk."+i+"."+GT.replace(/\./g,"-")]=1,IT()?t["framework.cordova"]=1:RU()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ry.getInstance().currentlyOnline();return xT(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Oe{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Oe(e,t)}}class sy{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Oe(lo,e),r=new Oe(lo,t);return 0!==this.compare(i,r)}minPost(){return Oe.MIN}}class BH extends sy{static get __EMPTY_NODE(){return oy}static set __EMPTY_NODE(e){oy=e}compare(e,t){return Dl(e.name,t.name)}isDefinedOn(e){throw Vu("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Oe.MIN}maxPost(){return new Oe(ws,oy)}makePost(e,t){return O("string"==typeof e,"KeyIndex indexValue must always be a string."),new Oe(e,oy)}toString(){return".key"}}const Cs=new BH;class ay{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?i(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let aI,Xr=(()=>{class n{constructor(t,i,r,s,o){this.key=t,this.value=i,this.color=null!=r?r:n.RED,this.left=null!=s?s:Ni.EMPTY_NODE,this.right=null!=o?o:Ni.EMPTY_NODE}copy(t,i,r,s,o){return new n(null!=t?t:this.key,null!=i?i:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=o?o:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const o=r(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,i,r),null):0===o?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ni.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return Ni.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ni{constructor(e,t=Ni.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ni(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Xr.BLACK,null,null))}remove(e){return new Ni(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Xr.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ay(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ay(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ay(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ay(this.root_,null,this.comparator_,!0,e)}}function Kue(n,e){return Dl(n.name,e.name)}function oI(n,e){return Dl(n,e)}Ni.EMPTY_NODE=new class que{copy(e,t,i,r,s){return this}insert(e,t,i){return new Xr(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const UH=function(n){return"number"==typeof n?"number:"+sH(n):"string:"+n},HH=function(n){if(n.isLeafNode()){const e=n.val();O("string"==typeof e||"number"==typeof e||"object"==typeof e&&Qr(e,".sv"),"Priority must be a string or number.")}else O(n===aI||n.isEmpty(),"priority of unexpected type.");O(n===aI||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let jH,$H,zH,zu=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,O(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),HH(this.priorityNode_)}static set __childrenNodeConstructor(t){jH=t}static get __childrenNodeConstructor(){return jH}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Re(t)?this:".priority"===ke(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=ke(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:(O(".priority"!==r||1===ca(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ht(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+UH(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?sH(this.value_):this.value_,this.lazyHash_=tH(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(O(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),o=n.VALUE_TYPE_ORDER.indexOf(r);return O(s>=0,"Unknown leaf type: "+i),O(o>=0,"Unknown leaf type: "+r),s===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const yt=new class Zue extends sy{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return 0===s?Dl(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Oe.MIN}maxPost(){return new Oe(ws,new zu("[PRIORITY-POST]",zH))}makePost(e,t){const i=$H(e);return new Oe(t,new zu("[PRIORITY-POST]",i))}toString(){return".priority"}},Jue=Math.log(2);class ede{constructor(e){this.count=parseInt(Math.log(e+1)/Jue,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ly=function(n,e,t,i){n.sort(e);const r=function(l,c){const u=c-l;let d,h;if(0===u)return null;if(1===u)return d=n[l],h=t?t(d):d,new Xr(h,d.node,Xr.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=r(l,f),_=r(f+1,c);return d=n[f],h=t?t(d):d,new Xr(h,d.node,Xr.BLACK,p,_)}},a=function(l){let c=null,u=null,d=n.length;const h=function(p,_){const y=d-p,b=d;d-=p;const v=r(y+1,b),D=n[y],S=t?t(D):D;f(new Xr(S,D.node,_,null,v))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const _=l.nextBitIsOne(),y=Math.pow(2,l.count-(p+1));_?h(y,Xr.BLACK):(h(y,Xr.BLACK),h(y,Xr.RED))}return u}(new ede(n.length));return new Ni(i||e,a)};let lI;const Gu={};class co{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return O(Gu&&yt,"ChildrenNode.ts has not been loaded"),lI=lI||new co({".priority":Gu},{".priority":yt}),lI}get(e){const t=Bu(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ni?t:null}hasIndex(e){return Qr(this.indexSet_,e.toString())}addIndex(e,t){O(e!==Cs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(Oe.Wrap);let a,o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();a=r?ly(i,e.getCompare()):Gu;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new co(u,c)}addToIndexes(e,t){const i=Q_(this.indexes_,(r,s)=>{const o=Bu(this.indexSet_,s);if(O(o,"Missing index implementation for "+s),r===Gu){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(Oe.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),ly(a,o.getCompare())}return Gu}{const a=t.get(e.name);let l=r;return a&&(l=l.remove(new Oe(e.name,a))),l.insert(e,e.node)}});return new co(i,this.indexSet_)}removeFromIndexes(e,t){const i=Q_(this.indexes_,r=>{if(r===Gu)return r;{const s=t.get(e.name);return s?r.remove(new Oe(e.name,s)):r}});return new co(i,this.indexSet_)}}let Df,we=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&HH(this.priorityNode_),this.children_.isEmpty()&&O(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Df||(Df=new n(new Ni(oI),null,co.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Df}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?Df:i}}getChild(t){const i=ke(t);return null===i?this:this.getImmediateChild(i).getChild(ht(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if(O(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new Oe(t,i);let s,o;i.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),o=this.indexMap_.addToIndexes(r,this.children_));const a=s.isEmpty()?Df:this.priorityNode_;return new n(s,a,o)}}updateChild(t,i){const r=ke(t);if(null===r)return i;{O(".priority"!==ke(t)||1===ca(t),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(ht(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,s=0,o=!0;if(this.forEachChild(yt,(a,l)=>{i[a]=l.val(t),r++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*r){const a=[];for(const l in i)a[l]=i[l];return a}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+UH(this.getPriority().val())+":"),this.forEachChild(yt,(i,r)=>{const s=r.hash();""!==s&&(t+=":"+i+":"+s)}),this.lazyHash_=""===t?"":tH(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new Oe(t,i));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new Oe(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new Oe(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Oe.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Oe.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Sf?-1:0}withIndex(t){if(t===Cs||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Cs||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(yt),s=i.getIterator(yt);let o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===Cs?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Sf=new class tde extends we{constructor(){super(new Ni(oI),we.EMPTY_NODE,co.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return we.EMPTY_NODE}isEmpty(){return!1}};function Ft(n,e=null){if(null===n)return we.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),O(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new zu(n,Ft(e));if(n instanceof Array){let t=we.EMPTY_NODE;return Mn(n,(i,r)=>{if(Qr(n,i)&&"."!==i.substring(0,1)){const s=Ft(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(Ft(e))}{const t=[];let i=!1;if(Mn(n,(o,a)=>{if("."!==o.substring(0,1)){const l=Ft(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),t.push(new Oe(o,l)))}}),0===t.length)return we.EMPTY_NODE;const s=ly(t,Kue,o=>o.name,oI);if(i){const o=ly(t,yt.getCompare());return new we(s,Ft(e),new co({".priority":o},{".priority":yt}))}return new we(s,Ft(e),co.Default)}}Object.defineProperties(Oe,{MIN:{value:new Oe(lo,we.EMPTY_NODE)},MAX:{value:new Oe(ws,Sf)}}),BH.__EMPTY_NODE=we.EMPTY_NODE,zu.__childrenNodeConstructor=we,function Que(n){aI=n}(Sf),function Xue(n){zH=n}(Sf),function Yue(n){$H=n}(Ft);class cI extends sy{constructor(e){super(),this.indexPath_=e,O(!Re(e)&&".priority"!==ke(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return 0===s?Dl(e.name,t.name):s}makePost(e,t){const i=Ft(e),r=we.EMPTY_NODE.updateChild(this.indexPath_,i);return new Oe(t,r)}maxPost(){const e=we.EMPTY_NODE.updateChild(this.indexPath_,Sf);return new Oe(ws,e)}toString(){return Tf(this.indexPath_,0).join("/")}}const uI=new class ide extends sy{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?Dl(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Oe.MIN}maxPost(){return Oe.MAX}makePost(e,t){const i=Ft(e);return new Oe(t,i)}toString(){return".value"}},Wu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",rde=function(){let n=0;const e=[];return function(t){const i=t===n;let r;n=t;const s=new Array(8);for(r=7;r>=0;r--)s[r]=Wu.charAt(t%64),t=Math.floor(t/64);O(0===t,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=Wu.charAt(e[r]);return O(20===o.length,"nextPushId: Length should be 20."),o}}();function QH(n){return{type:"value",snapshotNode:n}}function qu(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function xf(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Mf(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class hI{constructor(e){this.index_=e}updateChild(e,t,i,r,s,o){O(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(null!=o&&(i.isEmpty()?e.hasChild(t)?o.trackChildChange(xf(t,a)):O(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(qu(t,i)):o.trackChildChange(Mf(t,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(yt,(r,s)=>{t.hasChild(r)||i.trackChildChange(xf(r,s))}),t.isLeafNode()||t.forEachChild(yt,(r,s)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(s)||i.trackChildChange(Mf(r,s,o))}else i.trackChildChange(qu(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?we.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Af{constructor(e){this.indexedFilter_=new hI(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Af.getStartPost_(e),this.endPost_=Af.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,i,r,s,o){return this.matches(new Oe(t,i))||(i=we.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,o)}updateFullNode(e,t,i){t.isLeafNode()&&(t=we.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(we.EMPTY_NODE);const s=this;return t.forEachChild(yt,(o,a)=>{s.matches(new Oe(o,a))||(r=r.updateImmediateChild(o,we.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class ode{constructor(e){this.rangedFilter_=new Af(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,i,r,s,o){return this.rangedFilter_.matches(new Oe(t,i))||(i=we.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,o):this.fullLimitUpdateChild_(e,t,i,s,o)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=we.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;r=we.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();let l;if(l=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,!l)break;r=r.updateImmediateChild(a.name,a.node),o++}}else{let s,o,a,l;if(r=t.withIndex(this.index_),r=r.updatePriority(we.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),o=this.rangedFilter_.getStartPost();const d=this.index_.getCompare();a=(h,f)=>d(f,h)}else l=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),o=this.rangedFilter_.getEndPost(),a=this.index_.getCompare();let c=0,u=!1;for(;l.hasNext();){const d=l.getNext();!u&&a(s,d)<=0&&(u=!0),u&&c<this.limit_&&a(d,o)<=0?c++:r=r.updateImmediateChild(d.name,we.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;O(a.numChildren()===this.limit_,"");const l=new Oe(t,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){const d=a.getImmediateChild(t);let h=r.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=h&&(h.name===t||a.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);const f=null==h?1:o(h,l);if(u&&!i.isEmpty()&&f>=0)return null!=s&&s.trackChildChange(Mf(t,i,d)),a.updateImmediateChild(t,i);{null!=s&&s.trackChildChange(xf(t,d));const _=a.updateImmediateChild(t,we.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=s&&s.trackChildChange(qu(h.name,h.node)),_.updateImmediateChild(h.name,h.node)):_}}return i.isEmpty()?e:u&&o(c,l)>=0?(null!=s&&(s.trackChildChange(xf(c.name,c.node)),s.trackChildChange(qu(t,i))),a.updateImmediateChild(t,i).updateImmediateChild(c.name,we.EMPTY_NODE)):e}}class fI{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=yt}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return O(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return O(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:lo}hasEnd(){return this.endSet_}getIndexEndValue(){return O(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return O(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ws}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return O(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===yt}copy(){const e=new fI;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function YH(n){const e={};if(n.isDefault())return e;let t;return n.index_===yt?t="$priority":n.index_===uI?t="$value":n.index_===Cs?t="$key":(O(n.index_ instanceof cI,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=_n(t),n.startSet_&&(e.startAt=_n(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+_n(n.indexStartName_))),n.endSet_&&(e.endAt=_n(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+_n(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function XH(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==yt&&(e.i=n.index_.toString()),e}class uy extends kH{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=bf("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(O(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=uy.getListenId_(e,i),a={};this.listens_[o]=a;const l=YH(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(404===c&&(d=null,c=null),null===c&&this.onDataUpdate_(s,d,!1,i),Bu(this.listens_,o)===a){let h;h=c?401===c?"permission_denied":"rest_error:"+c:"ok",r(h,null)}})}unlisten(e,t){const i=uy.getListenId_(e,t);delete this.listens_[i]}get(e){const t=YH(e._queryParams),i=e._path.toString(),r=new bl;return this.restRequest_(i+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+pf(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=ff(a.responseText)}catch(c){ri("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else 401!==a.status&&404!==a.status&&ri("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}class hde{constructor(){this.rootNode_=we.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function dy(){return{value:null,children:new Map}}function Ku(n,e,t){if(Re(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=ke(e);n.children.has(i)||n.children.set(i,dy()),Ku(n.children.get(i),e=ht(e),t)}}function _I(n,e,t){null!==n.value?t(e,n.value):function fde(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{_I(r,new Je(e.toString()+"/"+i),t)})}class pde{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Mn(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class _de{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new pde(e);const i=1e4+2e4*Math.random();Cf(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Mn(e,(r,s)=>{s>0&&Qr(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),Cf(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ar=(()=>{return(n=Ar||(Ar={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Ar;var n})();function bI(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class hy{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Ar.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Re(this.path)){if(null!=this.affectedTree.value)return O(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Je(e));return new hy(Qe(),t,this.revert)}}return O(ke(this.path)===e,"operationForChild called for unrelated child."),new hy(ht(this.path),this.affectedTree,this.revert)}}class kf{constructor(e,t){this.source=e,this.path=t,this.type=Ar.LISTEN_COMPLETE}operationForChild(e){return Re(this.path)?new kf(this.source,Qe()):new kf(this.source,ht(this.path))}}class Ml{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Ar.OVERWRITE}operationForChild(e){return Re(this.path)?new Ml(this.source,Qe(),this.snap.getImmediateChild(e)):new Ml(this.source,ht(this.path),this.snap)}}class Qu{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Ar.MERGE}operationForChild(e){if(Re(this.path)){const t=this.children.subtree(new Je(e));return t.isEmpty()?null:t.value?new Ml(this.source,Qe(),t.value):new Qu(this.source,Qe(),t)}return O(ke(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Qu(this.source,ht(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ua{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Re(e))return this.isFullyInitialized()&&!this.filtered_;const t=ke(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class yde{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Rf(n,e,t,i,r,s){const o=i.filter(a=>a.type===t);o.sort((a,l)=>function wde(n,e,t){if(null==e.childName||null==t.childName)throw Vu("Should only compare child_ events.");const i=new Oe(e.childName,e.snapshotNode),r=new Oe(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,a,l)),o.forEach(a=>{const l=function bde(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function fy(n,e){return{eventCache:n,serverCache:e}}function Pf(n,e,t,i){return fy(new ua(e,t,i),n.serverCache)}function JH(n,e,t,i){return fy(n.eventCache,new ua(e,t,i))}function py(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Al(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let wI;class vt{constructor(e,t=(()=>(wI||(wI=new Ni(oue)),wI))()){this.value=e,this.children=t}static fromObject(e){let t=new vt(null);return Mn(e,(i,r)=>{t=t.set(new Je(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Qe(),value:this.value};if(Re(e))return null;{const i=ke(e),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(ht(e),t);return null!=s?{path:At(new Je(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Re(e))return this;{const t=ke(e),i=this.children.get(t);return null!==i?i.subtree(ht(e)):new vt(null)}}set(e,t){if(Re(e))return new vt(t,this.children);{const i=ke(e),s=(this.children.get(i)||new vt(null)).set(ht(e),t),o=this.children.insert(i,s);return new vt(this.value,o)}}remove(e){if(Re(e))return this.children.isEmpty()?new vt(null):new vt(null,this.children);{const t=ke(e),i=this.children.get(t);if(i){const r=i.remove(ht(e));let s;return s=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&s.isEmpty()?new vt(null):new vt(this.value,s)}return this}}get(e){if(Re(e))return this.value;{const t=ke(e),i=this.children.get(t);return i?i.get(ht(e)):null}}setTree(e,t){if(Re(e))return t;{const i=ke(e),s=(this.children.get(i)||new vt(null)).setTree(ht(e),t);let o;return o=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new vt(this.value,o)}}fold(e){return this.fold_(Qe(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(At(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Qe(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(Re(e))return null;{const s=ke(e),o=this.children.get(s);return o?o.findOnPath_(ht(e),At(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Qe(),t)}foreachOnPath_(e,t,i){if(Re(e))return this;{this.value&&i(t,this.value);const r=ke(e),s=this.children.get(r);return s?s.foreachOnPath_(ht(e),At(t,r),i):new vt(null)}}foreach(e){this.foreach_(Qe(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(At(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class Zr{constructor(e){this.writeTree_=e}static empty(){return new Zr(new vt(null))}}function Of(n,e,t){if(Re(e))return new Zr(new vt(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const o=gi(r,e);return s=s.updateChild(o,t),new Zr(n.writeTree_.set(r,s))}{const r=new vt(t),s=n.writeTree_.setTree(e,r);return new Zr(s)}}}function CI(n,e,t){let i=n;return Mn(t,(r,s)=>{i=Of(i,At(e,r),s)}),i}function ej(n,e){if(Re(e))return Zr.empty();{const t=n.writeTree_.setTree(e,new vt(null));return new Zr(t)}}function EI(n,e){return null!=kl(n,e)}function kl(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(gi(t.path,e)):null}function tj(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(yt,(i,r)=>{e.push(new Oe(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new Oe(i,r.value))}),e}function da(n,e){if(Re(e))return n;{const t=kl(n,e);return new Zr(null!=t?new vt(t):n.writeTree_.subtree(e))}}function TI(n){return n.writeTree_.isEmpty()}function Yu(n,e){return nj(Qe(),n.writeTree_,e)}function nj(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{".priority"===r?(O(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):t=nj(At(n,r),s,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(At(n,".priority"),i)),t}}function my(n,e){return aj(e,n)}function Sde(n,e){if(n.snap)return Mr(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Mr(At(n.path,t),e))return!0;return!1}function Mde(n){return n.visible}function ij(n,e,t){let i=Zr.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const o=s.path;let a;if(s.snap)Mr(t,o)?(a=gi(t,o),i=Of(i,a,s.snap)):Mr(o,t)&&(a=gi(o,t),i=Of(i,Qe(),s.snap.getChild(a)));else{if(!s.children)throw Vu("WriteRecord should have .snap or .children");if(Mr(t,o))a=gi(t,o),i=CI(i,a,s.children);else if(Mr(o,t))if(a=gi(o,t),Re(a))i=CI(i,Qe(),s.children);else{const l=Bu(s.children,ke(a));if(l){const c=l.getChild(ht(a));i=Of(i,Qe(),c)}}}}}return i}function rj(n,e,t,i,r){if(i||r){const s=da(n.visibleWrites,e);return!r&&TI(s)?t:r||null!=t||EI(s,Qe())?Yu(ij(n.allWrites,function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(Mr(c.path,e)||Mr(e,c.path))},e),t||we.EMPTY_NODE):null}{const s=kl(n.visibleWrites,e);if(null!=s)return s;{const o=da(n.visibleWrites,e);return TI(o)?t:null!=t||EI(o,Qe())?Yu(o,t||we.EMPTY_NODE):null}}}function gy(n,e,t,i){return rj(n.writeTree,n.treePath,e,t,i)}function II(n,e){return function Ade(n,e,t){let i=we.EMPTY_NODE;const r=kl(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(yt,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(t){const s=da(n.visibleWrites,e);return t.forEachChild(yt,(o,a)=>{const l=Yu(da(s,new Je(o)),a);i=i.updateImmediateChild(o,l)}),tj(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}return tj(da(n.visibleWrites,e)).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}(n.writeTree,n.treePath,e)}function sj(n,e,t,i){return function kde(n,e,t,i,r){O(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=At(e,t);if(EI(n.visibleWrites,s))return null;{const o=da(n.visibleWrites,s);return TI(o)?r.getChild(t):Yu(o,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function _y(n,e){return function Pde(n,e){return kl(n.visibleWrites,e)}(n.writeTree,At(n.treePath,e))}function DI(n,e,t){return function Rde(n,e,t,i){const r=At(e,t),s=kl(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(t)?Yu(da(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function oj(n,e){return aj(At(n.treePath,e),n.writeTree)}function aj(n,e){return{treePath:n,writeTree:e}}class Lde{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;O("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),O(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(i,Mf(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(i,xf(i,r.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(i,qu(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw Vu("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,Mf(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const lj=new class Vde{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class SI{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new ua(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return DI(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Al(this.viewCache_),s=function Fde(n,e,t,i,r,s){return function Ode(n,e,t,i,r,s,o){let a;const l=da(n.visibleWrites,e),c=kl(l,Qe());if(null!=c)a=c;else{if(null==t)return[];a=Yu(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let f=h.getNext();for(;f&&u.length<r;)0!==d(f,i)&&u.push(f),f=h.getNext();return u}}(n.writeTree,n.treePath,e,t,i,r,s)}(this.writes_,r,t,1,i,e);return 0===s.length?null:s[0]}}function cj(n,e,t,i,r,s){const o=e.eventCache;if(null!=_y(i,t))return e;{let a,l;if(Re(t))if(O(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Al(e),d=II(i,c instanceof we?c:we.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=gy(i,Al(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=ke(t);if(".priority"===c){O(1===ca(t),"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const d=sj(i,t,u,l);a=null!=d?n.filter.updatePriority(u,d):o.getNode()}else{const u=ht(t);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const h=sj(i,t,o.getNode(),l);d=null!=h?o.getNode().getImmediateChild(c).updateChild(u,h):o.getNode().getImmediateChild(c)}else d=DI(i,c,e.serverCache);a=null!=d?n.filter.updateChild(o.getNode(),c,d,u,r,s):o.getNode()}}return Pf(e,a,o.isFullyInitialized()||Re(t),n.filter.filtersNodes())}}function yy(n,e,t,i,r,s,o,a){const l=e.serverCache;let c;const u=o?n.filter:n.filter.getIndexedFilter();if(Re(t))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(t,i);c=u.updateFullNode(l.getNode(),f,null)}else{const f=ke(t);if(!l.isCompleteForPath(t)&&ca(t)>1)return e;const p=ht(t),y=l.getNode().getImmediateChild(f).updateChild(p,i);c=".priority"===f?u.updatePriority(l.getNode(),y):u.updateChild(l.getNode(),f,y,p,lj,null)}const d=JH(e,c,l.isFullyInitialized()||Re(t),u.filtersNodes());return cj(n,d,t,r,new SI(r,d,s),a)}function xI(n,e,t,i,r,s,o){const a=e.eventCache;let l,c;const u=new SI(r,e,s);if(Re(t))c=n.filter.updateFullNode(e.eventCache.getNode(),i,o),l=Pf(e,c,!0,n.filter.filtersNodes());else{const d=ke(t);if(".priority"===d)c=n.filter.updatePriority(e.eventCache.getNode(),i),l=Pf(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=ht(t),f=a.getNode().getImmediateChild(d);let p;if(Re(h))p=i;else{const _=u.getCompleteChild(d);p=null!=_?".priority"===iI(h)&&_.getChild(NH(h)).isEmpty()?_:_.updateChild(h,i):we.EMPTY_NODE}l=f.equals(p)?e:Pf(e,n.filter.updateChild(a.getNode(),d,p,h,u,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function uj(n,e){return n.eventCache.isCompleteForChild(e)}function dj(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function MI(n,e,t,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=Re(t)?i:new vt(null).setTree(t,i);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const p=dj(0,e.serverCache.getNode().getImmediateChild(d),h);l=yy(n,l,new Je(d),p,r,s,o,a)}}),c.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&null===h.value;if(!u.hasChild(d)&&!f){const _=dj(0,e.serverCache.getNode().getImmediateChild(d),h);l=yy(n,l,new Je(d),_,r,s,o,a)}}),l}class qde{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new hI(i.getIndex()),s=function ade(n){return n.loadsAllData()?new hI(n.getIndex()):n.hasLimit()?new ode(n):new Af(n)}(i);this.processor_=function Bde(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(we.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(we.EMPTY_NODE,a.getNode(),null),u=new ua(l,o.isFullyInitialized(),r.filtersNodes()),d=new ua(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=fy(d,u),this.eventGenerator_=new yde(this.query_)}get query(){return this.query_}}function Yde(n,e){const t=Al(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Re(e)&&!t.getImmediateChild(ke(e)).isEmpty())?t.getChild(e):null}function hj(n){return 0===n.eventRegistrations_.length}function fj(n,e,t){const i=[];if(t){O(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,r);o&&i.push(o)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(o)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function pj(n,e,t,i){e.type===Ar.MERGE&&null!==e.source.queryId&&(O(Al(n.viewCache_),"We should always have a full cache before handling merges"),O(py(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function Hde(n,e,t,i,r){const s=new Lde;let o,a;if(t.type===Ar.OVERWRITE){const c=t;c.source.fromUser?o=xI(n,e,c.path,c.snap,i,r,s):(O(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Re(c.path),o=yy(n,e,c.path,c.snap,i,r,a,s))}else if(t.type===Ar.MERGE){const c=t;c.source.fromUser?o=function $de(n,e,t,i,r,s,o){let a=e;return i.foreach((l,c)=>{const u=At(t,l);uj(e,ke(u))&&(a=xI(n,a,u,c,r,s,o))}),i.foreach((l,c)=>{const u=At(t,l);uj(e,ke(u))||(a=xI(n,a,u,c,r,s,o))}),a}(n,e,c.path,c.children,i,r,s):(O(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=MI(n,e,c.path,c.children,i,r,a,s))}else if(t.type===Ar.ACK_USER_WRITE){const c=t;o=c.revert?function Wde(n,e,t,i,r,s){let o;if(null!=_y(i,t))return e;{const a=new SI(i,e,r),l=e.eventCache.getNode();let c;if(Re(t)||".priority"===ke(t)){let u;if(e.serverCache.isFullyInitialized())u=gy(i,Al(e));else{const d=e.serverCache.getNode();O(d instanceof we,"serverChildren would be complete if leaf node"),u=II(i,d)}u=u,c=n.filter.updateFullNode(l,u,s)}else{const u=ke(t);let d=DI(i,u,e.serverCache);null==d&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),c=null!=d?n.filter.updateChild(l,u,d,ht(t),a,s):e.eventCache.getNode().hasChild(u)?n.filter.updateChild(l,u,we.EMPTY_NODE,ht(t),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=gy(i,Al(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=_y(i,Qe()),Pf(e,c,o,n.filter.filtersNodes())}}(n,e,c.path,i,r,s):function zde(n,e,t,i,r,s,o){if(null!=_y(r,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=i.value){if(Re(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return yy(n,e,t,l.getNode().getChild(t),r,s,a,o);if(Re(t)){let c=new vt(null);return l.getNode().forEachChild(Cs,(u,d)=>{c=c.set(new Je(u),d)}),MI(n,e,t,c,r,s,a,o)}return e}{let c=new vt(null);return i.foreach((u,d)=>{const h=At(t,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),MI(n,e,t,c,r,s,a,o)}}(n,e,c.path,c.affectedTree,i,r,s)}else{if(t.type!==Ar.LISTEN_COMPLETE)throw Vu("Unknown operation type: "+t.type);o=function Gde(n,e,t,i,r){const s=e.serverCache;return cj(n,JH(e,s.getNode(),s.isFullyInitialized()||Re(t),s.isFiltered()),t,i,lj,r)}(n,e,t.path,i,s)}const l=s.getChanges();return function jde(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=py(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(QH(py(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,r,e,t,i);return function Ude(n,e){O(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),O(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),O(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,mj(n,s.changes,s.viewCache.eventCache.getNode(),null)}function mj(n,e,t,i){return function vde(n,e,t,i){const r=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function sde(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),Rf(n,r,"child_removed",e,i,t),Rf(n,r,"child_added",e,i,t),Rf(n,r,"child_moved",s,i,t),Rf(n,r,"child_changed",e,i,t),Rf(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let vy,wy;class gj{constructor(){this.views=new Map}}function AI(n,e,t,i){const r=e.source.queryId;if(null!==r){const s=n.views.get(r);return O(null!=s,"SyncTree gave us an op for an invalid query."),pj(s,e,t,i)}{let s=[];for(const o of n.views.values())s=s.concat(pj(o,e,t,i));return s}}function _j(n,e,t,i,r){const o=n.views.get(e._queryIdentifier);if(!o){let a=gy(t,r?i:null),l=!1;a?l=!0:i instanceof we?(a=II(t,i),l=!1):(a=we.EMPTY_NODE,l=!1);const c=fy(new ua(a,l,!1),new ua(i,r,!1));return new qde(e,c)}return o}function yj(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function ha(n,e){let t=null;for(const i of n.views.values())t=t||Yde(i,e);return t}function vj(n,e){return e._queryParams.loadsAllData()?by(n):n.views.get(e._queryIdentifier)}function bj(n,e){return null!=vj(n,e)}function fa(n){return null!=by(n)}function by(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let ohe=1;class wj{constructor(e){this.listenProvider_=e,this.syncPointTree_=new vt(null),this.pendingWriteTree_=function Nde(){return{visibleWrites:Zr.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function kI(n,e,t,i,r){return function Ede(n,e,t,i,r){O(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=Of(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?Xu(n,new Ml({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function pa(n,e,t=!1){const i=function Ide(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function Dde(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);O(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,o=n.allWrites.length-1;for(;r&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&Sde(a,i.path)?r=!1:Mr(i.path,a.path)&&(s=!0)),o--}return!!r&&(s?(function xde(n){n.visibleWrites=ij(n.allWrites,Mde,Qe()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=ej(n.visibleWrites,i.path):Mn(i.children,l=>{n.visibleWrites=ej(n.visibleWrites,At(i.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new vt(null);return null!=i.snap?s=s.set(Qe(),!0):Mn(i.children,o=>{s=s.set(new Je(o),!0)}),Xu(n,new hy(i.path,s,t))}return[]}function Nf(n,e,t){return Xu(n,new Ml({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Cy(n,e,t,i,r=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||bj(o,e))){const l=function ihe(n,e,t,i){const r=e._queryIdentifier,s=[];let o=[];const a=fa(n);if("default"===r)for(const[l,c]of n.views.entries())o=o.concat(fj(c,t,i)),hj(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=n.views.get(r);l&&(o=o.concat(fj(l,t,i)),hj(l)&&(n.views.delete(r),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!fa(n)&&s.push(new(function ehe(){return O(vy,"Reference.ts has not been loaded"),vy}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,i);(function the(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!r){const u=-1!==c.findIndex(h=>h._queryParams.loadsAllData()),d=n.syncPointTree_.findOnPath(s,(h,f)=>fa(f));if(u&&!d){const h=n.syncPointTree_.subtree(s);if(!h.isEmpty()){const f=function fhe(n){return n.fold((e,t,i)=>{if(t&&fa(t))return[by(t)];{let r=[];return t&&(r=yj(t)),Mn(i,(s,o)=>{r=r.concat(o)}),r}})}(h);for(let p=0;p<f.length;++p){const _=f[p],y=_.query,b=Ij(n,_);n.listenProvider_.startListening(Lf(y),Ff(n,y),b.hashFn,b.onComplete)}}}!d&&c.length>0&&!i&&(u?n.listenProvider_.stopListening(Lf(e),null):c.forEach(h=>{const f=n.queryToTagMap.get(Ty(h));n.listenProvider_.stopListening(Lf(h),f)}))}!function phe(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=Ty(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,c)}return a}function Cj(n,e,t,i){const r=PI(n,i);if(null!=r){const s=OI(r),o=s.path,a=s.queryId,l=gi(o,e);return NI(n,o,new Ml(bI(a),l,t))}return[]}function RI(n,e,t,i=!1){const r=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(r,(h,f)=>{const p=gi(h,r);s=s||ha(f,p),o=o||fa(f)});let l,a=n.syncPointTree_.get(r);a?(o=o||fa(a),s=s||ha(a,Qe())):(a=new gj,n.syncPointTree_=n.syncPointTree_.set(r,a)),null!=s?l=!0:(l=!1,s=we.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((f,p)=>{const _=ha(p,Qe());_&&(s=s.updateImmediateChild(f,_))}));const c=bj(a,e);if(!c&&!e._queryParams.loadsAllData()){const h=Ty(e);O(!n.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=function mhe(){return ohe++}();n.queryToTagMap.set(h,f),n.tagToQueryMap.set(f,h)}let d=function nhe(n,e,t,i,r,s){const o=_j(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function Xde(n,e){n.eventRegistrations_.push(e)}(o,t),function Zde(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(yt,(s,o)=>{i.push(qu(s,o))}),t.isFullyInitialized()&&i.push(QH(t.getNode())),mj(n,i,t.getNode(),e)}(o,t)}(a,e,t,my(n.pendingWriteTree_,r),s,l);if(!c&&!o&&!i){const h=vj(a,e);d=d.concat(function ghe(n,e,t){const i=e._path,r=Ff(n,e),s=Ij(n,t),o=n.listenProvider_.startListening(Lf(e),r,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(i);if(r)O(!fa(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,d)=>{if(!Re(c)&&u&&fa(u))return[by(u).query];{let h=[];return u&&(h=h.concat(yj(u).map(f=>f.query))),Mn(d,(f,p)=>{h=h.concat(p)}),h}});for(let c=0;c<l.length;++c){const u=l[c];n.listenProvider_.stopListening(Lf(u),Ff(n,u))}}return o}(n,e,h))}return d}function Ey(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=ha(a,gi(o,e));if(c)return c});return rj(r,e,s,t,!0)}function Xu(n,e){return Ej(e,n.syncPointTree_,null,my(n.pendingWriteTree_,Qe()))}function Ej(n,e,t,i){if(Re(n.path))return Tj(n,e,t,i);{const r=e.get(Qe());null==t&&null!=r&&(t=ha(r,Qe()));let s=[];const o=ke(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,u=oj(i,o);s=s.concat(Ej(a,l,c,u))}return r&&(s=s.concat(AI(r,n,i,t))),s}}function Tj(n,e,t,i){const r=e.get(Qe());null==t&&null!=r&&(t=ha(r,Qe()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=oj(i,o),u=n.operationForChild(o);u&&(s=s.concat(Tj(u,a,l,c)))}),r&&(s=s.concat(AI(r,n,i,t))),s}function Ij(n,e){const t=e.query,i=Ff(n,t);return{hashFn:()=>(function Kde(n){return n.viewCache_.serverCache.getNode()}(e)||we.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function uhe(n,e,t){const i=PI(n,t);if(i){const r=OI(i),s=r.path,o=r.queryId,a=gi(s,e);return NI(n,s,new kf(bI(o),a))}return[]}(n,t._path,i):function che(n,e){return Xu(n,new kf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function cue(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return Cy(n,t,null,s)}}}}function Ff(n,e){const t=Ty(e);return n.queryToTagMap.get(t)}function Ty(n){return n._path.toString()+"$"+n._queryIdentifier}function PI(n,e){return n.tagToQueryMap.get(e)}function OI(n){const e=n.indexOf("$");return O(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Je(n.substr(0,e))}}function NI(n,e,t){const i=n.syncPointTree_.get(e);return O(i,"Missing sync point for query tag that we're tracking"),AI(i,t,my(n.pendingWriteTree_,e),null)}function Lf(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function she(){return O(wy,"Reference.ts has not been loaded"),wy}())(n._repo,n._path):n}class FI{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new FI(t)}node(){return this.node_}}class LI{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=At(this.path_,e);return new LI(this.syncTree_,t)}node(){return Ey(this.syncTree_,this.path_)}}const Dj=function(n,e,t){return n&&"object"==typeof n?(O(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?yhe(n[".sv"],e,t):"object"==typeof n[".sv"]?vhe(n[".sv"],e):void O(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},yhe=function(n,e,t){if("timestamp"===n)return t.timestamp;O(!1,"Unexpected server value: "+n)},vhe=function(n,e,t){n.hasOwnProperty("increment")||O(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&O(!1,"Unexpected increment value: "+i);const r=e.node();if(O(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return"number"!=typeof o?i:o+i},VI=function(n,e,t){return BI(n,new FI(e),t)};function BI(n,e,t){const i=n.getPriority().val(),r=Dj(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=Dj(o.getValue(),e,t);return a!==o.getValue()||r!==o.getPriority().val()?new zu(a,Ft(r)):n}{const o=n;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new zu(r))),o.forEachChild(yt,(a,l)=>{const c=BI(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class UI{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function Iy(n,e){let t=e instanceof Je?e:new Je(e),i=n,r=ke(t);for(;null!==r;){const s=Bu(i.node.children,r)||{children:{},childCount:0};i=new UI(r,i,s),t=ht(t),r=ke(t)}return i}function Rl(n){return n.node.value}function HI(n,e){n.node.value=e,jI(n)}function xj(n){return n.node.childCount>0}function Dy(n,e){Mn(n.node.children,(t,i)=>{e(new UI(t,n,i))})}function Mj(n,e,t,i){t&&!i&&e(n),Dy(n,r=>{Mj(r,e,!0,i)}),t&&i&&e(n)}function Vf(n){return new Je(null===n.parent?n.name:Vf(n.parent)+"/"+n.name)}function jI(n){null!==n.parent&&function Che(n,e,t){const i=function bhe(n){return void 0===Rl(n)&&!xj(n)}(t),r=Qr(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,jI(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,jI(n))}(n.parent,n.name,n)}const Ehe=/[\[\].#$\/\u0000-\u001F\u007F]/,The=/[\[\].#$\u0000-\u001F\u007F]/,$I=10485760,Sy=function(n){return"string"==typeof n&&0!==n.length&&!Ehe.test(n)},Aj=function(n){return"string"==typeof n&&0!==n.length&&!The.test(n)},Es=function(n,e,t,i){i&&void 0===e||Uf(Uu(n,"value"),e,t)},Uf=function(n,e,t){const i=t instanceof Je?new Uue(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Sl(i));if("function"==typeof e)throw new Error(n+"contains a function "+Sl(i)+" with contents = "+e.toString());if(ey(e))throw new Error(n+"contains "+e.toString()+" "+Sl(i));if("string"==typeof e&&e.length>$I/3&&X_(e)>$I)throw new Error(n+"contains a string greater than "+$I+" utf8 bytes "+Sl(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,s=!1;if(Mn(e,(o,a)=>{if(".value"===o)r=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!Sy(o)))throw new Error(n+" contains an invalid key ("+o+") "+Sl(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Hue(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=X_(e),FH(n)})(i,o),Uf(n,a,i),function jue(n){const e=n.parts_.pop();n.byteLength_-=X_(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+Sl(i)+" in addition to actual children.")}},GI=function(n,e,t,i){if(!(i&&void 0===t||Aj(t)))throw new Error(Uu(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ts=function(n,e){if(".info"===ke(e))throw new Error(n+" failed = Can't modify data under /.info/")};class xhe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function xy(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null!==t&&!rI(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function Pj(n,e,t){xy(n,t),Oj(n,i=>rI(i,e))}function ar(n,e,t){xy(n,t),Oj(n,i=>Mr(i,e)||Mr(e,i))}function Oj(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(Mhe(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Mhe(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();Il&&xn("event: "+t.toString()),ju(i)}}}class khe{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new xhe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=dy(),this.transactionQueueTree_=new UI,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Fj(n){const t=n.infoData_.getNode(new Je(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function jf(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Fj(n)})}function Lj(n,e,t,i,r){n.dataUpdateCount++;const s=new Je(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(r)if(i){const l=Q_(t,c=>Ft(c));o=function dhe(n,e,t,i){const r=PI(n,i);if(r){const s=OI(r),o=s.path,a=s.queryId,l=gi(o,e),c=vt.fromObject(t);return NI(n,o,new Qu(bI(a),l,c))}return[]}(n.serverSyncTree_,s,l,r)}else{const l=Ft(t);o=Cj(n.serverSyncTree_,s,l,r)}else if(i){const l=Q_(t,c=>Ft(c));o=function lhe(n,e,t){const i=vt.fromObject(t);return Xu(n,new Qu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,s,l)}else{const l=Ft(t);o=Nf(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Ju(n,s)),ar(n.eventQueue_,a,o)}function Vj(n,e){WI(n,"connected",e),!1===e&&function Fhe(n){Zu(n,"onDisconnectEvents");const e=jf(n),t=dy();_I(n.onDisconnect_,Qe(),(r,s)=>{const o=function(n,e,t,i){return BI(e,new LI(t,n),i)}(r,s,n.serverSyncTree_,e);Ku(t,r,o)});let i=[];_I(t,Qe(),(r,s)=>{i=i.concat(Nf(n.serverSyncTree_,r,s));const o=YI(n,r);Ju(n,o)}),n.onDisconnect_=dy(),ar(n.eventQueue_,Qe(),i)}(n)}function WI(n,e,t){const i=new Je("/.info/"+e),r=Ft(t);n.infoData_.updateSnapshot(i,r);const s=Nf(n.infoSyncTree_,i,r);ar(n.eventQueue_,i,s)}function My(n){return n.nextWriteId_++}function qI(n,e,t,i,r){Zu(n,"set",{path:e.toString(),value:t,priority:i});const s=jf(n),o=Ft(t,i),a=Ey(n.serverSyncTree_,e),l=VI(o,a,s),c=My(n),u=kI(n.serverSyncTree_,e,l,c,!0);xy(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(h,f)=>{const p="ok"===h;p||ri("set at "+e+" failed: "+h);const _=pa(n.serverSyncTree_,c,!p);ar(n.eventQueue_,e,_),function ma(n,e,t,i){e&&ju(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let s=r;i&&(s+=": "+i);const o=new Error(s);o.code=r,e(o)}})}(0,r,h,f)});const d=YI(n,e);Ju(n,d),ar(n.eventQueue_,d,[])}function KI(n,e,t){let i;i=".info"===ke(e._path)?Cy(n.infoSyncTree_,e,t):Cy(n.serverSyncTree_,e,t),Pj(n.eventQueue_,e._path,i)}function Zu(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),xn(t,...e)}function QI(n,e,t){return Ey(n.serverSyncTree_,e,t)||we.EMPTY_NODE}function Ay(n,e=n.transactionQueueTree_){if(e||ky(n,e),Rl(e)){const t=jj(n,e);O(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function $he(n,e,t){const i=t.map(c=>c.currentWriteId),r=QI(n,e,i);let s=r;const o=r.hash();for(let c=0;c<t.length;c++){const u=t[c];O(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=gi(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{Zu(n,"transaction put response",{path:l.toString(),status:c});let u=[];if("ok"===c){const d=[];for(let h=0;h<t.length;h++)t[h].status=2,u=u.concat(pa(n.serverSyncTree_,t[h].currentWriteId)),t[h].onComplete&&d.push(()=>t[h].onComplete(null,!0,t[h].currentOutputSnapshotResolved)),t[h].unwatcher();ky(n,Iy(n.transactionQueueTree_,e)),Ay(n,n.transactionQueueTree_),ar(n.eventQueue_,e,u);for(let h=0;h<d.length;h++)ju(d[h])}else{if("datastale"===c)for(let d=0;d<t.length;d++)t[d].status=3===t[d].status?4:0;else{ri("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=c}Ju(n,e)}},o)}(n,Vf(e),t)}else xj(e)&&Dy(e,t=>{Ay(n,t)})}function Ju(n,e){const t=Hj(n,e),i=Vf(t);return function zhe(n,e,t){if(0===e.length)return;const i=[];let r=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=gi(t,l.path);let d,u=!1;if(O(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,d=l.abortReason,r=r.concat(pa(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)u=!0,d="maxretry",r=r.concat(pa(n.serverSyncTree_,l.currentWriteId,!0));else{const h=QI(n,l.path,o);l.currentInputSnapshot=h;const f=e[a].update(h.val());if(void 0!==f){Uf("transaction failed: Data returned ",f,l.path);let p=Ft(f);"object"==typeof f&&null!=f&&Qr(f,".priority")||(p=p.updatePriority(h.getPriority()));const y=l.currentWriteId,b=jf(n),v=VI(p,h,b);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=v,l.currentWriteId=My(n),o.splice(o.indexOf(y),1),r=r.concat(kI(n.serverSyncTree_,l.path,v,l.currentWriteId,l.applyLocally)),r=r.concat(pa(n.serverSyncTree_,y,!0))}else u=!0,d="nodata",r=r.concat(pa(n.serverSyncTree_,l.currentWriteId,!0))}ar(n.eventQueue_,t,r),r=[],u&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&i.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}ky(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)ju(i[a]);Ay(n,n.transactionQueueTree_)}(n,jj(n,t),i),i}function Hj(n,e){let t,i=n.transactionQueueTree_;for(t=ke(e);null!==t&&void 0===Rl(i);)i=Iy(i,t),t=ke(e=ht(e));return i}function jj(n,e){const t=[];return $j(n,e,t),t.sort((i,r)=>i.order-r.order),t}function $j(n,e,t){const i=Rl(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);Dy(e,r=>{$j(n,r,t)})}function ky(n,e){const t=Rl(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,HI(e,t.length>0?t:void 0)}Dy(e,i=>{ky(n,i)})}function YI(n,e){const t=Vf(Hj(n,e)),i=Iy(n.transactionQueueTree_,e);return function whe(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{XI(n,r)}),XI(n,i),Mj(i,r=>{XI(n,r)}),t}function XI(n,e){const t=Rl(e);if(t){const i=[];let r=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?(O(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(O(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(pa(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&i.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?HI(e,void 0):t.length=s+1,ar(n.eventQueue_,Vf(e),r);for(let o=0;o<i.length;o++)ju(i[o])}}const ZI=function(n,e){const t=qhe(n),i=t.namespace;return"firebase.com"===t.domain&&bs(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&bs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ri("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new XT(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new Je(t.pathString)}},qhe=function(n){let e="",t="",i="",r="",s="",o=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");-1===u&&(u=n.length);let d=n.indexOf("?");-1===d&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(r=function Ghe(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(s){}e+="/"+r}return e}(n.substring(u,d)));const h=function Whe(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):ri(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,d)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if("localhost"===f.toLowerCase())t="localhost";else if(f.split(".").length<=2)t=f;else{const p=e.indexOf(".");i=e.substring(0,p).toLowerCase(),t=e.substring(p+1),s=i}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:t,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};class zj{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+_n(this.snapshot.exportVal())}}class Gj{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class JI{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return O(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class lr{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return Re(this._path)?null:iI(this._path)}get ref(){return new Jr(this._repo,this._path)}get _queryIdentifier(){const e=XH(this._queryParams),t=KT(e);return"{}"===t?"default":t}get _queryObject(){return XH(this._queryParams)}isEqual(e){if(!((e=Ce(e))instanceof lr))return!1;const t=this._repo===e._repo,i=rI(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Vue(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Jr extends lr{constructor(e,t){super(e,t,new fI,!1)}get parent(){const e=NH(this._path);return null===e?null:new Jr(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Pl{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Je(e),i=ed(this.ref,e);return new Pl(this._node.getChild(t),i,yt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new Pl(r,ed(this.ref,i),yt)))}hasChild(e){const t=new Je(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Et(n,e){return(n=Ce(n))._checkNotDeleted("ref"),void 0!==e?ed(n._root,e):n._root}function ed(n,e){return null===ke((n=Ce(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),GI("child","path",t,!1)):GI("child","path",e,!1),new Jr(n._repo,At(n._path,e));var t}function eD(n,e){n=Ce(n),Ts("push",n._path),Es("push",e,n._path,!0);const t=Fj(n._repo),i=rde(t),r=ed(n,i),s=ed(n,i);let o;return o=null!=e?Is(s,e).then(()=>s):Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}function Wj(n){return Ts("remove",n._path),Is(n,null)}function Is(n,e){n=Ce(n),Ts("set",n._path),Es("set",e,n._path,!1);const t=new bl;return qI(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function tD(n){n=Ce(n);const e=new JI(()=>{}),t=new $f(e);return function Ohe(n,e,t){const i=function hhe(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(c,u)=>{const d=gi(c,t);i=i||ha(u,d)});let r=n.syncPointTree_.get(t);r?i=i||ha(r,Qe()):(r=new gj,n.syncPointTree_=n.syncPointTree_.set(t,r));const s=null!=i,o=s?new ua(i,!0,!1):null;return function Qde(n){return py(n.viewCache_)}(_j(r,e,my(n.pendingWriteTree_,e._path),s?o.getNode():we.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=i?Promise.resolve(i):n.server_.get(e).then(r=>{const s=Ft(r).withIndex(e._queryParams.getIndex());let o;if(RI(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=Nf(n.serverSyncTree_,e._path,s);else{const a=Ff(n.serverSyncTree_,e);o=Cj(n.serverSyncTree_,e._path,s,a)}return ar(n.eventQueue_,e._path,o),Cy(n.serverSyncTree_,e,t,null,!0),s},r=>(Zu(n,"get for query "+_n(e)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,t).then(i=>new Pl(i,new Jr(n._repo,n._path),n._queryParams.getIndex()))}class $f{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new zj("value",this,new Pl(e.snapshotNode,new Jr(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Gj(this,e,t):null}matches(e){return e instanceof $f&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Oy{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Gj(this,e,t):null}createEvent(e,t){O(null!=e.childName,"Child events should have a childName.");const i=ed(new Jr(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new zj(e.type,this,new Pl(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Oy&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function kr(n,e,t,i){return function zf(n,e,t,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const l=t,c=(u,d)=>{KI(n._repo,n,a),l(u,d)};c.userCallback=t.userCallback,c.context=t.context,t=c}const o=new JI(t,s||void 0),a="value"===e?new $f(o):new Oy(e,o);return function Uhe(n,e,t){let i;i=".info"===ke(e._path)?RI(n.infoSyncTree_,e,t):RI(n.serverSyncTree_,e,t),Pj(n.eventQueue_,e._path,i)}(n._repo,n,a),()=>KI(n._repo,n,a)}(n,"value",e,t,i)}(function Jde(n){O(!vy,"__referenceConstructor has already been defined"),vy=n})(Jr),function rhe(n){O(!wy,"__referenceConstructor has already been defined"),wy=n}(Jr);const nD={};function ofe(n,e,t,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||bs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),xn("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=ZI(s,r),a=o.repoInfo;"undefined"!=typeof process&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=ZI(s,r),a=o.repoInfo):l=!o.repoInfo.secure;const u=r&&l?new Ef(Ef.OWNER):new fue(n.name,n.options,e);(function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Sy(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Aj(n)}(t))throw new Error(Uu(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",o),Re(o.path)||bs("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function lfe(n,e,t,i){let r=nD[e.name];r||(r={},nD[e.name]=r);let s=r[n.toURLString()];return s&&bs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new khe(n,false,t,i),r[n.toURLString()]=s,s}(a,n,u,new hue(n.name,t));return new ufe(d,n)}class ufe{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Rhe(n,e,t){if(n.stats_=eI(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new uy(n.repoInfo_,(i,r,s,o)=>{Lj(n,i,r,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Vj(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{_n(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new xl(n.repoInfo_,e,(i,r,s,o)=>{Lj(n,i,r,s,o)},i=>{Vj(n,i)},i=>{!function Phe(n,e){Mn(e,(t,i)=>{WI(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function gue(n,e){const t=n.toString();return JT[t]||(JT[t]=e()),JT[t]}(n.repoInfo_,()=>new _de(n.stats_,n.server_)),n.infoData_=new hde,n.infoSyncTree_=new wj({startListening:(i,r,s,o)=>{let a=[];const l=n.infoData_.getNode(i._path);return l.isEmpty()||(a=Nf(n.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),WI(n,"connected",!1),n.serverSyncTree_=new wj({startListening:(i,r,s,o)=>(n.server_.listen(i,s,r,(a,l)=>{const c=o(a,l);ar(n.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Jr(this._repo,Qe())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function afe(n,e){const t=nD[e];(!t||t[n.key]!==n)&&bs(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function Uj(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&bs("Cannot call "+e+" on a deleted database.")}}function Fi(n=aa(),e){return Yr(n,"database").getImmediate({identifier:e})}xl.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},xl.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function dfe(n){(function tue(n){GT=n})(vs),cn(new Zt("database",(e,{instanceIdentifier:t})=>ofe(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),$e(XU,"0.13.6",n),$e(XU,"0.13.6","esm2017")}();class pfe{constructor(e,t){this._delegate=e,this.firebase=t,J_(e,new Zt("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),$U(this._delegate)))}_getService(e,t=El){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&"EXPLICIT"===(null===(i=r.getComponent())||void 0===i?void 0:i.instantiationMode)&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=El){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){J_(this._delegate,e)}_addOrOverwriteComponent(e){jU(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Xj=new Sr("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),_fe=function Zj(){const n=function gfe(n){const e={},t={__esModule:!0,initializeApp:function s(c,u={}){const d=xr(c,u);if(Qr(e,d.name))return e[d.name];const h=new n(d,t);return e[d.name]=h,h},app:r,registerVersion:$e,setLogLevel:GU,onLog:zU,apps:null,SDK_VERSION:vs,INTERNAL:{registerComponent:function a(c){const u=c.name,d=u.replace("-compat","");if(cn(c)&&"PUBLIC"===c.type){const h=(f=r())=>{if("function"!=typeof f[d])throw Xj.create("invalid-app-argument",{appName:u});return f[d]()};void 0!==c.serviceProps&&df(h,c.serviceProps),t[d]=h,n.prototype[d]=function(...f){return this._getService.bind(this,u).apply(this,c.multipleInstances?f:[])}}return"PUBLIC"===c.type?t[d]:null},removeApp:function i(c){delete e[c]},useAsService:function l(c,u){return"serverAuth"===u?null:u},modularAPIs:Zd}};function r(c){if(!Qr(e,c=c||El))throw Xj.create("no-app",{appName:c});return e[c]}return t.default=t,Object.defineProperty(t,"apps",{get:function o(){return Object.keys(e).map(c=>e[c])}}),r.App=n,t}(pfe);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:Zj,extendNamespace:function e(t){df(n,t)},createSubscribe:OU,ErrorFactory:Sr,deepExtend:df}),n}(),Jj=new ra("@firebase/app-compat");if(function Ale(){return"object"==typeof self&&self.self===self}()&&void 0!==self.firebase){Jj.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const n=self.firebase.SDK_VERSION;n&&n.indexOf("LITE")>=0&&Jj.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Li=_fe;!function bfe(n){$e("@firebase/app-compat","0.1.34",n)}(),Li.registerVersion("firebase","9.10.0","app-compat");var Y,Efe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},uo={},iD=iD||{},me=Efe||self;function Ny(){}function Fy(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Gf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var rD="closure_uid_"+(1e9*Math.random()>>>0),Ife=0;function Dfe(n,e,t){return n.call.apply(n.bind,arguments)}function Sfe(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function si(n,e,t){return(si=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Dfe:Sfe).apply(null,arguments)}function Ly(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function jn(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function _a(){this.s=this.s,this.o=this.o}var Mfe={};_a.prototype.s=!1,_a.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Tfe(n){return Object.prototype.hasOwnProperty.call(n,rD)&&n[rD]||(n[rD]=++Ife)}(this);delete Mfe[n]}},_a.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const e$=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function sD(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function t$(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(Fy(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let o=0;o<s;o++)n[r+o]=i[o]}else n.push(i)}}function oi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}oi.prototype.h=function(){this.defaultPrevented=!0};var Afe=function(){if(!me.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{me.addEventListener("test",Ny,e),me.removeEventListener("test",Ny,e)}catch(t){}return n}();function Vy(n){return/^[\s\xa0]*$/.test(n)}var n$=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function oD(n,e){return n<e?-1:n>e?1:0}function By(){var n=me.navigator;return n&&(n=n.userAgent)?n:""}function Ds(n){return-1!=By().indexOf(n)}function aD(n){return aD[" "](n),n}aD[" "]=Ny;var Uy,n,Rfe=Ds("Opera"),td=Ds("Trident")||Ds("MSIE"),i$=Ds("Edge"),lD=i$||td,r$=Ds("Gecko")&&!(-1!=By().toLowerCase().indexOf("webkit")&&!Ds("Edge"))&&!(Ds("Trident")||Ds("MSIE"))&&!Ds("Edge"),Pfe=-1!=By().toLowerCase().indexOf("webkit")&&!Ds("Edge");function s$(){var n=me.document;return n?n.documentMode:void 0}e:{var cD="",uD=(n=By(),r$?/rv:([^\);]+)(\)|;)/.exec(n):i$?/Edge\/([\d\.]+)/.exec(n):td?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Pfe?/WebKit\/(\S+)/.exec(n):Rfe?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(uD&&(cD=uD?uD[1]:""),td){var dD=s$();if(null!=dD&&dD>parseFloat(cD)){Uy=String(dD);break e}}Uy=cD}var Ofe={};var Ffe=me.document&&td&&(s$()||parseInt(Uy,10))||void 0;function Wf(n,e){if(oi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(r$){e:{try{aD(e.nodeName);var r=!0;break e}catch(s){}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Lfe[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Wf.X.h.call(this)}}jn(Wf,oi);var Lfe={2:"touch",3:"pen",4:"mouse"};Wf.prototype.h=function(){Wf.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var qf="closure_listenable_"+(1e6*Math.random()|0),Vfe=0;function Bfe(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ha=r,this.key=++Vfe,this.ba=this.ea=!1}function Hy(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function fD(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function a$(n){const e={};for(const t in n)e[t]=n[t];return e}const l$="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function c$(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let s=0;s<l$.length;s++)t=l$[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function jy(n){this.src=n,this.g={},this.h=0}function pD(n,e){var t=e.type;if(t in n.g){var s,i=n.g[t],r=e$(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(Hy(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function mD(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==i)return r}return-1}jy.prototype.add=function(n,e,t,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=mD(n,e,i,r);return-1<o?(e=n[o],t||(e.ea=!1)):((e=new Bfe(e,this.src,s,!!i,r)).ea=t,n.push(e)),e};var gD="closure_lm_"+(1e6*Math.random()|0),_D={};function u$(n,e,t,i,r){if(i&&i.once)return h$(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)u$(n,e[s],t,i,r);return null}return t=wD(t),n&&n[qf]?n.N(e,t,Gf(i)?!!i.capture:!!i,r):d$(n,e,t,!1,i,r)}function d$(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var o=Gf(r)?!!r.capture:!!r,a=vD(n);if(a||(n[gD]=a=new jy(n)),(t=a.add(e,t,i,o,s)).proxy)return t;if(i=function Ufe(){const e=Hfe;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)Afe||(r=o),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(p$(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function h$(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)h$(n,e[s],t,i,r);return null}return t=wD(t),n&&n[qf]?n.O(e,t,Gf(i)?!!i.capture:!!i,r):d$(n,e,t,!0,i,r)}function f$(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)f$(n,e[s],t,i,r);else i=Gf(i)?!!i.capture:!!i,t=wD(t),n&&n[qf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=mD(s=n.g[e],t,i,r))&&(Hy(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=vD(n))&&(e=n.g[e.toString()],n=-1,e&&(n=mD(e,t,i,r)),(t=-1<n?e[n]:null)&&yD(t))}function yD(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[qf])pD(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(p$(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=vD(e))?(pD(t,n),0==t.h&&(t.src=null,e[gD]=null)):Hy(n)}}}function p$(n){return n in _D?_D[n]:_D[n]="on"+n}function Hfe(n,e){if(n.ba)n=!0;else{e=new Wf(e,this);var t=n.listener,i=n.ha||n.src;n.ea&&yD(n),n=t.call(i,e)}return n}function vD(n){return(n=n[gD])instanceof jy?n:null}var bD="__closure_events_fn_"+(1e9*Math.random()>>>0);function wD(n){return"function"==typeof n?n:(n[bD]||(n[bD]=function(e){return n.handleEvent(e)}),n[bD])}function An(){_a.call(this),this.i=new jy(this),this.P=this,this.I=null}function $n(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new oi(e,n);else if(e instanceof oi)e.target=e.target||n;else{var r=e;c$(e=new oi(i,n),r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];r=$y(o,i,!0,e)&&r}if(r=$y(o=e.g=n,i,!0,e)&&r,r=$y(o,i,!1,e)&&r,t)for(s=0;s<t.length;s++)r=$y(o=e.g=t[s],i,!1,e)&&r}function $y(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==t){var a=o.listener,l=o.ha||o.src;o.ea&&pD(n.i,o),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}jn(An,_a),An.prototype[qf]=!0,An.prototype.removeEventListener=function(n,e,t,i){f$(this,n,e,t,i)},An.prototype.M=function(){if(An.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)Hy(t[i]);delete n.g[e],n.h--}}this.I=null},An.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},An.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var CD=me.JSON.stringify;function jfe(){var n=_$;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var ED,m$=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new zfe,n=>n.reset());class zfe{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Gfe(n){me.setTimeout(()=>{throw n},0)}function g$(n,e){ED||function Wfe(){var n=me.Promise.resolve(void 0);ED=function(){n.then(qfe)}}(),TD||(ED(),TD=!0),_$.add(n,e)}var TD=!1,_$=new class $fe{constructor(){this.h=this.g=null}add(e,t){const i=m$.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function qfe(){for(var n;n=jfe();){try{n.h.call(n.g)}catch(t){Gfe(t)}var e=m$;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}TD=!1}function zy(n,e){An.call(this),this.h=n||1,this.g=e||me,this.j=si(this.kb,this),this.l=Date.now()}function ID(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function DD(n,e,t){if("function"==typeof n)t&&(n=si(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=si(n.handleEvent,n)}return 2147483647<Number(e)?-1:me.setTimeout(n,e||0)}function y$(n){n.g=DD(()=>{n.g=null,n.i&&(n.i=!1,y$(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}jn(zy,An),(Y=zy.prototype).ca=!1,Y.R=null,Y.kb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),$n(this,"tick"),this.ca&&(ID(this),this.start()))}},Y.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Y.M=function(){zy.X.M.call(this),ID(this),delete this.g};class Kfe extends _a{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:y$(this)}M(){super.M(),this.g&&(me.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kf(n){_a.call(this),this.h=n,this.g={}}jn(Kf,_a);var v$=[];function b$(n,e,t,i){Array.isArray(t)||(t&&(v$[0]=t.toString()),t=v$);for(var r=0;r<t.length;r++){var s=u$(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function w$(n){fD(n.g,function(e,t){this.g.hasOwnProperty(t)&&yD(e)},n),n.g={}}function Gy(){this.g=!0}function nd(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Zfe(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return CD(t)}catch(a){return e}}(n,t)+(i?" "+i:"")})}Kf.prototype.M=function(){Kf.X.M.call(this),w$(this)},Kf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Gy.prototype.Aa=function(){this.g=!1},Gy.prototype.info=function(){};var Ol={},C$=null;function Wy(){return C$=C$||new An}function E$(n){oi.call(this,Ol.Oa,n)}function Qf(n){const e=Wy();$n(e,new E$(e,n))}function T$(n,e){oi.call(this,Ol.STAT_EVENT,n),this.stat=e}function _i(n){const e=Wy();$n(e,new T$(e,n))}function I$(n,e){oi.call(this,Ol.Pa,n),this.size=e}function Yf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return me.setTimeout(function(){n()},e)}Ol.Oa="serverreachability",jn(E$,oi),Ol.STAT_EVENT="statevent",jn(T$,oi),Ol.Pa="timingevent",jn(I$,oi);var qy={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},D$={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function SD(){}function x$(){}SD.prototype.h=null;var AD,Xf={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function xD(){oi.call(this,"d")}function MD(){oi.call(this,"c")}function Ky(){}function Zf(n,e,t,i){this.l=n,this.j=e,this.m=t,this.U=i||1,this.S=new Kf(this),this.O=Jfe,this.T=new zy(n=lD?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new M$}function M$(){this.i=null,this.g="",this.h=!1}jn(xD,oi),jn(MD,oi),jn(Ky,SD),Ky.prototype.g=function(){return new XMLHttpRequest},Ky.prototype.i=function(){return{}},AD=new Ky;var Jfe=45e3,kD={},Qy={};function RD(n,e,t){n.K=1,n.v=Jy(ho(e)),n.s=t,n.P=!0,A$(n,null)}function A$(n,e){n.F=Date.now(),Jf(n),n.A=ho(n.v);var t=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),U$(t.i,"t",i),n.C=0,t=n.l.H,n.h=new M$,n.g=uz(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Kfe(si(n.Ka,n,n.g),n.N)),b$(n.S,n.g,"readystatechange",n.hb),e=n.H?a$(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Qf(1),function Qfe(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.U,n.s)}function k$(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function R$(n,e,t){let r,i=!0;for(;!n.I&&n.C<t.length;){if(r=epe(n,t),r==Qy){4==e&&(n.o=4,_i(14),i=!1),nd(n.j,n.m,null,"[Incomplete Response]");break}if(r==kD){n.o=4,_i(15),nd(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}nd(n.j,n.m,r,null),PD(n,r)}k$(n)&&r!=Qy&&r!=kD&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,_i(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),HD(e),e.K=!0,_i(11))):(nd(n.j,n.m,t,"[Invalid Chunked Response]"),Nl(n),ep(n))}function epe(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?Qy:(t=Number(e.substring(t,i)),isNaN(t)?kD:(i+=1)+t>e.length?Qy:(e=e.substr(i,t),n.C=i+t,e))}function Jf(n){n.V=Date.now()+n.O,P$(n,n.O)}function P$(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Yf(si(n.fb,n),e)}function Yy(n){n.B&&(me.clearTimeout(n.B),n.B=null)}function ep(n){0==n.l.G||n.I||oz(n.l,n)}function Nl(n){Yy(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,ID(n.T),w$(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function PD(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||OD(t.h,n)))if(!n.J&&OD(t.h,n)&&3==t.G){try{var i=t.Fa.g.parse(e)}catch(c){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0])e:if(t.u)t.Ba=r[1],0<t.Ba-t.T&&37500>r[2]&&t.L&&0==t.A&&!t.v&&(t.v=Yf(si(t.bb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;sv(t),iv(t)}UD(t),_i(18)}if(1>=$$(t.h)&&t.ja){try{t.ja()}catch(c){}t.ja=void 0}}else Ll(t,11)}else if((n.J||t.g==n)&&sv(t),!Vy(e))for(r=t.Fa.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(t.T=c[0],c=c[1],2==t.G)if("c"==c[0]){t.I=c[1],t.ka=c[2];const u=c[3];null!=u&&(t.ma=u,t.j.info("VER="+t.ma));const d=c[4];null!=d&&(t.Ca=d,t.j.info("SVER="+t.Ca));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(t.J=i=1.5*h,t.j.info("backChannelRequestTimeoutMs_="+i)),i=t;const f=n.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=i.h;s.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ND(s,s.h),s.h=null))}if(i.D){const _=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(i.za=_,kt(i.F,i.D,_))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var o=n;if((i=t).sa=cz(i,i.H?i.ka:null,i.V),o.J){z$(i.h,o);var a=o,l=i.J;l&&a.setTimeout(l),a.B&&(Yy(a),Jf(a)),i.g=o}else rz(i);0<t.i.length&&rv(t)}else"stop"!=c[0]&&"close"!=c[0]||Ll(t,7);else 3==t.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Ll(t,7):BD(t):"noop"!=c[0]&&t.l&&t.l.wa(c),t.A=0)}Qf(4)}catch(c){}}function O$(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Fy(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function npe(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(Fy(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function tpe(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Fy(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}(Y=Zf.prototype).setTimeout=function(n){this.O=n},Y.hb=function(n){n=n.target;const e=this.L;e&&3==fo(n)?e.l():this.Ka(n)},Y.Ka=function(n){try{if(n==this.g)e:{const u=fo(this.g);var e=this.g.Ea();const d=this.g.aa();if(!(3>u)&&(3!=u||lD||this.g&&(this.h.h||this.g.fa()||Z$(this.g)))){this.I||4!=u||7==e||Qf(8==e||0>=d?3:2),Yy(this);var t=this.g.aa();this.Y=t;t:if(k$(this)){var i=Z$(this.g);n="";var r=i.length,s=4==fo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Nl(this),ep(this);var o="";break t}this.h.i=new me.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==t,function Yfe(n,e,t,i,r,s,o){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.U,u,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vy(a)){var c=a;break t}}c=null}if(!(t=c)){this.i=!1,this.o=3,_i(12),Nl(this),ep(this);break e}nd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,PD(this,t)}this.P?(R$(this,u,o),lD&&this.i&&3==u&&(b$(this.S,this.T,"tick",this.gb),this.T.start())):(nd(this.j,this.m,o,null),PD(this,o)),4==u&&Nl(this),this.i&&!this.I&&(4==u?oz(this.l,this):(this.i=!1,Jf(this)))}else 400==t&&0<o.indexOf("Unknown SID")?(this.o=3,_i(12)):(this.o=0,_i(13)),Nl(this),ep(this)}}}catch(u){}},Y.gb=function(){if(this.g){var n=fo(this.g),e=this.g.fa();this.C<e.length&&(Yy(this),R$(this,n,e),this.i&&4!=n&&Jf(this))}},Y.cancel=function(){this.I=!0,Nl(this)},Y.fb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Xfe(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Qf(3),_i(17)),Nl(this),this.o=2,ep(this)):P$(this,this.V-n)};var N$=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fl(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Fl){this.h=void 0!==e?e:n.h,Xy(this,n.j),this.s=n.s,this.g=n.g,Zy(this,n.m),this.l=n.l,e=n.i;var t=new ip;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),F$(this,t),this.o=n.o}else n&&(t=String(n).match(N$))?(this.h=!!e,Xy(this,t[1]||"",!0),this.s=tp(t[2]||""),this.g=tp(t[3]||"",!0),Zy(this,t[4]),this.l=tp(t[5]||"",!0),F$(this,t[6]||"",!0),this.o=tp(t[7]||"")):(this.h=!!e,this.i=new ip(null,this.h))}function ho(n){return new Fl(n)}function Xy(n,e,t){n.j=t?tp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Zy(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function F$(n,e,t){e instanceof ip?(n.i=e,function cpe(n,e){e&&!n.j&&(ya(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(V$(this,i),U$(this,r,t))},n)),n.j=e}(n.i,n.h)):(t||(e=np(e,ape)),n.i=new ip(e,n.h))}function kt(n,e,t){n.i.set(e,t)}function Jy(n){return kt(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function tp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function np(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,rpe),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function rpe(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Fl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(np(e,L$,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(np(e,L$,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(np(t,"/"==t.charAt(0)?ope:spe,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",np(t,lpe)),n.join("")};var L$=/[#\/\?@]/g,spe=/[#\?:]/g,ope=/[#\?]/g,ape=/[#\?@]/g,lpe=/#/g;function ip(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ya(n){n.g||(n.g=new Map,n.h=0,n.i&&function ipe(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function V$(n,e){ya(n),e=id(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function B$(n,e){return ya(n),e=id(n,e),n.g.has(e)}function U$(n,e,t){V$(n,e),0<t.length&&(n.i=null,n.g.set(id(n,e),sD(t)),n.h+=t.length)}function id(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function H$(n){this.l=n||dpe,n=me.PerformanceNavigationTiming?0<(n=me.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(me.g&&me.g.Ga&&me.g.Ga()&&me.g.Ga().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Y=ip.prototype).add=function(n,e){ya(this),this.i=null,n=id(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Y.forEach=function(n,e){ya(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)},Y.oa=function(){ya(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let s=0;s<r.length;s++)t.push(e[i])}return t},Y.W=function(n){ya(this);let e=[];if("string"==typeof n)B$(this,n)&&(e=e.concat(this.g.get(id(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Y.set=function(n,e){return ya(this),this.i=null,B$(this,n=id(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Y.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Y.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const s=encodeURIComponent(String(i)),o=this.W(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),n.push(r)}}return this.i=n.join("&")};var dpe=10;function j$(n){return!!n.h||!!n.g&&n.g.size>=n.j}function $$(n){return n.h?1:n.g?n.g.size:0}function OD(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function ND(n,e){n.g?n.g.add(e):n.h=e}function z$(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function G$(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return sD(n.i)}function FD(){}function hpe(){this.g=new FD}function fpe(n,e,t){const i=t||"";try{O$(n,function(r,s){let o=r;Gf(r)&&(o=CD(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function ev(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(s){}}function rp(n){this.l=n.$b||null,this.j=n.ib||!1}function tv(n,e){An.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=LD,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}H$.prototype.cancel=function(){if(this.i=G$(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},FD.prototype.stringify=function(n){return me.JSON.stringify(n,void 0)},FD.prototype.parse=function(n){return me.JSON.parse(n,void 0)},jn(rp,SD),rp.prototype.g=function(){return new tv(this.l,this.j)},rp.prototype.i=function(n){return function(){return n}}({}),jn(tv,An);var LD=0;function W$(n){n.j.read().then(n.Sa.bind(n)).catch(n.ga.bind(n))}function sp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,op(n)}function op(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Y=tv.prototype).open=function(n,e){if(this.readyState!=LD)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,op(this)},Y.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||me).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))},Y.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sp(this)),this.readyState=LD},Y.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,op(this)),this.g&&(this.readyState=3,op(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(void 0!==me.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;W$(this)}else n.text().then(this.Ua.bind(this),this.ga.bind(this))},Y.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?sp(this):op(this),3==this.readyState&&W$(this)}},Y.Ua=function(n){this.g&&(this.response=this.responseText=n,sp(this))},Y.Ta=function(n){this.g&&(this.response=n,sp(this))},Y.ga=function(){this.g&&sp(this)},Y.setRequestHeader=function(n,e){this.v.append(n,e)},Y.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Y.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(tv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var mpe=me.JSON.parse;function un(n){An.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=q$,this.K=this.L=!1}jn(un,An);var q$="",gpe=/^https?$/i,_pe=["POST","PUT"];function K$(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Q$(n),nv(n)}function Q$(n){n.D||(n.D=!0,$n(n,"complete"),$n(n,"error"))}function Y$(n){if(n.h&&void 0!==iD&&(!n.C[1]||4!=fo(n)||2!=n.aa()))if(n.v&&4==fo(n))DD(n.Ha,0,n);else if($n(n,"readystatechange"),4==fo(n)){n.h=!1;try{const a=n.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===a){var r=String(n.H).match(N$)[1]||null;if(!r&&me.self&&me.self.location){var s=me.self.location.protocol;r=s.substr(0,s.length-1)}i=!gpe.test(r?r.toLowerCase():"")}t=i}if(t)$n(n,"complete"),$n(n,"success");else{n.m=6;try{var o=2<fo(n)?n.g.statusText:""}catch(l){o=""}n.j=o+" ["+n.aa()+"]",Q$(n)}}finally{nv(n)}}}function nv(n,e){if(n.g){X$(n);const t=n.g,i=n.C[0]?Ny:null;n.g=null,n.C=null,e||$n(n,"ready");try{t.onreadystatechange=i}catch(r){}}}function X$(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(me.clearTimeout(n.A),n.A=null)}function fo(n){return n.g?n.g.readyState:0}function Z$(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case q$:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function J$(n){let e="";return fD(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function VD(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=J$(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):kt(n,e,t))}function ap(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ez(n){this.Ca=0,this.i=[],this.j=new Gy,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=ap("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=ap("baseRetryDelayMs",5e3,n),this.ab=ap("retryDelaySeedMs",1e4,n),this.Za=ap("forwardChannelMaxRetries",2,n),this.ta=ap("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Yb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new H$(n&&n.concurrentRequestLimit),this.Fa=new hpe,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=n&&n.Wb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function BD(n){if(tz(n),3==n.G){var e=n.U++,t=ho(n.F);kt(t,"SID",n.I),kt(t,"RID",e),kt(t,"TYPE","terminate"),lp(n,t),(e=new Zf(n,n.j,e,void 0)).K=2,e.v=Jy(ho(t)),t=!1,me.navigator&&me.navigator.sendBeacon&&(t=me.navigator.sendBeacon(e.v.toString(),"")),!t&&me.Image&&((new Image).src=e.v,t=!0),t||(e.g=uz(e.l,null),e.g.da(e.v)),e.F=Date.now(),Jf(e)}lz(n)}function iv(n){n.g&&(HD(n),n.g.cancel(),n.g=null)}function tz(n){iv(n),n.u&&(me.clearTimeout(n.u),n.u=null),sv(n),n.h.cancel(),n.m&&("number"==typeof n.m&&me.clearTimeout(n.m),n.m=null)}function rv(n){j$(n.h)||n.m||(n.m=!0,g$(n.Ja,n),n.C=0)}function nz(n,e){var t;t=e?e.m:n.U++;const i=ho(n.F);kt(i,"SID",n.I),kt(i,"RID",t),kt(i,"AID",n.T),lp(n,i),n.o&&n.s&&VD(i,n.o,n.s),t=new Zf(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=iz(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),ND(n.h,t),RD(t,i,e)}function lp(n,e){n.ia&&fD(n.ia,function(t,i){kt(e,i,t)}),n.l&&O$({},function(t,i){kt(e,i,t)})}function iz(n,e,t){t=Math.min(n.i.length,t);var i=n.l?si(n.l.Qa,n.l,n):null;e:{var r=n.i;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=r[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<t;l++){let c=r[l].h;const u=r[l].g;if(c-=s,0>c)s=Math.max(0,r[l].h-100),a=!1;else try{fpe(u,o,"req"+c+"_")}catch(d){i&&i(u)}}if(a){i=o.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,i}function rz(n){n.g||n.u||(n.Z=1,g$(n.Ia,n),n.A=0)}function UD(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Yf(si(n.Ia,n),az(n,n.A)),n.A++,0))}function HD(n){null!=n.B&&(me.clearTimeout(n.B),n.B=null)}function sz(n){n.g=new Zf(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=ho(n.sa);kt(e,"RID","rpc"),kt(e,"SID",n.I),kt(e,"CI",n.L?"0":"1"),kt(e,"AID",n.T),kt(e,"TYPE","xmlhttp"),lp(n,e),n.o&&n.s&&VD(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Jy(ho(e)),t.s=null,t.P=!0,A$(t,n)}function sv(n){null!=n.v&&(me.clearTimeout(n.v),n.v=null)}function oz(n,e){var t=null;if(n.g==e){sv(n),HD(n),n.g=null;var i=2}else{if(!OD(n.h,e))return;t=e.D,z$(n.h,e),i=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var r=n.C;$n(i=Wy(),new I$(i,t,e,r)),rv(n)}else rz(n);else if(3==(r=e.o)||0==r&&0<n.pa||!(1==i&&function vpe(n,e){return!($$(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Ya?0:n.Za)||(n.m=Yf(si(n.Ja,n,e),az(n,n.C)),n.C++,0)))}(n,e)||2==i&&UD(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),r){case 1:Ll(n,5);break;case 4:Ll(n,10);break;case 3:Ll(n,6);break;default:Ll(n,2)}}function az(n,e){let t=n.Wa+Math.floor(Math.random()*n.ab);return n.l||(t*=2),t*e}function Ll(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var i=si(n.jb,n);t||(t=new Fl("//www.google.com/images/cleardot.gif"),me.location&&"http"==me.location.protocol||Xy(t,"https"),Jy(t)),function ppe(n,e){const t=new Gy;if(me.Image){const i=new Image;i.onload=Ly(ev,t,i,"TestLoadImage: loaded",!0,e),i.onerror=Ly(ev,t,i,"TestLoadImage: error",!1,e),i.onabort=Ly(ev,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=Ly(ev,t,i,"TestLoadImage: timeout",!1,e),me.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else _i(2);n.G=0,n.l&&n.l.va(e),lz(n),tz(n)}function lz(n){if(n.G=0,n.la=[],n.l){const e=G$(n.h);(0!=e.length||0!=n.i.length)&&(t$(n.la,e),t$(n.la,n.i),n.h.i.length=0,sD(n.i),n.i.length=0),n.l.ua()}}function cz(n,e,t){var i=t instanceof Fl?ho(t):new Fl(t,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),Zy(i,i.m);else{var r=me.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new Fl(null,void 0);i&&Xy(s,i),e&&(s.g=e),r&&Zy(s,r),t&&(s.l=t),i=s}return e=n.za,(t=n.D)&&e&&kt(i,t,e),kt(i,"VER",n.ma),lp(n,i),i}function uz(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new un(t&&n.Da&&!n.ra?new rp({ib:!0}):n.ra)).L=n.H,e}function dz(){}function ov(){if(td&&!(10<=Number(Ffe)))throw Error("Environmental error: no available transport.")}function cr(n,e){An.call(this),this.g=new ez(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Xb)&&!Vy(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vy(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new rd(this)}function hz(n){xD.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function fz(){MD.call(this),this.status=1}function rd(n){this.g=n}(Y=un.prototype).da=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():AD.g(),this.C=function S$(n){return n.h||(n.h=n.i())}(this.u?this.u:AD),this.g.onreadystatechange=si(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void K$(this,s)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())t.set(s,i.get(s))}i=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),r=me.FormData&&n instanceof me.FormData,!(0<=e$(_pe,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{X$(this),0<this.B&&((this.K=function ype(n){return td&&function Nfe(){return function kfe(n){var e=Ofe;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=n$(String(Uy)).split("."),t=n$("9").split("."),i=Math.max(e.length,t.length);for(let o=0;0==n&&o<i;o++){var r=e[o]||"",s=t[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=oD(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||oD(0==r[2].length,0==s[2].length)||oD(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=si(this.qa,this)):this.A=DD(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){K$(this,s)}},Y.qa=function(){void 0!==iD&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$n(this,"timeout"),this.abort(8))},Y.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,$n(this,"complete"),$n(this,"abort"),nv(this))},Y.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),nv(this,!0)),un.X.M.call(this)},Y.Ha=function(){this.s||(this.F||this.v||this.l?Y$(this):this.eb())},Y.eb=function(){Y$(this)},Y.aa=function(){try{return 2<fo(this)?this.g.status:-1}catch(n){return-1}},Y.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Y.Ra=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),mpe(e)}},Y.Ea=function(){return this.m},Y.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},(Y=ez.prototype).ma=8,Y.G=1,Y.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const r=new Zf(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=a$(s),c$(s,this.S)):s=this.S),null!==this.o||this.N||(r.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var i=this.i[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=iz(this,r,e),kt(t=ho(this.F),"RID",n),kt(t,"CVER",22),this.D&&kt(t,"X-HTTP-Session-Id",this.D),lp(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(J$(s)))+"&"+e:this.o&&VD(t,this.o,s)),ND(this.h,r),this.Xa&&kt(t,"TYPE","init"),this.O?(kt(t,"$req",e),kt(t,"SID","null"),r.Z=!0,RD(r,t,null)):RD(r,t,e),this.G=2}}else 3==this.G&&(n?nz(this,n):0==this.i.length||j$(this.h)||nz(this))},Y.Ia=function(){if(this.u=null,sz(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Yf(si(this.cb,this),n)}},Y.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,_i(10),iv(this),sz(this))},Y.bb=function(){null!=this.v&&(this.v=null,iv(this),UD(this),_i(19))},Y.jb=function(n){n?(this.j.info("Successfully pinged google.com"),_i(2)):(this.j.info("Failed to ping google.com"),_i(1))},(Y=dz.prototype).xa=function(){},Y.wa=function(){},Y.va=function(){},Y.ua=function(){},Y.Qa=function(){},ov.prototype.g=function(n,e){return new cr(n,e)},jn(cr,An),cr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;_i(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=cz(n,null,n.V),rv(n)},cr.prototype.close=function(){BD(this.g)},cr.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=CD(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.$a++,n)),3==e.G&&rv(e)},cr.prototype.M=function(){this.g.l=null,delete this.j,BD(this.g),delete this.g,cr.X.M.call(this)},jn(hz,xD),jn(fz,MD),jn(rd,dz),rd.prototype.xa=function(){$n(this.g,"a")},rd.prototype.wa=function(n){$n(this.g,new hz(n))},rd.prototype.va=function(n){$n(this.g,new fz(n))},rd.prototype.ua=function(){$n(this.g,"b")},ov.prototype.createWebChannel=ov.prototype.g,cr.prototype.send=cr.prototype.u,cr.prototype.open=cr.prototype.m,cr.prototype.close=cr.prototype.close,qy.NO_ERROR=0,qy.TIMEOUT=8,qy.HTTP_ERROR=6,D$.COMPLETE="complete",x$.EventType=Xf,Xf.OPEN="a",Xf.CLOSE="b",Xf.ERROR="c",Xf.MESSAGE="d",An.prototype.listen=An.prototype.N,un.prototype.listenOnce=un.prototype.O,un.prototype.getLastError=un.prototype.Na,un.prototype.getLastErrorCode=un.prototype.Ea,un.prototype.getStatus=un.prototype.aa,un.prototype.getResponseJson=un.prototype.Ra,un.prototype.getResponseText=un.prototype.fa,un.prototype.send=un.prototype.da;var bpe=uo.createWebChannelTransport=function(){return new ov},wpe=uo.getStatEventTarget=function(){return Wy()},jD=uo.ErrorCode=qy,Cpe=uo.EventType=D$,Epe=uo.Event=Ol,pz=uo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Tpe=uo.FetchXmlHttpFactory=rp,av=uo.WebChannel=x$,Ipe=uo.XhrIo=un;const mz="@firebase/firestore";class kn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kn.UNAUTHENTICATED=new kn(null),kn.GOOGLE_CREDENTIALS=new kn("google-credentials-uid"),kn.FIRST_PARTY=new kn("first-party-uid"),kn.MOCK_USER=new kn("mock-user");let sd="9.10.0";const va=new ra("@firebase/firestore");function $D(){return va.logLevel}function A(n,...e){if(va.logLevel<=Be.DEBUG){const t=e.map(zD);va.debug(`Firestore (${sd}): ${n}`,...t)}}function Jt(n,...e){if(va.logLevel<=Be.ERROR){const t=e.map(zD);va.error(`Firestore (${sd}): ${n}`,...t)}}function Vl(n,...e){if(va.logLevel<=Be.WARN){const t=e.map(zD);va.warn(`Firestore (${sd}): ${n}`,...t)}}function zD(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Q(n="Unexpected state"){const e=`FIRESTORE (${sd}) INTERNAL ASSERTION FAILED: `+n;throw Jt(e),new Error(e)}function oe(n,e){n||Q()}function U(n,e){return n}const T={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class x extends Oi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Rn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class gz{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xpe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(kn.UNAUTHENTICATED))}shutdown(){}}class Mpe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ape{constructor(e){this.t=e,this.currentUser=kn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const s=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let o=new Rn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Rn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(m(function*(){yield c.promise,yield s(i.currentUser)}))},l=c=>{A("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(A("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Rn)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(A("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(oe("string"==typeof i.accessToken),new gz(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return oe(null===e||"string"==typeof e),new kn(e)}}class kpe{constructor(e,t,i,r){this.h=e,this.l=t,this.m=i,this.g=r,this.type="FirstParty",this.user=kn.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(oe(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Rpe{constructor(e,t,i,r){this.h=e,this.l=t,this.m=i,this.g=r}getToken(){return Promise.resolve(new kpe(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(kn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _z{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ppe{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const i=s=>{null!=s.error&&A("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,A("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{A("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?r(s):A("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(oe("string"==typeof t.token),this.A=t.token,new _z(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ope(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class yz{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=Ope(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}}function ge(n,e){return n<e?-1:n>e?1:0}function od(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function vz(n){return n+"\0"}class Rt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new x(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new x(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new x(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rt.fromMillis(Date.now())}static fromDate(e){return Rt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Rt(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new re(e)}static min(){return new re(new Rt(0,0))}static max(){return new re(new Rt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class cp{constructor(e,t,i){void 0===t?t=0:t>e.length&&Q(),void 0===i?i=e.length-t:i>e.length-t&&Q(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===cp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof cp?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class We extends cp{construct(e,t,i){return new We(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new x(T.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new We(t)}static emptyPath(){return new We([])}}const Npe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends cp{construct(e,t,i){return new $t(e,t,i)}static isValidIdentifier(e){return Npe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new $t(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(0===i.length)throw new x(T.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if("\\"===a){if(r+1===e.length)throw new x(T.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new x(T.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else"`"===a?(o=!o,r++):"."!==a||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new x(T.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(t)}static emptyPath(){return new $t([])}}class B{constructor(e){this.path=e}static fromPath(e){return new B(We.fromString(e))}static fromName(e){return new B(We.fromString(e).popFirst(5))}static empty(){return new B(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===We.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return We.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new B(new We(e.slice()))}}class lv{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function GD(n){return n.fields.find(e=>2===e.kind)}function Bl(n){return n.fields.filter(e=>2!==e.kind)}lv.UNKNOWN_ID=-1;class cv{constructor(e,t){this.fieldPath=e,this.kind=t}}class up{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new up(0,ur.min())}}function bz(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=re.fromTimestamp(1e9===i?new Rt(t+1,0):new Rt(t,i));return new ur(r,B.empty(),e)}function wz(n){return new ur(n.readTime,n.key,-1)}class ur{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ur(re.min(),B.empty(),-1)}static max(){return new ur(re.max(),B.empty(),-1)}}function WD(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=B.comparator(n.documentKey,e.documentKey),0!==t?t:ge(n.largestBatchId,e.largestBatchId))}const Cz="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ez{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ba(n){return qD.apply(this,arguments)}function qD(){return qD=m(function*(n){if(n.code!==T.FAILED_PRECONDITION||n.message!==Cz)throw n;A("LocalStore","Unexpectedly lost primary lease")}),qD.apply(this,arguments)}class E{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new E((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof E?t:E.resolve(t)}catch(t){return E.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):E.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):E.reject(t)}static resolve(e){return new E((t,i)=>{t(e)})}static reject(e){return new E((t,i)=>{i(e)})}static waitFor(e){return new E((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=E.resolve(!1);for(const i of e)t=t.next(r=>r?E.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new E((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,t){return new E((i,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):i()};s()})}}class uv{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Rn,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new dp(e,t.error)):this.P.resolve()},this.transaction.onerror=i=>{const r=KD(i.target.error);this.P.reject(new dp(e,r))}}static open(e,t,i,r){try{return new uv(t,e.transaction(r,i))}catch(s){throw new dp(t,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(A("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Bpe(t)}}class es{constructor(e,t,i){this.name=e,this.version=t,this.S=i,12.2===es.D(Xt())&&Jt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return A("SimpleDb","Removing database:",e),Ul(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!ia())return!1;if(es.N())return!0;const e=Xt(),t=es.D(e),i=0<t&&t<10,r=es.k(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(e){var t=this;return m(function*(){return t.db||(A("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{i(o.target.result)},s.onblocked=()=>{r(new dp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;r("VersionError"===a.name?new x(T.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new x(T.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new dp(e,a))},s.onupgradeneeded=o=>{A("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.S.$(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{A("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=i=>t.B(i)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var s=this;return m(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.F(e);const l=uv.open(s.db,e,o?"readonly":"readwrite",i),c=r(l).next(u=>(l.V(),u)).catch(u=>(l.abort(u),E.reject(u))).toPromise();return c.catch(()=>{}),yield l.v,c}catch(l){const c=l,u="FirebaseError"!==c.name&&a<3;if(A("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),s.close(),!u)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Vpe{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Ul(this.U.delete())}}class dp extends x{constructor(e,t){super(T.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function wa(n){return"IndexedDbTransactionError"===n.name}class Bpe{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(A("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(A("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Ul(i)}add(e){return A("SimpleDb","ADD",this.store.name,e,e),Ul(this.store.add(e))}get(e){return Ul(this.store.get(e)).next(t=>(void 0===t&&(t=null),A("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return A("SimpleDb","DELETE",this.store.name,e),Ul(this.store.delete(e))}count(){return A("SimpleDb","COUNT",this.store.name),Ul(this.store.count())}W(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.H(r,(o,a)=>{s.push(a)}).next(()=>s)}{const r=this.store.getAll(i.range);return new E((s,o)=>{r.onerror=a=>{o(a.target.error)},r.onsuccess=a=>{s(a.target.result)}})}}J(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new E((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}Y(e,t){A("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const r=this.cursor(i);return this.H(r,(s,o,a)=>a.delete())}Z(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.H(r,t)}tt(e){const t=this.cursor({});return new E((i,r)=>{t.onerror=s=>{const o=KD(s.target.error);r(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}H(e,t){const i=[];return new E((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const l=new Vpe(a),c=t(a.primaryKey,a.value,l);if(c instanceof E){const u=c.catch(d=>(l.done(),E.reject(d)));i.push(u)}l.isDone?r():null===l.G?a.continue():a.continue(l.G)}}).next(()=>E.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ul(n){return new E((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=KD(i.target.error);t(r)}})}let Tz=!1;function KD(n){const e=es.D(Xt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new x("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Tz||(Tz=!0,setTimeout(()=>{throw i},0)),i}}return n}class Upe{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;A("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,m(function*(){t.task=null;try{A("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(i){wa(i)?A("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield ba(i)}yield t.nt(6e4)}))}}class Hpe{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return m(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.it(i,e))})()}it(e,t){const i=new Set;let r=t,s=!0;return E.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!i.has(o))return A("IndexBackiller",`Processing collection: ${o}`),this.rt(e,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>t-r)}rt(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ot(r,s)).next(a=>(A("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}ot(e,t){let i=e;return t.changes.forEach((r,s)=>{const o=wz(s);WD(o,i)>0&&(i=o)}),new ur(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Vi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>t.writeSequenceNumber(i))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Iz(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Hl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Dz(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Vi.at=-1;class zt{constructor(e,t){this.comparator=e,this.root=t||zn.EMPTY}insert(e,t){return new zt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zn.BLACK,null,null))}remove(e){return new zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dv(this.root,e,this.comparator,!1)}getReverseIterator(){return new dv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dv(this.root,e,this.comparator,!0)}}class dv{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zn{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=null!=i?i:zn.RED,this.left=null!=r?r:zn.EMPTY,this.right=null!=s?s:zn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new zn(null!=e?e:this.key,null!=t?t:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return zn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return zn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();const e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}}zn.EMPTY=null,zn.RED=!0,zn.BLACK=!1,zn.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(n,e,t,i,r){return this}insert(n,e,t){return new zn(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ct{constructor(e){this.comparator=e,this.data=new zt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sz(this.data.getIterator())}getIteratorFrom(e){return new Sz(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof ct)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ct(this.comparator);return t.data=e,t}}class Sz{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ad(n){return n.hasNext()?n.getNext():void 0}class dr{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new dr([])}unionWith(e){let t=new ct($t.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new dr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return od(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new yn(t)}static fromUint8Array(e){const t=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new yn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const $pe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ca(n){if(oe(!!n),"string"==typeof n){let e=0;const t=$pe.exec(n);if(oe(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Gt(n.seconds),nanos:Gt(n.nanos)}}function Gt(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function jl(n){return"string"==typeof n?yn.fromBase64String(n):yn.fromUint8Array(n)}function QD(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function xz(n){const e=n.mapValue.fields.__previous_value__;return QD(e)?xz(e):e}function hp(n){const e=Ca(n.mapValue.fields.__local_write_time__.timestampValue);return new Rt(e.seconds,e.nanos)}class zpe{constructor(e,t,i,r,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class Ea{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ea("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ea&&e.projectId===this.projectId&&e.database===this.database}}function fp(n){return null==n}function pp(n){return 0===n&&1/n==-1/0}function Mz(n){return"number"==typeof n&&Number.isInteger(n)&&!pp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Ta={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},hv={nullValue:"NULL_VALUE"};function $l(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?QD(n)?4:Pz(n)?9007199254740991:10:Q()}function Ss(n,e){if(n===e)return!0;const t=$l(n);if(t!==$l(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hp(n).isEqual(hp(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Ca(i.timestampValue),o=Ca(r.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,jl(n.bytesValue).isEqual(jl(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return Gt(i.geoPointValue.latitude)===Gt(r.geoPointValue.latitude)&&Gt(i.geoPointValue.longitude)===Gt(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Gt(i.integerValue)===Gt(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=Gt(i.doubleValue),o=Gt(r.doubleValue);return s===o?pp(s)===pp(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return od(n.arrayValue.values||[],e.arrayValue.values||[],Ss);case 10:return function(i,r){const s=i.mapValue.fields||{},o=r.mapValue.fields||{};if(Iz(s)!==Iz(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!Ss(s[a],o[a])))return!1;return!0}(n,e);default:return Q()}var r}function mp(n,e){return void 0!==(n.values||[]).find(t=>Ss(t,e))}function Ia(n,e){if(n===e)return 0;const t=$l(n),i=$l(e);if(t!==i)return ge(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ge(n.booleanValue,e.booleanValue);case 2:return function(r,s){const o=Gt(r.integerValue||r.doubleValue),a=Gt(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(n,e);case 3:return Az(n.timestampValue,e.timestampValue);case 4:return Az(hp(n),hp(e));case 5:return ge(n.stringValue,e.stringValue);case 6:return function(r,s){const o=jl(r),a=jl(s);return o.compareTo(a)}(n.bytesValue,e.bytesValue);case 7:return function(r,s){const o=r.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=ge(o[l],a[l]);if(0!==c)return c}return ge(o.length,a.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,s){const o=ge(Gt(r.latitude),Gt(s.latitude));return 0!==o?o:ge(Gt(r.longitude),Gt(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,s){const o=r.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=Ia(o[l],a[l]);if(c)return c}return ge(o.length,a.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===Ta.mapValue&&s===Ta.mapValue)return 0;if(r===Ta.mapValue)return 1;if(s===Ta.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),l=s.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const d=ge(a[u],c[u]);if(0!==d)return d;const h=Ia(o[a[u]],l[c[u]]);if(0!==h)return h}return ge(a.length,c.length)}(n.mapValue,e.mapValue);default:throw Q()}}function Az(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return ge(n,e);const t=Ca(n),i=Ca(e),r=ge(t.seconds,i.seconds);return 0!==r?r:ge(t.nanos,i.nanos)}function ld(n){return YD(n)}function YD(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Ca(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?jl(n.bytesValue).toBase64():"referenceValue"in n?B.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const o of i.values||[])s?s=!1:r+=",",r+=YD(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${YD(i.fields[a])}`;return s+"}"}(n.mapValue):Q();var e}function zl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function XD(n){return!!n&&"integerValue"in n}function gp(n){return!!n&&"arrayValue"in n}function kz(n){return!!n&&"nullValue"in n}function Rz(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function fv(n){return!!n&&"mapValue"in n}function _p(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Hl(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=_p(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_p(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Pz(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Gpe(n){return"nullValue"in n?hv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?zl(Ea.empty(),B.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Q()}function Wpe(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?zl(Ea.empty(),B.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ta:Q()}function Oz(n,e){const t=Ia(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Nz(n,e){const t=Ia(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Gn{constructor(e){this.value=e}static empty(){return new Gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!fv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_p(t)}setAll(e){let t=$t.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=_p(o):r.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());fv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ss(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];fv(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Hl(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Gn(_p(this.value))}}function Fz(n){const e=[];return Hl(n.fields,(t,i)=>{const r=new $t([t]);if(fv(i)){const s=Fz(i.mapValue).fields;if(0===s.length)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new dr(e)}class bt{constructor(e,t,i,r,s,o){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.data=s,this.documentState=o}static newInvalidDocument(e){return new bt(e,0,re.min(),re.min(),Gn.empty(),0)}static newFoundDocument(e,t,i){return new bt(e,1,t,re.min(),i,0)}static newNoDocument(e,t){return new bt(e,2,t,re.min(),Gn.empty(),0)}static newUnknownDocument(e,t){return new bt(e,3,t,re.min(),Gn.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qpe{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ht=null}}function Lz(n,e=null,t=[],i=[],r=null,s=null,o=null){return new qpe(n,e,t,i,r,s,o)}function Gl(n){const e=U(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+ld(r.value);var r}).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),fp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>ld(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>ld(i)).join(",")),e.ht=t}return e.ht}function yp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!nme(n.orderBy[r],e.orderBy[r]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((t=n.filters[r]).op!==(i=e.filters[r]).op||!t.field.isEqual(i.field)||!Ss(t.value,i.value))return!1;var t,i;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!jz(n.startAt,e.startAt)&&jz(n.endAt,e.endAt)}function pv(n){return B.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function mv(n,e){return n.filters.filter(t=>t instanceof Wn&&t.field.isEqual(e))}function Vz(n,e,t){let i=hv,r=!0;for(const s of mv(n,e)){let o=hv,a=!0;switch(s.op){case"<":case"<=":o=Gpe(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=hv}Oz({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];Oz({value:i,inclusive:r},{value:o,inclusive:t.inclusive})<0&&(i=o,r=t.inclusive);break}return{value:i,inclusive:r}}function Bz(n,e,t){let i=Ta,r=!0;for(const s of mv(n,e)){let o=Ta,a=!0;switch(s.op){case">=":case">":o=Wpe(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ta}Nz({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];Nz({value:i,inclusive:r},{value:o,inclusive:t.inclusive})>0&&(i=o,r=t.inclusive);break}return{value:i,inclusive:r}}class Wn extends class{}{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,i):new Qpe(e,t,i):"array-contains"===t?new Zpe(e,i):"in"===t?new Jpe(e,i):"not-in"===t?new eme(e,i):"array-contains-any"===t?new tme(e,i):new Wn(e,t,i)}static lt(e,t,i){return"in"===t?new Ype(e,i):new Xpe(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Ia(t,this.value)):null!==t&&$l(this.value)===$l(t)&&this.ft(Ia(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Q()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Qpe extends Wn{constructor(e,t,i){super(e,t,i),this.key=B.fromName(i.referenceValue)}matches(e){const t=B.comparator(e.key,this.key);return this.ft(t)}}class Ype extends Wn{constructor(e,t){super(e,"in",t),this.keys=Uz(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Xpe extends Wn{constructor(e,t){super(e,"not-in",t),this.keys=Uz(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Uz(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>B.fromName(i.referenceValue))}class Zpe extends Wn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return gp(t)&&mp(t.arrayValue,this.value)}}class Jpe extends Wn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&mp(this.value.arrayValue,t)}}class eme extends Wn{constructor(e,t){super(e,"not-in",t)}matches(e){if(mp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!mp(this.value.arrayValue,t)}}class tme extends Wn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!gp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>mp(this.value.arrayValue,i))}}class Da{constructor(e,t){this.position=e,this.inclusive=t}}class cd{constructor(e,t="asc"){this.field=e,this.dir=t}}function nme(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Hz(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],o=n.position[r];if(i=s.field.isKeyField()?B.comparator(B.fromName(o.referenceValue),t.key):Ia(o,t.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function jz(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ss(n.position[t],e.position[t]))return!1;return!0}class po{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this._t=null,this.wt=null}}function $z(n,e,t,i,r,s,o,a){return new po(n,e,t,i,r,s,o,a)}function ud(n){return new po(n)}function zz(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function ZD(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function JD(n){for(const e of n.filters)if(e.dt())return e.field;return null}function eS(n){return null!==n.collectionGroup}function dd(n){const e=U(n);if(null===e._t){e._t=[];const t=JD(e),i=ZD(e);if(null!==t&&null===i)t.isKeyField()||e._t.push(new cd(t)),e._t.push(new cd($t.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e._t.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new cd($t.keyField(),s))}}}return e._t}function Bi(n){const e=U(n);if(!e.wt)if("F"===e.limitType)e.wt=Lz(e.path,e.collectionGroup,dd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of dd(e))t.push(new cd(s.field,"desc"===s.dir?"asc":"desc"));const i=e.endAt?new Da(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Da(e.startAt.position,e.startAt.inclusive):null;e.wt=Lz(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e.wt}function gv(n,e,t){return new po(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vp(n,e){return yp(Bi(n),Bi(e))&&n.limitType===e.limitType}function Gz(n){return`${Gl(Bi(n))}|lt:${n.limitType}`}function tS(n){return`Query(target=${function Kpe(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(i=t).field.canonicalString()} ${i.op} ${ld(i.value)}`;var i}).join(", ")}]`),fp(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(i=t).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>ld(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>ld(t)).join(",")),`Target(${e})`}(Bi(n))}; limitType=${n.limitType})`}function nS(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):B.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of t.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,s,o){const a=Hz(r,s,o);return r.inclusive?a<=0:a<0}(t.startAt,dd(t),i)||t.endAt&&!function(r,s,o){const a=Hz(r,s,o);return r.inclusive?a>=0:a>0}(t.endAt,dd(t),i)));var t,i}function Wz(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qz(n){return(e,t)=>{let i=!1;for(const r of dd(n)){const s=ime(r,e,t);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function ime(n,e,t){const i=n.field.isKeyField()?B.comparator(e.key,t.key):function(r,s,o){const a=s.data.field(r),l=o.data.field(r);return null!==a&&null!==l?Ia(a,l):Q()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Q()}}function Kz(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pp(e)?"-0":e}}function Qz(n){return{integerValue:""+n}}function Yz(n,e){return Mz(e)?Qz(e):Kz(n,e)}class _v{constructor(){this._=void 0}}function rme(n,e,t){return n instanceof hd?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(t,e):n instanceof Wl?Zz(n,e):n instanceof ql?Jz(n,e):function(i,r){const s=Xz(i,r),o=e3(s)+e3(i.yt);return XD(s)&&XD(i.yt)?Qz(o):Kz(i.It,o)}(n,e)}function sme(n,e,t){return n instanceof Wl?Zz(n,e):n instanceof ql?Jz(n,e):t}function Xz(n,e){return n instanceof fd?XD(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class hd extends _v{}class Wl extends _v{constructor(e){super(),this.elements=e}}function Zz(n,e){const t=t3(e);for(const i of n.elements)t.some(r=>Ss(r,i))||t.push(i);return{arrayValue:{values:t}}}class ql extends _v{constructor(e){super(),this.elements=e}}function Jz(n,e){let t=t3(e);for(const i of n.elements)t=t.filter(r=>!Ss(r,i));return{arrayValue:{values:t}}}class fd extends _v{constructor(e,t){super(),this.It=e,this.yt=t}}function e3(n){return Gt(n.integerValue||n.doubleValue)}function t3(n){return gp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class bp{constructor(e,t){this.field=e,this.transform=t}}class ame{constructor(e,t){this.version=e,this.transformResults=t}}class Pt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pt}static exists(e){return new Pt(void 0,e)}static updateTime(e){return new Pt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yv(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class vv{}function n3(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new md(n.key,Pt.none()):new pd(n.key,n.data,Pt.none());{const t=n.data,i=Gn.empty();let r=new ct($t.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?i.delete(s):i.set(s,o),r=r.add(s)}return new mo(n.key,i,new dr(r.toArray()),Pt.none())}}function lme(n,e,t){n instanceof pd?function(i,r,s){const o=i.value.clone(),a=o3(i.fieldTransforms,r,s.transformResults);o.setAll(a),r.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof mo?function(i,r,s){if(!yv(i.precondition,r))return void r.convertToUnknownDocument(s.version);const o=o3(i.fieldTransforms,r,s.transformResults),a=r.data;a.setAll(s3(i)),a.setAll(o),r.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function wp(n,e,t,i){return n instanceof pd?function(r,s,o,a){if(!yv(r.precondition,s))return o;const l=r.value.clone(),c=a3(r.fieldTransforms,a,s);return l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,i):n instanceof mo?function(r,s,o,a){if(!yv(r.precondition,s))return o;const l=a3(r.fieldTransforms,a,s),c=s.data;return c.setAll(s3(r)),c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null===o?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(u=>u.field))}(n,e,t,i):(o=t,yv(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function cme(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=Xz(i.transform,r||null);null!=s&&(null===t&&(t=Gn.empty()),t.set(i.field,s))}return t||null}function r3(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&od(t,i,(r,s)=>function ome(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof Wl&&i instanceof Wl||t instanceof ql&&i instanceof ql?od(t.elements,i.elements,Ss):t instanceof fd&&i instanceof fd?Ss(t.yt,i.yt):t instanceof hd&&i instanceof hd);var t,i}(r,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class pd extends vv{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class mo extends vv{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function s3(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function o3(n,e,t){const i=new Map;oe(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,sme(o,a,t[r]))}return i}function a3(n,e,t){const i=new Map;for(const r of n){const s=r.transform,o=t.data.field(r.field);i.set(r.field,rme(s,o,e))}return i}class md extends vv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iS extends vv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ume{constructor(e){this.count=e}}var dn,qe;function l3(n){switch(n){default:return Q();case T.CANCELLED:case T.UNKNOWN:case T.DEADLINE_EXCEEDED:case T.RESOURCE_EXHAUSTED:case T.INTERNAL:case T.UNAVAILABLE:case T.UNAUTHENTICATED:return!1;case T.INVALID_ARGUMENT:case T.NOT_FOUND:case T.ALREADY_EXISTS:case T.PERMISSION_DENIED:case T.FAILED_PRECONDITION:case T.ABORTED:case T.OUT_OF_RANGE:case T.UNIMPLEMENTED:case T.DATA_LOSS:return!0}}function c3(n){if(void 0===n)return Jt("GRPC error has no .code"),T.UNKNOWN;switch(n){case dn.OK:return T.OK;case dn.CANCELLED:return T.CANCELLED;case dn.UNKNOWN:return T.UNKNOWN;case dn.DEADLINE_EXCEEDED:return T.DEADLINE_EXCEEDED;case dn.RESOURCE_EXHAUSTED:return T.RESOURCE_EXHAUSTED;case dn.INTERNAL:return T.INTERNAL;case dn.UNAVAILABLE:return T.UNAVAILABLE;case dn.UNAUTHENTICATED:return T.UNAUTHENTICATED;case dn.INVALID_ARGUMENT:return T.INVALID_ARGUMENT;case dn.NOT_FOUND:return T.NOT_FOUND;case dn.ALREADY_EXISTS:return T.ALREADY_EXISTS;case dn.PERMISSION_DENIED:return T.PERMISSION_DENIED;case dn.FAILED_PRECONDITION:return T.FAILED_PRECONDITION;case dn.ABORTED:return T.ABORTED;case dn.OUT_OF_RANGE:return T.OUT_OF_RANGE;case dn.UNIMPLEMENTED:return T.UNIMPLEMENTED;case dn.DATA_LOSS:return T.DATA_LOSS;default:return Q()}}(qe=dn||(dn={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";class Sa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Hl(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return Dz(this.inner)}size(){return this.innerSize}}const dme=new zt(B.comparator);function Ui(){return dme}const u3=new zt(B.comparator);function Cp(...n){let e=u3;for(const t of n)e=e.insert(t.key,t);return e}function d3(n){let e=u3;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function xs(){return Ep()}function h3(){return Ep()}function Ep(){return new Sa(n=>n.toString(),(n,e)=>n.isEqual(e))}const hme=new zt(B.comparator),fme=new ct(B.comparator);function Ee(...n){let e=fme;for(const t of n)e=e.add(t);return e}const pme=new ct(ge);function bv(){return pme}class Tp{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const i=new Map;return i.set(e,Ip.createSynthesizedTargetChangeForCurrentChange(e,t)),new Tp(re.min(),i,bv(),Ui(),Ee())}}class Ip{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Ip(yn.EMPTY_BYTE_STRING,t,Ee(),Ee(),Ee())}}class wv{constructor(e,t,i,r){this.Tt=e,this.removedTargetIds=t,this.key=i,this.Et=r}}class f3{constructor(e,t){this.targetId=e,this.At=t}}class p3{constructor(e,t,i=yn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class m3{constructor(){this.Rt=0,this.bt=_3(),this.Pt=yn.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Ee(),t=Ee(),i=Ee();return this.bt.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Q()}}),new Ip(this.Pt,this.vt,e,t,i)}Nt(){this.Vt=!1,this.bt=_3()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class mme{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Ui(),this.qt=g3(),this.Kt=new ct(ge)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const i=this.zt(t);switch(e.state){case 0:this.Ht(t)&&i.Ct(e.resumeToken);break;case 1:i.Ft(),i.St||i.Nt(),i.Ct(e.resumeToken);break;case 2:i.Ft(),i.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(i.$t(),i.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),i.Ct(e.resumeToken));break;default:Q()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((i,r)=>{this.Ht(r)&&t(r)})}Yt(e){const t=e.targetId,i=e.At.count,r=this.Xt(t);if(r){const s=r.target;if(pv(s))if(0===i){const o=new B(s.path);this.jt(t,o,bt.newNoDocument(o,re.min()))}else oe(1===i);else this.Zt(t)!==i&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((s,o)=>{const a=this.Xt(o);if(a){if(s.current&&pv(a.target)){const l=new B(a.target.path);null!==this.Ut.get(l)||this.ee(o,l)||this.jt(o,l,bt.newNoDocument(l,e))}s.Dt&&(t.set(o,s.xt()),s.Nt())}});let i=Ee();this.qt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xt(l);return!c||2===c.purpose||(a=!1,!1)}),a&&(i=i.add(s))}),this.Ut.forEach((s,o)=>o.setReadTime(e));const r=new Tp(e,t,this.Kt,this.Ut,i);return this.Ut=Ui(),this.qt=g3(),this.Kt=new ct(ge),r}Qt(e,t){if(!this.Ht(e))return;const i=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,i),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,i){if(!this.Ht(e))return;const r=this.zt(e);this.ee(e,t)?r.kt(t,1):r.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),i&&(this.Ut=this.Ut.insert(t,i))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new m3,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new ct(ge),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||A("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new m3),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function g3(){return new zt(B.comparator)}function _3(){return new zt(B.comparator)}const gme={asc:"ASCENDING",desc:"DESCENDING"},_me={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class yme{constructor(e,t){this.databaseId=e,this.gt=t}}function Dp(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function y3(n,e){return n.gt?e.toBase64():e.toUint8Array()}function vme(n,e){return Dp(n,e.toTimestamp())}function Pn(n){return oe(!!n),re.fromTimestamp(function(e){const t=Ca(e);return new Rt(t.seconds,t.nanos)}(n))}function rS(n,e){return(t=n,new We(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function v3(n){const e=We.fromString(n);return oe(x3(e)),e}function Sp(n,e){return rS(n.databaseId,e.path)}function Ms(n,e){const t=v3(e);if(t.get(1)!==n.databaseId.projectId)throw new x(T.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new x(T.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new B(w3(t))}function sS(n,e){return rS(n.databaseId,e)}function b3(n){const e=v3(n);return 4===e.length?We.emptyPath():w3(e)}function xp(n){return new We(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function w3(n){return oe(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function C3(n,e,t){return{name:Sp(n,e),fields:t.value.mapValue.fields}}function E3(n,e,t){const i=Ms(n,e.name),r=Pn(e.updateTime),s=new Gn({mapValue:{fields:e.fields}}),o=bt.newFoundDocument(i,r,s);return t&&o.setHasCommittedMutations(),t?o.setHasCommittedMutations():o}function Mp(n,e){let t;if(e instanceof pd)t={update:C3(n,e.key,e.value)};else if(e instanceof md)t={delete:Sp(n,e.key)};else if(e instanceof mo)t={update:C3(n,e.key,e.data),updateMask:xme(e.fieldMask)};else{if(!(e instanceof iS))return Q();t={verify:Sp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const o=s.transform;if(o instanceof hd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Wl)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof ql)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof fd)return{fieldPath:s.field.canonicalString(),increment:o.yt};throw Q()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:vme(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:Q()),t;var r}function oS(n,e){const t=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?Pt.updateTime(Pn(r.updateTime)):void 0!==r.exists?Pt.exists(r.exists):Pt.none():Pt.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,o){let a=null;"setToServerValue"in o?(oe("REQUEST_TIME"===o.setToServerValue),a=new hd):"appendMissingElements"in o?a=new Wl(o.appendMissingElements.values||[]):"removeAllFromArray"in o?a=new ql(o.removeAllFromArray.values||[]):"increment"in o?a=new fd(s,o.increment):Q();const l=$t.fromServerFormat(o.fieldPath);return new bp(l,a)}(n,r)):[];var r;if(e.update){const r=Ms(n,e.update.name),s=new Gn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new dr((e.updateMask.fieldPaths||[]).map(c=>$t.fromServerFormat(c)));return new mo(r,s,o,t,i)}return new pd(r,s,t,i)}if(e.delete){const r=Ms(n,e.delete);return new md(r,t)}if(e.verify){const r=Ms(n,e.verify);return new iS(r,t)}return Q()}function T3(n,e){return{documents:[sS(n,e.path)]}}function I3(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=sS(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=sS(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(l){if(0===l.length)return;const c=l.map(u=>function(d){if("=="===d.op){if(Rz(d.value))return{unaryFilter:{field:gd(d.field),op:"IS_NAN"}};if(kz(d.value))return{unaryFilter:{field:gd(d.field),op:"IS_NULL"}}}else if("!="===d.op){if(Rz(d.value))return{unaryFilter:{field:gd(d.field),op:"IS_NOT_NAN"}};if(kz(d.value))return{unaryFilter:{field:gd(d.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gd(d.field),op:Ime(d.op),value:d.value}}}(u));return 1===c.length?c[0]:{compositeFilter:{op:"AND",filters:c}}}(e.filters);r&&(t.structuredQuery.where=r);const s=function(l){if(0!==l.length)return l.map(c=>{return{field:gd((u=c).field),direction:Tme(u.dir)};var u})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=(c=e.limit,n.gt||fp(c)?c:{value:c});var c,a,l;return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(t.structuredQuery.endAt={before:!(l=e.endAt).inclusive,values:l.position}),t}function D3(n){let e=b3(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){oe(1===i);const u=t.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=S3(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(u=>{return new cd(_d((d=u).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;t.limit&&(a=function(u){let d;return d="object"==typeof u?u.value:u,fp(d)?null:d}(t.limit));let l=null;var u;t.startAt&&(l=new Da((u=t.startAt).values||[],!!u.before));let c=null;return t.endAt&&(c=function(u){return new Da(u.values||[],!u.before)}(t.endAt)),$z(e,r,o,s,a,"F",l,c)}function S3(n){return n?void 0!==n.unaryFilter?[Sme(n)]:void 0!==n.fieldFilter?[Dme(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>S3(e)).reduce((e,t)=>e.concat(t)):Q():[]}function Tme(n){return gme[n]}function Ime(n){return _me[n]}function gd(n){return{fieldPath:n.canonicalString()}}function _d(n){return $t.fromServerFormat(n.fieldPath)}function Dme(n){return Wn.create(_d(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}function Sme(n){switch(n.unaryFilter.op){case"IS_NAN":const e=_d(n.unaryFilter.field);return Wn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=_d(n.unaryFilter.field);return Wn.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=_d(n.unaryFilter.field);return Wn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=_d(n.unaryFilter.field);return Wn.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}function xme(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function x3(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function yi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=M3(e)),e=Mme(n.get(t),e);return M3(e)}function Mme(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function M3(n){return n+"\x01\x01"}function As(n){const e=n.length;if(oe(e>=2),2===e)return oe("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),We.emptyPath();const t=e-2,i=[];let r="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Q(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let l;0===r.length?l=a:(r+=a,l=r,r=""),i.push(l);break;case"\x10":r+=n.substring(s,o),r+="\0";break;case"\x11":r+=n.substring(s,o+1);break;default:Q()}s=o+2}return new We(i)}const A3=["userId","batchId"];function Cv(n,e){return[n,yi(e)]}function k3(n,e,t){return[n,yi(e),t]}const Ame={},kme=["prefixPath","collectionGroup","readTime","documentId"],Rme=["prefixPath","collectionGroup","documentId"],Pme=["collectionGroup","readTime","prefixPath","documentId"],Ome=["canonicalId","targetId"],Nme=["targetId","path"],Fme=["path","targetId"],Lme=["collectionId","parent"],Vme=["indexId","uid"],Bme=["uid","sequenceNumber"],Ume=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Hme=["indexId","uid","orderedDocumentKey"],jme=["userId","collectionPath","documentId"],$me=["userId","collectionPath","largestBatchId"],zme=["userId","collectionGroup","largestBatchId"],R3=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Gme=[...R3,"documentOverlays"],P3=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],O3=P3,Wme=[...O3,"indexConfiguration","indexState","indexEntries"];class aS extends Ez{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function On(n,e){const t=U(n);return es.O(t.ie,e)}class lS{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&lme(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=wp(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=wp(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=h3();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;const l=n3(o,a);null!==l&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(re.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ee())}isEqual(e){return this.batchId===e.batchId&&od(this.mutations,e.mutations,(t,i)=>r3(t,i))&&od(this.baseMutations,e.baseMutations,(t,i)=>r3(t,i))}}class cS{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){oe(e.mutations.length===i.length);let r=hme;const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new cS(e,t,i,r)}}class uS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class xa{constructor(e,t,i,r,s=re.min(),o=re.min(),a=yn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new xa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class N3{constructor(e){this.re=e}}function F3(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ev(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:Sp(r=n.re,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Dp(r,s.version.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Kl(e.version)};else{if(!e.isUnknownDocument())return Q();i.unknownDocument={path:t.path.toArray(),version:Kl(e.version)}}var r,s;return i}function Ev(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Kl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ql(n){const e=new Rt(n.seconds,n.nanoseconds);return re.fromTimestamp(e)}function Yl(n,e){const t=(e.baseMutations||[]).map(s=>oS(n.re,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(o.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const i=e.mutations.map(s=>oS(n.re,s)),r=Rt.fromMillis(e.localWriteTimeMs);return new lS(e.batchId,r,t,i)}function Ap(n){const e=Ql(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ql(n.lastLimboFreeSnapshotVersion):re.min();let i;var r;return void 0!==n.query.documents?(oe(1===(r=n.query).documents.length),i=Bi(ud(b3(r.documents[0])))):i=Bi(D3(n.query)),new xa(i,n.targetId,0,n.lastListenSequenceNumber,e,t,yn.fromBase64String(n.resumeToken))}function L3(n,e){const t=Kl(e.snapshotVersion),i=Kl(e.lastLimboFreeSnapshotVersion);let r;r=pv(e.target)?T3(n.re,e.target):I3(n.re,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Gl(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function dS(n){const e=D3({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?gv(e,e.limit,"L"):e}function hS(n,e){return new uS(e.largestBatchId,oS(n.re,e.overlayMutation))}function V3(n,e){const t=e.path.lastSegment();return[n,yi(e.path.popLast()),t]}function B3(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Kl(i.readTime),documentKey:yi(i.documentKey.path),largestBatchId:i.largestBatchId}}class Kme{getBundleMetadata(e,t){return U3(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:Ql(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return U3(e).put({bundleId:(i=t).id,createTime:Kl(Pn(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return H3(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:dS(r.bundledQuery),readTime:Ql(r.readTime)};var r})}saveNamedQuery(e,t){return H3(e).put({name:(i=t).name,readTime:Kl(Pn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function U3(n){return On(n,"bundles")}function H3(n){return On(n,"namedQueries")}class Tv{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Tv(e,t.uid||"")}getOverlay(e,t){return kp(e).get(V3(this.userId,t)).next(i=>i?hS(this.It,i):null)}getOverlays(e,t){const i=xs();return E.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((s,o)=>{const a=new uS(t,o);r.push(this.ue(e,a))}),E.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(o=>r.add(yi(o.getCollectionPath())));const s=[];return r.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(kp(e).Y("collectionPathOverlayIndex",a))}),E.waitFor(s)}getOverlaysForCollection(e,t,i){const r=xs(),s=yi(t),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return kp(e).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=hS(this.It,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const s=xs();let o;const a=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return kp(e).Z({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const d=hS(this.It,c);s.size()<r||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}ue(e,t){return kp(e).put(function(i,r,s){const[o,a,l]=V3(r,s.mutation.key);return{userId:r,collectionPath:a,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Mp(i.re,s.mutation)}}(this.It,this.userId,t))}}function kp(n){return On(n,"documentOverlays")}class Xl{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Gt(e.integerValue));else if("doubleValue"in e){const i=Gt(e.doubleValue);isNaN(i)?this.le(t,13):(this.le(t,15),pp(i)?t.fe(0):t.fe(i))}else if("timestampValue"in e){const i=e.timestampValue;this.le(t,20),"string"==typeof i?t.de(i):(t.de(`${i.seconds||""}`),t.fe(i.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(jl(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?Pz(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Q()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const i=e.fields||{};this.le(t,55);for(const r of Object.keys(i))this._e(r,t),this.ae(i[r],t)}pe(e,t){const i=e.values||[];this.le(t,50);for(const r of i)this.ae(r,t)}ge(e,t){this.le(t,37),B.fromName(e).path.forEach(i=>{this.le(t,60),this.Ie(i,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function Qme(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function j3(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const s=Qme(255&t[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}Xl.Te=new Xl;class Yme{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ae(i.value),i=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Pe(i.value),i=t.next();this.ve()}Ve(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const r=t.codePointAt(0);this.Ae(240|r>>>18),this.Ae(128|63&r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r)}}this.Re()}Se(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{const r=t.codePointAt(0);this.Pe(240|r>>>18),this.Pe(128|63&r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r)}}this.ve()}De(e){const t=this.Ce(e),i=j3(t);this.xe(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Ne(e){const t=this.Ce(e),i=j3(t);this.xe(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class Xme{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Zme{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class Rp{constructor(){this.Be=new Yme,this.Le=new Xme(this.Be),this.Ue=new Zme(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Zl{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new Zl(this.indexId,this.documentKey,this.arrayValue,i)}}function Jl(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=$3(n.arrayValue,e.arrayValue),0!==t?t:(t=$3(n.directionalValue,e.directionalValue),0!==t?t:B.comparator(n.documentKey,e.documentKey)))}function $3(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class Jme{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const i=t;i.dt()?this.je=i:this.Qe.push(i)}}We(e){const t=GD(e);if(void 0!==t&&!this.ze(t))return!1;const i=Bl(e);let r=0,s=0;for(;r<i.length&&this.ze(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.je){const o=i[r];if(!this.He(this.je,o)||!this.Je(this.Ge[s++],o))return!1;++r}for(;r<i.length;++r){const o=i[r];if(s>=this.Ge.length||!this.Je(this.Ge[s++],o))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class ege{constructor(){this.Ye=new fS}addToCollectionParentIndex(e,t){return this.Ye.add(t),E.resolve()}getCollectionParents(e,t){return E.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return E.resolve()}deleteFieldIndex(e,t){return E.resolve()}getDocumentsMatchingTarget(e,t){return E.resolve(null)}getIndexType(e,t){return E.resolve(0)}getFieldIndexes(e,t){return E.resolve([])}getNextCollectionGroupToUpdate(e){return E.resolve(null)}getMinOffset(e,t){return E.resolve(ur.min())}getMinOffsetFromCollectionGroup(e,t){return E.resolve(ur.min())}updateCollectionGroup(e,t,i){return E.resolve()}updateIndexEntries(e,t){return E.resolve()}}class fS{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new ct(We.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new ct(We.comparator)).toArray()}}const Iv=new Uint8Array(0);class tge{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new fS,this.Ze=new Sa(i=>Gl(i),(i,r)=>yp(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const s={collectionId:i,parent:yi(r)};return z3(e).put(s)}return E.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[vz(t),""],!1,!0);return z3(e).W(r).next(s=>{for(const o of s){if(o.collectionId!==t)break;i.push(As(o.parent))}return i})}addFieldIndex(e,t){const i=Dv(e),r={indexId:(o=t).indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])};var o;delete r.indexId;const s=i.add(r);if(t.indexState){const o=Op(e);return s.next(a=>{o.put(B3(a,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const i=Dv(e),r=Op(e),s=Pp(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=Pp(e);let r=!0;const s=new Map;return E.forEach(this.tn(t),o=>this.en(e,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=Ee();const a=[];return E.forEach(s,(l,c)=>{var u;A("IndexedDbIndexManager",`Using index ${u=l,`id=${u.indexId}|cg=${u.collectionGroup}|f=${u.fields.map(D=>`${D.fieldPath}:${D.kind}`).join(",")}`} to execute ${Gl(t)}`);const d=function(D,S){const F=GD(S);if(void 0===F)return null;for(const W of mv(D,F.fieldPath))switch(W.op){case"array-contains-any":return W.value.arrayValue.values||[];case"array-contains":return[W.value]}return null}(c,l),h=function(D,S){const F=new Map;for(const W of Bl(S))for(const ae of mv(D,W.fieldPath))switch(ae.op){case"==":case"in":F.set(W.fieldPath.canonicalString(),ae.value);break;case"not-in":case"!=":return F.set(W.fieldPath.canonicalString(),ae.value),Array.from(F.values())}return null}(c,l),f=function(D,S){const F=[];let W=!0;for(const ae of Bl(S)){const ft=0===ae.kind?Vz(D,ae.fieldPath,D.startAt):Bz(D,ae.fieldPath,D.startAt);F.push(ft.value),W&&(W=ft.inclusive)}return new Da(F,W)}(c,l),p=function(D,S){const F=[];let W=!0;for(const ae of Bl(S)){const ft=0===ae.kind?Bz(D,ae.fieldPath,D.endAt):Vz(D,ae.fieldPath,D.endAt);F.push(ft.value),W&&(W=ft.inclusive)}return new Da(F,W)}(c,l),_=this.nn(l,c,f),y=this.nn(l,c,p),b=this.sn(l,c,h),v=this.rn(l.indexId,d,_,f.inclusive,y,p.inclusive,b);return E.forEach(v,D=>i.J(D,t.limit).next(S=>{S.forEach(F=>{const W=B.fromSegments(F.documentKey);o.has(W)||(o=o.add(W),a.push(W))})}))}).next(()=>a)}return E.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,i,r,s,o,a){const l=(null!=t?t.length:1)*Math.max(i.length,s.length),c=l/(null!=t?t.length:1),u=[];for(let d=0;d<l;++d){const h=t?this.on(t[d/c]):Iv,f=this.un(e,h,i[d%c],r),p=this.cn(e,h,s[d%c],o),_=a.map(y=>this.un(e,h,y,!0));u.push(...this.createRange(f,p,_))}return u}un(e,t,i,r){const s=new Zl(e,B.empty(),t,i);return r?s:s.Ke()}cn(e,t,i,r){const s=new Zl(e,B.empty(),t,i);return r?s.Ke():s}en(e,t){const i=new Jme(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(const a of s)i.We(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let i=2;return E.forEach(this.tn(t),r=>this.en(e,r).next(s=>{s?0!==i&&s.fields.length<function(o){let a=new ct($t.comparator),l=!1;for(const c of o.filters){const u=c;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?l=!0:a=a.add(u.field))}for(const c of o.orderBy)c.field.isKeyField()||(a=a.add(c.field));return a.size+(l?1:0)}(r)&&(i=1):i=0})).next(()=>i)}an(e,t){const i=new Rp;for(const r of Bl(e)){const s=t.data.field(r.fieldPath);if(null==s)return null;const o=i.qe(r.kind);Xl.Te.ce(s,o)}return i.$e()}on(e){const t=new Rp;return Xl.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const i=new Rp;return Xl.Te.ce(zl(this.databaseId,t),i.qe(function(r){const s=Bl(r);return 0===s.length?0:s[s.length-1].kind}(e))),i.$e()}sn(e,t,i){if(null===i)return[];let r=[];r.push(new Rp);let s=0;for(const o of Bl(e)){const a=i[s++];for(const l of r)if(this.ln(t,o.fieldPath)&&gp(a))r=this.fn(r,o,a);else{const c=l.qe(o.kind);Xl.Te.ce(a,c)}}return this.dn(r)}nn(e,t,i){return this.sn(e,t,i.position)}dn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].$e();return t}fn(e,t,i){const r=[...e],s=[];for(const o of i.arrayValue.values||[])for(const a of r){const l=new Rp;l.seed(a.$e()),Xl.Te.ce(o,l.qe(t.kind)),s.push(l)}return s}ln(e,t){return!!e.filters.find(i=>i instanceof Wn&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=Dv(e),r=Op(e);return(t?i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.W()).next(s=>{const o=[];return E.forEach(s,a=>r.get([a.indexId,this.uid]).next(l=>{o.push(function(c,u){const d=u?new up(u.sequenceNumber,new ur(Ql(u.readTime),new B(As(u.documentKey)),u.largestBatchId)):up.empty(),h=c.fields.map(([f,p])=>new cv($t.fromServerFormat(f),p));return new lv(c.indexId,c.collectionGroup,h,d)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:ge(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=Dv(e),s=Op(e);return this._n(e).next(o=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>E.forEach(a,l=>s.put(B3(l.indexId,this.user,o,i)))))}updateIndexEntries(e,t){const i=new Map;return E.forEach(t,(r,s)=>{const o=i.get(r.collectionGroup);return(o?E.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),E.forEach(a,l=>this.wn(e,r,l).next(c=>{const u=this.mn(s,l);return c.isEqual(u)?E.resolve():this.gn(e,s,l,c,u)}))))})}yn(e,t,i,r){return Pp(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(i,t.key),documentKey:t.key.path.toArray()})}pn(e,t,i,r){return Pp(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(i,t.key),t.key.path.toArray()])}wn(e,t,i){const r=Pp(e);let s=new ct(Jl);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.hn(i,t)])},(o,a)=>{s=s.add(new Zl(i.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}mn(e,t){let i=new ct(Jl);const r=this.an(t,e);if(null==r)return i;const s=GD(t);if(null!=s){const o=e.data.field(s.fieldPath);if(gp(o))for(const a of o.arrayValue.values||[])i=i.add(new Zl(t.indexId,e.key,this.on(a),r))}else i=i.add(new Zl(t.indexId,e.key,Iv,r));return i}gn(e,t,i,r,s){A("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(a,l,c,u,d){const h=a.getIterator(),f=l.getIterator();let p=ad(h),_=ad(f);for(;p||_;){let y=!1,b=!1;if(p&&_){const v=c(p,_);v<0?b=!0:v>0&&(y=!0)}else null!=p?b=!0:y=!0;y?(u(_),_=ad(f)):b?(d(p),p=ad(h)):(p=ad(h),_=ad(f))}}(r,s,Jl,a=>{o.push(this.yn(e,t,i,a))},a=>{o.push(this.pn(e,t,i,a))}),E.waitFor(o)}_n(e){let t=1;return Op(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((o,a)=>Jl(o,a)).filter((o,a,l)=>!a||0!==Jl(o,l[a-1]));const r=[];r.push(e);for(const o of i){const a=Jl(o,e),l=Jl(o,t);if(0===a)r[0]=e.Ke();else if(a>0&&l<0)r.push(o),r.push(o.Ke());else if(l>0)break}r.push(t);const s=[];for(let o=0;o<r.length;o+=2)s.push(IDBKeyRange.bound([r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,Iv,[]],[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,Iv,[]]));return s}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(G3)}getMinOffset(e,t){return E.mapArray(this.tn(t),i=>this.en(e,i).next(r=>r||Q())).next(G3)}}function z3(n){return On(n,"collectionParents")}function Pp(n){return On(n,"indexEntries")}function Dv(n){return On(n,"indexConfiguration")}function Op(n){return On(n,"indexState")}function G3(n){oe(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;WD(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new ur(e.readTime,e.documentKey,t)}const W3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Hi{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Hi(e,Hi.DEFAULT_COLLECTION_PERCENTILE,Hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function q3(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=i.Z({range:o},(u,d,h)=>(a++,h.delete()));s.push(l.next(()=>{oe(1===a)}));const c=[];for(const u of t.mutations){const d=k3(e,u.key.path,t.batchId);s.push(r.delete(d)),c.push(u.key)}return E.waitFor(s).next(()=>c)}function Sv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Q();e=n.noDocument}return JSON.stringify(e).length}Hi.DEFAULT_COLLECTION_PERCENTILE=10,Hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hi.DEFAULT=new Hi(41943040,Hi.DEFAULT_COLLECTION_PERCENTILE,Hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hi.DISABLED=new Hi(-1,0,0);class xv{constructor(e,t,i,r){this.userId=e,this.It=t,this.indexManager=i,this.referenceDelegate=r,this.In={}}static oe(e,t,i,r){oe(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new xv(s,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ma(e).Z({index:"userMutationsIndex",range:i},(r,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const s=yd(e),o=Ma(e);return o.add({}).next(a=>{oe("number"==typeof a);const l=new lS(a,t,i,r),c=function(h,f,p){const _=p.baseMutations.map(b=>Mp(h.re,b)),y=p.mutations.map(b=>Mp(h.re,b));return{userId:f,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:_,mutations:y}}(this.It,this.userId,l),u=[];let d=new ct((h,f)=>ge(h.canonicalString(),f.canonicalString()));for(const h of r){const f=k3(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(o.put(c)),u.push(s.put(f,Ame))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.In[a]=l.keys()}),E.waitFor(u).next(()=>l)})}lookupMutationBatch(e,t){return Ma(e).get(t).next(i=>i?(oe(i.userId===this.userId),Yl(this.It,i)):null)}Tn(e,t){return this.In[t]?E.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.In[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return Ma(e).Z({index:"userMutationsIndex",range:r},(o,a,l)=>{a.userId===this.userId&&(oe(a.batchId>=i),s=Yl(this.It,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Ma(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ma(e).W("userMutationsIndex",t).next(i=>i.map(r=>Yl(this.It,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Cv(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return yd(e).Z({range:r},(o,a,l)=>{const[c,u,d]=o,h=As(u);if(c===this.userId&&t.path.isEqual(h))return Ma(e).get(d).next(f=>{if(!f)throw Q();oe(f.userId===this.userId),s.push(Yl(this.It,f))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ct(ge);const r=[];return t.forEach(s=>{const o=Cv(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=yd(e).Z({range:a},(c,u,d)=>{const[h,f,p]=c,_=As(f);h===this.userId&&s.path.isEqual(_)?i=i.add(p):d.done()});r.push(l)}),E.waitFor(r).next(()=>this.En(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,s=Cv(this.userId,i),o=IDBKeyRange.lowerBound(s);let a=new ct(ge);return yd(e).Z({range:o},(l,c,u)=>{const[d,h,f]=l,p=As(h);d===this.userId&&i.isPrefixOf(p)?p.length===r&&(a=a.add(f)):u.done()}).next(()=>this.En(e,a))}En(e,t){const i=[],r=[];return t.forEach(s=>{r.push(Ma(e).get(s).next(o=>{if(null===o)throw Q();oe(o.userId===this.userId),i.push(Yl(this.It,o))}))}),E.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return q3(e.ie,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),E.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return E.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return yd(e).Z({range:i},(s,o,a)=>{if(s[0]===this.userId){const l=As(s[1]);r.push(l)}else a.done()}).next(()=>{oe(0===r.length)})})}containsKey(e,t){return K3(e,this.userId,t)}Rn(e){return Q3(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function K3(n,e,t){const i=Cv(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return yd(n).Z({range:s,X:!0},(a,l,c)=>{const[u,d,h]=a;u===e&&d===r&&(o=!0),c.done()}).next(()=>o)}function Ma(n){return On(n,"mutations")}function yd(n){return On(n,"documentMutations")}function Q3(n){return On(n,"mutationQueues")}class ec{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new ec(0)}static vn(){return new ec(-1)}}class nge{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const i=new ec(t.highestTargetId);return t.highestTargetId=i.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>re.fromTimestamp(new Rt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Vn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Sn(e,r)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(i=>(i.targetCount+=1,this.Cn(t,i),this.Sn(e,i))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>vd(e).delete(t.targetId)).next(()=>this.Vn(e)).next(i=>(oe(i.targetCount>0),i.targetCount-=1,this.Sn(e,i)))}removeTargets(e,t,i){let r=0;const s=[];return vd(e).Z((o,a)=>{const l=Ap(a);l.sequenceNumber<=t&&null===i.get(l.targetId)&&(r++,s.push(this.removeTargetData(e,l)))}).next(()=>E.waitFor(s)).next(()=>r)}forEachTarget(e,t){return vd(e).Z((i,r)=>{const s=Ap(r);t(s)})}Vn(e){return Y3(e).get("targetGlobalKey").next(t=>(oe(null!==t),t))}Sn(e,t){return Y3(e).put("targetGlobalKey",t)}Dn(e,t){return vd(e).put(L3(this.It,t))}Cn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=Gl(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return vd(e).Z({range:r,index:"queryTargetsIndex"},(o,a,l)=>{const c=Ap(a);yp(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,i){const r=[],s=Aa(e);return t.forEach(o=>{const a=yi(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,o))}),E.waitFor(r)}removeMatchingKeys(e,t,i){const r=Aa(e);return E.forEach(t,s=>{const o=yi(s.path);return E.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){const i=Aa(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=Aa(e);let s=Ee();return r.Z({range:i,X:!0},(o,a,l)=>{const c=As(o[1]),u=new B(c);s=s.add(u)}).next(()=>s)}containsKey(e,t){const i=yi(t.path),r=IDBKeyRange.bound([i],[vz(i)],!1,!0);let s=0;return Aa(e).Z({index:"documentTargetsIndex",X:!0,range:r},([o,a],l,c)=>{0!==o&&(s++,c.done())}).next(()=>s>0)}se(e,t){return vd(e).get(t).next(i=>i?Ap(i):null)}}function vd(n){return On(n,"targets")}function Y3(n){return On(n,"targetGlobal")}function Aa(n){return On(n,"targetDocuments")}function X3([n,e],[t,i]){const r=ge(n,t);return 0===r?ge(e,i):r}class ige{constructor(e){this.xn=e,this.buffer=new ct(X3),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();X3(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class rge{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;A("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,m(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){wa(i)?A("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield ba(i)}yield t.Fn(3e5)}))}}class sge{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return E.resolve(Vi.at);const i=new ige(t);return this.$n.forEachTarget(e,r=>i.Mn(r.sequenceNumber)).next(()=>this.$n.Ln(e,r=>i.Mn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.$n.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(A("LruGarbageCollector","Garbage collection skipped; disabled"),E.resolve(W3)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(A("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),W3):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let i,r,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(A("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(e,i,t))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(c=Date.now(),$D()<=Be.DEBUG&&A("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-u}ms\n\tDetermined least recently used ${r} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${d} documents in `+(c-l)+`ms\nTotal Duration: ${c-u}ms`),E.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}}class oge{constructor(e,t){this.db=e,this.garbageCollector=new sge(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}qn(e){let t=0;return this.Ln(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(i,r)=>t(r))}addReference(e,t,i){return Mv(e,i)}removeReference(e,t,i){return Mv(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Mv(e,t)}Gn(e,t){return function(i,r){let s=!1;return Q3(i).tt(o=>K3(i,o,r).next(a=>(a&&(s=!0),E.resolve(!a)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Kn(e,(o,a)=>{if(a<=t){const l=this.Gn(e,o).next(c=>{if(!c)return s++,i.getEntry(e,o).next(()=>(i.removeEntry(o,re.min()),Aa(e).delete([0,yi(o.path)])))});r.push(l)}}).next(()=>E.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Mv(e,t)}Kn(e,t){const i=Aa(e);let r,s=Vi.at;return i.Z({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{0===o?(s!==Vi.at&&t(new B(As(r)),s),s=c,r=l):s=Vi.at}).next(()=>{s!==Vi.at&&t(new B(As(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Mv(n,e){return Aa(n).put((i=n.currentSequenceNumber,{targetId:0,path:yi(e.path),sequenceNumber:i}));var i}class Z3{constructor(){this.changes=new Sa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?E.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class age{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return tc(e).put(i)}removeEntry(e,t,i){return tc(e).delete(function(r,s){const o=r.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Ev(s),o[o.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Qn(e,i)))}getEntry(e,t){let i=bt.newInvalidDocument(t);return tc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Np(t))},(r,s)=>{i=this.jn(t,s)}).next(()=>i)}Wn(e,t){let i={size:0,document:bt.newInvalidDocument(t)};return tc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Np(t))},(r,s)=>{i={document:this.jn(t,s),size:Sv(s)}}).next(()=>i)}getEntries(e,t){let i=Ui();return this.zn(e,t,(r,s)=>{const o=this.jn(r,s);i=i.insert(r,o)}).next(()=>i)}Hn(e,t){let i=Ui(),r=new zt(B.comparator);return this.zn(e,t,(s,o)=>{const a=this.jn(s,o);i=i.insert(s,a),r=r.insert(s,Sv(o))}).next(()=>({documents:i,Jn:r}))}zn(e,t,i){if(t.isEmpty())return E.resolve();let r=new ct(nG);t.forEach(l=>r=r.add(l));const s=IDBKeyRange.bound(Np(r.first()),Np(r.last())),o=r.getIterator();let a=o.getNext();return tc(e).Z({index:"documentKeyIndex",range:s},(l,c,u)=>{const d=B.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&nG(a,d)<0;)i(a,null),a=o.getNext();a&&a.isEqual(d)&&(i(a,c),a=o.hasNext()?o.getNext():null),a?u.j(Np(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getAllFromCollection(e,t,i){const r=[t.popLast().toArray(),t.lastSegment(),Ev(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return tc(e).W(IDBKeyRange.bound(r,s,!0)).next(o=>{let a=Ui();for(const l of o){const c=this.jn(B.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);a=a.insert(c.key,c)}return a})}getAllFromCollectionGroup(e,t,i,r){let s=Ui();const o=tG(t,i),a=tG(t,ur.max());return tc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const d=this.jn(B.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===r&&u.done()}).next(()=>s)}newChangeBuffer(e){return new lge(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return eG(e).get("remoteDocumentGlobalKey").next(t=>(oe(!!t),t))}Qn(e,t){return eG(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const i=function qme(n,e){let t;if(e.document)t=E3(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=B.fromSegments(e.noDocument.path),r=Ql(e.noDocument.readTime);t=bt.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Q();{const i=B.fromSegments(e.unknownDocument.path),r=Ql(e.unknownDocument.version);t=bt.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(i){const r=new Rt(i[0],i[1]);return re.fromTimestamp(r)}(e.readTime)),t}(this.It,t);if(!i.isNoDocument()||!i.version.isEqual(re.min()))return i}return bt.newInvalidDocument(e)}}function J3(n){return new age(n)}class lge extends Z3{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Sa(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new ct((s,o)=>ge(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Xn.get(s);if(t.push(this.Yn.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=F3(this.Yn.It,o);r=r.add(s.path.popLast()),i+=Sv(l)-a.size,t.push(this.Yn.addEntry(e,s,l))}else if(i-=a.size,this.trackRemovals){const l=F3(this.Yn.It,o.convertToNoDocument(re.min()));t.push(this.Yn.addEntry(e,s,l))}}),r.forEach(s=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Yn.updateMetadata(e,i)),E.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(i=>(this.Xn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:i,Jn:r})=>(r.forEach((s,o)=>{this.Xn.set(s,{size:o,readTime:i.get(s).readTime})}),i))}}function eG(n){return On(n,"remoteDocumentGlobal")}function tc(n){return On(n,"remoteDocumentsV14")}function Np(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function tG(n,e){const t=e.documentKey.path.toArray();return[n,Ev(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function nG(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=ge(t[s],i[s]),r)return r;return r=ge(t.length,i.length),r||(r=ge(t[t.length-2],i[i.length-2]),r||ge(t[t.length-1],i[i.length-1]))}class cge{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class iG{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.getBaseDocument(e,t,i))).next(r=>(null!==i&&wp(i.mutation,r,dr.empty(),Rt.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Ee()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Ee()){const r=xs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Cp();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=xs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Ee()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=Ui();const o=Ep(),a=Ep();return t.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(void 0===u||u.mutation instanceof mo)?s=s.insert(c.key,c):void 0!==u&&(o.set(c.key,u.mutation.getFieldMask()),wp(u.mutation,c,u.mutation.getFieldMask(),Rt.now()))}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var d;return a.set(c,new cge(u,null!==(d=o.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,t){const i=Ep();let r=new zt((o,a)=>o-a),s=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(null===c)return;let u=i.get(l)||dr.empty();u=a.applyToLocalView(c,u),i.set(l,u);const d=(r.get(a.batchId)||Ee()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=h3();u.forEach(h=>{if(!s.has(h)){const f=n3(t.get(h),i.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return E.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return B.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):eS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var r}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):E.resolve(xs());let a=-1,l=s;return o.next(c=>E.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?E.resolve():this.getBaseDocument(e,u,d).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Ee())).next(u=>({batchId:a,changes:d3(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new B(t)).next(i=>{let r=Cp();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const r=t.collectionGroup;let s=Cp();return this.indexManager.getCollectionParents(e,r).next(o=>E.forEach(o,a=>{const l=(c=t,u=a.child(r),new po(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,u;return this.getDocumentsMatchingCollectionQuery(e,l,i).next(c=>{c.forEach((u,d)=>{s=s.insert(u,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i){let r;return this.remoteDocumentCache.getAllFromCollection(e,t.path,i).next(s=>(r=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId))).next(s=>{s.forEach((a,l)=>{const c=l.getKey();null===r.get(c)&&(r=r.insert(c,bt.newInvalidDocument(c)))});let o=Cp();return r.forEach((a,l)=>{const c=s.get(a);void 0!==c&&wp(c.mutation,l,dr.empty(),Rt.now()),nS(t,l)&&(o=o.insert(a,l))}),o})}getBaseDocument(e,t,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(e,t):E.resolve(bt.newInvalidDocument(t))}}class uge{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return E.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var i;return this.Zn.set(t.id,{id:(i=t).id,version:i.version,createTime:Pn(i.createTime)}),E.resolve()}getNamedQuery(e,t){return E.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(i=t).name,query:dS(i.bundledQuery),readTime:Pn(i.readTime)}),E.resolve();var i}}class dge{constructor(){this.overlays=new zt(B.comparator),this.es=new Map}getOverlay(e,t){return E.resolve(this.overlays.get(t))}getOverlays(e,t){const i=xs();return E.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ue(e,t,s)}),E.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.es.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(i)),E.resolve()}getOverlaysForCollection(e,t,i){const r=xs(),s=t.length+1,o=new B(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return E.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new zt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let u=s.get(c.largestBatchId);null===u&&(u=xs(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=xs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return E.resolve(a)}ue(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const o=this.es.get(r.largestBatchId).delete(i.key);this.es.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new uS(t,i));let s=this.es.get(t);void 0===s&&(s=Ee(),this.es.set(t,s)),this.es.set(t,s.add(i.key))}}class pS{constructor(){this.ns=new ct(Nn.ss),this.rs=new ct(Nn.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const i=new Nn(e,t);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.cs(new Nn(e,t))}hs(e,t){e.forEach(i=>this.removeReference(i,t))}ls(e){const t=new B(new We([])),i=new Nn(t,e),r=new Nn(t,e+1),s=[];return this.rs.forEachInRange([i,r],o=>{this.cs(o),s.push(o.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new B(new We([])),i=new Nn(t,e),r=new Nn(t,e+1);let s=Ee();return this.rs.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Nn(e,0),i=this.ns.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Nn{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return B.comparator(e.key,t.key)||ge(e._s,t._s)}static os(e,t){return ge(e._s,t._s)||B.comparator(e.key,t.key)}}class hge{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new ct(Nn.ss)}checkEmpty(e){return E.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const s=this.ws;this.ws++;const o=new lS(s,t,i,r);this.mutationQueue.push(o);for(const a of r)this.gs=this.gs.add(new Nn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return E.resolve(o)}lookupMutationBatch(e,t){return E.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.ps(t+1),s=r<0?0:r;return E.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return E.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return E.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Nn(t,0),r=new Nn(t,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([i,r],o=>{const a=this.ys(o._s);s.push(a)}),E.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ct(ge);return t.forEach(r=>{const s=new Nn(r,0),o=new Nn(r,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,o],a=>{i=i.add(a._s)})}),E.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;B.isDocumentKey(s)||(s=s.child(""));const o=new Nn(new B(s),0);let a=new ct(ge);return this.gs.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l._s)),!0)},o),E.resolve(this.Is(a))}Is(e){const t=[];return e.forEach(i=>{const r=this.ys(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){oe(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return E.forEach(t.mutations,r=>{const s=new Nn(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.gs=i})}An(e){}containsKey(e,t){const i=new Nn(t,0),r=this.gs.firstAfterOrEqual(i);return E.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return E.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class fge{constructor(e){this.Es=e,this.docs=new zt(B.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Es(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return E.resolve(i?i.document.mutableCopy():bt.newInvalidDocument(t))}getEntries(e,t){let i=Ui();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():bt.newInvalidDocument(r))}),E.resolve(i)}getAllFromCollection(e,t,i){let r=Ui();const s=new B(t.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!t.isPrefixOf(a.path))break;a.path.length>t.length+1||WD(wz(l),i)<=0||(r=r.insert(l.key,l.mutableCopy()))}return E.resolve(r)}getAllFromCollectionGroup(e,t,i,r){Q()}As(e,t){return E.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new pge(this)}getSize(e){return E.resolve(this.size)}}class pge extends Z3{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Yn.addEntry(e,r)):this.Yn.removeEntry(i)}),E.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class mge{constructor(e){this.persistence=e,this.Rs=new Sa(t=>Gl(t),yp),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.bs=0,this.Ps=new pS,this.targetCount=0,this.vs=ec.Pn()}forEachTarget(e,t){return this.Rs.forEach((i,r)=>t(r)),E.resolve()}getLastRemoteSnapshotVersion(e){return E.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return E.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),E.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.bs&&(this.bs=t),E.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new ec(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,E.resolve()}updateTargetData(e,t){return this.Dn(t),E.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,E.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=t&&null===i.get(a.targetId)&&(this.Rs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),E.waitFor(s).next(()=>r)}getTargetCount(e){return E.resolve(this.targetCount)}getTargetData(e,t){const i=this.Rs.get(t)||null;return E.resolve(i)}addMatchingKeys(e,t,i){return this.Ps.us(t,i),E.resolve()}removeMatchingKeys(e,t,i){this.Ps.hs(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),E.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),E.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Ps.ds(t);return E.resolve(i)}containsKey(e,t){return E.resolve(this.Ps.containsKey(t))}}class rG{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Vi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new mge(this),this.indexManager=new ege,this.remoteDocumentCache=new fge(i=>this.referenceDelegate.xs(i)),this.It=new N3(t),this.Ns=new uge(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dge,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Vs[e.toKey()];return i||(i=new hge(t,this.referenceDelegate),this.Vs[e.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,i){A("MemoryPersistence","Starting transaction:",e);const r=new gge(this.Ss.next());return this.referenceDelegate.ks(),i(r).next(s=>this.referenceDelegate.Ms(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Os(e,t){return E.or(Object.values(this.Vs).map(i=>()=>i.containsKey(e,t)))}}class gge extends Ez{constructor(e){super(),this.currentSequenceNumber=e}}class Av{constructor(e){this.persistence=e,this.Fs=new pS,this.$s=null}static Bs(e){return new Av(e)}get Ls(){if(this.$s)return this.$s;throw Q()}addReference(e,t,i){return this.Fs.addReference(i,t),this.Ls.delete(i.toString()),E.resolve()}removeReference(e,t,i){return this.Fs.removeReference(i,t),this.Ls.add(i.toString()),E.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),E.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(r=>this.Ls.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Ls.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return E.forEach(this.Ls,i=>{const r=B.fromPath(i);return this.Us(e,r).next(s=>{s||t.removeEntry(r,re.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(i=>{i?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return E.or([()=>E.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class _ge{constructor(e){this.It=e}$(e,t,i,r){const s=new uv("createOrUpgrade",t);var a;i<1&&r>=1&&(e.createObjectStore("owner"),(a=e).createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",A3,{unique:!0}),a.createObjectStore("documentMutations"),sG(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=E.resolve();return i<3&&r>=3&&(0!==i&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),sG(e)),o=o.next(()=>function(a){const l=a.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:re.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",c)}(s))),i<4&&r>=4&&(0!==i&&(o=o.next(()=>function(a,l){return l.store("mutations").W().next(c=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",A3,{unique:!0});const u=l.store("mutations"),d=c.map(h=>u.put(h));return E.waitFor(d)})}(e,s))),o=o.next(()=>{!function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(o=o.next(()=>this.qs(s))),i<6&&r>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(s)))),i<7&&r>=7&&(o=o.next(()=>this.Gs(s))),i<8&&r>=8&&(o=o.next(()=>this.Qs(e,s))),i<9&&r>=9&&(o=o.next(()=>{!function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(o=o.next(()=>this.js(s))),i<11&&r>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(o=o.next(()=>{!function(a){const l=a.createObjectStore("documentOverlays",{keyPath:jme});l.createIndex("collectionPathOverlayIndex",$me,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",zme,{unique:!1})}(e)})),i<13&&r>=13&&(o=o.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:kme});l.createIndex("documentKeyIndex",Rme),l.createIndex("collectionGroupIndex",Pme)}(e)).next(()=>this.Ws(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.zs(e,s))),i<15&&r>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:Vme}).createIndex("sequenceNumberIndex",Bme,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:Ume}).createIndex("documentKeyIndex",Hme,{unique:!1})}(e))),o}Ks(e){let t=0;return e.store("remoteDocuments").Z((i,r)=>{t+=Sv(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}qs(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.W().next(r=>E.forEach(r,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",o).next(a=>E.forEach(a,l=>{oe(l.userId===s.userId);const c=Yl(this.It,l);return q3(e,s.userId,c).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Z((o,a)=>{const l=new We(o),c=[0,yi(l)];s.push(t.get(c).next(u=>u?E.resolve():t.put({targetId:0,path:yi(l),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>E.waitFor(s))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Lme});const i=t.store("collectionParents"),r=new fS,s=o=>{if(r.add(o)){const a=o.lastSegment(),l=o.popLast();return i.put({collectionId:a,parent:yi(l)})}};return t.store("remoteDocuments").Z({X:!0},(o,a)=>{const l=new We(o);return s(l.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([o,a,l],c)=>{const u=As(a);return s(u.popLast())}))}js(e){const t=e.store("targets");return t.Z((i,r)=>{const s=Ap(r),o=L3(this.It,s);return t.put(o)})}Ws(e,t){const i=t.store("remoteDocuments"),r=[];return i.Z((s,o)=>{const a=t.store("remoteDocumentsV14"),l=(c=o,c.document?new B(We.fromString(c.document.name).popFirst(5)):c.noDocument?B.fromSegments(c.noDocument.path):c.unknownDocument?B.fromSegments(c.unknownDocument.path):Q()).path.toArray();var c;const u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(u))}).next(()=>E.waitFor(r))}zs(e,t){const i=t.store("mutations"),r=J3(this.It),s=new rG(Av.Bs,this.It.re);return i.W().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=null!==(c=a.get(l.userId))&&void 0!==c?c:Ee();Yl(this.It,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),E.forEach(a,(l,c)=>{const u=new kn(c),d=Tv.oe(this.It,u),h=s.getIndexManager(u),f=xv.oe(u,this.It,h,s.referenceDelegate);return new iG(r,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new aS(t,Vi.at),l).next()})})}}function sG(n){n.createObjectStore("targetDocuments",{keyPath:Nme}).createIndex("documentTargetsIndex",Fme,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ome,{unique:!0}),n.createObjectStore("targetGlobal")}const mS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class gS{constructor(e,t,i,r,s,o,a,l,c,u,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Hs=s,this.window=o,this.document=a,this.Js=c,this.Ys=u,this.Xs=d,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=h=>Promise.resolve(),!gS.C())throw new x(T.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oge(this,r),this.ii=t+"main",this.It=new N3(l),this.ri=new es(this.ii,this.Xs,new _ge(this.It)),this.Cs=new nge(this.referenceDelegate,this.It),this.remoteDocumentCache=J3(this.It),this.Ns=new Kme,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===u&&Jt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new x(T.FAILED_PRECONDITION,mS);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Vi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var i=m(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=m(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(m(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>kv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(wa(e))return A("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return A("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Fp(e).get("owner").next(t=>E.resolve(this.mi(t)))}gi(e){return kv(e).delete(this.clientId)}yi(){var e=this;return m(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=On(i,"clientMetadata");return r.W().next(s=>{const o=e.Ii(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return E.forEach(a,l=>r.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.oi)for(const i of t)e.oi.removeItem(e.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?E.resolve(!0):Fp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new x(T.FAILED_PRECONDITION,mS);return!1}}return!(!this.networkEnabled||!this.inForeground)||kv(e).W().next(i=>void 0===this.Ii(i,5e3).find(r=>{if(this.clientId!==r.clientId){const o=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||o&&a)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&A("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return m(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new aS(t,Vi.at);return e._i(i).next(()=>e.gi(i))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(i=>this.pi(i.updateTimeMs,t)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>kv(e).W().next(t=>this.Ii(t,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return xv.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new tge(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Tv.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,i){A("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=15===(o=this.Xs)?Wme:14===o?O3:13===o?P3:12===o?Gme:11===o?R3:void Q();var o;let a;return this.ri.runTransaction(e,r,s,l=>(a=new aS(l,this.Ss?this.Ss.next():Vi.at),"readwrite-primary"===t?this.fi(a).next(c=>!!c||this.di(a)).next(c=>{if(!c)throw Jt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new x(T.FAILED_PRECONDITION,Cz);return i(a)}).next(c=>this.wi(a).next(()=>c)):this.Vi(a).next(()=>i(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}Vi(e){return Fp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new x(T.FAILED_PRECONDITION,mS)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fp(e).put("owner",t)}static C(){return es.C()}_i(e){const t=Fp(e);return t.get("owner").next(i=>this.mi(i)?(A("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):E.resolve())}pi(e,t){const i=Date.now();return!(e<i-t||e>i&&(Jt(`Detected an update time that is in the future: ${e} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),function Rle(){return!function Mle(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(n){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const i=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return A("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Jt("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Jt("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Fp(n){return On(n,"owner")}function kv(n){return On(n,"clientMetadata")}function _S(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class yS{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Si=i,this.Di=r}static Ci(e,t){let i=Ee(),r=Ee();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new yS(e,t.fromCache,i,r)}}class oG{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,i,r){return this.ki(e,t).next(s=>s||this.Mi(e,t,r,i)).next(s=>s||this.Oi(e,t))}ki(e,t){if(zz(t))return E.resolve(null);let i=Bi(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=gv(t,null,"F"),i=Bi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=Ee(...s);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.Fi(t,a);return this.$i(t,c,o,l.readTime)?this.ki(e,gv(t,null,"F")):this.Bi(e,c,t,l)}))})))}Mi(e,t,i,r){return zz(t)||r.isEqual(re.min())?this.Oi(e,t):this.Ni.getDocuments(e,i).next(s=>{const o=this.Fi(t,s);return this.$i(t,o,i,r)?this.Oi(e,t):($D()<=Be.DEBUG&&A("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),tS(t)),this.Bi(e,o,t,bz(r,-1)))})}Fi(e,t){let i=new ct(qz(e));return t.forEach((r,s)=>{nS(e,s)&&(i=i.add(s))}),i}$i(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Oi(e,t){return $D()<=Be.DEBUG&&A("QueryEngine","Using full collection scan to execute query:",tS(t)),this.Ni.getDocumentsMatchingQuery(e,t,ur.min())}Bi(e,t,i,r){return this.Ni.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class yge{constructor(e,t,i,r){this.persistence=e,this.Li=t,this.It=r,this.Ui=new zt(ge),this.qi=new Sa(s=>Gl(s),yp),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(i)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iG(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function aG(n,e,t,i){return new yge(n,e,t,i)}function lG(n,e){return vS.apply(this,arguments)}function vS(){return vS=m(function*(n,e){const t=U(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.Qi(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=Ee();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(i,l).next(c=>({ji:c,removedBatchIds:o,addedBatchIds:a}))})})}),vS.apply(this,arguments)}function vge(n,e){const t=U(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const u=l.batch,d=u.keys();let h=E.resolve();return d.forEach(f=>{h=h.next(()=>c.getEntry(a,f)).next(p=>{const _=l.docVersions.get(f);oe(null!==_),p.version.compareTo(_)<0&&(u.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),c.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let a=Ee();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function cG(n){const e=U(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function bge(n,e){const t=U(n),i=e.snapshotVersion;let r=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Gi.newChangeBuffer({trackRemovals:!0});r=t.Ui;const a=[];e.targetChanges.forEach((u,d)=>{const h=r.get(d);if(!h)return;a.push(t.Cs.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.Cs.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);var p,_,y;e.targetMismatches.has(d)?f=f.withResumeToken(yn.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),r=r.insert(d,f),_=f,y=u,(0===(p=h).resumeToken.approximateByteSize()||_.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8||y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0)&&a.push(t.Cs.updateTargetData(s,f))});let l=Ui(),c=Ee();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(uG(s,o,e.documentUpdates).next(u=>{l=u.Wi,c=u.zi})),!i.isEqual(re.min())){const u=t.Cs.getLastRemoteSnapshotVersion(s).next(d=>t.Cs.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return E.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.Ui=r,s))}function uG(n,e,t){let i=Ee(),r=Ee();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=Ui();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(re.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):A("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Wi:o,zi:r}})}function wge(n,e){const t=U(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function bd(n,e){const t=U(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Cs.getTargetData(i,e).next(s=>s?(r=s,E.resolve(r)):t.Cs.allocateTargetId(i).next(o=>(r=new xa(e,o,0,i.currentSequenceNumber),t.Cs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.Ui.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(i.targetId,i),t.qi.set(e,i.targetId)),i})}function wd(n,e,t){return bS.apply(this,arguments)}function bS(){return bS=m(function*(n,e,t){const i=U(n),r=i.Ui.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!wa(o))throw o;A("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ui=i.Ui.remove(e),i.qi.delete(r.target)}),bS.apply(this,arguments)}function Rv(n,e,t){const i=U(n);let r=re.min(),s=Ee();return i.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const u=U(a),d=u.qi.get(c);return void 0!==d?E.resolve(u.Ui.get(d)):u.Cs.getTargetData(l,c)}(i,o,Bi(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.Li.getDocumentsMatchingQuery(o,e,t?r:re.min(),t?s:Ee())).next(a=>(fG(i,Wz(e),a),{documents:a,Hi:s})))}function dG(n,e){const t=U(n),i=U(t.Cs),r=t.Ui.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i.se(s,e).next(o=>o?o.target:null))}function hG(n,e){const t=U(n),i=t.Ki.get(e)||re.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.Gi.getAllFromCollectionGroup(r,e,bz(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(fG(t,e,r),r))}function fG(n,e,t){let i=re.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Ki.set(e,i)}function wS(){return wS=m(function*(n,e,t,i){const r=U(n);let s=Ee(),o=Ui();for(const c of t){const u=e.Ji(c.metadata.name);c.document&&(s=s.add(u));const d=e.Yi(c);d.setReadTime(e.Xi(c.metadata.readTime)),o=o.insert(u,d)}const a=r.Gi.newChangeBuffer({trackRemovals:!0}),l=yield bd(r,(c=i,Bi(ud(We.fromString(`__bundle__/docs/${c}`)))));var c;return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>uG(c,a,o).next(u=>(a.apply(c),u)).next(u=>r.Cs.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.Cs.addMatchingKeys(c,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,u.Wi,u.zi)).next(()=>u.Wi)))}),wS.apply(this,arguments)}function Ege(n,e){return CS.apply(this,arguments)}function CS(){return CS=m(function*(n,e,t=Ee()){const i=yield bd(n,Bi(dS(e.bundledQuery))),r=U(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const o=Pn(e.readTime);if(i.snapshotVersion.compareTo(o)>=0)return r.Ns.saveNamedQuery(s,e);const a=i.withResumeToken(yn.EMPTY_BYTE_STRING,o);return r.Ui=r.Ui.insert(a.targetId,a),r.Cs.updateTargetData(s,a).next(()=>r.Cs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Cs.addMatchingKeys(s,t,i.targetId)).next(()=>r.Ns.saveNamedQuery(s,e))})}),CS.apply(this,arguments)}function pG(n,e){return`firestore_clients_${n}_${e}`}function mG(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function ES(n,e){return`firestore_targets_${n}_${e}`}class Pv{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Zi(e,t,i){const r=JSON.parse(i);let s,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(s=new x(r.error.code,r.error.message))),o?new Pv(e,t,r.state,s):(Jt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lp{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Zi(e,t){const i=JSON.parse(t);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new x(i.error.code,i.error.message))),s?new Lp(e,i.state,r):(Jt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ov{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=bv();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=Mz(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new Ov(e,s):(Jt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class TS{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new TS(t.clientId,t.onlineState):(Jt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class IS{constructor(){this.activeTargetIds=bv()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DS{constructor(e,t,i,r,s){this.window=e,this.Hs=t,this.persistenceKey=i,this.sr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new zt(ge),this.started=!1,this.cr=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=pG(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new IS),this.lr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return m(function*(){const t=yield e.syncEngine.vi();for(const r of t){if(r===e.sr)continue;const s=e.getItem(pG(e.persistenceKey,r));if(s){const o=Ov.Zi(r,s);o&&(e.ur=e.ur.insert(o.clientId,o))}}e.gr();const i=e.storage.getItem(e.wr);if(i){const r=e.yr(i);r&&e.pr(r)}for(const r of e.cr)e.rr(r);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,i){this.Tr(e,t,i),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(ES(this.persistenceKey,e));if(i){const r=Lp.Zi(e,i);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ES(this.persistenceKey,e))}updateQueryState(e,t,i){this.Rr(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Er(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return A("SharedClientState","READ",e,t),t}setItem(e,t){A("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){A("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(A("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void Jt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(m(function*(){if(t.started){if(null!==i.key)if(t.lr.test(i.key)){if(null==i.newValue){const r=t.vr(i.key);return t.Vr(r,null)}{const r=t.Sr(i.key,i.newValue);if(r)return t.Vr(r.clientId,r)}}else if(t.dr.test(i.key)){if(null!==i.newValue){const r=t.Dr(i.key,i.newValue);if(r)return t.Cr(r)}}else if(t._r.test(i.key)){if(null!==i.newValue){const r=t.Nr(i.key,i.newValue);if(r)return t.kr(r)}}else if(i.key===t.wr){if(null!==i.newValue){const r=t.yr(i.newValue);if(r)return t.pr(r)}}else if(i.key===t.hr){const r=function(s){let o=Vi.at;if(null!=s)try{const a=JSON.parse(s);oe("number"==typeof a),o=a}catch(a){Jt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(i.newValue);r!==Vi.at&&t.sequenceNumberHandler(r)}else if(i.key===t.mr){const r=t.Mr(i.newValue);yield Promise.all(r.map(s=>t.syncEngine.Or(s)))}}else t.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,i){const r=new Pv(this.currentUser,e,t,i),s=mG(this.persistenceKey,this.currentUser,e);this.setItem(s,r.tr())}Er(e){const t=mG(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,i){const r=ES(this.persistenceKey,e),s=new Lp(e,t,i);this.setItem(r,s.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const i=this.vr(e);return Ov.Zi(i,t)}Dr(e,t){const i=this.dr.exec(e),r=Number(i[1]);return Pv.Zi(new kn(void 0!==i[2]?i[2]:null),r,t)}Nr(e,t){const i=this._r.exec(e),r=Number(i[1]);return Lp.Zi(r,t)}yr(e){return TS.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return m(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);A("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const i=t?this.ur.insert(e,t):this.ur.remove(e),r=this.Ir(this.ur),s=this.Ir(i),o=[],a=[];return s.forEach(l=>{r.has(l)||o.push(l)}),r.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Br(o,a).then(()=>{this.ur=i})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=bv();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class gG{constructor(){this.Lr=new IS,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,i){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new IS,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Tge{qr(e){}shutdown(){}}class _G{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){A("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){A("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Ige={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Dge{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Sge extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,i,r,s){const o=this.ao(e,t);A("RestConnection","Sending: ",o,i);const a={};return this.ho(a,r,s),this.lo(e,o,a,i).then(l=>(A("RestConnection","Received: ",l),l),l=>{throw Vl("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",i),l})}fo(e,t,i,r,s,o){return this.co(e,t,i,r,s)}ho(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+sd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}ao(e,t){return`${this.oo}/v1/${t}:${Ige[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,i,r){return new Promise((s,o)=>{const a=new Ipe;a.listenOnce(Cpe.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case jD.NO_ERROR:const c=a.getResponseJson();A("Connection","XHR received:",JSON.stringify(c)),s(c);break;case jD.TIMEOUT:A("Connection",'RPC "'+e+'" timed out'),o(new x(T.DEADLINE_EXCEEDED,"Request time out"));break;case jD.HTTP_ERROR:const u=a.getStatus();if(A("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){const d=a.getResponseJson().error;if(d&&d.status&&d.message){const h=function(f){const p=f.toLowerCase().replace(/_/g,"-");return Object.values(T).indexOf(p)>=0?p:T.UNKNOWN}(d.status);o(new x(h,d.message))}else o(new x(T.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new x(T.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{A("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(r);a.send(t,"POST",l,i,15)})}_o(e,t,i){const r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=bpe(),o=wpe(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Tpe({})),this.ho(a.initMessageHeaders,t,i),a.encodeInitMessageHeaders=!0;const l=r.join("");A("Connection","Creating WebChannel: "+l,a);const c=s.createWebChannel(l,a);let u=!1,d=!1;const h=new Dge({Hr:p=>{d?A("Connection","Not sending because WebChannel is closed:",p):(u||(A("Connection","Opening WebChannel transport."),c.open(),u=!0),A("Connection","WebChannel sending:",p),c.send(p))},Jr:()=>c.close()}),f=(p,_,y)=>{p.listen(_,b=>{try{y(b)}catch(v){setTimeout(()=>{throw v},0)}})};return f(c,av.EventType.OPEN,()=>{d||A("Connection","WebChannel transport opened.")}),f(c,av.EventType.CLOSE,()=>{d||(d=!0,A("Connection","WebChannel transport closed"),h.io())}),f(c,av.EventType.ERROR,p=>{d||(d=!0,Vl("Connection","WebChannel transport errored:",p),h.io(new x(T.UNAVAILABLE,"The operation could not be completed")))}),f(c,av.EventType.MESSAGE,p=>{var _;if(!d){const y=p.data[0];oe(!!y);const b=y,v=b.error||(null===(_=b[0])||void 0===_?void 0:_.error);if(v){A("Connection","WebChannel received error:",v);const D=v.status;let S=function(W){const ae=dn[W];if(void 0!==ae)return c3(ae)}(D),F=v.message;void 0===S&&(S=T.INTERNAL,F="Unknown error status: "+D+" with message "+v.message),d=!0,h.io(new x(S,F)),c.close()}else A("Connection","WebChannel received:",y),h.ro(y)}}),f(o,Epe.STAT_EVENT,p=>{p.stat===pz.PROXY?A("Connection","Detected buffering proxy"):p.stat===pz.NOPROXY&&A("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.so()},0),h}}function yG(){return"undefined"!=typeof window?window:null}function Nv(){return"undefined"!=typeof document?document:null}function Vp(n){return new yme(n,!0)}class SS{constructor(e,t,i=1e3,r=1.5,s=6e4){this.Hs=e,this.timerId=t,this.wo=i,this.mo=r,this.yo=s,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),i=Math.max(0,Date.now()-this.To),r=Math.max(0,t-i);r>0&&A("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class vG{constructor(e,t,i,r,s,o,a,l){this.Hs=e,this.Po=i,this.vo=r,this.Vo=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new SS(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return m(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return m(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var i=this;return m(function*(){i.Lo(),i.Uo(),i.xo.cancel(),i.So++,4!==e?i.xo.reset():t&&t.code===T.RESOURCE_EXHAUSTED?(Jt(t.toString()),Jt("Using maximum backoff delay to prevent overloading the backend."),i.xo.Eo()):t&&t.code===T.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.qo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.So===t&&this.Go(i,r)},i=>{e(()=>{const r=new x(T.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(r)})})}Go(e,t){const i=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(r=>{i(()=>this.Qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Mo(){var e=this;this.state=5,this.xo.Ao(m(function*(){e.state=0,e.start()}))}Qo(e){return A("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(A("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xge extends vG{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.It=s}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function wme(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:Q(),r=e.targetChange.targetIds||[],s=function(l,c){return l.gt?(oe(void 0===c||"string"==typeof c),yn.fromBase64String(c||"")):(oe(void 0===c||c instanceof Uint8Array),yn.fromUint8Array(c||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=void 0===l.code?T.UNKNOWN:c3(l.code);return new x(c,l.message||"")}(o);t=new p3(i,r,s,a||null)}else if("documentChange"in e){const i=e.documentChange,r=Ms(n,i.document.name),s=Pn(i.document.updateTime),o=new Gn({mapValue:{fields:i.document.fields}}),a=bt.newFoundDocument(r,s,o);t=new wv(i.targetIds||[],i.removedTargetIds||[],a.key,a)}else if("documentDelete"in e){const i=e.documentDelete,r=Ms(n,i.document),s=i.readTime?Pn(i.readTime):re.min(),o=bt.newNoDocument(r,s);t=new wv([],i.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const i=e.documentRemove,r=Ms(n,i.document);t=new wv([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return Q();{const i=e.filter,s=new ume(i.count||0);t=new f3(i.targetId,s)}}var l;return t}(this.It,e),i=function(r){if(!("targetChange"in r))return re.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?re.min():s.readTime?Pn(s.readTime):re.min()}(e);return this.listener.Wo(t,i)}zo(e){const t={};t.database=xp(this.It),t.addTarget=function(r,s){let o;const a=s.target;return o=pv(a)?{documents:T3(r,a)}:{query:I3(r,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=y3(r,s.resumeToken):s.snapshotVersion.compareTo(re.min())>0&&(o.readTime=Dp(r,s.snapshotVersion.toTimestamp())),o}(this.It,e);const i=function Eme(n,e){const t=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Q()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Bo(t)}Ho(e){const t={};t.database=xp(this.It),t.removeTarget=e,this.Bo(t)}}class Mge extends vG{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.It=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Cme(n,e){return n&&n.length>0?(oe(void 0!==e),n.map(t=>function(i,r){let s=Pn(i.updateTime?i.updateTime:r);return s.isEqual(re.min())&&(s=Pn(r)),new ame(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=Pn(e.commitTime);return this.listener.Zo(i,t)}return oe(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=xp(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Mp(this.It,i))};this.Bo(t)}}class Age extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=i,this.It=r,this.nu=!1}su(){if(this.nu)throw new x(T.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.Vo.co(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new x(T.UNKNOWN,r.toString())})}fo(e,t,i,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.Vo.fo(e,t,i,s,o,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new x(T.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class kge{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Jt(t),this.ou=!1):A("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Rge{constructor(e,t,i,r,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.qr(a=>{i.enqueueAndForget(m(function*(){var l;ka(o)&&(A("RemoteStore","Restarting streams for network reachability change."),yield(l=m(function*(c){const u=U(c);u._u.add(4),yield Cd(u),u.gu.set("Unknown"),u._u.delete(4),yield Bp(u)}),function(c){return l.apply(this,arguments)})(o))}))}),this.gu=new kge(i,r)}}function Bp(n){return xS.apply(this,arguments)}function xS(){return xS=m(function*(n){if(ka(n))for(const e of n.wu)yield e(!0)}),xS.apply(this,arguments)}function Cd(n){return MS.apply(this,arguments)}function MS(){return MS=m(function*(n){for(const e of n.wu)yield e(!1)}),MS.apply(this,arguments)}function Fv(n,e){const t=U(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),RS(t)?kS(t):Td(t).ko()&&AS(t,e))}function Up(n,e){const t=U(n),i=Td(t);t.du.delete(e),i.ko()&&bG(t,e),0===t.du.size&&(i.ko()?i.Fo():ka(t)&&t.gu.set("Unknown"))}function AS(n,e){n.yu.Ot(e.targetId),Td(n).zo(e)}function bG(n,e){n.yu.Ot(e),Td(n).Ho(e)}function kS(n){n.yu=new mme({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Td(n).start(),n.gu.uu()}function RS(n){return ka(n)&&!Td(n).No()&&n.du.size>0}function ka(n){return 0===U(n)._u.size}function wG(n){n.yu=void 0}function Pge(n){return PS.apply(this,arguments)}function PS(){return PS=m(function*(n){n.du.forEach((e,t)=>{AS(n,e)})}),PS.apply(this,arguments)}function Oge(n,e){return OS.apply(this,arguments)}function OS(){return OS=m(function*(n,e){wG(n),RS(n)?(n.gu.hu(e),kS(n)):n.gu.set("Unknown")}),OS.apply(this,arguments)}function Nge(n,e,t){return NS.apply(this,arguments)}function NS(){return NS=m(function*(n,e,t){if(n.gu.set("Online"),e instanceof p3&&2===e.state&&e.cause)try{yield(i=m(function*(r,s){const o=s.cause;for(const a of s.targetIds)r.du.has(a)&&(yield r.remoteSyncer.rejectListen(a,o),r.du.delete(a),r.yu.removeTarget(a))}),function(r,s){return i.apply(this,arguments)})(n,e)}catch(i){A("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Lv(n,i)}else if(e instanceof wv?n.yu.Gt(e):e instanceof f3?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(re.min()))try{const i=yield cG(n.localStore);t.compareTo(i)>=0&&(yield function(r,s){const o=r.yu.te(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=r.du.get(l);c&&r.du.set(l,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const l=r.du.get(a);if(!l)return;r.du.set(a,l.withResumeToken(yn.EMPTY_BYTE_STRING,l.snapshotVersion)),bG(r,a);const c=new xa(l.target,a,1,l.sequenceNumber);AS(r,c)}),r.remoteSyncer.applyRemoteEvent(o)}(n,t))}catch(i){A("RemoteStore","Failed to raise snapshot:",i),yield Lv(n,i)}var i}),NS.apply(this,arguments)}function Lv(n,e,t){return FS.apply(this,arguments)}function FS(){return FS=m(function*(n,e,t){if(!wa(e))throw e;n._u.add(1),yield Cd(n),n.gu.set("Offline"),t||(t=()=>cG(n.localStore)),n.asyncQueue.enqueueRetryable(m(function*(){A("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Bp(n)}))}),FS.apply(this,arguments)}function CG(n,e){return e().catch(t=>Lv(n,t,e))}function Ed(n){return LS.apply(this,arguments)}function LS(){return LS=m(function*(n){const e=U(n),t=Ra(e);let i=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Fge(e);)try{const r=yield wge(e.localStore,i);if(null===r){0===e.fu.length&&t.Fo();break}i=r.batchId,Lge(e,r)}catch(r){yield Lv(e,r)}EG(e)&&TG(e)}),LS.apply(this,arguments)}function Fge(n){return ka(n)&&n.fu.length<10}function Lge(n,e){n.fu.push(e);const t=Ra(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function EG(n){return ka(n)&&!Ra(n).No()&&n.fu.length>0}function TG(n){Ra(n).start()}function Vge(n){return VS.apply(this,arguments)}function VS(){return VS=m(function*(n){Ra(n).eu()}),VS.apply(this,arguments)}function Bge(n){return BS.apply(this,arguments)}function BS(){return BS=m(function*(n){const e=Ra(n);for(const t of n.fu)e.Xo(t.mutations)}),BS.apply(this,arguments)}function Uge(n,e,t){return US.apply(this,arguments)}function US(){return US=m(function*(n,e,t){const i=n.fu.shift(),r=cS.from(i,e,t);yield CG(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Ed(n)}),US.apply(this,arguments)}function Hge(n,e){return HS.apply(this,arguments)}function HS(){return HS=m(function*(n,e){var t;e&&Ra(n).Yo&&(yield(t=m(function*(i,r){if(l3(s=r.code)&&s!==T.ABORTED){const o=i.fu.shift();Ra(i).Oo(),yield CG(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield Ed(i)}var s}),function(i,r){return t.apply(this,arguments)})(n,e)),EG(n)&&TG(n)}),HS.apply(this,arguments)}function IG(n,e){return jS.apply(this,arguments)}function jS(){return jS=m(function*(n,e){const t=U(n);t.asyncQueue.verifyOperationInProgress(),A("RemoteStore","RemoteStore received new credentials");const i=ka(t);t._u.add(3),yield Cd(t),i&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Bp(t)}),jS.apply(this,arguments)}function $S(n,e){return zS.apply(this,arguments)}function zS(){return zS=m(function*(n,e){const t=U(n);e?(t._u.delete(2),yield Bp(t)):e||(t._u.add(2),yield Cd(t),t.gu.set("Unknown"))}),zS.apply(this,arguments)}function Td(n){return n.pu||(n.pu=function(e,t,i){const r=U(e);return r.su(),new xge(t,r.Vo,r.authCredentials,r.appCheckCredentials,r.It,i)}(n.datastore,n.asyncQueue,{Yr:Pge.bind(null,n),Zr:Oge.bind(null,n),Wo:Nge.bind(null,n)}),n.wu.push(function(){var e=m(function*(t){t?(n.pu.Oo(),RS(n)?kS(n):n.gu.set("Unknown")):(yield n.pu.stop(),wG(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Ra(n){return n.Iu||(n.Iu=function(e,t,i){const r=U(e);return r.su(),new Mge(t,r.Vo,r.authCredentials,r.appCheckCredentials,r.It,i)}(n.datastore,n.asyncQueue,{Yr:Vge.bind(null,n),Zr:Hge.bind(null,n),tu:Bge.bind(null,n),Zo:Uge.bind(null,n)}),n.wu.push(function(){var e=m(function*(t){t?(n.Iu.Oo(),yield Ed(n)):(yield n.Iu.stop(),n.fu.length>0&&(A("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class GS{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,i,r,s){const o=Date.now()+i,a=new GS(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new x(T.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Id(n,e){if(Jt("AsyncQueue",`${e}: ${n}`),wa(n))return new x(T.UNAVAILABLE,`${e}: ${n}`);throw n}class Dd{constructor(e){this.comparator=e?(t,i)=>e(t,i)||B.comparator(t.key,i.key):(t,i)=>B.comparator(t.key,i.key),this.keyedMap=Cp(),this.sortedSet=new zt(this.comparator)}static emptySet(e){return new Dd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Dd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new Dd;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class DG{constructor(){this.Tu=new zt(B.comparator)}track(e){const t=e.doc.key,i=this.Tu.get(t);i?0!==e.type&&3===i.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==i.type?this.Tu=this.Tu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Tu=this.Tu.remove(t):1===e.type&&2===i.type?this.Tu=this.Tu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Q():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,i)=>{e.push(i)}),e}}class Sd{constructor(e,t,i,r,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l}static fromInitialDocuments(e,t,i,r){const s=[];return t.forEach(o=>{s.push({type:0,doc:o})}),new Sd(e,t,Dd.emptySet(t),s,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class jge{constructor(){this.Au=void 0,this.listeners=[]}}class $ge{constructor(){this.queries=new Sa(e=>Gz(e),vp),this.onlineState="Unknown",this.Ru=new Set}}function WS(n,e){return qS.apply(this,arguments)}function qS(){return qS=m(function*(n,e){const t=U(n),i=e.query;let r=!1,s=t.queries.get(i);if(s||(r=!0,s=new jge),r)try{s.Au=yield t.onListen(i)}catch(o){const a=Id(o,`Initialization of query '${tS(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.listeners.push(e),e.bu(t.onlineState),s.Au&&e.Pu(s.Au)&&YS(t)}),qS.apply(this,arguments)}function KS(n,e){return QS.apply(this,arguments)}function QS(){return QS=m(function*(n,e){const t=U(n),i=e.query;let r=!1;const s=t.queries.get(i);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),r=0===s.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),QS.apply(this,arguments)}function zge(n,e){const t=U(n);let i=!1;for(const r of e){const o=t.queries.get(r.query);if(o){for(const a of o.listeners)a.Pu(r)&&(i=!0);o.Au=r}}i&&YS(t)}function Gge(n,e,t){const i=U(n),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);i.queries.delete(e)}function YS(n){n.Ru.forEach(e=>{e.next()})}class XS{constructor(e,t,i){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new Sd(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Sd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class Wge{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class SG{constructor(e){this.It=e}Ji(e){return Ms(this.It,e)}Yi(e){return e.metadata.exists?E3(this.It,e.document,!1):bt.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Pn(e)}}class qge{constructor(e,t,i){this.Mu=e,this.localStore=t,this.It=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=xG(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const i=We.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,i=new SG(this.It);for(const r of e)if(r.metadata.queries){const s=i.Ji(r.metadata.name);for(const o of r.metadata.queries){const a=(t.get(o)||Ee()).add(s);t.set(o,a)}}return t}complete(){var e=this;return m(function*(){const t=yield function Cge(n,e,t,i){return wS.apply(this,arguments)}(e.localStore,new SG(e.It),e.documents,e.Mu.id),i=e.Fu(e.documents);for(const r of e.queries)yield Ege(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function xG(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class MG{constructor(e){this.key=e}}class AG{constructor(e){this.key=e}}class kG{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Ee(),this.mutatedKeys=Ee(),this.Ku=qz(e),this.Gu=new Dd(this.Ku)}get Qu(){return this.Lu}ju(e,t){const i=t?t.Wu:new DG,r=t?t.Gu:this.Gu;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,d)=>{const h=r.get(u),f=nS(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),_=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let y=!1;h&&f?h.data.isEqual(f.data)?p!==_&&(i.track({type:3,doc:f}),y=!0):this.zu(h,f)||(i.track({type:2,doc:f}),y=!0,(l&&this.Ku(f,l)>0||c&&this.Ku(f,c)<0)&&(a=!0)):!h&&f?(i.track({type:0,doc:f}),y=!0):h&&!f&&(i.track({type:1,doc:h}),y=!0,(l||c)&&(a=!0)),y&&(f?(o=o.add(f),s=_?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const u="F"===this.query.limitType?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{Gu:o,Wu:i,$i:a,mutatedKeys:s}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const s=e.Wu.Eu();s.sort((c,u)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return f(d)-f(h)}(c.type,u.type)||this.Ku(c.doc,u.doc)),this.Hu(i);const o=t?this.Ju():[],a=0===this.qu.size&&this.current?1:0,l=a!==this.Uu;return this.Uu=a,0!==s.length||l?{snapshot:new Sd(this.query,e.Gu,r,s,e.mutatedKeys,0===a,l,!1),Yu:o}:{Yu:o}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new DG,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Ee(),this.Gu.forEach(i=>{this.Xu(i.key)&&(this.qu=this.qu.add(i.key))});const t=[];return e.forEach(i=>{this.qu.has(i)||t.push(new AG(i))}),this.qu.forEach(i=>{e.has(i)||t.push(new MG(i))}),t}Zu(e){this.Lu=e.Hi,this.qu=Ee();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return Sd.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class Kge{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Qge{constructor(e){this.key=e,this.ec=!1}}class Yge{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.nc={},this.sc=new Sa(a=>Gz(a),vp),this.ic=new Map,this.rc=new Set,this.oc=new zt(B.comparator),this.uc=new Map,this.cc=new pS,this.ac={},this.hc=new Map,this.lc=ec.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function Xge(n,e){return ZS.apply(this,arguments)}function ZS(){return ZS=m(function*(n,e){const t=wx(n);let i,r;const s=t.sc.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.tc();else{const o=yield bd(t.localStore,Bi(e));t.isPrimaryClient&&Fv(t.remoteStore,o);const a=t.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=yield JS(t,e,i,"current"===a)}return r}),ZS.apply(this,arguments)}function JS(n,e,t,i){return ex.apply(this,arguments)}function ex(){return ex=m(function*(n,e,t,i){n.dc=(u,d,h)=>{return(f=m(function*(p,_,y,b){let v=_.view.ju(y);v.$i&&(v=yield Rv(p.localStore,_.query,!1).then(({documents:F})=>_.view.ju(F,v)));const D=b&&b.targetChanges.get(_.targetId),S=_.view.applyChanges(v,p.isPrimaryClient,D);return ux(p,_.targetId,S.Yu),S.snapshot}),function(p,_,y,b){return f.apply(this,arguments)})(n,u,d,h);var f};const r=yield Rv(n.localStore,e,!0),s=new kG(e,r.Hi),o=s.ju(r.documents),a=Ip.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState),l=s.applyChanges(o,n.isPrimaryClient,a);ux(n,t,l.Yu);const c=new Kge(e,t,s);return n.sc.set(e,c),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),l.snapshot}),ex.apply(this,arguments)}function Zge(n,e){return tx.apply(this,arguments)}function tx(){return tx=m(function*(n,e){const t=U(n),i=t.sc.get(e),r=t.ic.get(i.targetId);if(r.length>1)return t.ic.set(i.targetId,r.filter(s=>!vp(s,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield wd(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Up(t.remoteStore,i.targetId),xd(t,i.targetId)}).catch(ba))):(xd(t,i.targetId),yield wd(t.localStore,i.targetId,!0))}),tx.apply(this,arguments)}function nx(){return nx=m(function*(n,e,t){const i=Cx(n);try{const r=yield function(s,o){const a=U(s),l=Rt.now(),c=o.reduce((h,f)=>h.add(f.key),Ee());let u,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=Ui(),p=Ee();return a.Gi.getEntries(h,c).next(_=>{f=_,f.forEach((y,b)=>{b.isValidDocument()||(p=p.add(y))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(_=>{u=_;const y=[];for(const b of o){const v=cme(b,u.get(b.key).overlayedDocument);null!=v&&y.push(new mo(b.key,v,Fz(v.value.mapValue),Pt.exists(!0)))}return a.mutationQueue.addMutationBatch(h,l,y,o)}).next(_=>{d=_;const y=_.applyToLocalDocumentSet(u,p);return a.documentOverlayCache.saveOverlays(h,_.batchId,y)})}).then(()=>({batchId:d.batchId,changes:d3(u)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,o,a){let l=s.ac[s.currentUser.toKey()];l||(l=new zt(ge)),l=l.insert(o,a),s.ac[s.currentUser.toKey()]=l}(i,r.batchId,t),yield go(i,r.changes),yield Ed(i.remoteStore)}catch(r){const s=Id(r,"Failed to persist write");t.reject(s)}}),nx.apply(this,arguments)}function RG(n,e){return ix.apply(this,arguments)}function ix(){return ix=m(function*(n,e){const t=U(n);try{const i=yield bge(t.localStore,e);e.targetChanges.forEach((r,s)=>{const o=t.uc.get(s);o&&(oe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.ec=!0:r.modifiedDocuments.size>0?oe(o.ec):r.removedDocuments.size>0&&(oe(o.ec),o.ec=!1))}),yield go(t,i,e)}catch(i){yield ba(i)}}),ix.apply(this,arguments)}function PG(n,e,t){const i=U(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.sc.forEach((s,o)=>{const a=o.view.bu(e);a.snapshot&&r.push(a.snapshot)}),function(s,o){const a=U(s);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(const d of u.listeners)d.bu(o)&&(l=!0)}),l&&YS(a)}(i.eventManager,e),r.length&&i.nc.Wo(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function e_e(n,e,t){return rx.apply(this,arguments)}function rx(){return rx=m(function*(n,e,t){const i=U(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.uc.get(e),s=r&&r.key;if(s){let o=new zt(B.comparator);o=o.insert(s,bt.newNoDocument(s,re.min()));const a=Ee().add(s),l=new Tp(re.min(),new Map,new ct(ge),o,a);yield RG(i,l),i.oc=i.oc.remove(s),i.uc.delete(e),dx(i)}else yield wd(i.localStore,e,!1).then(()=>xd(i,e,t)).catch(ba)}),rx.apply(this,arguments)}function t_e(n,e){return sx.apply(this,arguments)}function sx(){return sx=m(function*(n,e){const t=U(n),i=e.batch.batchId;try{const r=yield vge(t.localStore,e);cx(t,i,null),lx(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield go(t,r)}catch(r){yield ba(r)}}),sx.apply(this,arguments)}function n_e(n,e,t){return ox.apply(this,arguments)}function ox(){return ox=m(function*(n,e,t){const i=U(n);try{const r=yield function(s,o){const a=U(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.mutationQueue.lookupMutationBatch(l,o).next(u=>(oe(null!==u),c=u.keys(),a.mutationQueue.removeMutationBatch(l,u))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>a.localDocuments.getDocuments(l,c))})}(i.localStore,e);cx(i,e,t),lx(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield go(i,r)}catch(r){yield ba(r)}}),ox.apply(this,arguments)}function ax(){return ax=m(function*(n,e){const t=U(n);ka(t.remoteStore)||A("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const o=U(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(t.localStore);if(-1===i)return void e.resolve();const r=t.hc.get(i)||[];r.push(e),t.hc.set(i,r)}catch(i){const r=Id(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),ax.apply(this,arguments)}function lx(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function cx(n,e,t){const i=U(n);let r=i.ac[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.ac[i.currentUser.toKey()]=r}}function xd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.ic.get(e))n.sc.delete(i),t&&n.nc._c(i,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(i=>{n.cc.containsKey(i)||OG(n,i)})}function OG(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(Up(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),dx(n))}function ux(n,e,t){for(const i of t)i instanceof MG?(n.cc.addReference(i.key,e),r_e(n,i)):i instanceof AG?(A("SyncEngine","Document no longer in limbo: "+i.key),n.cc.removeReference(i.key,e),n.cc.containsKey(i.key)||OG(n,i.key)):Q()}function r_e(n,e){const t=e.key,i=t.path.canonicalString();n.oc.get(t)||n.rc.has(i)||(A("SyncEngine","New document in limbo: "+t),n.rc.add(i),dx(n))}function dx(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new B(We.fromString(e)),i=n.lc.next();n.uc.set(i,new Qge(t)),n.oc=n.oc.insert(t,i),Fv(n.remoteStore,new xa(Bi(ud(t.path)),i,2,Vi.at))}}function go(n,e,t){return hx.apply(this,arguments)}function hx(){return hx=m(function*(n,e,t){const i=U(n),r=[],s=[],o=[];var a;i.sc.isEmpty()||(i.sc.forEach((a,l)=>{o.push(i.dc(l,e,t).then(c=>{if(c){i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c.fromCache?"not-current":"current"),r.push(c);const u=yS.Ci(l.targetId,c);s.push(u)}}))}),yield Promise.all(o),i.nc.Wo(r),yield(a=m(function*(l,c){const u=U(l);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>E.forEach(c,h=>E.forEach(h.Si,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>E.forEach(h.Di,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!wa(d))throw d;A("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const f=u.Ui.get(h),_=f.withLastLimboFreeSnapshotVersion(f.snapshotVersion);u.Ui=u.Ui.insert(h,_)}}}),function(l,c){return a.apply(this,arguments)})(i.localStore,s))}),hx.apply(this,arguments)}function s_e(n,e){return fx.apply(this,arguments)}function fx(){return fx=m(function*(n,e){const t=U(n);if(!t.currentUser.isEqual(e)){A("SyncEngine","User change. New user:",e.toKey());const i=yield lG(t.localStore,e);t.currentUser=e,(r=t).hc.forEach(o=>{o.forEach(a=>{a.reject(new x(T.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.hc.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield go(t,i.ji)}var r}),fx.apply(this,arguments)}function o_e(n,e){const t=U(n),i=t.uc.get(e);if(i&&i.ec)return Ee().add(i.key);{let r=Ee();const s=t.ic.get(e);if(!s)return r;for(const o of s){const a=t.sc.get(o);r=r.unionWith(a.view.Qu)}return r}}function a_e(n,e){return px.apply(this,arguments)}function px(){return px=m(function*(n,e){const t=U(n),i=yield Rv(t.localStore,e.query,!0),r=e.view.Zu(i);return t.isPrimaryClient&&ux(t,e.targetId,r.Yu),r}),px.apply(this,arguments)}function l_e(n,e){return mx.apply(this,arguments)}function mx(){return mx=m(function*(n,e){const t=U(n);return hG(t.localStore,e).then(i=>go(t,i))}),mx.apply(this,arguments)}function c_e(n,e,t,i){return gx.apply(this,arguments)}function gx(){return gx=m(function*(n,e,t,i){const r=U(n),s=yield function(o,a){const l=U(o),c=U(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",u=>c.Tn(u,a).next(d=>d?l.localDocuments.getDocuments(u,d):E.resolve(null)))}(r.localStore,e);var a;null!==s?("pending"===t?yield Ed(r.remoteStore):"acknowledged"===t||"rejected"===t?(cx(r,e,i||null),lx(r,e),a=e,U(U(r.localStore).mutationQueue).An(a)):Q(),yield go(r,s)):A("SyncEngine","Cannot apply mutation batch with id: "+e)}),gx.apply(this,arguments)}function _x(){return _x=m(function*(n,e){const t=U(n);if(wx(t),Cx(t),!0===e&&!0!==t.fc){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield NG(t,i.toArray());t.fc=!0,yield $S(t.remoteStore,!0);for(const s of r)Fv(t.remoteStore,s)}else if(!1===e&&!1!==t.fc){const i=[];let r=Promise.resolve();t.ic.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(xd(t,o),wd(t.localStore,o,!0))),Up(t.remoteStore,o)}),yield r,yield NG(t,i),function(s){const o=U(s);o.uc.forEach((a,l)=>{Up(o.remoteStore,l)}),o.cc.fs(),o.uc=new Map,o.oc=new zt(B.comparator)}(t),t.fc=!1,yield $S(t.remoteStore,!1)}}),_x.apply(this,arguments)}function NG(n,e,t){return yx.apply(this,arguments)}function yx(){return yx=m(function*(n,e,t){const i=U(n),r=[],s=[];for(const o of e){let a;const l=i.ic.get(o);if(l&&0!==l.length){a=yield bd(i.localStore,Bi(l[0]));for(const c of l){const u=i.sc.get(c),d=yield a_e(i,u);d.snapshot&&s.push(d.snapshot)}}else{const c=yield dG(i.localStore,o);a=yield bd(i.localStore,c),yield JS(i,FG(c),o,!1)}r.push(a)}return i.nc.Wo(s),r}),yx.apply(this,arguments)}function FG(n){return $z(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function d_e(n){const e=U(n);return U(U(e.localStore).persistence).vi()}function h_e(n,e,t,i){return vx.apply(this,arguments)}function vx(){return vx=m(function*(n,e,t,i){const r=U(n);if(r.fc)return void A("SyncEngine","Ignoring unexpected query state notification.");const s=r.ic.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield hG(r.localStore,Wz(s[0])),a=Tp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield go(r,o,a);break}case"rejected":yield wd(r.localStore,e,!0),xd(r,e,i);break;default:Q()}}),vx.apply(this,arguments)}function f_e(n,e,t){return bx.apply(this,arguments)}function bx(){return bx=m(function*(n,e,t){const i=wx(n);if(i.fc){for(const r of e){if(i.ic.has(r)){A("SyncEngine","Adding an already active target "+r);continue}const s=yield dG(i.localStore,r),o=yield bd(i.localStore,s);yield JS(i,FG(s),o.targetId,!1),Fv(i.remoteStore,o)}for(const r of t)i.ic.has(r)&&(yield wd(i.localStore,r,!1).then(()=>{Up(i.remoteStore,r),xd(i,r)}).catch(ba))}}),bx.apply(this,arguments)}function wx(n){const e=U(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=RG.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=o_e.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=e_e.bind(null,e),e.nc.Wo=zge.bind(null,e.eventManager),e.nc._c=Gge.bind(null,e.eventManager),e}function Cx(n){const e=U(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=t_e.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=n_e.bind(null,e),e}class LG{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return m(function*(){t.It=Vp(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return aG(this.persistence,new oG,e.initialUser,this.It)}gc(e){return new rG(Av.Bs,this.It)}mc(e){return new gG}terminate(){var e=this;return m(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class VG extends LG{constructor(e,t,i){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return m(function*(){yield t().call(i,e),yield i.Ec.initialize(i,e),yield Cx(i.Ec.syncEngine),yield Ed(i.Ec.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return aG(this.persistence,new oG,e.initialUser,this.It)}Ic(e,t){return new rge(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const i=new Hpe(t,this.persistence);return new Upe(e.asyncQueue,i)}gc(e){const t=_S(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Hi.withCacheSize(this.cacheSizeBytes):Hi.DEFAULT;return new gS(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,yG(),Nv(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new gG}}class m_e extends VG{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return m(function*(){yield t().call(i,e);const r=i.Ec.syncEngine;i.sharedClientState instanceof DS&&(i.sharedClientState.syncEngine={Fr:c_e.bind(null,r),$r:h_e.bind(null,r),Br:f_e.bind(null,r),vi:d_e.bind(null,r),Or:l_e.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var s=m(function*(o){yield function u_e(n,e){return _x.apply(this,arguments)}(i.Ec.syncEngine,o),i.gcScheduler&&(o&&!i.gcScheduler.started?i.gcScheduler.start():o||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(o&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():o||i.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}mc(e){const t=yG();if(!DS.C(t))throw new x(T.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=_S(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new DS(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Ex{initialize(e,t){var i=this;return m(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>PG(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=s_e.bind(null,i.syncEngine),yield $S(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new $ge}createDatastore(e){const t=Vp(e.databaseInfo.databaseId),i=new Sge(e.databaseInfo);return new Age(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,s=a=>PG(this.syncEngine,a,0),o=_G.C()?new _G:new Tge,new Rge(t,i,r,s,o);var t,i,r,s,o}createSyncEngine(e,t){return function(i,r,s,o,a,l,c){const u=new Yge(i,r,s,o,a,l);return c&&(u.fc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=m(function*(t){const i=U(t);A("RemoteStore","RemoteStore shutting down."),i._u.add(5),yield Cd(i),i.mu.shutdown(),i.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function BG(n,e=10240){let t=0;return{read:()=>m(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>m(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Vv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):Jt("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class g_e{constructor(e,t){this.bc=e,this.It=t,this.metadata=new Rn,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(i=>{i&&i.ku()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==i?void 0:i.payload)}`))},i=>this.metadata.reject(i))}close(){return this.bc.cancel()}getMetadata(){var e=this;return m(function*(){return e.metadata.promise})()}wc(){var e=this;return m(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return m(function*(){const t=yield e.Vc();if(null===t)return null;const i=e.Pc.decode(t),r=Number(i);isNaN(r)&&e.Sc(`length string (${i}) is not valid number`);const s=yield e.Dc(r);return new Wge(JSON.parse(s),t.length+r)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return m(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}Dc(e){var t=this;return m(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const i=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return m(function*(){const t=yield e.bc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class __e{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return m(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new x(T.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=m(function*(s,o){const a=U(s),l=xp(a.It)+"/documents",c={documents:o.map(f=>Sp(a.It,f))},u=yield a.fo("BatchGetDocuments",l,c,o.length),d=new Map;u.forEach(f=>{const p=function bme(n,e){return"found"in e?function(t,i){oe(!!i.found);const r=Ms(t,i.found.name),s=Pn(i.found.updateTime),o=new Gn({mapValue:{fields:i.found.fields}});return bt.newFoundDocument(r,s,o)}(n,e):"missing"in e?function(t,i){oe(!!i.missing),oe(!!i.readTime);const r=Ms(t,i.missing),s=Pn(i.readTime);return bt.newNoDocument(r,s)}(n,e):Q()}(a.It,f);d.set(p.key.toString(),p)});const h=[];return o.forEach(f=>{const p=d.get(f.toString());oe(!!p),h.push(p)}),h}),function(s,o){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new md(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return m(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const s=B.fromPath(r);e.mutations.push(new iS(s,e.precondition(s)))}),yield(i=m(function*(r,s){const o=U(r),a=xp(o.It)+"/documents",l={writes:s.map(c=>Mp(o.It,c))};yield o.co("Commit",a,l)}),function(r,s){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Q();t=re.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new x(T.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(re.min())?Pt.exists(!1):Pt.updateTime(t):Pt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(re.min()))throw new x(T.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pt.updateTime(t)}return Pt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class y_e{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this.Nc=i.maxAttempts,this.xo=new SS(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao(m(function*(){const t=new __e(e.datastore),i=e.Mc(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(s=>{e.Oc(s)}))}).catch(r=>{e.Oc(r)})}))}Mc(e){try{const t=this.updateFunction(e);return!fp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!l3(t)}return!1}}class v_e{constructor(e,t,i,r){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=kn.UNAUTHENTICATED,this.clientId=yz.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var o=m(function*(a){A("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(i,o=>(A("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return m(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new x(T.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(m(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=Id(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function UG(n,e){return Tx.apply(this,arguments)}function Tx(){return Tx=m(function*(n,e){n.asyncQueue.verifyOperationInProgress(),A("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=m(function*(s){i.isEqual(s)||(yield lG(e.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Tx.apply(this,arguments)}function HG(n,e){return Ix.apply(this,arguments)}function Ix(){return Ix=m(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Dx(n);A("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>IG(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>IG(e.remoteStore,s)),n.onlineComponents=e}),Ix.apply(this,arguments)}function Dx(n){return Sx.apply(this,arguments)}function Sx(){return Sx=m(function*(n){return n.offlineComponents||(A("FirestoreClient","Using default OfflineComponentProvider"),yield UG(n,new LG)),n.offlineComponents}),Sx.apply(this,arguments)}function Bv(n){return xx.apply(this,arguments)}function xx(){return xx=m(function*(n){return n.onlineComponents||(A("FirestoreClient","Using default OnlineComponentProvider"),yield HG(n,new Ex)),n.onlineComponents}),xx.apply(this,arguments)}function jG(n){return Dx(n).then(e=>e.persistence)}function Uv(n){return Dx(n).then(e=>e.localStore)}function $G(n){return Bv(n).then(e=>e.remoteStore)}function Mx(n){return Bv(n).then(e=>e.syncEngine)}function Md(n){return Ax.apply(this,arguments)}function Ax(){return Ax=m(function*(n){const e=yield Bv(n),t=e.eventManager;return t.onListen=Xge.bind(null,e.syncEngine),t.onUnlisten=Zge.bind(null,e.syncEngine),t}),Ax.apply(this,arguments)}function zG(n,e,t={}){const i=new Rn;return n.asyncQueue.enqueueAndForget(m(function*(){return function(r,s,o,a,l){const c=new Vv({next:d=>{s.enqueueAndForget(()=>KS(r,u));const h=d.docs.has(o);!h&&d.fromCache?l.reject(new x(T.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&a&&"server"===a.source?l.reject(new x(T.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new XS(ud(o.path),c,{includeMetadataChanges:!0,Nu:!0});return WS(r,u)}(yield Md(n),n.asyncQueue,e,t,i)})),i.promise}function GG(n,e,t={}){const i=new Rn;return n.asyncQueue.enqueueAndForget(m(function*(){return function(r,s,o,a,l){const c=new Vv({next:d=>{s.enqueueAndForget(()=>KS(r,u)),d.fromCache&&"server"===a.source?l.reject(new x(T.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new XS(o,c,{includeMetadataChanges:!0,Nu:!0});return WS(r,u)}(yield Md(n),n.asyncQueue,e,t,i)})),i.promise}const WG=new Map;function kx(n,e,t){if(!t)throw new x(T.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function qG(n,e,t,i){if(!0===e&&!0===i)throw new x(T.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function KG(n){if(!B.isDocumentKey(n))throw new x(T.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function QG(n){if(B.isDocumentKey(n))throw new x(T.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Hv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Q()}function ze(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new x(T.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hv(n);throw new x(T.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function YG(n,e){if(e<=0)throw new x(T.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class XG{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new x(T.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new x(T.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,qG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hp{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new XG({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new x(T.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new x(T.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new XG(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new xpe;switch(t.type){case"gapi":return new Rpe(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new x(T.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=WG.get(e);t&&(A("ComponentProvider","Removing Datastore"),WG.delete(e),t.terminate())}(this),Promise.resolve()}}class Tt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ks(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tt(this.firestore,e,this._key)}}class ai{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ai(this.firestore,e,this._query)}}class ks extends ai{constructor(e,t,i){super(e,t,ud(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new B(e))}withConverter(e){return new ks(this.firestore,e,this._path)}}function Rx(n,e,...t){if(n=Ce(n),kx("collection","path",e),n instanceof Hp){const i=We.fromString(e,...t);return QG(i),new ks(n,null,i)}{if(!(n instanceof Tt||n instanceof ks))throw new x(T.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(We.fromString(e,...t));return QG(i),new ks(n.firestore,null,i)}}function jv(n,e,...t){if(n=Ce(n),1===arguments.length&&(e=yz.R()),kx("doc","path",e),n instanceof Hp){const i=We.fromString(e,...t);return KG(i),new Tt(n,null,new B(i))}{if(!(n instanceof Tt||n instanceof ks))throw new x(T.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(We.fromString(e,...t));return KG(i),new Tt(n.firestore,n instanceof ks?n.converter:null,new B(i))}}function ZG(n,e){return n=Ce(n),e=Ce(e),(n instanceof Tt||n instanceof ks)&&(e instanceof Tt||e instanceof ks)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function JG(n,e){return n=Ce(n),e=Ce(e),n instanceof ai&&e instanceof ai&&n.firestore===e.firestore&&vp(n._query,e._query)&&n.converter===e.converter}class A_e{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new SS(this,"async_queue_retry"),this.jc=()=>{const t=Nv();t&&A("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=Nv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=Nv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new Rn;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return m(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!wa(t))throw t;A("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(i=>{throw this.qc=i,this.Kc=!1,Jt("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(i)),i}).then(i=>(this.Kc=!1,i))));return this.$c=t,t}enqueueAfterDelay(e,t,i){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const r=GS.createAndSchedule(this,e,t,i,s=>this.Jc(s));return this.Uc.push(r),r}Wc(){this.qc&&Q()}verifyOperationInProgress(){}Yc(){var e=this;return m(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function Px(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class k_e{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ot extends Hp{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new A_e,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||tW(this),this._firestoreClient.terminate()}}function eW(n,e){const i="string"==typeof n?n:e||"(default)";return Yr("object"==typeof n?n:aa(),"firestore").getImmediate({identifier:i})}function hn(n){return n._firestoreClient||tW(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function tW(n){var e;const t=n._freezeSettings(),i=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new zpe(n._databaseId,s,n._persistenceKey,(a=t).host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams));var s,a;n._firestoreClient=new v_e(n._authCredentials,n._appCheckCredentials,n._queue,i)}function nW(n,e,t){const i=new Rn;return n.asyncQueue.enqueue(m(function*(){try{yield UG(n,t),yield HG(n,e),i.resolve()}catch(r){const s=r;if(!("FirebaseError"===(o=s).name?o.code===T.FAILED_PRECONDITION||o.code===T.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&o instanceof DOMException)||22===o.code||20===o.code||11===o.code))throw s;Vl("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s)}var o})).then(()=>i.promise)}function iW(n){if(n._initialized||n._terminated)throw new x(T.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class _o{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new x(T.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Rs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rs(yn.fromBase64String(e))}catch(t){throw new x(T.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Rs(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class nc{constructor(e){this._methodName=e}}class $v{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new x(T.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new x(T.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}const H_e=/^__.*__$/;class j_e{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new mo(e,this.data,this.fieldMask,t,this.fieldTransforms):new pd(e,this.data,t,this.fieldTransforms)}}class rW{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new mo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sW(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}class zv{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.It=i,this.ignoreUndefinedProperties=r,void 0===s&&this.ea(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new zv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.sa({path:i,ra:!1});return r.oa(e),r}ua(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.sa({path:i,ra:!1});return r.ea(),r}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return qv(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(sW(this.na)&&H_e.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class $_e{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=i||Vp(e)}fa(e,t,i,r=!1){return new zv({na:e,methodName:t,la:i,path:$t.emptyPath(),ra:!1,ha:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function ic(n){const e=n._freezeSettings(),t=Vp(n._databaseId);return new $_e(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Gv(n,e,t,i,r,s={}){const o=n.fa(s.merge||s.mergeFields?2:0,e,t,r);Lx("Data must be an object, but it was:",o,i);const a=lW(i,o);let l,c;if(s.merge)l=new dr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const h=Vx(e,d,t);if(!o.contains(h))throw new x(T.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);uW(u,h)||u.push(h)}l=new dr(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new j_e(new Gn(a),l,c)}class jp extends nc{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jp}}function oW(n,e,t){return new zv({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Ox extends nc{_toFieldTransform(e){return new bp(e.path,new hd)}isEqual(e){return e instanceof Ox}}class z_e extends nc{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=oW(this,e,!0),i=this.da.map(s=>rc(s,t)),r=new Wl(i);return new bp(e.path,r)}isEqual(e){return this===e}}class G_e extends nc{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=oW(this,e,!0),i=this.da.map(s=>rc(s,t)),r=new ql(i);return new bp(e.path,r)}isEqual(e){return this===e}}class W_e extends nc{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new fd(e.It,Yz(e.It,this._a));return new bp(e.path,t)}isEqual(e){return this===e}}function Nx(n,e,t,i){const r=n.fa(1,e,t);Lx("Data must be an object, but it was:",r,i);const s=[],o=Gn.empty();Hl(i,(l,c)=>{const u=Wv(e,l,t);c=Ce(c);const d=r.ua(u);if(c instanceof jp)s.push(u);else{const h=rc(c,d);null!=h&&(s.push(u),o.set(u,h))}});const a=new dr(s);return new rW(o,a,r.fieldTransforms)}function Fx(n,e,t,i,r,s){const o=n.fa(1,e,t),a=[Vx(e,i,t)],l=[r];if(s.length%2!=0)throw new x(T.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(Vx(e,s[h])),l.push(s[h+1]);const c=[],u=Gn.empty();for(let h=a.length-1;h>=0;--h)if(!uW(c,a[h])){const f=a[h];let p=l[h];p=Ce(p);const _=o.ua(f);if(p instanceof jp)c.push(f);else{const y=rc(p,_);null!=y&&(c.push(f),u.set(f,y))}}const d=new dr(c);return new rW(u,d,o.fieldTransforms)}function aW(n,e,t,i=!1){return rc(t,n.fa(i?4:3,e))}function rc(n,e){if(cW(n=Ce(n)))return Lx("Unsupported field value:",e,n),lW(n,e);if(n instanceof nc)return function(t,i){if(!sW(i.na))throw i.aa(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.aa(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,i){const r=[];let s=0;for(const o of t){let a=rc(o,i.ca(s));null==a&&(a={nullValue:"NULL_VALUE"}),r.push(a),s++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=Ce(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Yz(i.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=Rt.fromDate(t);return{timestampValue:Dp(i.It,r)}}if(t instanceof Rt){const r=new Rt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Dp(i.It,r)}}if(t instanceof $v)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Rs)return{bytesValue:y3(i.It,t._byteString)};if(t instanceof Tt){const r=i.databaseId,s=t.firestore._databaseId;if(!s.isEqual(r))throw i.aa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:rS(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.aa(`Unsupported field value: ${Hv(t)}`)}(n,e)}function lW(n,e){const t={};return Dz(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hl(n,(i,r)=>{const s=rc(r,e.ia(i));null!=s&&(t[i]=s)}),{mapValue:{fields:t}}}function cW(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Rt||n instanceof $v||n instanceof Rs||n instanceof Tt||n instanceof nc)}function Lx(n,e,t){if(!cW(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=Hv(t);throw e.aa("an object"===i?n+" a custom object":n+" "+i)}var i}function Vx(n,e,t){if((e=Ce(e))instanceof _o)return e._internalPath;if("string"==typeof e)return Wv(n,e);throw qv("Field path arguments must be of type string or ",n,!1,void 0,t)}const q_e=new RegExp("[~\\*/\\[\\]]");function Wv(n,e,t){if(e.search(q_e)>=0)throw qv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _o(...e.split("."))._internalPath}catch(i){throw qv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function qv(n,e,t,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new x(T.INVALID_ARGUMENT,a+n+l)}function uW(n,e){return n.some(t=>t.isEqual(e))}class $p{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new K_e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Kv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class K_e extends $p{data(){return super.data()}}function Kv(n,e){return"string"==typeof e?Wv(n,e):e instanceof _o?e._internalPath:e._delegate._internalPath}class sc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yo extends $p{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Kv("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class zp extends yo{data(e={}){return super.data(e)}}class Pa{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new sc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new zp(this._firestore,this._userDataWriter,i.key,i,new sc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new x(T.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>({type:"added",doc:new zp(i._firestore,i._userDataWriter,o.doc.key,o.doc,new sc(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>r||3!==o.type).map(o=>{const a=new zp(i._firestore,i._userDataWriter,o.doc.key,o.doc,new sc(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return 0!==o.type&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:Q_e(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Q_e(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}function dW(n,e){return n instanceof yo&&e instanceof yo?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Pa&&e instanceof Pa&&n._firestore===e._firestore&&JG(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function hW(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new x(T.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gp{}function Oa(n,...e){for(const t of e)n=t._apply(n);return n}class Y_e extends Gp{constructor(e,t,i){super(),this.wa=e,this.ma=t,this.ga=i,this.type="where"}_apply(e){const t=ic(e.firestore),i=function(r,s,o,a,l,c,u){let d;if(l.isKeyField()){if("array-contains"===c||"array-contains-any"===c)throw new x(T.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if("in"===c||"not-in"===c){yW(u,c);const f=[];for(const p of u)f.push(_W(a,r,p));d={arrayValue:{values:f}}}else d=_W(a,r,u)}else"in"!==c&&"not-in"!==c&&"array-contains-any"!==c||yW(u,c),d=aW(o,"where",u,"in"===c||"not-in"===c);const h=Wn.create(l,c,d);return function(f,p){if(p.dt()){const y=JD(f);if(null!==y&&!y.isEqual(p.field))throw new x(T.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${y.toString()}' and '${p.field.toString()}'`);const b=ZD(f);null!==b&&vW(0,p.field,b)}const _=function(y,b){for(const v of y.filters)if(b.indexOf(v.op)>=0)return v.op;return null}(f,function(y){switch(y){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(p.op));if(null!==_)throw new x(T.INVALID_ARGUMENT,_===p.op?`Invalid query. You cannot use more than one '${p.op.toString()}' filter.`:`Invalid query. You cannot use '${p.op.toString()}' filters with '${_.toString()}' filters.`)}(r,h),h}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new ai(e.firestore,e.converter,function(r,s){const o=r.filters.concat([s]);return new po(r.path,r.collectionGroup,r.explicitOrderBy.slice(),o,r.limit,r.limitType,r.startAt,r.endAt)}(e._query,i))}}class Z_e extends Gp{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(i,r,s){if(null!==i.startAt)throw new x(T.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new x(T.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new cd(r,s);return function(a,l){if(null===ZD(a)){const c=JD(a);null!==c&&vW(0,c,l.field)}}(i,o),o}(e._query,this.wa,this.ya);return new ai(e.firestore,e.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new po(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class fW extends Gp{constructor(e,t,i){super(),this.type=e,this.pa=t,this.Ia=i}_apply(e){return new ai(e.firestore,e.converter,gv(e._query,this.pa,this.Ia))}}class pW extends Gp{constructor(e,t,i){super(),this.type=e,this.Ta=t,this.Ea=i}_apply(e){const t=gW(e,this.type,this.Ta,this.Ea);return new ai(e.firestore,e.converter,(r=t,new po((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class mW extends Gp{constructor(e,t,i){super(),this.type=e,this.Ta=t,this.Ea=i}_apply(e){const t=gW(e,this.type,this.Ta,this.Ea);return new ai(e.firestore,e.converter,(r=t,new po((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function gW(n,e,t,i){if(t[0]=Ce(t[0]),t[0]instanceof $p)return function(r,s,o,a,l){if(!a)throw new x(T.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const c=[];for(const u of dd(r))if(u.field.isKeyField())c.push(zl(s,a.key));else{const d=a.data.field(u.field);if(QD(d))throw new x(T.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===d){const h=u.field.canonicalString();throw new x(T.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${h}' (used as the orderBy) does not exist.`)}c.push(d)}return new Da(c,l)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=ic(n.firestore);return function(s,o,a,l,c,u){const d=s.explicitOrderBy;if(c.length>d.length)throw new x(T.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const h=[];for(let f=0;f<c.length;f++){const p=c[f];if(d[f].field.isKeyField()){if("string"!=typeof p)throw new x(T.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof p}`);if(!eS(s)&&-1!==p.indexOf("/"))throw new x(T.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${p}' contains a slash.`);const _=s.path.child(We.fromString(p));if(!B.isDocumentKey(_))throw new x(T.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);const y=new B(_);h.push(zl(o,y))}else{const _=aW(a,l,p);h.push(_)}}return new Da(h,u)}(n._query,n.firestore._databaseId,r,e,t,i)}}function _W(n,e,t){if("string"==typeof(t=Ce(t))){if(""===t)throw new x(T.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eS(e)&&-1!==t.indexOf("/"))throw new x(T.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(We.fromString(t));if(!B.isDocumentKey(i))throw new x(T.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return zl(n,new B(i))}if(t instanceof Tt)return zl(n,t._key);throw new x(T.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hv(t)}.`)}function yW(n,e){if(!Array.isArray(n)||0===n.length)throw new x(T.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new x(T.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function vW(n,e,t){if(!t.isEqual(e))throw new x(T.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const oye={maxAttempts:5};class Bx{convertValue(e,t="none"){switch($l(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Q()}}convertObject(e,t){const i={};return Hl(e.fields,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new $v(Gt(e.latitude),Gt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=xz(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(hp(e));default:return null}}convertTimestamp(e){const t=Ca(e);return new Rt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=We.fromString(e);oe(x3(i));const r=new Ea(i.get(1),i.get(3)),s=new B(i.popFirst(5));return r.isEqual(t)||Jt(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Qv(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class aye extends Bx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,t)}}class bW{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ic(e)}set(e,t,i){this._verifyNotCommitted();const r=Na(e,this._firestore),s=Qv(r.converter,t,i),o=Gv(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(o.toMutation(r._key,Pt.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const s=Na(e,this._firestore);let o;return o="string"==typeof(t=Ce(t))||t instanceof _o?Fx(this._dataReader,"WriteBatch.update",s._key,t,i,r):Nx(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Pt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Na(e,this._firestore);return this._mutations=this._mutations.concat(new md(t._key,Pt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new x(T.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Na(n,e){if((n=Ce(n)).firestore!==e)throw new x(T.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class oc extends Bx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,t)}}function wW(n,e,t){n=ze(n,Tt);const i=ze(n.firestore,Ot),r=Qv(n.converter,e,t);return Ad(i,[Gv(ic(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,Pt.none())])}function CW(n,e,t,...i){n=ze(n,Tt);const r=ze(n.firestore,Ot),s=ic(r);let o;return o="string"==typeof(e=Ce(e))||e instanceof _o?Fx(s,"updateDoc",n._key,e,t,i):Nx(s,"updateDoc",n._key,e),Ad(r,[o.toMutation(n._key,Pt.exists(!0))])}function EW(n,e){const t=ze(n.firestore,Ot),i=jv(n),r=Qv(n.converter,e);return Ad(t,[Gv(ic(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Pt.exists(!1))]).then(()=>i)}function TW(n,...e){var t,i,r;n=Ce(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||Px(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(Px(e[o])){const d=e[o];e[o]=null===(t=d.next)||void 0===t?void 0:t.bind(d),e[o+1]=null===(i=d.error)||void 0===i?void 0:i.bind(d),e[o+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}let l,c,u;if(n instanceof Tt)c=ze(n.firestore,Ot),u=ud(n._key.path),l={next:d=>{e[o]&&e[o](Ux(c,n,d))},error:e[o+1],complete:e[o+2]};else{const d=ze(n,ai);c=ze(d.firestore,Ot),u=d._query;const h=new oc(c);l={next:f=>{e[o]&&e[o](new Pa(c,h,d,f))},error:e[o+1],complete:e[o+2]},hW(n._query)}return function(d,h,f,p){const _=new Vv(p),y=new XS(h,_,f);return d.asyncQueue.enqueueAndForget(m(function*(){return WS(yield Md(d),y)})),()=>{_.Rc(),d.asyncQueue.enqueueAndForget(m(function*(){return KS(yield Md(d),y)}))}}(hn(c),u,a,l)}function Ad(n,e){return function(t,i){const r=new Rn;return t.asyncQueue.enqueueAndForget(m(function*(){return function Jge(n,e,t){return nx.apply(this,arguments)}(yield Mx(t),i,r)})),r.promise}(hn(n),e)}function Ux(n,e,t){const i=t.docs.get(e._key),r=new oc(n);return new yo(n,r,e._key,i,new sc(t.hasPendingWrites,t.fromCache),e.converter)}class gye extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ic(e)}get(e){const t=Na(e,this._firestore),i=new aye(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return Q();const s=r[0];if(s.isFoundDocument())return new $p(this._firestore,i,s.key,s,t.converter);if(s.isNoDocument())return new $p(this._firestore,i,t._key,null,t.converter);throw Q()})}set(e,t,i){const r=Na(e,this._firestore),s=Qv(r.converter,t,i),o=Gv(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,o),this}update(e,t,i,...r){const s=Na(e,this._firestore);let o;return o="string"==typeof(t=Ce(t))||t instanceof _o?Fx(this._dataReader,"Transaction.update",s._key,t,i,r):Nx(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this}delete(e){const t=Na(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Na(e,this._firestore),i=new oc(this._firestore);return super.get(e).then(r=>new yo(this._firestore,i,t._key,r._document,new sc(!1,!1),t.converter))}}function Hx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new x("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function DW(){if("undefined"==typeof Uint8Array)throw new x("unimplemented","Uint8Arrays are not available in this environment.")}function SW(){if(!function jpe(){return"undefined"!=typeof atob}())throw new x("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){sd=vs,cn(new Zt("firestore",(t,{instanceIdentifier:i,options:r})=>{const s=t.getProvider("app").getImmediate(),o=new Ot(new Ape(t.getProvider("auth-internal")),new Ppe(t.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new x(T.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ea(a.options.projectId,l)}(s,i),s);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),$e(mz,"3.5.0",n),$e(mz,"3.5.0","esm2017")}();class Wp{constructor(e){this._delegate=e}static fromBase64String(e){return SW(),new Wp(Rs.fromBase64String(e))}static fromUint8Array(e){return DW(),new Wp(Rs.fromUint8Array(e))}toBase64(){return SW(),this._delegate.toBase64()}toUint8Array(){return DW(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function jx(n){return function Iye(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class Dye{enableIndexedDbPersistence(e,t){return function P_e(n,e){iW(n=ze(n,Ot));const t=hn(n),i=n._freezeSettings(),r=new Ex;return nW(t,r,new VG(r,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function O_e(n){iW(n=ze(n,Ot));const e=hn(n),t=n._freezeSettings(),i=new Ex;return nW(e,i,new m_e(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function N_e(n){if(n._initialized&&!n._terminated)throw new x(T.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Rn;return n._queue.enqueueAndForgetEvenWhileRestricted(m(function*(){try{yield(t=m(function*(i){if(!es.C())return Promise.resolve();const r=i+"main";yield es.delete(r)}),function(i){return t.apply(this,arguments)})(_S(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class xW{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ea||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Vl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function x_e(n,e,t,i={}){var r;const s=(n=ze(n,Hp))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&Vl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let o,a;if("string"==typeof i.mockUserToken)o=i.mockUserToken,a=kn.MOCK_USER;else{o=function xle(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[q_(JSON.stringify({alg:"none",type:"JWT"})),q_(JSON.stringify(o)),""].join(".")}(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new x(T.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new kn(l)}n._authCredentials=new Mpe(new gz(o,a))}}(this._delegate,e,t,i)}enableNetwork(){return function L_e(n){return function b_e(n){return n.asyncQueue.enqueue(m(function*(){const e=yield jG(n),t=yield $G(n);return e.setNetworkEnabled(!0),function(i){const r=U(i);return r._u.delete(0),Bp(r)}(t)}))}(hn(n=ze(n,Ot)))}(this._delegate)}disableNetwork(){return function V_e(n){return function w_e(n){return n.asyncQueue.enqueue(m(function*(){const e=yield jG(n),t=yield $G(n);return e.setNetworkEnabled(!1),(i=m(function*(r){const s=U(r);s._u.add(0),yield Cd(s),s.gu.set("Offline")}),function(r){return i.apply(this,arguments)})(t);var i}))}(hn(n=ze(n,Ot)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,qG("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function F_e(n){return function(e){const t=new Rn;return e.asyncQueue.enqueueAndForget(m(function*(){return function i_e(n,e){return ax.apply(this,arguments)}(yield Mx(e),t)})),t.promise}(hn(n=ze(n,Ot)))}(this._delegate)}onSnapshotsInSync(e){return function mye(n,e){return function T_e(n,e){const t=new Vv(e);return n.asyncQueue.enqueueAndForget(m(function*(){return i=yield Md(n),r=t,U(i).Ru.add(r),void r.next();var i,r})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget(m(function*(){return i=yield Md(n),r=t,void U(i).Ru.delete(r);var i,r}))}}(hn(n=ze(n,Ot)),Px(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new x("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new kd(this,Rx(this._delegate,e))}catch(t){throw vi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Rr(this,jv(this._delegate,e))}catch(t){throw vi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new bi(this,function M_e(n,e){if(n=ze(n,Hp),kx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new x(T.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ai(n,null,(t=e,new po(We.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw vi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function _ye(n,e,t){n=ze(n,Ot);const i=Object.assign(Object.assign({},oye),t);return function(r){if(r.maxAttempts<1)throw new x(T.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function I_e(n,e,t){const i=new Rn;return n.asyncQueue.enqueueAndForget(m(function*(){const r=yield(s=n,Bv(s).then(o=>o.datastore));var s;new y_e(n.asyncQueue,r,t,e,i).run()})),i.promise}(hn(n),r=>e(new gye(n,r)),i)}(this._delegate,t=>e(new MW(this,t)))}batch(){return hn(this._delegate),new AW(new bW(this._delegate,e=>Ad(this._delegate,e)))}loadBundle(e){return function B_e(n,e){const t=hn(n=ze(n,Ot)),i=new k_e;return function D_e(n,e,t,i){const r=function(s,o){let a;return a="string"==typeof s?(new TextEncoder).encode(s):s,l=function(l,c){if(l instanceof Uint8Array)return BG(l,c);if(l instanceof ArrayBuffer)return BG(new Uint8Array(l),c);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),new g_e(l,o);var l}(t,Vp(e));n.asyncQueue.enqueueAndForget(m(function*(){!function p_e(n,e,t){const i=U(n);var r;(r=m(function*(s,o,a){try{const l=yield o.getMetadata();if(yield function(h,f){const p=U(h),_=Pn(f.createTime);return p.persistence.runTransaction("hasNewerBundle","readonly",y=>p.Ns.getBundleMetadata(y,f.id)).then(y=>!!y&&y.createTime.compareTo(_)>=0)}(s.localStore,l))return yield o.close(),a._completeWith({taskState:"Success",documentsLoaded:(h=l).totalDocuments,bytesLoaded:h.totalBytes,totalDocuments:h.totalDocuments,totalBytes:h.totalBytes}),Promise.resolve(new Set);a._updateProgress(xG(l));const c=new qge(l,s.localStore,o.It);let u=yield o.wc();for(;u;){const h=yield c.Ou(u);h&&a._updateProgress(h),u=yield o.wc()}const d=yield c.complete();return yield go(s,d.Bu,void 0),yield function(h,f){const p=U(h);return p.persistence.runTransaction("Save bundle","readwrite",_=>p.Ns.saveBundleMetadata(_,f))}(s.localStore,l),a._completeWith(d.progress),Promise.resolve(d.$u)}catch(l){return Vl("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}var h}),function(s,o,a){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield Mx(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function U_e(n,e){return function S_e(n,e){return n.asyncQueue.enqueue(m(function*(){return function(t,i){const r=U(t);return r.persistence.runTransaction("Get named query","readonly",s=>r.Ns.getNamedQuery(s,i))}(yield Uv(n),e)}))}(hn(n=ze(n,Ot)),e).then(t=>t?new ai(n,null,t.query):null)}(this._delegate,e).then(t=>t?new bi(this,t):null)}}class Yv extends Bx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wp(new Rs(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Rr.forKey(t,this.firestore,null)}}class MW{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Yv(e)}get(e){const t=lc(e);return this._delegate.get(t).then(i=>new qp(this._firestore,new yo(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=lc(e);return i?(Hx("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=lc(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=lc(e);return this._delegate.delete(t),this}}class AW{constructor(e){this._delegate=e}set(e,t,i){const r=lc(e);return i?(Hx("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=lc(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=lc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ac{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new zp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Kp(this._firestore,i),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=ac.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new ac(e,new Yv(e),t),r.set(t,s)),s}}ac.INSTANCES=new WeakMap;class Rr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Yv(e)}static forPath(e,t,i){if(e.length%2!=0)throw new x("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Rr(t,new Tt(t._delegate,i,new B(e)))}static forKey(e,t,i){return new Rr(t,new Tt(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new kd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new kd(this.firestore,Rx(this._delegate,e))}catch(t){throw vi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Ce(e))instanceof Tt&&ZG(this._delegate,e)}set(e,t){t=Hx("DocumentReference.set",t);try{return t?wW(this._delegate,e,t):wW(this._delegate,e)}catch(i){throw vi(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?CW(this._delegate,e):CW(this._delegate,e,t,...i)}catch(r){throw vi(r,"updateDoc()","DocumentReference.update()")}}delete(){return function pye(n){return Ad(ze(n.firestore,Ot),[new md(n._key,Pt.none())])}(this._delegate)}onSnapshot(...e){const t=kW(e),i=RW(e,r=>new qp(this.firestore,new yo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return TW(this._delegate,t,i)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function cye(n){n=ze(n,Tt);const e=ze(n.firestore,Ot),t=hn(e),i=new oc(e);return function C_e(n,e){const t=new Rn;return n.asyncQueue.enqueueAndForget(m(function*(){return(i=m(function*(r,s,o){try{const a=yield function(l,c){const u=U(l);return u.persistence.runTransaction("read document","readonly",d=>u.localDocuments.getDocument(d,c))}(r,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new x(T.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Id(a,`Failed to get document '${s} from cache`);o.reject(l)}}),function(r,s,o){return i.apply(this,arguments)})(yield Uv(n),e,t);var i})),t.promise}(t,n._key).then(r=>new yo(e,i,n._key,r,new sc(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function uye(n){n=ze(n,Tt);const e=ze(n.firestore,Ot);return zG(hn(e),n._key,{source:"server"}).then(t=>Ux(e,n,t))}(this._delegate):function lye(n){n=ze(n,Tt);const e=ze(n.firestore,Ot);return zG(hn(e),n._key).then(t=>Ux(e,n,t))}(this._delegate),t.then(i=>new qp(this.firestore,new yo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Rr(this.firestore,this._delegate.withConverter(e?ac.getInstance(this.firestore,e):null))}}function vi(n,e,t){return n.message=n.message.replace(e,t),n}function kW(n){for(const e of n)if("object"==typeof e&&!jx(e))return e;return{}}function RW(n,e){var t,i;let r;return r=jx(n[0])?n[0]:jx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class qp{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Rr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return dW(this._delegate,e._delegate)}}class Kp extends qp{data(e){const t=this._delegate.data(e);return function Spe(n,e){n||Q()}(void 0!==t),t}}class bi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Yv(e)}where(e,t,i){try{return new bi(this.firestore,Oa(this._delegate,function X_e(n,e,t){const i=e,r=Kv("where",n);return new Y_e(r,i,t)}(e,t,i)))}catch(r){throw vi(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new bi(this.firestore,Oa(this._delegate,function J_e(n,e="asc"){const t=e,i=Kv("orderBy",n);return new Z_e(i,t)}(e,t)))}catch(i){throw vi(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new bi(this.firestore,Oa(this._delegate,function eye(n){return YG("limit",n),new fW("limit",n,"F")}(e)))}catch(t){throw vi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new bi(this.firestore,Oa(this._delegate,function tye(n){return YG("limitToLast",n),new fW("limitToLast",n,"L")}(e)))}catch(t){throw vi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new bi(this.firestore,Oa(this._delegate,function nye(...n){return new pW("startAt",n,!0)}(...e)))}catch(t){throw vi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new bi(this.firestore,Oa(this._delegate,function iye(...n){return new pW("startAfter",n,!1)}(...e)))}catch(t){throw vi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new bi(this.firestore,Oa(this._delegate,function rye(...n){return new mW("endBefore",n,!1)}(...e)))}catch(t){throw vi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new bi(this.firestore,Oa(this._delegate,function sye(...n){return new mW("endAt",n,!0)}(...e)))}catch(t){throw vi(t,"endAt()","Query.endAt()")}}isEqual(e){return JG(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function hye(n){n=ze(n,ai);const e=ze(n.firestore,Ot),t=hn(e),i=new oc(e);return function E_e(n,e){const t=new Rn;return n.asyncQueue.enqueueAndForget(m(function*(){return(i=m(function*(r,s,o){try{const a=yield Rv(r,s,!0),l=new kG(s,a.Hi),c=l.ju(a.documents),u=l.applyChanges(c,!1);o.resolve(u.snapshot)}catch(a){const l=Id(a,`Failed to execute query '${s} against cache`);o.reject(l)}}),function(r,s,o){return i.apply(this,arguments)})(yield Uv(n),e,t);var i})),t.promise}(t,n._query).then(r=>new Pa(e,i,n,r))}(this._delegate):"server"===(null==e?void 0:e.source)?function fye(n){n=ze(n,ai);const e=ze(n.firestore,Ot),t=hn(e),i=new oc(e);return GG(t,n._query,{source:"server"}).then(r=>new Pa(e,i,n,r))}(this._delegate):function dye(n){n=ze(n,ai);const e=ze(n.firestore,Ot),t=hn(e),i=new oc(e);return hW(n._query),GG(t,n._query).then(r=>new Pa(e,i,n,r))}(this._delegate),t.then(i=>new $x(this.firestore,new Pa(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=kW(e),i=RW(e,r=>new $x(this.firestore,new Pa(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return TW(this._delegate,t,i)}withConverter(e){return new bi(this.firestore,this._delegate.withConverter(e?ac.getInstance(this.firestore,e):null))}}class xye{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Kp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class $x{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new bi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Kp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new xye(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Kp(this._firestore,i))})}isEqual(e){return dW(this._delegate,e._delegate)}}class kd extends bi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Rr(this.firestore,e):null}doc(e){try{return new Rr(this.firestore,void 0===e?jv(this._delegate):jv(this._delegate,e))}catch(t){throw vi(t,"doc()","CollectionReference.doc()")}}add(e){return EW(this._delegate,e).then(t=>new Rr(this.firestore,t))}isEqual(e){return ZG(this._delegate,e._delegate)}withConverter(e){return new kd(this.firestore,this._delegate.withConverter(e?ac.getInstance(this.firestore,e):null))}}function lc(n){return ze(n,Tt)}class zx{constructor(...e){this._delegate=new _o(...e)}static documentId(){return new zx($t.keyField().canonicalString())}isEqual(e){return(e=Ce(e))instanceof _o&&this._delegate._internalPath.isEqual(e._internalPath)}}class cc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function vye(){return new Ox("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new cc(e)}static delete(){const e=function yye(){return new jp("deleteField")}();return e._methodName="FieldValue.delete",new cc(e)}static arrayUnion(...e){const t=function bye(...n){return new z_e("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new cc(t)}static arrayRemove(...e){const t=function wye(...n){return new G_e("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new cc(t)}static increment(e){const t=function Cye(n){return new W_e("increment",n)}(e);return t._methodName="FieldValue.increment",new cc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Mye={Firestore:xW,GeoPoint:$v,Timestamp:Rt,Blob:Wp,Transaction:MW,WriteBatch:AW,DocumentReference:Rr,DocumentSnapshot:qp,Query:bi,QueryDocumentSnapshot:Kp,QuerySnapshot:$x,CollectionReference:kd,FieldPath:zx,FieldValue:cc,setLogLevel:function Sye(n){!function Dpe(n){va.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function kye(n){(function Aye(n,e){n.INTERNAL.registerComponent(new Zt("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},Mye)))})(n,(e,t)=>new xW(e,t,new Dye)),n.registerVersion("@firebase/firestore-compat","0.1.25")}(Li);const{isArray:Rye}=Array,{getPrototypeOf:Pye,prototype:Oye,keys:Nye}=Object;function PW(n){if(1===n.length){const e=n[0];if(Rye(e))return{args:e,keys:null};if(function Fye(n){return n&&"object"==typeof n&&Pye(n)===Oye}(e)){const t=Nye(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function OW(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function NW(n,e,t){n?Gs(t,n,e):e()}function Qp(n,e){const t=Ze(n)?n:()=>n,i=r=>r.error(t());return new nt(e?r=>e.schedule(i,0,r):i)}const Xv=gw(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function FW(){return Vt((n,e)=>{let t=null;n._refCount++;const i=It(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class Bye extends nt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,bP(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new et;const t=this.getSubject();e.add(this.source.subscribe(It(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=et.EMPTY)}return e}refCount(){return FW()(this)}}function Ps(n,e){return Vt((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(It(i,l=>{null==r||r.unsubscribe();let c=0;const u=s++;xi(n(l,u)).subscribe(r=It(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Uye(n,e,t,i,r){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(It(o,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function LW(n,e){return Vt(Uye(n,e,arguments.length>=2,!0))}function vo(n){return Vt((e,t)=>{let s,i=null,r=!1;i=e.subscribe(It(t,void 0,void 0,o=>{s=xi(n(o,vo(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function Rd(n,e){return Ze(e)?tn(n,e,1):tn(n,1)}function Gx(n){return n<=0?()=>pr:Vt((e,t)=>{let i=[];e.subscribe(It(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function VW(n=Hye){return Vt((e,t)=>{let i=!1;e.subscribe(It(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function Hye(){return new Xv}function BW(n){return Vt((e,t)=>{let i=!1;e.subscribe(It(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Pd(n,e){const t=arguments.length>=2;return i=>i.pipe(n?lt((r,s)=>n(r,s,i)):Lo,ln(1),t?BW(e):VW(()=>new Xv))}function UW(n){return Vt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class bo{constructor(e,t){this.id=e,this.url=t}}class Wx extends bo{constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Yp extends bo{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class HW extends bo{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $ye extends bo{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class zye extends bo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gye extends bo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wye extends bo{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qye extends bo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kye extends bo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jW{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class $W{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Qye{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yye{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xye{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zye{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zW{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ne="primary";class Jye{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Od(n){return new Jye(n)}const GW="ngNavigationCancelingError";function qx(n){const e=Error("NavigationCancelingError: "+n);return e[GW]=!0,e}function tve(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Os(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!WW(n[r],e[r]))return!1;return!0}function WW(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function qW(n){return Array.prototype.concat.apply([],n)}function KW(n){return n.length>0?n[n.length-1]:null}function qn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ns(n){return pE(n)?n:kh(n)?Bn(Promise.resolve(n)):J(n)}const rve={exact:function XW(n,e,t){if(!dc(n.segments,e.segments)||!Zv(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!XW(n.children[i],e.children[i],t))return!1;return!0},subset:ZW},QW={exact:function sve(n,e){return Os(n,e)},subset:function ove(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>WW(n[t],e[t]))},ignored:()=>!0};function YW(n,e,t){return rve[t.paths](n.root,e.root,t.matrixParams)&&QW[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ZW(n,e,t){return JW(n,e,e.segments,t)}function JW(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!dc(r,t)||e.hasChildren()||!Zv(r,t,i))}if(n.segments.length===t.length){if(!dc(n.segments,t)||!Zv(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!ZW(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(dc(n.segments,r)&&Zv(n.segments,r,i)&&n.children[Ne])&&JW(n.children[Ne],e,s,i)}}function Zv(n,e,t){return e.every((i,r)=>QW[t](n[r].parameters,i.parameters))}class uc{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Od(this.queryParams)),this._queryParamMap}toString(){return cve.serialize(this)}}class Ue{constructor(e,t){this.segments=e,this.children=t,this.parent=null,qn(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jv(this)}}class Xp{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Od(this.parameters)),this._parameterMap}toString(){return rq(this)}}function dc(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class eq{}class tq{parse(e){const t=new yve(e);return new uc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Zp(e.root,!0)}`,i=function hve(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${eb(t)}=${eb(r)}`).join("&"):`${eb(t)}=${eb(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),r="string"==typeof e.fragment?`#${function uve(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${i}${r}`}}const cve=new tq;function Jv(n){return n.segments.map(e=>rq(e)).join("/")}function Zp(n,e){if(!n.hasChildren())return Jv(n);if(e){const t=n.children[Ne]?Zp(n.children[Ne],!1):"",i=[];return qn(n.children,(r,s)=>{s!==Ne&&i.push(`${s}:${Zp(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function lve(n,e){let t=[];return qn(n.children,(i,r)=>{r===Ne&&(t=t.concat(e(i,r)))}),qn(n.children,(i,r)=>{r!==Ne&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===Ne?[Zp(n.children[Ne],!1)]:[`${r}:${Zp(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ne]?`${Jv(n)}/${t[0]}`:`${Jv(n)}/(${t.join("//")})`}}function nq(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function eb(n){return nq(n).replace(/%3B/gi,";")}function Kx(n){return nq(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function tb(n){return decodeURIComponent(n)}function iq(n){return tb(n.replace(/\+/g,"%20"))}function rq(n){return`${Kx(n.path)}${function dve(n){return Object.keys(n).map(e=>`;${Kx(e)}=${Kx(n[e])}`).join("")}(n.parameters)}`}const fve=/^[^\/()?;=#]+/;function nb(n){const e=n.match(fve);return e?e[0]:""}const pve=/^[^=?&#]+/,gve=/^[^&#]+/;class yve{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ue([],{}):new Ue([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Ne]=new Ue(e,t)),i}parseSegment(){const e=nb(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Xp(tb(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=nb(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=nb(this.remaining);r&&(i=r,this.capture(i))}e[tb(t)]=tb(i)}parseQueryParam(e){const t=function mve(n){const e=n.match(pve);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function _ve(n){const e=n.match(gve);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=iq(t),s=iq(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=nb(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ne);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Ne]:new Ue([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class sq{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Qx(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=Qx(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Yx(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Yx(e,this._root).map(t=>t.value)}}function Qx(n,e){if(n===e.value)return e;for(const t of e.children){const i=Qx(n,t);if(i)return i}return null}function Yx(n,e){if(n===e.value)return[e];for(const t of e.children){const i=Yx(n,t);if(i.length)return i.unshift(e),i}return[]}class wo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Nd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class oq extends sq{constructor(e,t){super(e),this.snapshot=t,Xx(this,e)}toString(){return this.snapshot.toString()}}function aq(n,e){const t=function vve(n,e){const o=new ib([],{},{},"",{},Ne,e,null,n.root,-1,{});return new cq("",new wo(o,[]))}(n,e),i=new Tr([new Xp("",{})]),r=new Tr({}),s=new Tr({}),o=new Tr({}),a=new Tr(""),l=new Co(i,r,o,a,s,Ne,e,t.root);return l.snapshot=t.root,new oq(new wo(l,[]),t)}class Co{constructor(e,t,i,r,s,o,a,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ae(e=>Od(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ae(e=>Od(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function lq(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function bve(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class ib{constructor(e,t,i,r,s,o,a,l,c,u,d){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Od(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Od(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class cq extends sq{constructor(e,t){super(t),this.url=e,Xx(this,t)}toString(){return uq(this._root)}}function Xx(n,e){e.value._routerState=n,e.children.forEach(t=>Xx(n,t))}function uq(n){const e=n.children.length>0?` { ${n.children.map(uq).join(", ")} } `:"";return`${n.value}${e}`}function Zx(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Os(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Os(e.params,t.params)||n.params.next(t.params),function nve(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Os(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Os(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Jx(n,e){const t=Os(n.params,e.params)&&function ave(n,e){return dc(n,e)&&n.every((t,i)=>Os(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Jx(n.parent,e.parent))}function Jp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function Cve(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Jp(n,i,r);return Jp(n,i)})}(n,e,t);return new wo(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Jp(n,a)),o}}const i=function Eve(n){return new Co(new Tr(n.url),new Tr(n.params),new Tr(n.queryParams),new Tr(n.fragment),new Tr(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>Jp(n,s));return new wo(i,r)}}function rb(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function em(n){return"object"==typeof n&&null!=n&&n.outlets}function eM(n,e,t,i,r){let s={};if(i&&qn(i,(a,l)=>{s[l]=Array.isArray(a)?a.map(c=>`${c}`):`${a}`}),n===e)return new uc(t,s,r);const o=dq(n,e,t);return new uc(o,s,r)}function dq(n,e,t){const i={};return qn(n.children,(r,s)=>{i[s]=r===e?t:dq(r,e,t)}),new Ue(n.segments,i)}class hq{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&rb(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(em);if(r&&r!==KW(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class tM{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function fq(n,e,t){if(n||(n=new Ue([],{})),0===n.segments.length&&n.hasChildren())return sb(n,e,t);const i=function Mve(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(em(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!mq(l,c,o))return s;i+=2}else{if(!mq(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new Ue(n.segments.slice(0,i.pathIndex),{});return s.children[Ne]=new Ue(n.segments.slice(i.pathIndex),n.children),sb(s,0,r)}return i.match&&0===r.length?new Ue(n.segments,{}):i.match&&!n.hasChildren()?nM(n,e,t):i.match?sb(n,0,r):nM(n,e,t)}function sb(n,e,t){if(0===t.length)return new Ue(n.segments,{});{const i=function xve(n){return em(n[0])?n[0].outlets:{[Ne]:n}}(t),r={};return qn(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=fq(n.children[o],e,s))}),qn(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new Ue(n.segments,r)}}function nM(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(em(s)){const l=Ave(s.outlets);return new Ue(i,l)}if(0===r&&rb(t[0])){i.push(new Xp(n.segments[e].path,pq(t[0]))),r++;continue}const o=em(s)?s.outlets[Ne]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&rb(a)?(i.push(new Xp(o,pq(a))),r+=2):(i.push(new Xp(o,{})),r++)}return new Ue(i,{})}function Ave(n){const e={};return qn(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=nM(new Ue([],{}),0,t))}),e}function pq(n){const e={};return qn(n,(t,i)=>e[i]=`${t}`),e}function mq(n,e,t){return n==t.path&&Os(e,t.parameters)}class Rve{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Zx(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Nd(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),qn(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Nd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Nd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=Nd(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Zye(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Yye(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(Zx(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Zx(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function Pve(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=l,o.outlet&&o.outlet.activateWith(r,l),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class iM{constructor(e,t){this.routes=e,this.module=t}}function Fa(n){return"function"==typeof n}function hc(n){return n instanceof uc}const tm=Symbol("INITIAL_VALUE");function nm(){return Ps(n=>function Lye(...n){const e=th(n),t=NP(n),{args:i,keys:r}=PW(n);if(0===i.length)return Bn([],e);const s=new nt(function Vye(n,e,t=Lo){return i=>{NW(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)NW(e,()=>{const c=Bn(n[l],e);let u=!1;c.subscribe(It(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>OW(r,o):Lo));return t?s.pipe(y0(t)):s}(n.map(e=>e.pipe(ln(1),Pi(tm)))).pipe(LW((e,t)=>{let i=!1;return t.reduce((r,s,o)=>r!==tm?r:(s===tm&&(i=!0),i||!1!==s&&o!==t.length-1&&!hc(s)?r:s),e)},tm),lt(e=>e!==tm),Ae(e=>hc(e)?e:!0===e),ln(1)))}class Bve{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new im,this.attachRef=null}}class im{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Bve,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let rM=(()=>{class n{constructor(t,i,r,s,o){this.parentContexts=t,this.location=i,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new ie,this.deactivateEvents=new ie,this.attachEvents=new ie,this.detachEvents=new ie,this.name=s||Ne,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new Uve(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g(im),g(In),g(Ko),nl("name"),g(Qt))},n.\u0275dir=N({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Uve{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Co?this.route:e===im?this.childContexts:this.parent.get(e,t)}}let gq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ie({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&j(0,"router-outlet")},directives:[rM],encapsulation:2}),n})();function _q(n,e=""){for(let t=0;t<n.length;t++){const i=n[t];Hve(i,jve(e,i))}}function Hve(n,e){n.children&&_q(n.children,e)}function jve(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function sM(n){const e=n.children&&n.children.map(sM),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ne&&(t.component=gq),t}function Pr(n){return n.outlet||Ne}function yq(n,e){const t=n.filter(i=>Pr(i)===e);return t.push(...n.filter(i=>Pr(i)!==e)),t}const vq={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ob(n,e,t){var i;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},vq):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||tve)(t,n,e);if(!s)return Object.assign({},vq);const o={};qn(s.posParams,(l,c)=>{o[c]=l.path});const a=s.consumed.length>0?Object.assign(Object.assign({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:a,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function ab(n,e,t,i,r="corrected"){if(t.length>0&&function Gve(n,e,t){return t.some(i=>lb(n,e,i)&&Pr(i)!==Ne)}(n,t,i)){const o=new Ue(e,function zve(n,e,t,i){const r={};r[Ne]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Pr(s)!==Ne){const o=new Ue([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[Pr(s)]=o}return r}(n,e,i,new Ue(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function Wve(n,e,t){return t.some(i=>lb(n,e,i))}(n,t,i)){const o=new Ue(n.segments,function $ve(n,e,t,i,r,s){const o={};for(const a of i)if(lb(n,t,a)&&!r[Pr(a)]){const l=new Ue([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[Pr(a)]=l}return Object.assign(Object.assign({},r),o)}(n,e,t,i,n.children,r));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new Ue(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function lb(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function bq(n,e,t,i){return!!(Pr(n)===i||i!==Ne&&lb(e,t,n))&&("**"===n.path||ob(e,n,t).matched)}function wq(n,e,t){return 0===e.length&&!n.children[t]}class cb{constructor(e){this.segmentGroup=e||null}}class Cq{constructor(e){this.urlTree=e}}function rm(n){return Qp(new cb(n))}function Eq(n){return Qp(new Cq(n))}function qve(n){return Qp(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class Yve{constructor(e,t,i,r,s){this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(Js)}apply(){const e=ab(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ue(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ne).pipe(Ae(s=>this.createUrlTree(oM(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(vo(s=>{if(s instanceof Cq)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof cb?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ne).pipe(Ae(r=>this.createUrlTree(oM(r),e.queryParams,e.fragment))).pipe(vo(r=>{throw r instanceof cb?this.noMatchError(r):r}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const r=e.segments.length>0?new Ue([],{[Ne]:e}):e;return new uc(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(Ae(s=>new Ue([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return Bn(r).pipe(Rd(s=>{const o=i.children[s],a=yq(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(Ae(l=>({segment:l,outlet:s})))}),LW((s,o)=>(s[o.outlet]=o.segment,s),{}),function jye(n,e){const t=arguments.length>=2;return i=>i.pipe(n?lt((r,s)=>n(r,s,i)):Lo,Gx(1),t?BW(e):VW(()=>new Xv))}())}expandSegment(e,t,i,r,s,o){return Bn(i).pipe(Rd(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(vo(c=>{if(c instanceof cb)return J(null);throw c}))),Pd(a=>!!a),vo((a,l)=>{if(a instanceof Xv||"EmptyError"===a.name)return wq(t,r,s)?J(new Ue([],{})):rm(t);throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return bq(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):rm(t):rm(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Eq(s):this.lineralizeSegments(i,s).pipe(tn(o=>{const a=new Ue(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=ob(t,r,s);if(!a)return rm(t);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?Eq(d):this.lineralizeSegments(r,d).pipe(tn(h=>this.expandSegment(e,t,i,h.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?J(i._loadedConfig):this.configLoader.load(e.injector,i)).pipe(Ae(d=>(i._loadedConfig=d,new Ue(r,{})))):J(new Ue(r,{}));const{matched:o,consumedSegments:a,remainingSegments:l}=ob(t,i,r);return o?this.getChildConfig(e,i,r).pipe(tn(u=>{const d=u.module,h=u.routes,{segmentGroup:f,slicedSegments:p}=ab(t,a,l,h),_=new Ue(f.segments,f.children);if(0===p.length&&_.hasChildren())return this.expandChildren(d,h,_).pipe(Ae(D=>new Ue(a,D)));if(0===h.length&&0===p.length)return J(new Ue(a,{}));const y=Pr(i)===s;return this.expandSegment(d,_,h,p,y?Ne:s,!0).pipe(Ae(v=>new Ue(a.concat(v.segments),v.children)))})):rm(t)}getChildConfig(e,t,i){return t.children?J(new iM(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?J(t._loadedConfig):this.runCanLoadGuards(e.injector,t,i).pipe(tn(r=>r?this.configLoader.load(e.injector,t).pipe(Ae(s=>(t._loadedConfig=s,s))):function Kve(n){return Qp(qx(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):J(new iM([],e))}runCanLoadGuards(e,t,i){const r=t.canLoad;if(!r||0===r.length)return J(!0);const s=r.map(o=>{const a=e.get(o);let l;if(function Nve(n){return n&&Fa(n.canLoad)}(a))l=a.canLoad(t,i);else{if(!Fa(a))throw new Error("Invalid CanLoad guard");l=a(t,i)}return Ns(l)});return J(s).pipe(nm(),Sn(o=>{if(!hc(o))return;const a=qx(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),Ae(o=>!0===o))}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return J(i);if(r.numberOfChildren>1||!r.children[Ne])return qve(e.redirectTo);r=r.children[Ne]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new uc(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return qn(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return qn(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,i,r)}),new Ue(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}function oM(n){const e={};for(const i of Object.keys(n.children)){const s=oM(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function Xve(n){if(1===n.numberOfChildren&&n.children[Ne]){const e=n.children[Ne];return new Ue(n.segments.concat(e.segments),e.children)}return n}(new Ue(n.segments,e))}class Tq{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ub{constructor(e,t){this.component=e,this.route=t}}function Jve(n,e,t){const i=n._root;return sm(i,e?e._root:null,t,[i.value])}function db(n,e,t){const i=function tbe(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:t).get(n)}function sm(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Nd(e);return n.children.forEach(o=>{(function nbe(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function ibe(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!dc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!dc(n.url,e.url)||!Os(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Jx(n,e)||!Os(n.queryParams,e.queryParams);default:return!Jx(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Tq(i)):(s.data=o.data,s._resolvedData=o._resolvedData),sm(n,e,s.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new ub(a.outlet.component,o))}else o&&om(e,a,r),r.canActivateChecks.push(new Tq(i)),sm(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),qn(s,(o,a)=>om(o,t.getContext(a),r)),r}function om(n,e,t){const i=Nd(n),r=n.value;qn(i,(s,o)=>{om(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new ub(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class hbe{}function Iq(n){return new nt(e=>e.error(n))}class pbe{constructor(e,t,i,r,s,o){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=ab(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ne);if(null===t)return null;const i=new ib([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ne,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new wo(i,t),s=new cq(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,i=lq(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const s of Object.keys(t.children)){const o=t.children[s],a=yq(e,s),l=this.processSegmentGroup(a,o,s);if(null===l)return null;i.push(...l)}const r=Dq(i);return function mbe(n){n.sort((e,t)=>e.value.outlet===Ne?-1:t.value.outlet===Ne?1:e.value.outlet.localeCompare(t.value.outlet))}(r),r}processSegment(e,t,i,r){for(const s of e){const o=this.processSegmentAgainstRoute(s,t,i,r);if(null!==o)return o}return wq(t,i,r)?[]:null}processSegmentAgainstRoute(e,t,i,r){if(e.redirectTo||!bq(e,t,i,r))return null;let s,o=[],a=[];if("**"===e.path){const f=i.length>0?KW(i).parameters:{};s=new ib(i,f,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Mq(e),Pr(e),e.component,e,Sq(t),xq(t)+i.length,Aq(e))}else{const f=ob(t,e,i);if(!f.matched)return null;o=f.consumedSegments,a=f.remainingSegments,s=new ib(o,f.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Mq(e),Pr(e),e.component,e,Sq(t),xq(t)+o.length,Aq(e))}const l=function gbe(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:u}=ab(t,o,a,l.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const f=this.processChildren(l,c);return null===f?null:[new wo(s,f)]}if(0===l.length&&0===u.length)return[new wo(s,[])];const d=Pr(e)===r,h=this.processSegment(l,c,u,d?Ne:r);return null===h?null:[new wo(s,h)]}}function _be(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Dq(n){const e=[],t=new Set;for(const i of n){if(!_be(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=Dq(i.children);e.push(new wo(i.value,r))}return e.filter(i=>!t.has(i))}function Sq(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function xq(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Mq(n){return n.data||{}}function Aq(n){return n.resolve||{}}function kq(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function aM(n){return Ps(e=>{const t=n(e);return t?Bn(t).pipe(Ae(()=>e)):J(e)})}class Ibe extends class Tbe{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const lM=new P("ROUTES");class Rq{constructor(e,t,i,r){this.injector=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const r=this.loadModuleFactory(t.loadChildren).pipe(Ae(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=s.create(e);return new iM(qW(o.injector.get(lM,void 0,ue.Self|ue.Optional)).map(sM),o)}),vo(s=>{throw t._loader$=void 0,s}));return t._loader$=new Bye(r,()=>new ne).pipe(FW()),t._loader$}loadModuleFactory(e){return Ns(e()).pipe(tn(t=>t instanceof c2?J(t):Bn(this.compiler.compileModuleAsync(t))))}}class Sbe{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function xbe(n){throw n}function Mbe(n,e,t){return e.parse("/")}function Pq(n,e){return J(null)}const Abe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kbe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let wt=(()=>{class n{constructor(t,i,r,s,o,a,l){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ne,this.errorHandler=xbe,this.malformedUriErrorHandler=Mbe,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Pq,afterPreactivation:Pq},this.urlHandlingStrategy=new Sbe,this.routeReuseStrategy=new Ibe,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(Js),this.console=o.get(q2);const d=o.get(Z);this.isNgZoneEnabled=d instanceof Z&&Z.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function ive(){return new uc(new Ue([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Rq(o,a,h=>this.triggerEvent(new jW(h)),h=>this.triggerEvent(new $W(h))),this.routerState=aq(this.currentUrlTree,this.rootComponentType),this.transitions=new Tr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(lt(r=>0!==r.id),Ae(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Ps(r=>{let s=!1,o=!1;return J(r).pipe(Sn(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ps(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return Oq(a.source)&&(this.browserUrlTree=a.extractedUrl),J(a).pipe(Ps(d=>{const h=this.transitions.getValue();return i.next(new Wx(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?pr:Promise.resolve(d)}),function Zve(n,e,t,i){return Ps(r=>function Qve(n,e,t,i,r){return new Yve(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(Ae(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Sn(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function ybe(n,e,t,i,r){return tn(s=>function fbe(n,e,t,i,r="emptyOnly",s="legacy"){try{const o=new pbe(n,e,t,i,r,s).recognize();return null===o?Iq(new hbe):J(o)}catch(o){return Iq(o)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),i,r).pipe(Ae(o=>Object.assign(Object.assign({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),Sn(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new zye(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);i.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:p,restoredState:_,extras:y}=a,b=new Wx(h,this.serializeUrl(f),p,_);i.next(b);const v=aq(f,this.rootComponentType).snapshot;return J(Object.assign(Object.assign({},a),{targetSnapshot:v,urlAfterRedirects:f,extras:Object.assign(Object.assign({},y),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),pr}),aM(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),Sn(a=>{const l=new Gye(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),Ae(a=>Object.assign(Object.assign({},a),{guards:Jve(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function rbe(n,e){return tn(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?J(Object.assign(Object.assign({},t),{guardsResult:!0})):function sbe(n,e,t,i){return Bn(n).pipe(tn(r=>function dbe(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?J(s.map(a=>{const l=db(a,e,r);let c;if(function Vve(n){return n&&Fa(n.canDeactivate)}(l))c=Ns(l.canDeactivate(n,e,t,i));else{if(!Fa(l))throw new Error("Invalid CanDeactivate guard");c=Ns(l(n,e,t,i))}return c.pipe(Pd())})).pipe(nm()):J(!0)}(r.component,r.route,t,e,i)),Pd(r=>!0!==r,!0))}(o,i,r,n).pipe(tn(a=>a&&function Ove(n){return"boolean"==typeof n}(a)?function obe(n,e,t,i){return Bn(e).pipe(Rd(r=>G_(function lbe(n,e){return null!==n&&e&&e(new Qye(n)),J(!0)}(r.route.parent,i),function abe(n,e){return null!==n&&e&&e(new Xye(n)),J(!0)}(r.route,i),function ube(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function ebe(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>vT(()=>J(o.guards.map(l=>{const c=db(l,o.node,t);let u;if(function Lve(n){return n&&Fa(n.canActivateChild)}(c))u=Ns(c.canActivateChild(i,n));else{if(!Fa(c))throw new Error("Invalid CanActivateChild guard");u=Ns(c(i,n))}return u.pipe(Pd())})).pipe(nm())));return J(s).pipe(nm())}(n,r.path,t),function cbe(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return J(!0);const r=i.map(s=>vT(()=>{const o=db(s,e,t);let a;if(function Fve(n){return n&&Fa(n.canActivate)}(o))a=Ns(o.canActivate(e,n));else{if(!Fa(o))throw new Error("Invalid CanActivate guard");a=Ns(o(e,n))}return a.pipe(Pd())}));return J(r).pipe(nm())}(n,r.route,t))),Pd(r=>!0!==r,!0))}(i,s,n,e):J(a)),Ae(a=>Object.assign(Object.assign({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Sn(a=>{if(hc(a.guardsResult)){const c=qx(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const l=new Wye(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),lt(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),aM(a=>{if(a.guards.canActivateChecks.length)return J(a).pipe(Sn(l=>{const c=new qye(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),Ps(l=>{let c=!1;return J(l).pipe(function vbe(n,e){return tn(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return J(t);let s=0;return Bn(r).pipe(Rd(o=>function bbe(n,e,t,i){return function wbe(n,e,t,i){const r=kq(n);if(0===r.length)return J({});const s={};return Bn(r).pipe(tn(o=>function Cbe(n,e,t,i){const r=db(n,e,i);return Ns(r.resolve?r.resolve(e,t):r(e,t))}(n[o],e,t,i).pipe(Sn(a=>{s[o]=a}))),Gx(1),tn(()=>kq(s).length===r.length?J(s):pr))}(n._resolve,n,e,i).pipe(Ae(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),lq(n,t).resolve),null)))}(o.route,i,n,e)),Sn(()=>s++),Gx(1),tn(o=>s===r.length?J(t):pr))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Sn({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),Sn(l=>{const c=new Kye(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),aM(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),Ae(a=>{const l=function wve(n,e,t){const i=Jp(n,e._root,t?t._root:void 0);return new oq(i,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),Sn(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>Ae(i=>(new Rve(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Sn({next(){s=!0},complete(){s=!0}}),UW(()=>{var a;s||o||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===r.id&&(this.currentNavigation=null)}),vo(a=>{if(o=!0,function eve(n){return n&&n[GW]}(a)){const l=hc(a.url);l||(this.navigated=!0,this.restoreHistory(r,!0));const c=new HW(r.id,this.serializeUrl(r.extractedUrl),a.message);i.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Oq(r.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new $ye(r.id,this.serializeUrl(r.extractedUrl),a);i.next(l);try{r.resolve(this.errorHandler(a))}catch(c){r.reject(c)}}return pr}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const s={replaceUrl:!0},o=(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t.url);this.scheduleNavigation(a,i,o,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){_q(t),this.config=t.map(sM),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),function Tve(n,e,t,i,r){if(0===t.length)return eM(e.root,e.root,e.root,i,r);const s=function Ive(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new hq(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return qn(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new hq(t,e,i)}(t);if(s.toRoot())return eM(e.root,e.root,new Ue([],{}),i,r);const o=function Dve(n,e,t){if(n.isAbsolute)return new tM(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new tM(s,s===e.root,0)}const i=rb(n.commands[0])?0:1;return function Sve(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new tM(i,!1,r-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,e,n),a=o.processChildren?sb(o.segmentGroup,o.index,s.commands):fq(o.segmentGroup,o.index,s.commands);return eM(e.root,o.segmentGroup,a,i,r)}(c,this.currentUrlTree,t,d,null!=u?u:null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=hc(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function Rbe(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?Object.assign({},Abe):!1===i?Object.assign({},kbe):i,hc(t))return YW(this.currentUrlTree,t,r);const s=this.parseUrl(t);return YW(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Yp(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,o){var a,l;if(this.disposed)return Promise.resolve(!1);let c,u,d;o?(c=o.resolve,u=o.reject,d=o.promise):d=new Promise((p,_)=>{c=p,u=_});const h=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),f=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(l=this.browserPageId)&&void 0!==l?l:0)+1):f=0,this.setTransition({id:h,targetPageId:f,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:c,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===o?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const r=new HW(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(r),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){Og()},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();function Oq(n){return"imperative"!==n}let hb=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.commands=null,this.onChanges=new ne,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==t?i.setAttribute(r,"tabindex",t):i.removeAttribute(r,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Fd(this.skipLocationChange),replaceUrl:Fd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Fd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(g(wt),g(Co),nl("tabindex"),g(Zs),g(ce))},n.\u0275dir=N({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,i){1&t&&G("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Kt]}),n})();function Fd(n){return""===n||!!n}class Nq{}class Fq{preload(e,t){return J(null)}}let Lq=(()=>{class n{constructor(t,i,r,s){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=new Rq(r,i,l=>t.triggerEvent(new jW(l)),l=>t.triggerEvent(new $W(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(lt(t=>t instanceof Yp),Rd(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Js);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(t,s)):s.children&&r.push(this.processRoutes(t,s.children));return Bn(r).pipe(eh(),Ae(s=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?J(i._loadedConfig):this.loader.load(t.injector,i)).pipe(tn(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(I(wt),I(K2),I(ot),I(Nq))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})(),uM=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Wx?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Yp&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof zW&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new zW(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){Og()},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();const fc=new P("ROUTER_CONFIGURATION"),Vq=new P("ROUTER_FORROOT_GUARD"),Fbe=[Xo,{provide:eq,useClass:tq},{provide:wt,useFactory:function Hbe(n,e,t,i,r,s,o={},a,l){const c=new wt(null,n,e,t,i,r,qW(s));return a&&(c.urlHandlingStrategy=a),l&&(c.routeReuseStrategy=l),function jbe(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(u=>{var d,h;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(h=console.groupEnd)||void 0===h||h.call(console)}),c},deps:[eq,im,Xo,ot,K2,lM,fc,[class Dbe{},new Le],[class Ebe{},new Le]]},im,{provide:Co,useFactory:function $be(n){return n.routerState.root},deps:[wt]},Lq,Fq,class Nbe{preload(e,t){return t().pipe(vo(()=>J(null)))}},{provide:fc,useValue:{enableTracing:!1}}];function Lbe(){return new J2("Router",wt)}let dM=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[Fbe,Bq(t),{provide:Vq,useFactory:Ube,deps:[[wt,new Le,new Xc]]},{provide:fc,useValue:i||{}},{provide:Du,useFactory:Bbe,deps:[cl,[new _g(XE),new Le],fc]},{provide:uM,useFactory:Vbe,deps:[wt,Bie,fc]},{provide:Nq,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:Fq},{provide:J2,multi:!0,useFactory:Lbe},[hM,{provide:Qg,multi:!0,useFactory:zbe,deps:[hM]},{provide:Uq,useFactory:Gbe,deps:[hM]},{provide:W2,multi:!0,useExisting:Uq}]]}}static forChild(t){return{ngModule:n,providers:[Bq(t)]}}}return n.\u0275fac=function(t){return new(t||n)(I(Vq,8),I(wt,8))},n.\u0275mod=ye({type:n}),n.\u0275inj=he({}),n})();function Vbe(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new uM(n,e,t)}function Bbe(n,e,t={}){return t.useHash?new wne(n,e):new vV(n,e)}function Ube(n){return"guarded"}function Bq(n){return[{provide:aY,multi:!0,useValue:n},{provide:lM,multi:!0,useValue:n}]}let hM=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ne}appInitializer(){return this.injector.get(yne,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(a=>i=a),s=this.injector.get(wt),o=this.injector.get(fc);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?J(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(t){const i=this.injector.get(fc),r=this.injector.get(Lq),s=this.injector.get(uM),o=this.injector.get(wt),a=this.injector.get(Yg);t===a.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&o.initialNavigation(),r.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(I(ot))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();function zbe(n){return n.appInitializer.bind(n)}function Gbe(n){return n.bootstrapListener.bind(n)}const Uq=new P("Router Initializer");let ts=(()=>{class n{constructor(t){this.router=t,this.email="",this.app=xr(ii_firebase),this.fbapp=Li.initializeApp(ii_firebase),this.fb_db=Li.firestore(),this.userlist=[]}fetch_userdata_with_keymail(t){let s;return tD(Et(Fi(this.app),"/users/"+t)).then(o=>{o.exists()&&(s=o.val(),this.updatedData="",console.log("data:",s),this.updatedData=o.val(),console.log("updated Data:",this.updatedData),this.email=s.email,this.name=s.name,this.username=s.username,"bio"in s||(s.bio=""),this.userdata=s)}),this.userdata}set_after_edit(t,i,r){let s=t.replaceAll(".",""),a=Et(Fi(this.app),"/users/"+s);console.log(r),Is(a,r).then(()=>{console.log("Data updated in realtime database")}).catch(l=>{console.log("There was some error while adding user data in realtime database")}),i!=r.username?(this.modify_chats(i,r.username),this.modify_ontoone_chats(i,r.username),this.modify_posts(i,r.username),this.modify_comments(i,r.username)):console.log("Username not changed"),this.updatedData="",this.fetch_userdata_with_keymail(s)}modify_chats(t,i){let r=[],s=Fi(this.app);kr(Et(s,"Chats/"),a=>{a.forEach(l=>{l.val().username==t&&r.push({key:l.key,username:i,chat:l.val().chat})})}),r.forEach(a=>{Is(Et(s,"Chats/"+a.key),{username:a.username,chat:a.chat})})}modify_ontoone_chats(t,i){let r=Fi(this.app);kr(Et(r,"OneToOne/"),o=>{o.forEach(a=>{a.forEach(l=>{l.val().username==t&&Is(Et(r,"OneToOne/"+a.key+"/"+l.key),{username:i,chat:l.val().chat})})})})}modify_comments(t,i){try{let r=Fi(this.app);kr(Et(r,"post_comments/"),o=>{o.forEach(a=>{a.forEach(l=>{l.forEach(c=>{c.val().username==t&&Is(Et(r,o.key+"/"+a.key+"/"+l.key+"/"+c.key+"/"),{username:i,comment:c.val().comment,keymail:c.val().keymail})})})})})}catch(r){console.log(r)}}modify_posts(t,i){var r=this;return m(function*(){(yield r.fb_db.collection("posts_metadata").where("username","==",t).get()).forEach(o=>{r.fb_db.collection("posts_metadata").doc(o.id).update({username:i})})})()}get_all_users(t){return this.userlist=[],tD(Et(Fi(this.app),"/users")).then(s=>{s.forEach(o=>{o.key!=t&&this.userlist.push(o.val())})}),this.userlist}}return n.\u0275fac=function(t){return new(t||n)(I(wt))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Hq="firebasestorage.googleapis.com",jq="storageBucket";class Wt extends Oi{constructor(e,t){super(fM(e),`Firebase Storage: ${t} (${fM(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Wt.prototype)}_codeEquals(e){return fM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function fM(n){return"storage/"+n}function pM(){return new Wt("unknown","An unknown error occurred, please check the error payload for server response.")}function $q(){return new Wt("canceled","User canceled the upload/download.")}function zq(){return new Wt("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function mM(n){return new Wt("invalid-argument",n)}function Gq(){return new Wt("app-deleted","The Firebase app was deleted.")}function am(n,e){return new Wt("invalid-format","String does not match format '"+n+"': "+e)}function lm(n){throw new Wt("internal-error","Internal error: "+n)}class wi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=wi.makeFromUrl(e,t)}catch(r){return new wi(e,"")}if(""===i.path)return i;throw function nwe(n){return new Wt("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+r+"(/(.*))?$","i");function c(S){S.path_=decodeURIComponent(S.path)}const d=t.replace(/[.]/g,"\\."),D=[{regex:a,indices:{bucket:1,path:3},postModify:function s(S){"/"===S.path.charAt(S.path.length-1)&&(S.path_=S.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${d}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:c},{regex:new RegExp(`^https?://${t===Hq?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:c}];for(let S=0;S<D.length;S++){const F=D[S],W=F.regex.exec(e);if(W){let ft=W[F.indices.path];ft||(ft=""),i=new wi(W[F.indices.bucket],ft),F.postModify(i);break}}if(null==i)throw function twe(n){return new Wt("invalid-url","Invalid URL '"+n+"'.")}(e);return i}}class awe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function fb(n){return"string"==typeof n||n instanceof String}function Wq(n){return gM()&&n instanceof Blob}function gM(){return"undefined"!=typeof Blob}function _M(n,e,t,i){if(i<e)throw mM(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw mM(`Invalid value for '${n}'. Expected ${t} or less.`)}function Eo(n,e,t){let i=e;return null==t&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function qq(n){const e=encodeURIComponent;let t="?";for(const i in n)n.hasOwnProperty(i)&&(t=t+(e(i)+"=")+e(n[i])+"&");return t=t.slice(0,-1),t}var La=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(La||(La={})),La))();class fwe{constructor(e,t,i,r,s,o,a,l,c,u,d){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,f)=>{this.resolve_=h,this.reject_=f,this.start_()})}start_(){const t=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());!function uwe(n){return void 0!==n}(l)?s():s(l)}catch(l){o(l)}else if(null!==a){const l=pM();l.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,l):l)}else o(r.canceled?this.appDelete_?Gq():$q():function ewe(){return new Wt("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new pb(!1,null,!0)):this.backoffId_=function lwe(n,e,t){let i=1,r=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(...y){c||(c=!0,e.apply(null,y))}function d(y){r=setTimeout(()=>{r=null,n(f,l())},y)}function h(){s&&clearTimeout(s)}function f(y,...b){if(c)return void h();if(y)return h(),void u.call(null,y,...b);if(l()||o)return h(),void u.call(null,y,...b);let D;i<64&&(i*=2),1===a?(a=2,D=0):D=1e3*(i+Math.random()),d(D)}let p=!1;function _(y){p||(p=!0,h(),!c&&(null!==r?(y||(a=2),clearTimeout(r),d(0)):y||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,_(!0)},t),_}((i,r)=>{if(r)return void i(!1,new pb(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===La.NO_ERROR,l=s.getStatus();if(!a||this.isRetryStatusCode_(l)){const u=s.getErrorCode()===La.ABORT;return void i(!1,new pb(!1,null,u))}const c=-1!==this.successCodes_.indexOf(l);i(!0,new pb(c,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function cwe(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==this.additionalRetryCodes_.indexOf(e);return t||r||s}}class pb{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function bwe(...n){const e=function vwe(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}if(gM())return new Blob(n);throw new Wt("unsupported-environment","This browser doesn't seem to support creating Blobs")}class yM{constructor(e,t){this.data=e,this.contentType=t||null}}function Qq(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|63&i):55296==(64512&i)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++t),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):e.push(239,191,189):56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function Yq(n,e){switch(n){case"base64":{const r=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(r||s)throw am(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case"base64url":{const r=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(r||s)throw am(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Cwe(n){return atob(n)}(e)}catch(r){throw am(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class Xq{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw am("data_url","Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;null!=i&&(this.base64=function Dwe(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}class To{constructor(e,t){let i=0,r="";Wq(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Wq(this.data_)){const r=function wwe(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===r?null:new To(r)}{const i=new Uint8Array(this.data_.buffer,e,t-e);return new To(i,!0)}}static getBlob(...e){if(gM()){const t=e.map(i=>i instanceof To?i.data_:i);return new To(bwe.apply(null,t))}{const t=e.map(o=>fb(o)?function Kq(n,e){switch(n){case"raw":return new yM(Qq(e));case"base64":case"base64url":return new yM(Yq(n,e));case"data_url":return new yM(function Twe(n){const e=new Xq(n);return e.base64?Yq("base64",e.rest):function Ewe(n){let e;try{e=decodeURIComponent(n)}catch(t){throw am("data_url","Malformed data URL.")}return Qq(e)}(e.rest)}(e),function Iwe(n){return new Xq(n).contentType}(e))}throw pM()}("raw",o).data:o.data_);let i=0;t.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new To(r,!0)}}uploadData(){return this.data_}}function vM(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function hwe(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Zq(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Mwe(n,e){return e}class Ci{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||Mwe}}let mb=null;function cm(){if(mb)return mb;const n=[];n.push(new Ci("bucket")),n.push(new Ci("generation")),n.push(new Ci("metageneration")),n.push(new Ci("name","fullPath",!0));const t=new Ci("name");t.xform=function e(s,o){return function Awe(n){return!fb(n)||n.length<2?n:Zq(n)}(o)},n.push(t);const r=new Ci("size");return r.xform=function i(s,o){return void 0!==o?Number(o):o},n.push(r),n.push(new Ci("timeCreated")),n.push(new Ci("updated")),n.push(new Ci("md5Hash",null,!0)),n.push(new Ci("cacheControl",null,!0)),n.push(new Ci("contentDisposition",null,!0)),n.push(new Ci("contentEncoding",null,!0)),n.push(new Ci("contentLanguage",null,!0)),n.push(new Ci("contentType",null,!0)),n.push(new Ci("metadata","customMetadata",!0)),mb=n,mb}function Jq(n,e,t){const i=vM(e);return null===i?null:function Rwe(n,e,t){const i={type:"file"},r=t.length;for(let s=0;s<r;s++){const o=t[s];i[o.local]=o.xform(i,e[o.server])}return function kwe(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new wi(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(i,n),i}(n,i,t)}function bM(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}class Fs{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ls(n){if(!n)throw pM()}function gb(n,e){return function t(i,r){const s=Jq(n,r,e);return Ls(null!==s),s}}function Ld(n){return function e(t,i){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Zbe(){return new Wt("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Xbe(){return new Wt("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Ybe(n){return new Wt("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Jbe(n){return new Wt("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.serverResponse=i.serverResponse,r}}function um(n){const e=Ld(n);return function t(i,r){let s=e(i,r);return 404===i.getStatus()&&(s=function Qbe(n){return new Wt("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function s4(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=function jwe(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),i}class _b{constructor(e,t,i,r){this.current=e,this.total=t,this.finalized=!!i,this.metadata=r||null}}function wM(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(r){Ls(!1)}return Ls(!!t&&-1!==(e||["active"]).indexOf(t)),t}function CM(n){switch(n){case"running":case"pausing":case"canceling":return"running";case"paused":return"paused";case"success":return"success";case"canceled":return"canceled";default:return"error"}}class Wwe{constructor(e,t,i){if(function dwe(n){return"function"==typeof n}(e)||null!=t||null!=i)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=i?i:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Vd(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class Kwe extends class qwe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=La.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=La.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=La.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r){if(this.sent_)throw lm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw lm("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw lm("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw lm("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw lm("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function is(){return new Kwe}class Jwe{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=cm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=r,this._transition("error"))},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const i=function $we(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),o=s4(e,i,r),a={name:o.fullPath},l=Eo(s,n.host,n._protocol),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=bM(o,t),p=new Fs(l,"POST",function f(_){let y;wM(_);try{y=_.getResponseHeader("X-Goog-Upload-URL")}catch(b){Ls(!1)}return Ls(fb(y)),y},n.maxUploadRetryTime);return p.urlParams=a,p.headers=u,p.body=d,p.errorHandler=Ld(e),p}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,is,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const r=function zwe(n,e,t,i){const l=new Fs(t,"POST",function s(c){const u=wM(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch(f){Ls(!1)}d||Ls(!1);const h=Number(d);return Ls(!isNaN(h)),new _b(h,i.size(),"final"===u)},n.maxUploadRetryTime);return l.headers={"X-Goog-Upload-Command":"query"},l.errorHandler=Ld(e),l}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,is,t,i);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new _b(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let o;try{o=function Gwe(n,e,t,i,r,s,o,a){const l=new _b(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw function rwe(){return new Wt("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const c=l.total-l.current;let u=c;r>0&&(u=Math.min(u,r));const d=l.current,p={"X-Goog-Upload-Command":u===c?"upload, finalize":"upload","X-Goog-Upload-Offset":`${l.current}`},_=i.slice(d,d+u);if(null===_)throw zq();const D=new Fs(t,"POST",function y(S,F){const W=wM(S,["active","final"]),ae=l.current+u,ft=i.size();let en;return en="final"===W?gb(e,s)(S,F):null,new _b(ae,ft,"final"===W,en)},e.maxUploadRetryTime);return D.headers=p,D.body=_.uploadData(),D.progressCallback=a||null,D.errorHandler=Ld(n),D}(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(l){return this._error=l,void this._transition("error")}const a=this._ref.storage._makeRequest(o,is,r,s);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=function n4(n,e,t){const r=Eo(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new Fs(r,"GET",gb(n,t),o);return a.errorHandler=um(e),a}(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,is,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=function o4(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},l=function a(){let D="";for(let S=0;S<2;S++)D+=Math.random().toString().slice(2);return D}();o["Content-Type"]="multipart/related; boundary="+l;const c=s4(e,i,r),u=bM(c,t),f=To.getBlob("--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+u+"\r\n--"+l+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",i,"\r\n--"+l+"--");if(null===f)throw zq();const p={name:c.fullPath},_=Eo(s,n.host,n._protocol),b=n.maxUploadRetryTime,v=new Fs(_,"POST",gb(n,t),b);return v.urlParams=p,v.headers=o,v.body=f.uploadData(),v.errorHandler=Ld(e),v}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,is,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=$q(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=CM(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,r){const s=new Wwe(t||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(CM(this._state)){case"success":Vd(this._resolve.bind(null,this.snapshot))();break;case"canceled":case"error":Vd(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(CM(this._state)){case"running":case"paused":e.next&&Vd(e.next.bind(e,this.snapshot))();break;case"success":e.complete&&Vd(e.complete.bind(e))();break;default:e.error&&Vd(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class pc{constructor(e,t){this._service=e,this._location=t instanceof wi?t:wi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new pc(e,t)}get root(){const e=new wi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Zq(this._location.path)}get storage(){return this._service}get parent(){const e=function Swe(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new wi(this._location.bucket,e);return new pc(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function owe(n){return new Wt("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function aCe(n){n._throwIfRoot("getDownloadURL");const e=function Bwe(n,e,t){const r=Eo(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new Fs(r,"GET",function Lwe(n,e){return function t(i,r){const s=Jq(n,r,e);return Ls(null!==s),function Pwe(n,e,t,i){const r=vM(e);if(null===r||!fb(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const d=n.fullPath;return Eo("/b/"+o(n.bucket)+"/o/"+o(d),t,i)+qq({alt:"media",token:c})})[0]}(s,r,n.host,n._protocol)}}(n,t),o);return a.errorHandler=um(e),a}(n.storage,n._location,cm());return n.storage.makeRequestWithTokens(e,is).then(t=>{if(null===t)throw function swe(){return new Wt("no-download-url","The given file does not have any download URLs.")}();return t})}function f4(n,e){if(n instanceof TM){const t=n;if(null==t._bucket)throw function iwe(){return new Wt("no-default-bucket","No default bucket found. Did you set the '"+jq+"' property when initializing the app?")}();const i=new pc(t,t._bucket);return null!=e?f4(i,e):i}return void 0!==e?function h4(n,e){const t=function xwe(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),i=new wi(n._location.bucket,t);return new pc(n.storage,i)}(n,e):n}function p4(n,e){const t=null==e?void 0:e[jq];return null==t?null:wi.makeFromBucketSpec(t,n)}class TM{constructor(e,t,i,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=Hq,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?wi.makeFromBucketSpec(r,this._host):p4(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?wi.makeFromBucketSpec(this._url,e):p4(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_M("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_M("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return m(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const i=yield t.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var e=this;return m(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pc(this,e)}_makeRequest(e,t,i,r){if(this._deleted)return new awe(Gq());{const s=function ywe(n,e,t,i,r,s){const o=qq(n.urlParams),a=n.url+o,l=Object.assign({},n.headers);return function gwe(n,e){e&&(n["X-Firebase-GMPID"]=e)}(l,e),function pwe(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(l,t),function mwe(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(l,s),function _we(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(l,i),new fwe(a,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r)}(e,this._appId,i,r,t,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){var i=this;return m(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(e,t,r,s).getPromise()})()}}const m4="@firebase/storage",_4="storage";function y4(n,e,t){return function nCe(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Jwe(n,new To(e),t)}(n=Ce(n),e,t)}function Io(n){return aCe(n=Ce(n))}function Vs(n,e){return function dCe(n,e){if(e&&function cCe(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof TM)return function uCe(n,e){return new pc(n,e)}(n,e);throw mM("To use ref(service, url), the first argument must be a Storage instance.")}return f4(n,e)}(n=Ce(n),e)}function mc(n=aa(),e){return Yr(n=Ce(n),_4).getImmediate({identifier:e})}function pCe(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new TM(t,i,r,e,vs)}!function mCe(){cn(new Zt(_4,pCe,"PUBLIC").setMultipleInstances(!0)),$e(m4,"0.9.9",""),$e(m4,"0.9.9","esm2017")}();class gCe{}let Bd=(()=>{class n{constructor(t,i){this.userdata=t,this.router=i,this.emitChangeSource=new ne,this.changeEmitted$=this.emitChangeSource.asObservable(),this.app=xr(ii_firebase),this.firebase_storage=mc(this.app),this.firebase_firestore_db=eW(this.app),this.fbapp=Li.initializeApp(ii_firebase),this.fb_db=Li.firestore(),this.post_url_list=[],this.current_post_url="",this.fetched_post_data=new gCe,this.fetched_posts_list=[],this.progress=0}emitChange(t){this.emitChangeSource.next(t)}ngOnInit(){}save_metadata_of_post(t,i){var r=this;return m(function*(){const s=r.userdata.email.replaceAll(".","");try{yield EW(Rx(r.firebase_firestore_db,"posts_metadata"),{caption:t.caption,name:t.name,keymail:s,fileType:t.fileType,username:t.username,url:i}),alert("Data uploaded in firestore successfully"),r.router.navigateByUrl("/")}catch(o){console.error("Error adding document: ",o)}})()}Upload_post(t){var i=this;const r=this.userdata.email.replaceAll(".",""),a=y4(Vs(this.firebase_storage,"posts/"+r+"/"+t.name),t.post);a.on("state_changed",l=>{switch(this.progress=l.bytesTransferred/l.totalBytes*100,this.emitChange(this.progress),l.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}},l=>{console.log("error occured while uploading the post:",l)},()=>{Io(a.snapshot.ref).then(function(){var l=m(function*(c){i.current_post_url=c,console.log(i.current_post_url),t.post_url=c,console.log("File available at",c),i.save_metadata_of_post(t,c)});return function(c){return l.apply(this,arguments)}}())})}delete_post(t,i){var r=this;return m(function*(){(function fCe(n){return function lCe(n){n._throwIfRoot("deleteObject");const e=function Hwe(n,e){const i=Eo(e.fullServerUrl(),n.host,n._protocol),a=new Fs(i,"DELETE",function o(l,c){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=um(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,is)}(n=Ce(n))})(Vs(mc(),"posts/"+t+"/"+i)).then(()=>{alert("post deleted successfully")}).catch(u=>{}),Li.firestore(),(yield r.fb_db.collection("posts_metadata").get()).forEach(function(){var u=m(function*(d){d.data().keymail==t&&d.data().name==i&&(d.ref.delete(),alert("Metadata deleted successfully"),r.router.navigateByUrl("/profile"))});return function(d){return u.apply(this,arguments)}}())})()}get_user_post(){}get_all_posts(){return m(function*(){})()}save_profile_pic(t){const i=this.userdata.email.replaceAll(".",""),s=y4(Vs(this.firebase_storage,"profile_pic/"+i+"/"+i),t);s.on("state_changed",o=>{switch(console.log("Upload is "+o.bytesTransferred/o.totalBytes*100+"% done"),o.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}},o=>{console.log("Error while uploading the profile pic:",o)},()=>{Io(s.snapshot.ref).then(o=>{console.log("File available at",o)})})}}return n.\u0275fac=function(t){return new(t||n)(I(ts),I(wt))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _Ce=["mat-button",""],yCe=["*"],bCe=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],wCe=af(z_(gT(class{constructor(n){this._elementRef=n}})));let Bs=(()=>{class n extends wCe{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of bCe)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(g(ce),g(pl),g(ni,8))},n.\u0275cmp=Ie({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&jt(cf,5),2&t){let r;fe(r=pe())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(at("disabled",i.disabled||null),Xe("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[X],attrs:_Ce,ngContentSelectors:yCe,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(Tn(),C(0,"span",0),He(1),w(),j(2,"span",1)(3,"span",2)),2&t&&(k(2),Xe("mat-button-ripple-round",i.isRoundButton||i.isIconButton),L("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[cf],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),dm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[yT,_t],_t]}),n})();const CCe=["connectionContainer"],ECe=["inputContainer"],TCe=["label"];function ICe(n,e){1&n&&(Mh(0),C(1,"div",14),j(2,"div",15)(3,"div",16)(4,"div",17),w(),C(5,"div",18),j(6,"div",15)(7,"div",16)(8,"div",17),w(),Ah())}function DCe(n,e){if(1&n){const t=En();C(0,"div",19),G("cdkObserveContent",function(){return st(t),Se().updateOutlineGap()}),He(1,1),w()}2&n&&L("cdkObserveContentDisabled","outline"!=Se().appearance)}function SCe(n,e){if(1&n&&(Mh(0),He(1,2),C(2,"span"),R(3),w(),Ah()),2&n){const t=Se(2);k(3),tr(t._control.placeholder)}}function xCe(n,e){1&n&&He(0,3,["*ngSwitchCase","true"])}function MCe(n,e){1&n&&(C(0,"span",23),R(1," *"),w())}function ACe(n,e){if(1&n){const t=En();C(0,"label",20,21),G("cdkObserveContent",function(){return st(t),Se().updateOutlineGap()}),be(2,SCe,4,1,"ng-container",12),be(3,xCe,1,0,"ng-content",12),be(4,MCe,2,0,"span",22),w()}if(2&n){const t=Se();Xe("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),L("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),at("for",t._control.id)("aria-owns",t._control.id),k(2),L("ngSwitchCase",!1),k(1),L("ngSwitchCase",!0),k(1),L("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function kCe(n,e){1&n&&(C(0,"div",24),He(1,4),w())}function RCe(n,e){if(1&n&&(C(0,"div",25),j(1,"span",26),w()),2&n){const t=Se();k(1),Xe("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function PCe(n,e){1&n&&(C(0,"div"),He(1,5),w()),2&n&&L("@transitionMessages",Se()._subscriptAnimationState)}function OCe(n,e){if(1&n&&(C(0,"div",30),R(1),w()),2&n){const t=Se(2);L("id",t._hintLabelId),k(1),tr(t.hintLabel)}}function NCe(n,e){if(1&n&&(C(0,"div",27),be(1,OCe,2,2,"div",28),He(2,6),j(3,"div",29),He(4,7),w()),2&n){const t=Se();L("@transitionMessages",t._subscriptAnimationState),k(1),L("ngIf",t.hintLabel)}}const FCe=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],LCe=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],VCe=new P("MatError"),BCe={transitionMessages:ea("transitionMessages",[Ri("enter",Mt({opacity:1,transform:"translateY(0%)"})),rr("void => enter",[Mt({opacity:0,transform:"translateY(-5px)"}),ir("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let IM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=N({type:n}),n})();const UCe=new P("MatHint");let yb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=N({type:n,selectors:[["mat-label"]]}),n})(),HCe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=N({type:n,selectors:[["mat-placeholder"]]}),n})();const jCe=new P("MatPrefix"),$Ce=new P("MatSuffix");let v4=0;const GCe=af(class{constructor(n){this._elementRef=n}},"primary"),WCe=new P("MAT_FORM_FIELD_DEFAULT_OPTIONS"),w4=new P("MatFormField");let C4=(()=>{class n extends GCe{constructor(t,i,r,s,o,a,l){super(t),this._changeDetectorRef=i,this._dir=r,this._defaults=s,this._platform=o,this._ngZone=a,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new ne,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+v4++,this._labelId="mat-form-field-label-"+v4++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==l,this.appearance=s&&s.appearance?s.appearance:"legacy",this._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&i!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=on(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(Pi(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(xt(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(xt(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),Nr(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Pi(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Pi(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(xt(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,ro(this._label.nativeElement,"transitionend").pipe(ln(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const u=i.querySelectorAll(`${r}, ${s}`);for(let d=0;d<u.length;d++)u[d].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let o=0,a=0;const l=i.querySelectorAll(r),c=i.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const u=i.getBoundingClientRect();if(0===u.width&&0===u.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const d=this._getStartEnd(u),h=t.children,f=this._getStartEnd(h[0].getBoundingClientRect());let p=0;for(let _=0;_<h.length;_++)p+=h[_].offsetWidth;o=Math.abs(f-d)-5,a=p>0?.75*p+10:0}for(let u=0;u<l.length;u++)l[u].style.width=`${o}px`;for(let u=0;u<c.length;u++)c[u].style.width=`${a}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(g(ce),g(Qt),g(nr,8),g(WCe,8),g(Dn),g(Z),g(ni,8))},n.\u0275cmp=Ie({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,i,r){if(1&t&&(St(r,IM,5),St(r,IM,7),St(r,yb,5),St(r,yb,7),St(r,HCe,5),St(r,VCe,5),St(r,UCe,5),St(r,jCe,5),St(r,$Ce,5)),2&t){let s;fe(s=pe())&&(i._controlNonStatic=s.first),fe(s=pe())&&(i._controlStatic=s.first),fe(s=pe())&&(i._labelChildNonStatic=s.first),fe(s=pe())&&(i._labelChildStatic=s.first),fe(s=pe())&&(i._placeholderChild=s.first),fe(s=pe())&&(i._errorChildren=s),fe(s=pe())&&(i._hintChildren=s),fe(s=pe())&&(i._prefixChildren=s),fe(s=pe())&&(i._suffixChildren=s)}},viewQuery:function(t,i){if(1&t&&(jt(CCe,7),jt(ECe,5),jt(TCe,5)),2&t){let r;fe(r=pe())&&(i._connectionContainerRef=r.first),fe(r=pe())&&(i._inputContainerRef=r.first),fe(r=pe())&&(i._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,i){2&t&&Xe("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[je([{provide:w4,useExisting:n}]),X],ngContentSelectors:LCe,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,i){1&t&&(Tn(FCe),C(0,"div",0)(1,"div",1,2),G("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),be(3,ICe,9,0,"ng-container",3),be(4,DCe,2,1,"div",4),C(5,"div",5,6),He(7),C(8,"span",7),be(9,ACe,5,16,"label",8),w()(),be(10,kCe,2,0,"div",9),w(),be(11,RCe,2,4,"div",10),C(12,"div",11),be(13,PCe,2,1,"div",12),be(14,NCe,5,2,"div",13),w()()),2&t&&(k(3),L("ngIf","outline"==i.appearance),k(1),L("ngIf",i._prefixChildren.length),k(5),L("ngIf",i._hasFloatingLabel()),k(1),L("ngIf",i._suffixChildren.length),k(1),L("ngIf","outline"!=i.appearance),k(1),L("ngSwitch",i._getDisplayedMessages()),k(1),L("ngSwitchCase","error"),k(1),L("ngSwitchCase","hint"))},directives:[Er,vB,u_,kV],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[BCe.transitionMessages]},changeDetection:0}),n})(),vb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[_s,_t,U0],_t]}),n})();function E4(...n){const e=NP(n),{args:t,keys:i}=PW(n),r=new nt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;xi(t[u]).subscribe(It(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(i?OW(i,a):a),s.complete())}))}});return e?r.pipe(y0(e)):r}function Va(n){return null==n||0===n.length}function D4(n){return null!=n&&"number"==typeof n.length}const li=new P("NgValidators"),Ba=new P("NgAsyncValidators"),XCe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ZCe{static min(e){return function S4(n){return e=>{if(Va(e.value)||Va(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function x4(n){return e=>{if(Va(e.value)||Va(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function M4(n){return Va(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function A4(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function k4(n){return Va(n.value)||XCe.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function R4(n){return e=>Va(e.value)||!D4(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function P4(n){return e=>D4(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function O4(n){if(!n)return bb;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Va(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return U4(e)}static composeAsync(e){return H4(e)}}function bb(n){return null}function N4(n){return null!=n}function F4(n){const e=kh(n)?Bn(n):n;return pE(e),e}function L4(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function V4(n,e){return e.map(t=>t(n))}function B4(n){return n.map(e=>function JCe(n){return!n.validate}(e)?e:t=>e.validate(t))}function U4(n){if(!n)return null;const e=n.filter(N4);return 0==e.length?null:function(t){return L4(V4(t,e))}}function SM(n){return null!=n?U4(B4(n)):null}function H4(n){if(!n)return null;const e=n.filter(N4);return 0==e.length?null:function(t){return E4(V4(t,e).map(F4)).pipe(Ae(L4))}}function xM(n){return null!=n?H4(B4(n)):null}function j4(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function $4(n){return n._rawValidators}function z4(n){return n._rawAsyncValidators}function MM(n){return n?Array.isArray(n)?n:[n]:[]}function wb(n,e){return Array.isArray(n)?n.includes(e):n===e}function G4(n,e){const t=MM(e);return MM(n).forEach(r=>{wb(t,r)||t.push(r)}),t}function W4(n,e){return MM(e).filter(t=>!wb(n,t))}class q4{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=SM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Do extends q4{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ei extends q4{get formDirective(){return null}get path(){return null}}function hm(n,e){RM(n,e),e.valueAccessor.writeValue(n.value),function cEe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Y4(n,e)})}(n,e),function dEe(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function uEe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Y4(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function lEe(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Tb(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Db(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ib(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function RM(n,e){const t=$4(n);null!==e.validator?n.setValidators(j4(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=z4(n);null!==e.asyncValidator?n.setAsyncValidators(j4(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();Ib(e._rawValidators,r),Ib(e._rawAsyncValidators,r)}function Db(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=$4(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=z4(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return Ib(e._rawValidators,i),Ib(e._rawAsyncValidators,i),t}function Y4(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function X4(n,e){RM(n,e)}function J4(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function NM(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const fm="VALID",Sb="INVALID",Ud="PENDING",pm="DISABLED";function LM(n){return(xb(n)?n.validators:n)||null}function e5(n){return Array.isArray(n)?SM(n):n||null}function VM(n,e){return(xb(e)?e.asyncValidators:n)||null}function t5(n){return Array.isArray(n)?xM(n):n||null}function xb(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const n5=n=>n instanceof a5,BM=n=>n instanceof HM;function r5(n){return n5(n)?n.value:n.getRawValue()}function s5(n,e){const t=BM(n),i=n.controls;if(!(t?Object.keys(i):i).length)throw new q(1e3,"");if(!i[e])throw new q(1001,"")}function o5(n,e){BM(n),n._forEachChild((i,r)=>{if(void 0===e[r])throw new q(1002,"")})}class UM{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=e5(this._rawValidators),this._composedAsyncValidatorFn=t5(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===fm}get invalid(){return this.status===Sb}get pending(){return this.status==Ud}get disabled(){return this.status===pm}get enabled(){return this.status!==pm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=e5(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=t5(e)}addValidators(e){this.setValidators(G4(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(G4(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(W4(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(W4(e,this._rawAsyncValidators))}hasValidator(e){return wb(this._rawValidators,e)}hasAsyncValidator(e){return wb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ud,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=pm,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=fm,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===fm||this.status===Ud)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?pm:fm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ud,this._hasOwnPendingAsyncValidator=!0;const t=F4(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function mEe(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let i=n;return e.forEach(r=>{i=BM(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(n=>n instanceof _Ee)(i)&&i.at(r)||null}),i}(this,e,".")}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ie,this.statusChanges=new ie}_calculateStatus(){return this._allControlsDisabled()?pm:this.errors?Sb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ud)?Ud:this._anyControlsHaveStatus(Sb)?Sb:fm}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){xb(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class a5 extends UM{constructor(e=null,t,i){super(LM(t),VM(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),xb(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){NM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){NM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class HM extends UM{constructor(e,t,i){super(LM(t),VM(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){o5(this,e),Object.keys(e).forEach(i=>{s5(this,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=r5(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const i=this.controls[t];if(this.contains(t)&&e(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,i)=>((t.enabled||this.disabled)&&(e[i]=t.value),e))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class _Ee extends UM{constructor(e,t,i){super(LM(t),VM(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){o5(this,e),e.forEach((i,r)=>{s5(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>r5(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const yEe={provide:Ei,useExisting:it(()=>Mb)},mm=(()=>Promise.resolve(null))();let Mb=(()=>{class n extends Ei{constructor(t,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new ie,this.form=new HM({},SM(t),xM(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){mm.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),hm(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){mm.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){mm.then(()=>{const i=this._findContainer(t.path),r=new HM({});X4(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){mm.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){mm.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,J4(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(g(li,10),g(Ba,10))},n.\u0275dir=N({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&G("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[je([yEe]),X]}),n})();const xEe={provide:Ei,useExisting:it(()=>Ab)};let Ab=(()=>{class n extends Ei{constructor(t,i){super(),this.validators=t,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ie,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Db(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return hm(i,t),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){Tb(t.control||null,t,!1),NM(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,J4(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(Tb(i||null,t),n5(r)&&(hm(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);X4(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function hEe(n,e){return Db(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){RM(this.form,this),this._oldForm&&Db(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(g(li,10),g(Ba,10))},n.\u0275dir=N({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&G("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[je([xEe]),X,Kt]}),n})();const A5=Mu({passive:!0});let qEe=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return pr;const i=io(t),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new ne,o="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||i.classList.contains(o)?"cdk-text-field-autofill-end"===l.animationName&&i.classList.contains(o)&&(i.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1}))):(i.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",a,A5),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",a,A5)}}),s}stopMonitoring(t){const i=io(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(t){return new(t||n)(I(Dn),I(Z))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),k5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({}),n})();const KEe=new P("MAT_INPUT_VALUE_ACCESSOR"),QEe=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let YEe=0;const XEe=tle(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i}});let R5=(()=>{class n extends XEe{constructor(t,i,r,s,o,a,l,c,u,d){super(a,s,o,r),this._elementRef=t,this._platform=i,this._autofillMonitor=c,this._formField=d,this._uid="mat-input-"+YEe++,this.focused=!1,this.stateChanges=new ne,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(p=>nB().has(p)),this._iOSKeyupListener=p=>{const _=p.target;!_.value&&0===_.selectionStart&&0===_.selectionEnd&&(_.setSelectionRange(1,1),_.setSelectionRange(0,0))};const h=this._elementRef.nativeElement,f=h.nodeName.toLowerCase();this._inputValueAccessor=l||h,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&u.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===f,this._isTextarea="textarea"===f,this._isInFormField=!!d,this._isNativeSelect&&(this.controlType=h.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=on(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){var t,i,r,s;return null!==(s=null!==(t=this._required)&&void 0!==t?t:null===(r=null===(i=this.ngControl)||void 0===i?void 0:i.control)||void 0===r?void 0:r.hasValidator(ZCe.required))&&void 0!==s&&s}set required(t){this._required=on(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&nB().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=on(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var t,i;const r=(null===(i=null===(t=this._formField)||void 0===t?void 0:t._hideControlPlaceholder)||void 0===i?void 0:i.call(t))?null:this.placeholder;if(r!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=r,r?s.setAttribute("placeholder",r):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){QEe.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(g(ce),g(Dn),g(Do,10),g(Mb,8),g(Ab,8),g(wU),g(KEe,10),g(qEe),g(Z),g(w4,8))},n.\u0275dir=N({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,i){1&t&&G("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&t&&(Ph("disabled",i.disabled)("required",i.required),at("id",i.id)("data-placeholder",i.placeholder)("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),Xe("mat-input-server",i._isServer)("mat-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[je([{provide:IM,useExisting:n}]),X,Kt]}),n})(),P5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[wU],imports:[[k5,vb,_t],k5,vb]}),n})(),O5=(()=>{class n{constructor(t,i,r,s){this.dialogRef=t,this.data=i,this.udserv=r,this.postTask=s,this.profile_pic_url="/assets/images/prj_logo_colour.png",this.app=xr(ii_firebase)}ngOnInit(){this.userdata=this.data}onSelectFile(t){const i=t.target.files[0];if(i){var r=new FileReader;r.readAsDataURL(i),r.onload=s=>{this.profile_pic_url=s.target.result},this.profile_pic=i}}edit_user_details(t,i,r){this.postTask.save_profile_pic(this.profile_pic),this.userdata.name=t,this.userdata.username=i,this.userdata.bio=r,this.udserv.set_after_edit(this.userdata.email,this.udserv.username,this.userdata)}}return n.\u0275fac=function(t){return new(t||n)(g(uf),g(DU),g(ts),g(Bd))},n.\u0275cmp=Ie({type:n,selectors:[["app-EditProfileDialog"]],decls:37,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content","","align","center"],["alt","Profile Picture","height","100px","width","100px",3,"src"],["mat-raised-button","","color","primary",1,"profile_pic_button"],["for","new-post","required","",1,"input-file-label"],["type","file","id","new-post","required","",1,"input_file_button",3,"change"],["appearance","fill"],["matInput","",3,"value"],["fullName",""],["username",""],["bio",""],["mat-dialog-actions","","align","center"],["mat-button","","mat-dialog-close",""],["mat-button","","mat-dialog-close","","cdkFocusInitial","",3,"click"]],template:function(t,i){if(1&t){const r=En();C(0,"div")(1,"h1",0),R(2,"User Details"),w(),C(3,"div",1),j(4,"img",2)(5,"br")(6,"br"),C(7,"button",3)(8,"label",4),R(9," Select Pic "),C(10,"input",5),G("change",function(o){return i.onSelectFile(o)}),w()()(),j(11,"br")(12,"br"),C(13,"mat-form-field",6)(14,"mat-label"),R(15,"Full Name"),w(),j(16,"input",7,8),w(),j(18,"br"),C(19,"mat-form-field",6)(20,"mat-label"),R(21,"Full Name"),w(),j(22,"input",7,9),w(),j(24,"br"),C(25,"mat-form-field",6)(26,"mat-label"),R(27,"Textarea"),w(),j(28,"textarea",7,10),w(),j(30,"br")(31,"br"),w(),C(32,"div",11)(33,"button",12),R(34,"Cancel"),w(),C(35,"button",13),G("click",function(){st(r);const o=mt(17),a=mt(23),l=mt(29);return i.edit_user_details(o.value,a.value,l.value)}),R(36,"Save"),w()()()}2&t&&(k(4),L("src",i.profile_pic_url,Un),k(12),L("value",i.userdata.name),k(6),L("value",i.userdata.username),k(6),L("value",i.userdata.bio))},directives:[Cle,Ele,Bs,C4,yb,R5,Tle,wle],styles:["img[_ngcontent-%COMP%]{border-radius:100%}.profile_pic_button[_ngcontent-%COMP%]{cursor:pointer;text-align:center}.input_file_button[_ngcontent-%COMP%]{display:none}.input-file-label[_ngcontent-%COMP%]{margin:0;width:100%;height:100%;cursor:pointer}"]}),n})();class ZEe{}class Ua{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ua?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ua;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ua?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class JEe{encodeKey(e){return N5(e)}encodeValue(e){return N5(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const t0e=/%(\d[a-f0-9])/gi,n0e={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function N5(n){return encodeURIComponent(n).replace(t0e,(e,t)=>{var i;return null!==(i=n0e[t])&&void 0!==i?i:e})}function F5(n){return`${n}`}class Ha{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new JEe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function e0e(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ha({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(F5(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(F5(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class i0e{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function L5(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function V5(n){return"undefined"!=typeof Blob&&n instanceof Blob}function B5(n){return"undefined"!=typeof FormData&&n instanceof FormData}class gm{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function r0e(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Ua),this.context||(this.context=new i0e),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Ha,this.urlWithParams=t}serializeBody(){return null===this.body?null:L5(this.body)||V5(this.body)||B5(this.body)||function s0e(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ha?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||B5(this.body)?null:V5(this.body)?this.body.type||null:L5(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ha?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const i=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const d=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),u)),new gm(i,r,o,{params:u,headers:c,context:d,reportProgress:l,responseType:s,withCredentials:a})}}var Kn=(()=>((Kn=Kn||{})[Kn.Sent=0]="Sent",Kn[Kn.UploadProgress=1]="UploadProgress",Kn[Kn.ResponseHeader=2]="ResponseHeader",Kn[Kn.DownloadProgress=3]="DownloadProgress",Kn[Kn.Response=4]="Response",Kn[Kn.User=5]="User",Kn))();class qM extends class o0e{constructor(e,t=200,i="OK"){this.headers=e.headers||new Ua,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=Kn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new qM({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function KM(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let H5=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof gm)s=t;else{let l,c;l=r.headers instanceof Ua?r.headers:new Ua(r.headers),r.params&&(c=r.params instanceof Ha?r.params:new Ha({fromObject:r.params})),s=new gm(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=J(s).pipe(Rd(l=>this.handler.handle(l)));if(t instanceof gm||"events"===r.observe)return o;const a=o.pipe(lt(l=>l instanceof qM));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Ae(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Ae(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Ae(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Ae(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Ha).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,KM(r,i))}post(t,i,r={}){return this.request("POST",t,KM(r,i))}put(t,i,r={}){return this.request("PUT",t,KM(r,i))}}return n.\u0275fac=function(t){return new(t||n)(I(ZEe))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();const l0e=["*"];let kb;function _m(n){var e;return(null===(e=function c0e(){if(void 0===kb&&(kb=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(kb=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return kb}())||void 0===e?void 0:e.createHTML(n))||n}function j5(n){return Error(`Unable to find icon with the name "${n}"`)}function $5(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function z5(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class yc{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let Rb=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new yc(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const o=this._sanitizer.sanitize(Ye.HTML,r);if(!o)throw z5(r);const a=_m(o);return this._addSvgIconConfig(t,i,new yc("",a,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new yc(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(Ye.HTML,i);if(!s)throw z5(i);const o=_m(s);return this._addSvgIconSetConfig(t,new yc("",o,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(Ye.RESOURCE_URL,t);if(!i)throw $5(t);const r=this._cachedIconsByUrl.get(i);return r?J(Pb(r)):this._loadSvgIconFromConfig(new yc(t,null)).pipe(Sn(s=>this._cachedIconsByUrl.set(i,s)),Ae(s=>Pb(s)))}getNamedSvgIcon(t,i=""){const r=G5(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):Qp(j5(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?J(Pb(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Ae(i=>Pb(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?J(r):E4(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(vo(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(Ye.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),J(null)})))).pipe(Ae(()=>{const o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw j5(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Sn(i=>t.svgText=i),Ae(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?J(null):this._fetchIcon(t).pipe(Sn(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(_m("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(_m("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&i.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){var i;const{url:r,options:s}=t,o=null!==(i=null==s?void 0:s.withCredentials)&&void 0!==i&&i;if(!this._httpClient)throw function u0e(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const a=this._sanitizer.sanitize(Ye.RESOURCE_URL,r);if(!a)throw $5(r);const l=this._inProgressUrlFetches.get(a);if(l)return l;const c=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(Ae(u=>_m(u)),UW(()=>this._inProgressUrlFetches.delete(a)),LP());return this._inProgressUrlFetches.set(a,c),c}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(G5(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return h0e(s)?new yc(s.url,null,s.options):new yc(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(I(H5,8),I(_0),I(xe,8),I(zo))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Pb(n){return n.cloneNode(!0)}function G5(n,e){return n+":"+e}function h0e(n){return!(!n.url||!n.options)}const f0e=af(class{constructor(n){this._elementRef=n}}),p0e=new P("mat-icon-location",{providedIn:"root",factory:function m0e(){const n=gg(xe),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),W5=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],g0e=W5.map(n=>`[${n}]`).join(", "),_0e=/^url\(['"]?#(.*?)['"]?\)$/;let So=(()=>{class n extends f0e{constructor(t,i,r,s,o){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=o,this._inline=!1,this._currentIconFetch=et.EMPTY,r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=on(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();i!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),i&&t.classList.add(i),this._previousFontSetClass=i),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(g0e),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)W5.forEach(o=>{const a=i[s],l=a.getAttribute(o),c=l?l.match(_0e):null;if(c){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(ln(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(g(ce),g(Rb),nl("aria-hidden"),g(p0e),g(zo))},n.\u0275cmp=Ie({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,i){2&t&&(at("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),Xe("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[X],ngContentSelectors:l0e,decls:1,vars:0,template:function(t,i){1&t&&(Tn(),He(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),ym=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[_t],_t]}),n})();const y0e=["*",[["mat-card-footer"]]],v0e=["*","mat-card-footer"],b0e=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],w0e=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let q5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=N({type:n,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),n})(),K5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=N({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),Q5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=N({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),n})(),Y5=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=N({type:n,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,i){2&t&&Xe("mat-card-actions-align-end","end"===i.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),n})(),QM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=N({type:n,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),n})(),C0e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=N({type:n,selectors:[["","mat-card-avatar",""],["","matCardAvatar",""]],hostAttrs:[1,"mat-card-avatar"]}),n})(),Ob=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(g(ni,8))},n.\u0275cmp=Ie({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,i){2&t&&Xe("_mat-animation-noopable","NoopAnimations"===i._animationMode)},exportAs:["matCard"],ngContentSelectors:v0e,decls:2,vars:0,template:function(t,i){1&t&&(Tn(y0e),He(0),He(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),n})(),X5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ie({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:w0e,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(t,i){1&t&&(Tn(b0e),He(0),C(1,"div",0),He(2,1),w(),He(3,2))},encapsulation:2,changeDetection:0}),n})(),Nb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[_t],_t]}),n})();const Z5=["*"];class T0e{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const e=Math.max(...this.tracker);return e>1?this.rowCount+e-1:this.rowCount}update(e,t){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(e),this.tracker.fill(0,0,this.tracker.length),this.positions=t.map(i=>this._trackTile(i))}_trackTile(e){const t=this._findMatchingGap(e.colspan);return this._markTilePosition(t,e),this.columnIndex=t+e.colspan,new I0e(this.rowIndex,t)}_findMatchingGap(e){let t=-1,i=-1;do{this.columnIndex+e>this.tracker.length?(this._nextRow(),t=this.tracker.indexOf(0,this.columnIndex),i=this._findGapEndIndex(t)):(t=this.tracker.indexOf(0,this.columnIndex),-1!=t?(i=this._findGapEndIndex(t),this.columnIndex=t+1):(this._nextRow(),t=this.tracker.indexOf(0,this.columnIndex),i=this._findGapEndIndex(t)))}while(i-t<e||0==i);return Math.max(t,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let e=0;e<this.tracker.length;e++)this.tracker[e]=Math.max(0,this.tracker[e]-1)}_findGapEndIndex(e){for(let t=e+1;t<this.tracker.length;t++)if(0!=this.tracker[t])return t;return this.tracker.length}_markTilePosition(e,t){for(let i=0;i<t.colspan;i++)this.tracker[e+i]=t.rowspan}}class I0e{constructor(e,t){this.row=e,this.col=t}}const J5=new P("MAT_GRID_LIST");let e8=(()=>{class n{constructor(t,i){this._element=t,this._gridList=i,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(t){this._rowspan=Math.round(Jo(t))}get colspan(){return this._colspan}set colspan(t){this._colspan=Math.round(Jo(t))}_setStyle(t,i){this._element.nativeElement.style[t]=i}}return n.\u0275fac=function(t){return new(t||n)(g(ce),g(J5,8))},n.\u0275cmp=Ie({type:n,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(t,i){2&t&&at("rowspan",i.rowspan)("colspan",i.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:Z5,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(t,i){1&t&&(Tn(),C(0,"div",0),He(1),w())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),n})();const D0e=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class YM{constructor(){this._rows=0,this._rowspan=0}init(e,t,i,r){this._gutterSize=t8(e),this._rows=t.rowCount,this._rowspan=t.rowspan,this._cols=i,this._direction=r}getBaseTileSize(e,t){return`(${e}% - (${this._gutterSize} * ${t}))`}getTilePosition(e,t){return 0===t?"0":vc(`(${e} + ${this._gutterSize}) * ${t}`)}getTileSize(e,t){return`(${e} * ${t}) + (${t-1} * ${this._gutterSize})`}setStyle(e,t,i){let r=100/this._cols,s=(this._cols-1)/this._cols;this.setColStyles(e,i,r,s),this.setRowStyles(e,t,r,s)}setColStyles(e,t,i,r){let s=this.getBaseTileSize(i,r);e._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(s,t)),e._setStyle("width",vc(this.getTileSize(s,e.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(e){return`${this._rowspan} * ${this.getTileSize(e,1)}`}getComputedHeight(){return null}}class S0e extends YM{constructor(e){super(),this.fixedRowHeight=e}init(e,t,i,r){super.init(e,t,i,r),this.fixedRowHeight=t8(this.fixedRowHeight),D0e.test(this.fixedRowHeight)}setRowStyles(e,t){e._setStyle("top",this.getTilePosition(this.fixedRowHeight,t)),e._setStyle("height",vc(this.getTileSize(this.fixedRowHeight,e.rowspan)))}getComputedHeight(){return["height",vc(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(e){e._setListStyle(["height",null]),e._tiles&&e._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}}class x0e extends YM{constructor(e){super(),this._parseRatio(e)}setRowStyles(e,t,i,r){this.baseTileHeight=this.getBaseTileSize(i/this.rowHeightRatio,r),e._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,t)),e._setStyle("paddingTop",vc(this.getTileSize(this.baseTileHeight,e.rowspan)))}getComputedHeight(){return["paddingBottom",vc(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(e){e._setListStyle(["paddingBottom",null]),e._tiles.forEach(t=>{t._setStyle("marginTop",null),t._setStyle("paddingTop",null)})}_parseRatio(e){const t=e.split(":");this.rowHeightRatio=parseFloat(t[0])/parseFloat(t[1])}}class M0e extends YM{setRowStyles(e,t){let s=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);e._setStyle("top",this.getTilePosition(s,t)),e._setStyle("height",vc(this.getTileSize(s,e.rowspan)))}reset(e){e._tiles&&e._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}}function vc(n){return`calc(${n})`}function t8(n){return n.match(/([A-Za-z%]+)$/)?n:`${n}px`}let k0e=(()=>{class n{constructor(t,i){this._element=t,this._dir=i,this._gutter="1px"}get cols(){return this._cols}set cols(t){this._cols=Math.max(1,Math.round(Jo(t)))}get gutterSize(){return this._gutter}set gutterSize(t){this._gutter=`${null==t?"":t}`}get rowHeight(){return this._rowHeight}set rowHeight(t){const i=`${null==t?"":t}`;i!==this._rowHeight&&(this._rowHeight=i,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(t){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===t?new M0e:t&&t.indexOf(":")>-1?new x0e(t):new S0e(t)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new T0e);const t=this._tileCoordinator,i=this._tiles.filter(s=>!s._gridList||s._gridList===this),r=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,i),this._tileStyler.init(this.gutterSize,t,this.cols,r),i.forEach((s,o)=>{const a=t.positions[o];this._tileStyler.setStyle(s,a.row,a.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(t){t&&(this._element.nativeElement.style[t[0]]=t[1])}}return n.\u0275fac=function(t){return new(t||n)(g(ce),g(nr,8))},n.\u0275cmp=Ie({type:n,selectors:[["mat-grid-list"]],contentQueries:function(t,i,r){if(1&t&&St(r,e8,5),2&t){let s;fe(s=pe())&&(i._tiles=s)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(t,i){2&t&&at("cols",i.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[je([{provide:J5,useExisting:n}])],ngContentSelectors:Z5,decls:2,vars:0,template:function(t,i){1&t&&(Tn(),C(0,"div"),He(1),w())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),n})(),R0e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[CU,_t],CU,_t]}),n})(),n8=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function P0e(n,e){if(1&n&&j(0,"img",3),2&n){const t=Se();qo("src",t.post_details.url,Un),yu("alt","post_details by ",t.post_details.username,"")}}function O0e(n,e){1&n&&j(0,"video",4),2&n&&qo("src",Se().post_details.url,Un)}let N0e=(()=>{class n{constructor(t,i){this.router=t,this.profserv=i}ngOnInit(){}sendtoview(){this.profserv.post_details=this.post_details,this.router.navigate(["ViewPost"])}}return n.\u0275fac=function(t){return new(t||n)(g(wt),g(n8))},n.\u0275cmp=Ie({type:n,selectors:[["app-post-thumbnail"]],inputs:{post_details:"post_details"},decls:3,vars:2,consts:[[3,"click"],["mat-card-image","",3,"src","alt",4,"ngIf"],["onmouseover","this.play()","onmouseout","this.pause();this.currentTime=0;","loop","",3,"src",4,"ngIf"],["mat-card-image","",3,"src","alt"],["onmouseover","this.play()","onmouseout","this.pause();this.currentTime=0;","loop","",3,"src"]],template:function(t,i){1&t&&(C(0,"div",0),G("click",function(){return i.sendtoview()}),be(1,P0e,1,2,"img",1),be(2,O0e,1,1,"video",2),w()),2&t&&(k(1),L("ngIf","image"===i.post_details.fileType),k(1),L("ngIf","video"===i.post_details.fileType))},directives:[Er,QM],styles:["img[_ngcontent-%COMP%]{width:500px;height:300px;margin:5px;border-radius:5px;background-color:#f5f5f5;object-fit:contain}video[_ngcontent-%COMP%]{width:500px;height:300px;object-fit:contain;background-color:#f5f5f5}div[_ngcontent-%COMP%]:hover{box-shadow:5px 15px 10px #888}"]}),n})();function F0e(n,e){if(1&n&&(C(0,"mat-grid-tile"),j(1,"app-post-thumbnail",2),w()),2&n){const t=e.$implicit;k(1),L("post_details",t)}}let i8=(()=>{class n{constructor(){this.fb_db=Li.firestore()}ngOnInit(){this.user_posts()}user_posts(){var t=this;return m(function*(){t.post_list=[],(yield t.fb_db.collection("posts_metadata").get()).forEach(s=>{s.data().keymail==t.keymail&&t.post_list.push(s.data())})})()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ie({type:n,selectors:[["app-post_grid"]],inputs:{keymail:"keymail"},decls:2,vars:1,consts:[["cols","3","rowHeight","2:1"],[4,"ngFor","ngForOf"],[3,"post_details"]],template:function(t,i){1&t&&(C(0,"mat-grid-list",0),be(1,F0e,2,1,"mat-grid-tile",1),w()),2&t&&(k(1),L("ngForOf",i.post_list))},directives:[k0e,ul,e8,N0e],styles:["mat-grid-list[_ngcontent-%COMP%]{background-color:#b885fa}"]}),n})(),L0e=(()=>{class n{constructor(t,i,r,s,o,a){this.dialog=t,this.router=i,this.user_data_service=r,this.location=s,this.postTask=o,this.route=a,this.profile_pic_url="",this.keymail="",this.showFiller=!1,this.fbapp=Li.initializeApp(ii_firebase),this.fb_db=Li.firestore()}ngOnInit(){this.route.params.subscribe(i=>{this.keymail=i.profile}),console.log("Viewww : ",this.keymail),this.data_setter(),this.fetch_profile_pic()}data_setter(){let r;tD(Et(Fi(this.fbapp),"/users/"+this.keymail)).then(s=>{r=s.val(),this.fullName=r.name,this.userName=r.username,this.bio=r.bio})}Refresh_profile_data(){let t=this.user_data_service.updatedData;console.log("ProfileData",t),this.fullName=t.name,this.userName=t.username,this.bio=t.bio,this.fetch_profile_pic()}openDialog(){this.dialog.open(O5,{width:"40%",height:"70%",data:this.user_data_service.fetch_userdata_with_keymail(this.keymail)})}go_to_Add_Post(){this.router.navigate(["/add-post"])}go_back(){this.location.back()}fetch_profile_pic(){const t=mc();Io(Vs(t,"profile_pic/"+this.keymail+"/"+this.keymail)).then(i=>{this.profile_pic_url=i}).catch(i=>{Io(Vs(t,"assets/prj_logo_colour.png")).then(r=>{this.profile_pic_url=r}).catch(r=>{console.log("Error while loading profile pic:",r)})})}}return n.\u0275fac=function(t){return new(t||n)(g(vl),g(wt),g(ts),g(Xo),g(Bd),g(Co))},n.\u0275cmp=Ie({type:n,selectors:[["app-view-profile"]],decls:32,vars:5,consts:[[1,"main_div"],[2,"text-align","center"],[1,"mat_icon_left-arrow",3,"click"],[2,"margin-left","96%",3,"click"],[1,"col-1"],[1,"matcard_col1"],[1,"imgdiv",2,"background-color","rgba(0, 0, 0, 0)"],["alt","Profile Picture","height","200px","width","200px",1,"pp",3,"src"],["align","center",1,"col-2"],[1,"matcard_col2"],[2,"background-color","rgba(0, 0, 0, 0)"],[1,"b2"],["align","center"],[1,"main_scroll"],[3,"keymail"]],template:function(t,i){1&t&&(C(0,"div",0)(1,"div",1)(2,"b"),R(3),w(),j(4,"hr"),w(),C(5,"mat-icon",2),G("click",function(){return i.go_back()}),R(6,"keyboard_arrow_left"),w(),C(7,"mat-icon",3),G("click",function(){return i.Refresh_profile_data()}),R(8,"refresh"),w(),C(9,"div")(10,"div")(11,"div",4)(12,"mat-card",5)(13,"div",6),j(14,"img",7),w()()(),C(15,"div",8)(16,"mat-card",9)(17,"div",10)(18,"b"),R(19),w()(),j(20,"br")(21,"br"),C(22,"div",10)(23,"b"),R(24,"User Bio : "),w(),C(25,"b",11),R(26),w()()()()()(),C(27,"div",12)(28,"h1"),R(29,"Posts"),w(),C(30,"div",13),j(31,"app-post_grid",14),w()()()),2&t&&(k(3),Hn(" ",i.fullName," "),k(11),L("src",i.profile_pic_url,Un),k(5),Hn("",i.userName," "),k(7),tr(i.bio),k(5),L("keymail",i.keymail))},directives:[So,Ob,i8],styles:[".col-1[_ngcontent-%COMP%]{max-width:28%;float:left;height:250px;margin:10px}.col-2[_ngcontent-%COMP%]{float:left;max-width:68%;height:250px;margin:10px}img[_ngcontent-%COMP%]{border-radius:100%}.imgdiv[_ngcontent-%COMP%]{margin-left:20%}.pp[_ngcontent-%COMP%]{object-fit:scale-down;background-color:#f5f5f5}.matcard_col1[_ngcontent-%COMP%], .matcard_col2[_ngcontent-%COMP%]{height:250px;background-color:#e5d4fc}b[_ngcontent-%COMP%]{font-size:x-large}.b2[_ngcontent-%COMP%]{font-size:x-large;color:#927f9b}.example-container[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#e5d4fc}.example-sidenav-content[_ngcontent-%COMP%]{height:100%}.example-sidenav[_ngcontent-%COMP%]{padding:30px}.mat-icon-left-arrow[_ngcontent-%COMP%]{background-color:#fff0;margin-left:-10vh;cursor:pointer;border:none}.mat_icon_button[_ngcontent-%COMP%]{background-color:#fff0;left:3px;position:absolute;cursor:pointer;border:none}.profile-button[_ngcontent-%COMP%]{width:100px;height:40px}.main_div[_ngcontent-%COMP%]{height:100vh}div[_ngcontent-%COMP%]{background-color:#b885fa}mat-drawer[_ngcontent-%COMP%]{background-color:#b885fa}"]}),n})();function XM(n){return Ae(()=>n)}function r8(n,e){return e?t=>G_(e.pipe(ln(1),function V0e(){return Vt((n,e)=>{n.subscribe(It(e,Um))})}()),t.pipe(r8(n))):tn((t,i)=>n(t,i).pipe(ln(1),XM(t)))}function s8(n,e=Xh){const t=w0(n,e);return r8(()=>t)}const B0e=["mat-menu-item",""];function U0e(n,e){1&n&&(function dO(){de.lFrame.currentNamespace="svg"}(),C(0,"svg",2),j(1,"polygon",3),w())}const o8=["*"];function H0e(n,e){if(1&n){const t=En();C(0,"div",0),G("keydown",function(r){return st(t),Se()._handleKeydown(r)})("click",function(){return st(t),Se().closed.emit("click")})("@transformMenu.start",function(r){return st(t),Se()._onAnimationStart(r)})("@transformMenu.done",function(r){return st(t),Se()._onAnimationDone(r)}),C(1,"div",1),He(2),w()()}if(2&n){const t=Se();L("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),at("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const Fb={transformMenu:ea("transformMenu",[Ri("void",Mt({opacity:0,transform:"scale(0.8)"})),rr("void => enter",ir("120ms cubic-bezier(0, 0, 0.2, 1)",Mt({opacity:1,transform:"scale(1)"}))),rr("* => void",ir("100ms 25ms linear",Mt({opacity:0})))]),fadeInItems:ea("fadeInItems",[Ri("showing",Mt({opacity:1})),rr("void => *",[Mt({opacity:0}),ir("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},j0e=new P("MatMenuContent"),ZM=new P("MAT_MENU_PANEL"),$0e=gT(z_(class{}));let vm=(()=>{class n extends $0e{constructor(t,i,r,s,o){var a;super(),this._elementRef=t,this._document=i,this._focusMonitor=r,this._parentMenu=s,this._changeDetectorRef=o,this.role="menuitem",this._hovered=new ne,this._focused=new ne,this._highlighted=!1,this._triggersSubmenu=!1,null===(a=null==s?void 0:s.addItem)||void 0===a||a.call(s,this)}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var t;const i=this._elementRef.nativeElement.cloneNode(!0),r=i.querySelectorAll("mat-icon, .material-icons");for(let s=0;s<r.length;s++)r[s].remove();return(null===(t=i.textContent)||void 0===t?void 0:t.trim())||""}_setHighlighted(t){var i;this._highlighted=t,null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(t){return new(t||n)(g(ce),g(xe),g(pl),g(ZM,8),g(Qt))},n.\u0275cmp=Ie({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,i){1&t&&G("click",function(s){return i._checkDisabled(s)})("mouseenter",function(){return i._handleMouseEnter()}),2&t&&(at("role",i.role)("tabindex",i._getTabIndex())("aria-disabled",i.disabled.toString())("disabled",i.disabled||null),Xe("mat-menu-item",!0)("mat-menu-item-highlighted",i._highlighted)("mat-menu-item-submenu-trigger",i._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[X],attrs:B0e,ngContentSelectors:o8,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,i){1&t&&(Tn(),He(0),j(1,"div",0),be(2,U0e,2,0,"svg",1)),2&t&&(k(1),L("matRippleDisabled",i.disableRipple||i.disabled)("matRippleTrigger",i._getHostElement()),k(1),L("ngIf",i._triggersSubmenu))},directives:[cf,Er],encapsulation:2,changeDetection:0}),n})();const a8=new P("mat-menu-default-options",{providedIn:"root",factory:function z0e(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let G0e=0,bm=(()=>{class n{constructor(t,i,r,s){this._elementRef=t,this._ngZone=i,this._defaultOptions=r,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new Yo,this._tabSubscription=et.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new ne,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new ie,this.close=this.closed,this.panelId="mat-menu-panel-"+G0e++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=on(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=on(t)}set panelClass(t){const i=this._previousPanelClass;i&&i.length&&i.split(" ").forEach(r=>{this._classList[r]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(r=>{this._classList[r]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new CB(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Pi(this._directDescendantItems),Ps(t=>Nr(...t.map(i=>i._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{var i;const r=this._keyManager;if("enter"===this._panelAnimationState&&(null===(i=r.activeItem)||void 0===i?void 0:i._hasFocus())){const s=t.toArray(),o=Math.max(0,Math.min(s.length-1,r.activeItemIndex||0));s[o]&&!s[o].disabled?r.setActiveItem(o):r.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(Pi(this._directDescendantItems),Ps(i=>Nr(...i.map(r=>r._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const i=t.keyCode,r=this._keyManager;switch(i){case 27:Ou(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===i||40===i)&&r.setFocusOrigin("keyboard"),void r.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this._ngZone.onStable.pipe(ln(1)).subscribe(()=>{let i=null;if(this._directDescendantItems.length&&(i=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!i||!i.contains(document.activeElement)){const r=this._keyManager;r.setFocusOrigin(t).setFirstItemActive(),!r.activeItem&&i&&i.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const i=Math.min(this._baseElevation+t,24),r=`${this._elevationPrefix}${i}`,s=Object.keys(this._classList).find(o=>o.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[r]=!0,this._previousElevation=r)}setPositionClasses(t=this.xPosition,i=this.yPosition){var r;const s=this._classList;s["mat-menu-before"]="before"===t,s["mat-menu-after"]="after"===t,s["mat-menu-above"]="above"===i,s["mat-menu-below"]="below"===i,null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Pi(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(t){return new(t||n)(g(ce),g(Z),g(a8),g(Qt))},n.\u0275dir=N({type:n,contentQueries:function(t,i,r){if(1&t&&(St(r,j0e,5),St(r,vm,5),St(r,vm,4)),2&t){let s;fe(s=pe())&&(i.lazyContent=s.first),fe(s=pe())&&(i._allItems=s),fe(s=pe())&&(i.items=s)}},viewQuery:function(t,i){if(1&t&&jt(ti,5),2&t){let r;fe(r=pe())&&(i.templateRef=r.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),l8=(()=>{class n extends bm{constructor(t,i,r,s){super(t,i,r,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return n.\u0275fac=function(t){return new(t||n)(g(ce),g(Z),g(a8),g(Qt))},n.\u0275cmp=Ie({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,i){2&t&&at("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[je([{provide:ZM,useExisting:n}]),X],ngContentSelectors:o8,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,i){1&t&&(Tn(),be(0,H0e,3,6,"ng-template"))},directives:[Su],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::before{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n'],encapsulation:2,data:{animation:[Fb.transformMenu,Fb.fadeInItems]},changeDetection:0}),n})();const c8=new P("mat-menu-scroll-strategy"),q0e={provide:c8,deps:[Pu],useFactory:function W0e(n){return()=>n.scrollStrategies.reposition()}},d8=Mu({passive:!0});let K0e=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u){this._overlay=t,this._element=i,this._viewContainerRef=r,this._menuItemInstance=a,this._dir=l,this._focusMonitor=c,this._ngZone=u,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=et.EMPTY,this._hoverSubscription=et.EMPTY,this._menuCloseSubscription=et.EMPTY,this._handleTouchStart=d=>{$0(d)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new ie,this.onMenuOpen=this.menuOpened,this.menuClosed=new ie,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=o instanceof bm?o:void 0,i.nativeElement.addEventListener("touchstart",this._handleTouchStart,d8),a&&(a._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(i=>{this._destroyMenu(i),("click"===i||"tab"===i)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,d8),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const t=this._createOverlay(),i=t.getConfig(),r=i.positionStrategy;this._setPosition(r),i.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,t.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof bm&&(this.menu._startAnimation(),this.menu._directDescendantItems.changes.pipe(xt(this.menu.close)).subscribe(()=>{r.withLockedPosition(!1).reapplyLastPosition(),r.withLockedPosition(!0)}))}closeMenu(){this.menu.close.emit()}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}updatePosition(){var t;null===(t=this._overlayRef)||void 0===t||t.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const i=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,i instanceof bm?(i._resetAnimation(),i.lazyContent?i._animationDone.pipe(lt(r=>"void"===r.toState),ln(1),xt(i.lazyContent._attached)).subscribe({next:()=>i.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),i.lazyContent&&i.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let t=0,i=this.menu.parentMenu;for(;i;)t++,i=i.parentMenu;this.menu.setElevation(t)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const t=this._getOverlayConfig();this._subscribeToPositions(t.positionStrategy),this._overlayRef=this._overlay.create(t),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new R0({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t){this.menu.setPositionClasses&&t.positionChanges.subscribe(i=>{const r="start"===i.connectionPair.overlayX?"after":"before",s="top"===i.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>this.menu.setPositionClasses(r,s)):this.menu.setPositionClasses(r,s)})}_setPosition(t){let[i,r]="before"===this.menu.xPosition?["end","start"]:["start","end"],[s,o]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[a,l]=[s,o],[c,u]=[i,r],d=0;this.triggersSubmenu()?(u=i="before"===this.menu.xPosition?"start":"end",r=c="end"===i?"start":"end",d="bottom"===s?8:-8):this.menu.overlapTrigger||(a="top"===s?"bottom":"top",l="top"===o?"bottom":"top"),t.withPositions([{originX:i,originY:a,overlayX:c,overlayY:s,offsetY:d},{originX:r,originY:a,overlayX:u,overlayY:s,offsetY:d},{originX:i,originY:l,overlayX:c,overlayY:o,offsetY:-d},{originX:r,originY:l,overlayX:u,overlayY:o,offsetY:-d}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),i=this._overlayRef.detachments();return Nr(t,this._parentMaterialMenu?this._parentMaterialMenu.closed:J(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(lt(o=>o!==this._menuItemInstance),lt(()=>this._menuOpen)):J(),i)}_handleMousedown(t){j0(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const i=t.keyCode;(13===i||32===i)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===i&&"ltr"===this.dir||37===i&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(lt(t=>t===this._menuItemInstance&&!t.disabled),s8(0,b0)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof bm&&this.menu._isAnimating?this.menu._animationDone.pipe(ln(1),s8(0,b0),xt(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new ku(this.menu.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(t){return new(t||n)(g(Pu),g(ce),g(In),g(c8),g(ZM,8),g(vm,10),g(nr,8),g(pl),g(Z))},n.\u0275dir=N({type:n,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(t,i){1&t&&G("click",function(s){return i._handleClick(s)})("mousedown",function(s){return i._handleMousedown(s)})("keydown",function(s){return i._handleKeydown(s)}),2&t&&at("aria-expanded",i.menuOpen||null)("aria-controls",i.menuOpen?i.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),h8=(()=>{class n extends K0e{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Cn(n)))(i||n)}}(),n.\u0275dir=N({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[X]}),n})(),Lb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[q0e],imports:[[_s,_t,yT,fB],tf,_t]}),n})();function Q0e(n,e){if(1&n&&j(0,"img",13),2&n){const t=Se();qo("src",t.post_details.url,Un),yu("alt","post_details by ",t.post_details.username,"")}}function Y0e(n,e){1&n&&j(0,"video",14),2&n&&qo("src",Se().post_details.url,Un)}let X0e=(()=>{class n{constructor(t,i,r){this.postserv=t,this.postprofserv=i,this.router=r}ngOnInit(){this.post_details=this.postprofserv.post_details}ondel(t,i){confirm("You Sure ? ").valueOf()&&this.postserv.delete_post(t,i)}}return n.\u0275fac=function(t){return new(t||n)(g(Bd),g(n8),g(wt))},n.\u0275cmp=Ie({type:n,selectors:[["app-post-view"]],decls:41,vars:6,consts:[[1,"hero"],[1,"cube"],[1,"maindiv"],[1,"example-card"],[1,"example-spacer"],[2,"float","right"],[3,"matMenuTriggerFor"],["mat-card-image","",3,"src","alt",4,"ngIf"],["onmouseover","this.play()","onmouseout","this.pause();this.currentTime=0;","loop","",3,"src",4,"ngIf"],["mat-button",""],["yPosition","above","xPosition","before"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-card-image","",3,"src","alt"],["onmouseover","this.play()","onmouseout","this.pause();this.currentTime=0;","loop","",3,"src"]],template:function(t,i){if(1&t&&(C(0,"body")(1,"div",0),j(2,"div",1)(3,"div",1)(4,"div",1)(5,"div",1)(6,"div",1)(7,"div",1)(8,"div",1)(9,"div",1)(10,"div",1)(11,"div",1)(12,"div",1),C(13,"div",2)(14,"mat-card",3)(15,"mat-card-header")(16,"mat-card-title"),R(17),w(),j(18,"span",4),C(19,"div",5)(20,"mat-icon",6),R(21,"menu"),w()(),j(22,"mat-card-subtitle"),w(),be(23,Q0e,1,2,"img",7),be(24,Y0e,1,1,"video",8),C(25,"mat-card-content")(26,"b"),R(27),w(),R(28),w(),C(29,"mat-card-actions")(30,"button",9),R(31,"LIKE"),w(),C(32,"button",9),R(33,"SHARE"),w()()()()()(),C(34,"mat-menu",10,11)(36,"button",12),G("click",function(){return i.ondel(i.post_details.keymail,i.post_details.name)}),C(37,"mat-icon"),R(38,"delete"),w(),C(39,"span"),R(40,"Delete"),w()()()),2&t){const r=mt(35);k(17),Hn("",i.post_details.username," "),k(3),L("matMenuTriggerFor",r),k(3),L("ngIf","image"===i.post_details.fileType),k(1),L("ngIf","video"===i.post_details.fileType),k(3),tr(i.post_details.username),k(1),Hn(" \xa0 \xa0 ",i.post_details.caption," ")}},directives:[Ob,X5,K5,So,h8,Q5,Er,QM,q5,Y5,Bs,l8,vm],styles:['@import"https://fonts.googleapis.com/css?family=Montserrat:700";img[_ngcontent-%COMP%]{width:500px;height:300px;margin:5px;border-radius:5px;background-color:#e4e4e4;object-fit:contain}video[_ngcontent-%COMP%]{width:500px;height:300px;object-fit:contain}mat-card-content[_ngcontent-%COMP%]{font-size:large}.avataricon[_ngcontent-%COMP%]{width:40px;height:40px;font-size:40px;border-radius:30px}.caption[_ngcontent-%COMP%]{font-size:large;word-wrap:break-word;width:300px}mat-card[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;padding:auto;background:whitesmoke}mat-expansion-panel[_ngcontent-%COMP%]{background:whitesmoke}mat-card[_ngcontent-%COMP%]:hover{box-shadow:5px 10px 12px #8f4a78}mat-card-content[_ngcontent-%COMP%]{color:navy}b[_ngcontent-%COMP%]{color:#520055}.maindiv[_ngcontent-%COMP%]{background-color:#b885fa;display:flex;justify-content:center}.hero[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.hero[_ngcontent-%COMP%]{background-color:#b885fa;position:relative;height:90%;overflow-y:scroll;overflow-x:hidden;font-family:Montserrat,sans-serif}.hero__title[_ngcontent-%COMP%]{color:#fff;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:50px;z-index:1}.cube[_ngcontent-%COMP%]{position:absolute;top:80vh;left:45vw;width:10px;height:10px;border:double 1px #f88df8;border-radius:80px;transform-origin:top left;transform:scale(0) rotate(0) translate(-50%,-50%);animation:cube 12s ease-in forwards infinite}.cube[_ngcontent-%COMP%]:nth-child(2n){border-color:#47059e}.cube[_ngcontent-%COMP%]:nth-child(2){animation-delay:0s;left:25vw;top:40vh;border-color:#ff0}.cube[_ngcontent-%COMP%]:nth-child(3){animation-delay:1s;left:75vw;top:50vh}.cube[_ngcontent-%COMP%]:nth-child(4){animation-delay:3s;left:90vw;top:10vh}.cube[_ngcontent-%COMP%]:nth-child(5){animation-delay:5s;left:10vw;top:85vh}.cube[_ngcontent-%COMP%]:nth-child(6){animation-delay:7s;left:50vw;top:10vh}@keyframes cube{0%{transform:scale(0) rotate(0) translate(-50%,-50%);opacity:1}to{transform:scale(20) rotate(960deg) translate(-50%,-50%);opacity:0}}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}']}),n})();const f8=["*"],Z0e=["content"];function J0e(n,e){if(1&n){const t=En();C(0,"div",2),G("click",function(){return st(t),Se()._onBackdropClicked()}),w()}2&n&&Xe("mat-drawer-shown",Se()._isShowingBackdrop())}function eTe(n,e){1&n&&(C(0,"mat-drawer-content"),He(1,2),w())}const tTe=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],nTe=["mat-drawer","mat-drawer-content","*"],iTe={transformDrawer:ea("transform",[Ri("open, open-instant",Mt({transform:"none",visibility:"visible"})),Ri("void",Mt({"box-shadow":"none",visibility:"hidden"})),rr("void => open-instant",ir("0ms")),rr("void <=> open, open-instant => void",ir("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},rTe=new P("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function sTe(){return!1}}),p8=new P("MAT_DRAWER_CONTAINER");let JM=(()=>{class n extends S0{constructor(t,i,r,s,o){super(r,s,o),this._changeDetectorRef=t,this._container=i}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(g(Qt),g(it(()=>Bb)),g(ce),g(D0),g(Z))},n.\u0275cmp=Ie({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,i){2&t&&Fg("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px")},features:[je([{provide:S0,useExisting:n}]),X],ngContentSelectors:f8,decls:1,vars:0,template:function(t,i){1&t&&(Tn(),He(0))},encapsulation:2,changeDetection:0}),n})(),Vb=(()=>{class n{constructor(t,i,r,s,o,a,l,c){this._elementRef=t,this._focusTrapFactory=i,this._focusMonitor=r,this._platform=s,this._ngZone=o,this._interactivityChecker=a,this._doc=l,this._container=c,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new ne,this._animationEnd=new ne,this._animationState="void",this.openedChange=new ie(!0),this._openedStream=this.openedChange.pipe(lt(u=>u),Ae(()=>{})),this.openedStart=this._animationStarted.pipe(lt(u=>u.fromState!==u.toState&&0===u.toState.indexOf("open")),XM(void 0)),this._closedStream=this.openedChange.pipe(lt(u=>!u),Ae(()=>{})),this.closedStart=this._animationStarted.pipe(lt(u=>u.fromState!==u.toState&&"void"===u.toState),XM(void 0)),this._destroyed=new ne,this.onPositionChanged=new ie,this._modeChanged=new ne,this.openedChange.subscribe(u=>{u?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{ro(this._elementRef.nativeElement,"keydown").pipe(lt(u=>27===u.keyCode&&!this.disableClose&&!Ou(u)),xt(this._destroyed)).subscribe(u=>this._ngZone.run(()=>{this.close(),u.stopPropagation(),u.preventDefault()}))}),this._animationEnd.pipe(E_((u,d)=>u.fromState===d.fromState&&u.toState===d.toState)).subscribe(u=>{const{fromState:d,toState:h}=u;(0===h.indexOf("open")&&"void"===d||"void"===h&&0===d.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=on(t)}get autoFocus(){const t=this._autoFocus;return null==t?"side"===this.mode?"dialog":"first-tabbable":t}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=on(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(on(t))}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{!i&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){var t;this._focusTrap&&this._focusTrap.destroy(),null===(t=this._anchor)||void 0===t||t.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,i){t&&i&&(this._openedVia=i);const r=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),r}_setOpen(t,i,r){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",i&&this._restoreFocus(r)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe(ln(1)).subscribe(o=>s(o?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(t){const i=this._elementRef.nativeElement,r=i.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),r.insertBefore(this._anchor,i)),r.appendChild(i)):this._anchor&&this._anchor.parentNode.insertBefore(i,this._anchor)}}return n.\u0275fac=function(t){return new(t||n)(g(ce),g(IB),g(pl),g(Dn),g(Z),g(H0),g(xe,8),g(p8,8))},n.\u0275cmp=Ie({type:n,selectors:[["mat-drawer"]],viewQuery:function(t,i){if(1&t&&jt(Z0e,5),2&t){let r;fe(r=pe())&&(i._content=r.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,i){1&t&&Ng("@transform.start",function(s){return i._animationStarted.next(s)})("@transform.done",function(s){return i._animationEnd.next(s)}),2&t&&(at("align",null),Vg("@transform",i._animationState),Xe("mat-drawer-end","end"===i.position)("mat-drawer-over","over"===i.mode)("mat-drawer-push","push"===i.mode)("mat-drawer-side","side"===i.mode)("mat-drawer-opened",i.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:f8,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,i){1&t&&(Tn(),C(0,"div",0,1),He(2),w())},directives:[S0],encapsulation:2,data:{animation:[iTe.transformDrawer]},changeDetection:0}),n})(),Bb=(()=>{class n{constructor(t,i,r,s,o,a=!1,l){this._dir=t,this._element=i,this._ngZone=r,this._changeDetectorRef=s,this._animationMode=l,this._drawers=new Yo,this.backdropClick=new ie,this._destroyed=new ne,this._doCheckSubject=new ne,this._contentMargins={left:null,right:null},this._contentMarginChanges=new ne,t&&t.change.pipe(xt(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),o.change().pipe(xt(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=a}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=on(t)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(t){this._backdropOverride=null==t?null:on(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(Pi(this._allDrawers),xt(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(i=>!i._container||i._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Pi(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(B0(10),xt(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,i=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const r=this._left._getWidth();t+=r,i-=r}if(this._right&&this._right.opened)if("side"==this._right.mode)i+=this._right._getWidth();else if("push"==this._right.mode){const r=this._right._getWidth();i+=r,t-=r}t=t||null,i=i||null,(t!==this._contentMargins.left||i!==this._contentMargins.right)&&(this._contentMargins={left:t,right:i},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(lt(i=>i.fromState!==i.toState),xt(this._drawers.changes)).subscribe(i=>{"open-instant"!==i.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(xt(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){!t||t.onPositionChanged.pipe(xt(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(ln(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(xt(Nr(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const i=this._element.nativeElement.classList,r="mat-drawer-container-has-open";t?i.add(r):i.remove(r)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return n.\u0275fac=function(t){return new(t||n)(g(nr,8),g(ce),g(Z),g(Qt),g(Au),g(rTe),g(ni,8))},n.\u0275cmp=Ie({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(t,i,r){if(1&t&&(St(r,JM,5),St(r,Vb,5)),2&t){let s;fe(s=pe())&&(i._content=s.first),fe(s=pe())&&(i._allDrawers=s)}},viewQuery:function(t,i){if(1&t&&jt(JM,5),2&t){let r;fe(r=pe())&&(i._userContent=r.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,i){2&t&&Xe("mat-drawer-container-explicit-backdrop",i._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[je([{provide:p8,useExisting:n}])],ngContentSelectors:nTe,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,i){1&t&&(Tn(tTe),be(0,J0e,1,2,"div",0),He(1),He(2,1),be(3,eTe,2,0,"mat-drawer-content",1)),2&t&&(L("ngIf",i.hasBackdrop),k(3),L("ngIf",!i._content))},directives:[JM,Er],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n'],encapsulation:2,changeDetection:0}),n})(),Ub=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[_s,_t,tf],tf,_t]}),n})(),oTe=(()=>{class n{constructor(t,i,r,s,o){this.dialog=t,this.router=i,this.user_data_service=r,this.location=s,this.postTask=o,this.profile_pic_url="",this.showFiller=!1,this.fbapp=Li.initializeApp(ii_firebase),this.fb_db=Li.firestore(),this.keymail=this.user_data_service.email.replaceAll(".","")}ngOnInit(){""==this.keymail&&(alert("Must be logged in to view profile"),this.router.navigateByUrl("/home"));let t=this.user_data_service.fetch_userdata_with_keymail(this.keymail);console.log("ngOnInit():",t),this.fullName=t.name,this.userName=t.username,this.bio=t.bio,this.fetch_profile_pic()}ngOnChanges(){console.log("Yo")}Refresh_profile_data(){let t=this.user_data_service.updatedData;console.log("ProfileData",t),this.fullName=t.name,this.userName=t.username,this.bio=t.bio,this.fetch_profile_pic()}openDialog(){this.dialog.open(O5,{width:"40%",height:"70%",data:this.user_data_service.fetch_userdata_with_keymail(this.keymail)})}go_to_Add_Post(){this.router.navigate(["/add-post"])}go_back(){this.location.back()}fetch_profile_pic(){const t=mc();Io(Vs(t,"profile_pic/"+this.keymail+"/"+this.keymail)).then(i=>{this.profile_pic_url=i}).catch(i=>{Io(Vs(t,"assets/prj_logo_colour.png")).then(r=>{this.profile_pic_url=r}).catch(r=>{console.log("Error while loading profile pic:",r)})})}}return n.\u0275fac=function(t){return new(t||n)(g(vl),g(wt),g(ts),g(Xo),g(Bd))},n.\u0275cmp=Ie({type:n,selectors:[["app-profile"]],features:[Kt],decls:53,vars:6,consts:[[1,"example-container"],["mode","side",1,"example-sidenav"],["drawer",""],["alt","Profile Picture","height","100px","width","100px",3,"src"],["mat-raised-button","",1,"profile-button",3,"click"],["mat-raised-button","",1,"profile-button"],[1,"mat_icon_button",3,"click"],[2,"text-align","center"],[1,"mat_icon_left-arrow",3,"click"],[2,"margin-left","96%",3,"click"],[1,"col-1"],[1,"matcard_col1"],[1,"imgdiv",2,"background-color","rgba(0, 0, 0, 0)"],["alt","Profile Picture","height","200px","width","200px",1,"pp",3,"src"],["align","center",1,"col-2"],[1,"matcard_col2"],[2,"background-color","rgba(0, 0, 0, 0)"],[1,"b2"],["align","center"],[1,"main_scroll"],[3,"keymail"]],template:function(t,i){if(1&t){const r=En();C(0,"mat-drawer-container",0)(1,"mat-drawer",1,2),j(3,"img",3)(4,"br")(5,"br"),C(6,"button",4),G("click",function(){return i.openDialog()}),R(7,"Edit Profile"),w(),j(8,"br")(9,"br"),C(10,"button",4),G("click",function(){return i.go_to_Add_Post()}),R(11,"Add Post"),w(),j(12,"br")(13,"br"),C(14,"button",5),R(15,"Settings"),w(),j(16,"br")(17,"br"),w(),C(18,"div")(19,"div")(20,"mat-icon",6),G("click",function(){return st(r),mt(2).toggle()}),R(21,"more_vert"),w()(),C(22,"div",7)(23,"b"),R(24),w(),j(25,"hr"),w(),C(26,"mat-icon",8),G("click",function(){return i.go_back()}),R(27,"keyboard_arrow_left"),w(),C(28,"mat-icon",9),G("click",function(){return i.Refresh_profile_data()}),R(29,"refresh"),w(),C(30,"div")(31,"div")(32,"div",10)(33,"mat-card",11)(34,"div",12),j(35,"img",13),w()()(),C(36,"div",14)(37,"mat-card",15)(38,"div",16)(39,"b"),R(40),w()(),j(41,"br")(42,"br"),C(43,"div",16)(44,"b"),R(45,"User Bio : "),w(),C(46,"b",17),R(47),w()()()()()(),C(48,"div",18)(49,"h1"),R(50," Posts "),w(),C(51,"div",19),j(52,"app-post_grid",20),w()()()()}2&t&&(k(3),L("src",i.profile_pic_url,Un),k(21),Hn(" ",i.fullName," "),k(11),L("src",i.profile_pic_url,Un),k(5),Hn("",i.userName," "),k(7),tr(i.bio),k(5),L("keymail",i.keymail))},directives:[Bb,Vb,Bs,So,Ob,i8],styles:[".col-1[_ngcontent-%COMP%]{max-width:28%;float:left;height:250px;margin:10px}.col-2[_ngcontent-%COMP%]{float:left;max-width:68%;height:250px;margin:10px}img[_ngcontent-%COMP%]{border-radius:100%}.imgdiv[_ngcontent-%COMP%]{margin-left:20%}.pp[_ngcontent-%COMP%]{object-fit:scale-down;background-color:#f5f5f5}.matcard_col1[_ngcontent-%COMP%], .matcard_col2[_ngcontent-%COMP%]{height:250px;background-color:#e5d4fc}b[_ngcontent-%COMP%]{font-size:x-large}.b2[_ngcontent-%COMP%]{font-size:x-large;color:#927f9b}.example-container[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#e5d4fc}.example-sidenav-content[_ngcontent-%COMP%]{height:100%}.example-sidenav[_ngcontent-%COMP%]{padding:30px}.mat-icon-left-arrow[_ngcontent-%COMP%]{background-color:#fff0;margin-left:-10vh;cursor:pointer;border:none}.mat_icon_button[_ngcontent-%COMP%]{background-color:#fff0;left:3px;position:absolute;cursor:pointer;border:none}.profile-button[_ngcontent-%COMP%]{width:100px;height:40px}div[_ngcontent-%COMP%]{background-color:#b885fa}mat-drawer[_ngcontent-%COMP%]{background-color:#b885fa}"]}),n})(),m8=(()=>{class n{constructor(){this._listeners=[]}notify(t,i){for(let r of this._listeners)r(t,i)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(i=>t!==i)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const g8=new P("CdkAccordion");let aTe=0,lTe=(()=>{class n{constructor(t,i,r){this.accordion=t,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=et.EMPTY,this.closed=new ie,this.opened=new ie,this.destroyed=new ie,this.expandedChange=new ie,this.id="cdk-accordion-child-"+aTe++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=on(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=on(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return n.\u0275fac=function(t){return new(t||n)(g(g8,12),g(Qt),g(m8))},n.\u0275dir=N({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[je([{provide:g8,useValue:void 0}])]}),n})(),cTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({}),n})();const uTe=["body"];function dTe(n,e){}const hTe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],fTe=["mat-expansion-panel-header","*","mat-action-row"];function pTe(n,e){1&n&&j(0,"span",2),2&n&&L("@indicatorRotate",Se()._getExpandedState())}const mTe=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],gTe=["mat-panel-title","mat-panel-description","*"],_8=new P("MAT_ACCORDION"),y8="225ms cubic-bezier(0.4,0.0,0.2,1)",v8={indicatorRotate:ea("indicatorRotate",[Ri("collapsed, void",Mt({transform:"rotate(0deg)"})),Ri("expanded",Mt({transform:"rotate(180deg)"})),rr("expanded <=> collapsed, void => collapsed",ir(y8))]),bodyExpansion:ea("bodyExpansion",[Ri("collapsed, void",Mt({height:"0px",visibility:"hidden"})),Ri("expanded",Mt({height:"*",visibility:"visible"})),rr("expanded <=> collapsed, void => collapsed",ir(y8))])};let _Te=(()=>{class n{constructor(t){this._template=t}}return n.\u0275fac=function(t){return new(t||n)(g(ti))},n.\u0275dir=N({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]}),n})(),yTe=0;const b8=new P("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let w8=(()=>{class n extends lTe{constructor(t,i,r,s,o,a,l){super(t,i,r),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new ie,this.afterCollapse=new ie,this._inputChanges=new ne,this._headerId="mat-expansion-panel-header-"+yTe++,this._bodyAnimationDone=new ne,this.accordion=t,this._document=o,this._bodyAnimationDone.pipe(E_((c,u)=>c.fromState===u.fromState&&c.toState===u.toState)).subscribe(c=>{"void"!==c.fromState&&("expanded"===c.toState?this.afterExpand.emit():"collapsed"===c.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=on(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(Pi(null),lt(()=>this.expanded&&!this._portal),ln(1)).subscribe(()=>{this._portal=new ku(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,i=this._body.nativeElement;return t===i||i.contains(t)}return!1}}return n.\u0275fac=function(t){return new(t||n)(g(_8,12),g(Qt),g(m8),g(In),g(xe),g(ni,8),g(b8,8))},n.\u0275cmp=Ie({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(t,i,r){if(1&t&&St(r,_Te,5),2&t){let s;fe(s=pe())&&(i._lazyContent=s.first)}},viewQuery:function(t,i){if(1&t&&jt(uTe,5),2&t){let r;fe(r=pe())&&(i._body=r.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,i){2&t&&Xe("mat-expanded",i.expanded)("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-expansion-panel-spacing",i._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[je([{provide:_8,useValue:void 0}]),X,Kt],ngContentSelectors:fTe,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,i){1&t&&(Tn(hTe),He(0),C(1,"div",0,1),G("@bodyExpansion.done",function(s){return i._bodyAnimationDone.next(s)}),C(3,"div",2),He(4,1),be(5,dTe,0,0,"ng-template",3),w(),He(6,2),w()),2&t&&(k(1),L("@bodyExpansion",i._getExpandedState())("id",i.id),at("aria-labelledby",i._headerId),k(4),L("cdkPortalOutlet",i._portal))},directives:[Ru],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}\n'],encapsulation:2,data:{animation:[v8.bodyExpansion]},changeDetection:0}),n})();class vTe{}const bTe=ele(vTe);let wTe=(()=>{class n extends bTe{constructor(t,i,r,s,o,a,l){super(),this.panel=t,this._element=i,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=a,this._parentChangeSubscription=et.EMPTY;const c=t.accordion?t.accordion._stateChanges.pipe(lt(u=>!(!u.hideToggle&&!u.togglePosition))):pr;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=Nr(t.opened,t.closed,c,t._inputChanges.pipe(lt(u=>!!(u.hideToggle||u.disabled||u.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(lt(()=>t._containsFocus())).subscribe(()=>r.focusVia(i,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:Ou(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,i){t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return n.\u0275fac=function(t){return new(t||n)(g(w8,1),g(ce),g(pl),g(Qt),g(b8,8),g(ni,8),nl("tabindex"))},n.\u0275cmp=Ie({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(t,i){1&t&&G("click",function(){return i._toggle()})("keydown",function(s){return i._keydown(s)}),2&t&&(at("id",i.panel._headerId)("tabindex",i.tabIndex)("aria-controls",i._getPanelId())("aria-expanded",i._isExpanded())("aria-disabled",i.panel.disabled),Fg("height",i._getHeaderHeight()),Xe("mat-expanded",i._isExpanded())("mat-expansion-toggle-indicator-after","after"===i._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===i._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[X],ngContentSelectors:gTe,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,i){1&t&&(Tn(mTe),C(0,"span",0),He(1),He(2,1),He(3,2),w(),be(4,pTe,1,1,"span",1)),2&t&&(k(4),L("ngIf",i._showToggle()))},directives:[Er],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[v8.indicatorRotate]},changeDetection:0}),n})(),eA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[_s,_t,cTe,C_]]}),n})();function CTe(n,e){if(1&n&&(C(0,"div")(1,"b"),R(2),w(),C(3,"label"),R(4),w()()),2&n){const t=e.$implicit;k(2),Hn("",t.username,":"),k(2),tr(t.comment)}}let ETe=(()=>{class n{constructor(t){this.userService=t,this.newComment=new ie,this.username=""}ngOnInit(){}addNewItem(t){this.newComment.emit(t)}}return n.\u0275fac=function(t){return new(t||n)(g(ts))},n.\u0275cmp=Ie({type:n,selectors:[["app-comments"]],inputs:{comments:"comments",username:"username"},outputs:{newComment:"newComment"},decls:11,vars:1,consts:[[1,"comments-div"],[4,"ngFor","ngForOf"],["appearance","fill",1,"example-full-width"],["matInput","","maxlength","25600","id","inputComment","placeholder","Say whats on your in mind"],["comment",""],[3,"click"]],template:function(t,i){if(1&t){const r=En();C(0,"div",0),be(1,CTe,5,2,"div",1),C(2,"div")(3,"form")(4,"mat-form-field",2)(5,"mat-label"),R(6,"Comment"),w(),j(7,"input",3,4),w(),C(9,"mat-icon",5),G("click",function(){st(r);const o=mt(8);return i.addNewItem(o.value)}),R(10,"arrow_right_alt"),w()()()()}2&t&&(k(1),L("ngForOf",i.comments))},directives:[ul,C4,yb,R5,So],styles:[".comments-div[_ngcontent-%COMP%]{height:auto;background:whitesmoke}.example-header-image[_ngcontent-%COMP%]{background-image:url(prj_logo_colour.b7d398e3b3f00db0.png);background-size:cover}.example-full-width[_ngcontent-%COMP%]{width:90%;height:50px}.bla1[_ngcontent-%COMP%]{margin-top:33.5%}"]}),n})();function TTe(n,e){if(1&n&&j(0,"img",9),2&n){const t=Se();qo("src",t.post_details.url,Un),yu("alt","post_details by ",t.post_details.username,"")}}function ITe(n,e){1&n&&j(0,"video",10),2&n&&qo("src",Se().post_details.url,Un)}let DTe=(()=>{class n{constructor(t,i){this.userService=t,this.router=i,this.profile_pic_url="",this.comments=[],this.app=xr(ii_firebase),this.realtime=Fi(this.app),this.comment_header="Click to open Comments",this.comment_user=""}ngOnInit(){this.fetchComments(),this.fetch_profile_pic(),this.comment_header=this.comments[0].username+this.comments[0].comment}ngOnChanges(){this.fetchComments()}on_close(){this.comment_user=this.comments[0].username,this.comment_header=" : "+this.comments[0].comment}on_open(){this.comment_user="",this.comment_header="Comments"}addNewComment(t){var i=this;return m(function*(){let r=i.post_details.keymail,s=i.post_details.name.replaceAll(".",""),o=i.userService.email.replaceAll(".","");try{let l=eD(Et(i.realtime,"post_comments/"+r+"/"+s+"/"));""==t?alert("comment empty!!!!"):(Is(l,{keymail:o,comment:t,username:i.userService.username}),alert("Data uploaded in realtime successfully"))}catch(a){console.error("Error adding document: ",a)}})()}fetchComments(){let t=this.post_details.keymail,i=this.post_details.name.replaceAll(".","");kr(Et(this.realtime,"/post_comments/"+t+"/"+i),s=>{this.comments=[],s.forEach(o=>{const a=o.val();a.key=o.key,this.comments.push(a)})})}fetch_profile_pic(){const t=mc();Io(Vs(t,"profile_pic/"+this.post_details.keymail+"/"+this.post_details.keymail)).then(i=>{this.profile_pic_url=i}).catch(i=>{Io(Vs(t,"assets/prj_logo_black.png")).then(r=>{this.profile_pic_url=r}).catch(r=>{console.log("Error loading profile pic:",r)})})}go_to_prof(t){this.router.navigate(["viewprofile",t])}}return n.\u0275fac=function(t){return new(t||n)(g(ts),g(wt))},n.\u0275cmp=Ie({type:n,selectors:[["app-post-card"]],inputs:{post_details:"post_details"},features:[Kt],decls:27,vars:9,consts:[[1,"example-card"],["mat-card-avatar","",1,"avataricon",3,"src"],[3,"click"],["mat-card-image","",3,"src","alt",4,"ngIf"],["onmouseover","this.play()","onmouseout","this.pause();this.currentTime=0;","loop","",3,"src",4,"ngIf"],[1,"caption"],[3,"opened","closed"],[3,"comments","newComment"],["mat-button",""],["mat-card-image","",3,"src","alt"],["onmouseover","this.play()","onmouseout","this.pause();this.currentTime=0;","loop","",3,"src"]],template:function(t,i){1&t&&(C(0,"mat-card",0)(1,"mat-card-header"),j(2,"img",1),C(3,"mat-card-title",2),G("click",function(){return i.go_to_prof(i.post_details.keymail)}),R(4),w(),j(5,"mat-card-subtitle"),w(),be(6,TTe,1,2,"img",3),be(7,ITe,1,1,"video",4),C(8,"mat-card-content")(9,"b"),R(10),w(),R(11," \xa0 \xa0 "),C(12,"div",5),R(13),w(),j(14,"br"),C(15,"div")(16,"mat-expansion-panel",6),G("opened",function(){return i.on_open()})("closed",function(){return i.on_close()}),C(17,"mat-expansion-panel-header")(18,"b"),R(19),w(),R(20),w(),C(21,"app-comments",7),G("newComment",function(s){return i.addNewComment(s)}),w()()()(),C(22,"mat-card-actions")(23,"button",8),R(24,"LIKE"),w(),C(25,"button",8),R(26,"SHARE"),w()()()),2&t&&(k(2),L("src",i.profile_pic_url,Un),k(2),tr(i.post_details.username),k(2),L("ngIf","image"===i.post_details.fileType),k(1),L("ngIf","video"===i.post_details.fileType),k(3),tr(i.post_details.username),k(3),tr(i.post_details.caption),k(6),tr(i.comment_user),k(1),Hn(" ",i.comment_header," "),k(1),L("comments",i.comments))},directives:[Ob,X5,C0e,K5,Q5,Er,QM,q5,w8,wTe,ETe,Y5,Bs],styles:["img[_ngcontent-%COMP%]{width:500px;height:300px;margin:5px;border-radius:5px;background-color:#e4e4e4;object-fit:contain}video[_ngcontent-%COMP%]{width:500px;height:300px;object-fit:contain}mat-card-content[_ngcontent-%COMP%]{font-size:large}.avataricon[_ngcontent-%COMP%]{width:40px;height:40px;font-size:40px;border-radius:30px}.caption[_ngcontent-%COMP%]{font-size:large;word-wrap:break-word;width:300px}mat-card[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;padding:auto;background:whitesmoke}mat-card-title[_ngcontent-%COMP%]:hover{color:#de4cfc;cursor:pointer}mat-expansion-panel[_ngcontent-%COMP%]{background:whitesmoke}mat-card[_ngcontent-%COMP%]:hover{box-shadow:5px 10px 12px #8f4a78}mat-card-content[_ngcontent-%COMP%]{color:navy}b[_ngcontent-%COMP%]{color:#520055}"]}),n})();function STe(n,e){if(1&n&&(C(0,"div",3),j(1,"app-post-card",4),w()),2&n){const t=e.$implicit;k(1),L("post_details",t)}}let xTe=(()=>{class n{constructor(t,i){this.post_service=t,this.router=i,this.metadata=[]}ngOnInit(){this.all_posts()}all_posts(){var t=this;return m(function*(){Li.initializeApp(ii_firebase);const r=Li.firestore();t.metadata=[],(yield r.collection("posts_metadata").get()).forEach(a=>{t.metadata.push(a.data())}),t.shuffle(t.metadata)})()}shuffle(t){let r,i=t.length;for(;0!=i;)r=Math.floor(Math.random()*i),i--,[t[i],t[r]]=[t[r],t[i]];return t}}return n.\u0275fac=function(t){return new(t||n)(g(Bd),g(wt))},n.\u0275cmp=Ie({type:n,selectors:[["app-post_list"]],decls:14,vars:1,consts:[[1,"hero"],[1,"cube"],["class","innerdiv",4,"ngFor","ngForOf"],[1,"innerdiv"],[3,"post_details"]],template:function(t,i){1&t&&(C(0,"body")(1,"div",0),j(2,"div",1)(3,"div",1)(4,"div",1)(5,"div",1)(6,"div",1)(7,"div",1)(8,"div",1)(9,"div",1)(10,"div",1)(11,"div",1)(12,"div",1),be(13,STe,2,1,"div",2),w()()),2&t&&(k(13),L("ngForOf",i.metadata))},directives:[ul,DTe],styles:['@import"https://fonts.googleapis.com/css?family=Montserrat:700";.main_scroll[_ngcontent-%COMP%]{max-height:90%;overflow-y:scroll;padding:10px}.innerdiv[_ngcontent-%COMP%]{padding:20px;float:none;justify-content:center;display:flex}.main_scroll[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.hero[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.hero[_ngcontent-%COMP%]{background-color:#b885fa;position:relative;height:100%;overflow-y:scroll;overflow-x:hidden;font-family:Montserrat,sans-serif}.hero__title[_ngcontent-%COMP%]{color:#fff;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:50px;z-index:1}.cube[_ngcontent-%COMP%]{position:absolute;top:80vh;left:45vw;width:10px;height:10px;border:double 1px #f88df8;border-radius:80px;transform-origin:top left;transform:scale(0) rotate(0) translate(-50%,-50%);animation:cube 12s ease-in forwards infinite}.cube[_ngcontent-%COMP%]:nth-child(2n){border-color:#47059e}.cube[_ngcontent-%COMP%]:nth-child(2){animation-delay:0s;left:25vw;top:40vh;border-color:#ff0}.cube[_ngcontent-%COMP%]:nth-child(3){animation-delay:1s;left:75vw;top:50vh}.cube[_ngcontent-%COMP%]:nth-child(4){animation-delay:3s;left:90vw;top:10vh}.cube[_ngcontent-%COMP%]:nth-child(5){animation-delay:5s;left:10vw;top:85vh}.cube[_ngcontent-%COMP%]:nth-child(6){animation-delay:7s;left:50vw;top:10vh}@keyframes cube{0%{transform:scale(0) rotate(0) translate(-50%,-50%);opacity:1}to{transform:scale(20) rotate(960deg) translate(-50%,-50%);opacity:0}}']}),n})();function MTe(n,e){1&n&&He(0)}const C8=["*"];function ATe(n,e){}const kTe=function(n){return{animationDuration:n}},RTe=function(n,e){return{value:n,params:e}},PTe=["tabListContainer"],OTe=["tabList"],NTe=["tabListInner"],FTe=["nextPaginator"],LTe=["previousPaginator"],VTe=["tabBodyWrapper"],BTe=["tabHeader"];function UTe(n,e){}function HTe(n,e){1&n&&be(0,UTe,0,0,"ng-template",10),2&n&&L("cdkPortalOutlet",Se().$implicit.templateLabel)}function jTe(n,e){1&n&&R(0),2&n&&tr(Se().$implicit.textLabel)}function $Te(n,e){if(1&n){const t=En();C(0,"div",6),G("click",function(){const r=st(t),s=r.$implicit,o=r.index,a=Se(),l=mt(1);return a._handleClick(s,l,o)})("cdkFocusChange",function(r){const o=st(t).index;return Se()._tabFocusChanged(r,o)}),C(1,"div",7),be(2,HTe,1,1,"ng-template",8),be(3,jTe,1,1,"ng-template",null,9,S2),w()()}if(2&n){const t=e.$implicit,i=e.index,r=mt(4),s=Se();Xe("mat-tab-label-active",s.selectedIndex===i),L("id",s._getTabLabelId(i))("ngClass",t.labelClass)("disabled",t.disabled)("matRippleDisabled",t.disabled||s.disableRipple),at("tabIndex",s._getTabIndex(t,i))("aria-posinset",i+1)("aria-setsize",s._tabs.length)("aria-controls",s._getTabContentId(i))("aria-selected",s.selectedIndex===i)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null),k(2),L("ngIf",t.templateLabel)("ngIfElse",r)}}function zTe(n,e){if(1&n){const t=En();C(0,"mat-tab-body",11),G("_onCentered",function(){return st(t),Se()._removeTabBodyWrapperHeight()})("_onCentering",function(r){return st(t),Se()._setTabBodyWrapperHeight(r)}),w()}if(2&n){const t=e.$implicit,i=e.index,r=Se();Xe("mat-tab-body-active",r.selectedIndex===i),L("id",r._getTabContentId(i))("ngClass",t.bodyClass)("content",t.content)("position",t.position)("origin",t.origin)("animationDuration",r.animationDuration),at("tabindex",null!=r.contentTabIndex&&r.selectedIndex===i?r.contentTabIndex:null)("aria-labelledby",r._getTabLabelId(i))}}const GTe=new P("MatInkBarPositioner",{providedIn:"root",factory:function WTe(){return e=>({left:e?(e.offsetLeft||0)+"px":"0",width:e?(e.offsetWidth||0)+"px":"0"})}});let E8=(()=>{class n{constructor(t,i,r,s){this._elementRef=t,this._ngZone=i,this._inkBarPositioner=r,this._animationMode=s}alignToElement(t){this.show(),this._ngZone.onStable.pipe(ln(1)).subscribe(()=>{const i=this._inkBarPositioner(t),r=this._elementRef.nativeElement;r.style.left=i.left,r.style.width=i.width})}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}}return n.\u0275fac=function(t){return new(t||n)(g(ce),g(Z),g(GTe),g(ni,8))},n.\u0275dir=N({type:n,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(t,i){2&t&&Xe("_mat-animation-noopable","NoopAnimations"===i._animationMode)}}),n})();const qTe=new P("MatTabContent"),T8=new P("MatTabLabel"),I8=new P("MAT_TAB");let KTe=(()=>{class n extends nse{constructor(t,i,r){super(t,i),this._closestTab=r}}return n.\u0275fac=function(t){return new(t||n)(g(ti),g(In),g(I8,8))},n.\u0275dir=N({type:n,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],features:[je([{provide:T8,useExisting:n}]),X]}),n})();const QTe=z_(class{}),D8=new P("MAT_TAB_GROUP");let S8=(()=>{class n extends QTe{constructor(t,i){super(),this._viewContainerRef=t,this._closestTabGroup=i,this.textLabel="",this._contentPortal=null,this._stateChanges=new ne,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(t){this._setTemplateLabelInput(t)}get content(){return this._contentPortal}ngOnChanges(t){(t.hasOwnProperty("textLabel")||t.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new ku(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(t){t&&t._closestTab===this&&(this._templateLabel=t)}}return n.\u0275fac=function(t){return new(t||n)(g(In),g(D8,8))},n.\u0275cmp=Ie({type:n,selectors:[["mat-tab"]],contentQueries:function(t,i,r){if(1&t&&(St(r,T8,5),St(r,qTe,7,ti)),2&t){let s;fe(s=pe())&&(i.templateLabel=s.first),fe(s=pe())&&(i._explicitContent=s.first)}},viewQuery:function(t,i){if(1&t&&jt(ti,7),2&t){let r;fe(r=pe())&&(i._implicitContent=r.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],features:[je([{provide:I8,useExisting:n}]),X,Kt],ngContentSelectors:C8,decls:1,vars:0,template:function(t,i){1&t&&(Tn(),be(0,MTe,1,0,"ng-template"))},encapsulation:2}),n})();const YTe={translateTab:ea("translateTab",[Ri("center, void, left-origin-center, right-origin-center",Mt({transform:"none"})),Ri("left",Mt({transform:"translate3d(-100%, 0, 0)",minHeight:"1px"})),Ri("right",Mt({transform:"translate3d(100%, 0, 0)",minHeight:"1px"})),rr("* => left, * => right, left => center, right => center",ir("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),rr("void => left-origin-center",[Mt({transform:"translate3d(-100%, 0, 0)"}),ir("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),rr("void => right-origin-center",[Mt({transform:"translate3d(100%, 0, 0)"}),ir("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let XTe=(()=>{class n extends Ru{constructor(t,i,r,s){super(t,i,s),this._host=r,this._centeringSub=et.EMPTY,this._leavingSub=et.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(Pi(this._host._isCenterPosition(this._host._position))).subscribe(t=>{t&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(g(Ko),g(In),g(it(()=>x8)),g(xe))},n.\u0275dir=N({type:n,selectors:[["","matTabBodyHost",""]],features:[X]}),n})(),ZTe=(()=>{class n{constructor(t,i,r){this._elementRef=t,this._dir=i,this._dirChangeSubscription=et.EMPTY,this._translateTabComplete=new ne,this._onCentering=new ie,this._beforeCentering=new ie,this._afterLeavingCenter=new ie,this._onCentered=new ie(!0),this.animationDuration="500ms",i&&(this._dirChangeSubscription=i.change.subscribe(s=>{this._computePositionAnimationState(s),r.markForCheck()})),this._translateTabComplete.pipe(E_((s,o)=>s.fromState===o.fromState&&s.toState===o.toState)).subscribe(s=>{this._isCenterPosition(s.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(s.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(t){this._positionIndex=t,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(t){const i=this._isCenterPosition(t.toState);this._beforeCentering.emit(i),i&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(t){return"center"==t||"left-origin-center"==t||"right-origin-center"==t}_computePositionAnimationState(t=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==t?"left":"right":this._positionIndex>0?"ltr"==t?"right":"left":"center"}_computePositionFromOrigin(t){const i=this._getLayoutDirection();return"ltr"==i&&t<=0||"rtl"==i&&t>0?"left-origin-center":"right-origin-center"}}return n.\u0275fac=function(t){return new(t||n)(g(ce),g(nr,8),g(Qt))},n.\u0275dir=N({type:n,inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),n})(),x8=(()=>{class n extends ZTe{constructor(t,i,r){super(t,i,r)}}return n.\u0275fac=function(t){return new(t||n)(g(ce),g(nr,8),g(Qt))},n.\u0275cmp=Ie({type:n,selectors:[["mat-tab-body"]],viewQuery:function(t,i){if(1&t&&jt(Ru,5),2&t){let r;fe(r=pe())&&(i._portalHost=r.first)}},hostAttrs:[1,"mat-tab-body"],features:[X],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(t,i){1&t&&(C(0,"div",0,1),G("@translateTab.start",function(s){return i._onTranslateTabStarted(s)})("@translateTab.done",function(s){return i._translateTabComplete.next(s)}),be(2,ATe,0,0,"ng-template",2),w()),2&t&&L("@translateTab",al(3,RTe,i._position,f2(1,kTe,i.animationDuration)))},directives:[XTe],styles:['.mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}.mat-tab-body-content[style*="visibility: hidden"]{display:none}\n'],encapsulation:2,data:{animation:[YTe.translateTab]}}),n})();const M8=new P("MAT_TABS_CONFIG"),JTe=z_(class{});let A8=(()=>{class n extends JTe{constructor(t){super(),this.elementRef=t}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return n.\u0275fac=function(t){return new(t||n)(g(ce))},n.\u0275dir=N({type:n,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(t,i){2&t&&(at("aria-disabled",!!i.disabled),Xe("mat-tab-disabled",i.disabled))},inputs:{disabled:"disabled"},features:[X]}),n})();const k8=Mu({passive:!0});let nIe=(()=>{class n{constructor(t,i,r,s,o,a,l){this._elementRef=t,this._changeDetectorRef=i,this._viewportRuler=r,this._dir=s,this._ngZone=o,this._platform=a,this._animationMode=l,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new ne,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new ne,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new ie,this.indexFocused=new ie,o.runOutsideAngular(()=>{ro(t.nativeElement,"mouseleave").pipe(xt(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){t=Jo(t),this._selectedIndex!=t&&(this._selectedIndexChanged=!0,this._selectedIndex=t,this._keyManager&&this._keyManager.updateActiveItem(t))}ngAfterViewInit(){ro(this._previousPaginator.nativeElement,"touchstart",k8).pipe(xt(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),ro(this._nextPaginator.nativeElement,"touchstart",k8).pipe(xt(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const t=this._dir?this._dir.change:J("ltr"),i=this._viewportRuler.change(150),r=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new CB(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),this._ngZone.onStable.pipe(ln(1)).subscribe(r),Nr(t,i,this._items.changes,this._itemsResized()).pipe(xt(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),r()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe(xt(this._destroyed)).subscribe(s=>{this.indexFocused.emit(s),this._setTabFocus(s)})}_itemsResized(){return"function"!=typeof ResizeObserver?pr:this._items.changes.pipe(Pi(this._items),Ps(t=>new nt(i=>this._ngZone.runOutsideAngular(()=>{const r=new ResizeObserver(()=>{i.next()});return t.forEach(s=>{r.observe(s.elementRef.nativeElement)}),()=>{r.disconnect()}}))),_B(1))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!Ou(t))switch(t.keyCode){case 13:case 32:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t));break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){const t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){!this._isValidIndex(t)||this.focusIndex===t||!this._keyManager||this._keyManager.setActiveItem(t)}_isValidIndex(t){if(!this._items)return!0;const i=this._items?this._items.toArray()[t]:null;return!!i&&!i.disabled}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();const i=this._tabListContainer.nativeElement;i.scrollLeft="ltr"==this._getLayoutDirection()?0:i.scrollWidth-i.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const t=this.scrollDistance,i="ltr"===this._getLayoutDirection()?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(i)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){return this._scrollTo(this._scrollDistance+("before"==t?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;const i=this._items?this._items.toArray()[t]:null;if(!i)return;const r=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:s,offsetWidth:o}=i.elementRef.nativeElement;let a,l;"ltr"==this._getLayoutDirection()?(a=s,l=a+o):(l=this._tabListInner.nativeElement.offsetWidth-s,a=l-o);const c=this.scrollDistance,u=this.scrollDistance+r;a<c?this.scrollDistance-=c-a+60:l>u&&(this.scrollDistance+=l-u+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const t=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=t}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,i=t?t.elementRef.nativeElement:null;i?this._inkBar.alignToElement(i):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,i){i&&null!=i.button&&0!==i.button||(this._stopInterval(),w0(650,100).pipe(xt(Nr(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:r,distance:s}=this._scrollHeader(t);(0===s||s>=r)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const i=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(i,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:i,distance:this._scrollDistance}}}return n.\u0275fac=function(t){return new(t||n)(g(ce),g(Qt),g(Au),g(nr,8),g(Z),g(Dn),g(ni,8))},n.\u0275dir=N({type:n,inputs:{disablePagination:"disablePagination"}}),n})(),iIe=(()=>{class n extends nIe{constructor(t,i,r,s,o,a,l){super(t,i,r,s,o,a,l),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=on(t)}_itemSelected(t){t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)(g(ce),g(Qt),g(Au),g(nr,8),g(Z),g(Dn),g(ni,8))},n.\u0275dir=N({type:n,inputs:{disableRipple:"disableRipple"},features:[X]}),n})(),rIe=(()=>{class n extends iIe{constructor(t,i,r,s,o,a,l){super(t,i,r,s,o,a,l)}}return n.\u0275fac=function(t){return new(t||n)(g(ce),g(Qt),g(Au),g(nr,8),g(Z),g(Dn),g(ni,8))},n.\u0275cmp=Ie({type:n,selectors:[["mat-tab-header"]],contentQueries:function(t,i,r){if(1&t&&St(r,A8,4),2&t){let s;fe(s=pe())&&(i._items=s)}},viewQuery:function(t,i){if(1&t&&(jt(E8,7),jt(PTe,7),jt(OTe,7),jt(NTe,7),jt(FTe,5),jt(LTe,5)),2&t){let r;fe(r=pe())&&(i._inkBar=r.first),fe(r=pe())&&(i._tabListContainer=r.first),fe(r=pe())&&(i._tabList=r.first),fe(r=pe())&&(i._tabListInner=r.first),fe(r=pe())&&(i._nextPaginator=r.first),fe(r=pe())&&(i._previousPaginator=r.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(t,i){2&t&&Xe("mat-tab-header-pagination-controls-enabled",i._showPaginationControls)("mat-tab-header-rtl","rtl"==i._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[X],ngContentSelectors:C8,decls:14,vars:10,consts:[["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","disabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["tabListInner",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","disabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(t,i){1&t&&(Tn(),C(0,"button",0,1),G("click",function(){return i._handlePaginatorClick("before")})("mousedown",function(s){return i._handlePaginatorPress("before",s)})("touchend",function(){return i._stopInterval()}),j(2,"div",2),w(),C(3,"div",3,4),G("keydown",function(s){return i._handleKeydown(s)}),C(5,"div",5,6),G("cdkObserveContent",function(){return i._onContentChanges()}),C(7,"div",7,8),He(9),w(),j(10,"mat-ink-bar"),w()(),C(11,"button",9,10),G("mousedown",function(s){return i._handlePaginatorPress("after",s)})("click",function(){return i._handlePaginatorClick("after")})("touchend",function(){return i._stopInterval()}),j(13,"div",2),w()),2&t&&(Xe("mat-tab-header-pagination-disabled",i._disableScrollBefore),L("matRippleDisabled",i._disableScrollBefore||i.disableRipple)("disabled",i._disableScrollBefore||null),k(5),Xe("_mat-animation-noopable","NoopAnimations"===i._animationMode),k(6),Xe("mat-tab-header-pagination-disabled",i._disableScrollAfter),L("matRippleDisabled",i._disableScrollAfter||i.disableRipple)("disabled",i._disableScrollAfter||null))},directives:[cf,vB,E8],styles:[".mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-tab-header-pagination::-moz-focus-inner{border:0}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}._mat-animation-noopable.mat-tab-list{transition:none;animation:none}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{min-width:72px}}\n"],encapsulation:2}),n})(),sIe=0;class oIe{}const aIe=af(gT(class{constructor(n){this._elementRef=n}}),"primary");let lIe=(()=>{class n extends aIe{constructor(t,i,r,s){var o;super(t),this._changeDetectorRef=i,this._animationMode=s,this._tabs=new Yo,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=et.EMPTY,this._tabLabelSubscription=et.EMPTY,this._selectedIndex=null,this.headerPosition="above",this.selectedIndexChange=new ie,this.focusChange=new ie,this.animationDone=new ie,this.selectedTabChange=new ie(!0),this._groupId=sIe++,this.animationDuration=r&&r.animationDuration?r.animationDuration:"500ms",this.disablePagination=!(!r||null==r.disablePagination)&&r.disablePagination,this.dynamicHeight=!(!r||null==r.dynamicHeight)&&r.dynamicHeight,this.contentTabIndex=null!==(o=null==r?void 0:r.contentTabIndex)&&void 0!==o?o:null}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(t){this._dynamicHeight=on(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._indexToSelect=Jo(t,null)}get animationDuration(){return this._animationDuration}set animationDuration(t){this._animationDuration=/^\d+$/.test(t+"")?t+"ms":t}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(t){this._contentTabIndex=Jo(t,null)}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){const i=this._elementRef.nativeElement;i.classList.remove(`mat-background-${this.backgroundColor}`),t&&i.classList.add(`mat-background-${t}`),this._backgroundColor=t}ngAfterContentChecked(){const t=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=t){const i=null==this._selectedIndex;if(!i){this.selectedTabChange.emit(this._createChangeEvent(t));const r=this._tabBodyWrapper.nativeElement;r.style.minHeight=r.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((r,s)=>r.isActive=s===t),i||(this.selectedIndexChange.emit(t),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((i,r)=>{i.position=r-t,null!=this._selectedIndex&&0==i.position&&!i.origin&&(i.origin=t-this._selectedIndex)}),this._selectedIndex!==t&&(this._selectedIndex=t,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{const t=this._clampTabIndex(this._indexToSelect);if(t===this._selectedIndex){const i=this._tabs.toArray();let r;for(let s=0;s<i.length;s++)if(i[s].isActive){this._indexToSelect=this._selectedIndex=s,this._lastFocusedTabIndex=null,r=i[s];break}!r&&i[t]&&Promise.resolve().then(()=>{i[t].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(t))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(Pi(this._allTabs)).subscribe(t=>{this._tabs.reset(t.filter(i=>i._closestTabGroup===this||!i._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(t){const i=this._tabHeader;i&&(i.focusIndex=t)}_focusChanged(t){this._lastFocusedTabIndex=t,this.focusChange.emit(this._createChangeEvent(t))}_createChangeEvent(t){const i=new oIe;return i.index=t,this._tabs&&this._tabs.length&&(i.tab=this._tabs.toArray()[t]),i}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=Nr(...this._tabs.map(t=>t._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(t){return Math.min(this._tabs.length-1,Math.max(t||0,0))}_getTabLabelId(t){return`mat-tab-label-${this._groupId}-${t}`}_getTabContentId(t){return`mat-tab-content-${this._groupId}-${t}`}_setTabBodyWrapperHeight(t){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const i=this._tabBodyWrapper.nativeElement;i.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(i.style.height=t+"px")}_removeTabBodyWrapperHeight(){const t=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=t.clientHeight,t.style.height="",this.animationDone.emit()}_handleClick(t,i,r){t.disabled||(this.selectedIndex=i.focusIndex=r)}_getTabIndex(t,i){var r;return t.disabled?null:i===(null!==(r=this._lastFocusedTabIndex)&&void 0!==r?r:this.selectedIndex)?0:-1}_tabFocusChanged(t,i){t&&"mouse"!==t&&"touch"!==t&&(this._tabHeader.focusIndex=i)}}return n.\u0275fac=function(t){return new(t||n)(g(ce),g(Qt),g(M8,8),g(ni,8))},n.\u0275dir=N({type:n,inputs:{dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[X]}),n})(),cIe=(()=>{class n extends lIe{constructor(t,i,r,s){super(t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)(g(ce),g(Qt),g(M8,8),g(ni,8))},n.\u0275cmp=Ie({type:n,selectors:[["mat-tab-group"]],contentQueries:function(t,i,r){if(1&t&&St(r,S8,5),2&t){let s;fe(s=pe())&&(i._allTabs=s)}},viewQuery:function(t,i){if(1&t&&(jt(VTe,5),jt(BTe,5)),2&t){let r;fe(r=pe())&&(i._tabBodyWrapper=r.first),fe(r=pe())&&(i._tabHeader=r.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(t,i){2&t&&Xe("mat-tab-group-dynamic-height",i.dynamicHeight)("mat-tab-group-inverted-header","below"===i.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[je([{provide:D8,useExisting:n}]),X],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","ngClass","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","ngClass","content","position","origin","animationDuration","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","ngClass","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf","ngIfElse"],["tabTextLabel",""],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","ngClass","content","position","origin","animationDuration","_onCentered","_onCentering"]],template:function(t,i){1&t&&(C(0,"mat-tab-header",0,1),G("indexFocused",function(s){return i._focusChanged(s)})("selectFocusedIndex",function(s){return i.selectedIndex=s}),be(2,$Te,5,15,"div",2),w(),C(3,"div",3,4),be(5,zTe,1,10,"mat-tab-body",5),w()),2&t&&(L("selectedIndex",i.selectedIndex||0)("disableRipple",i.disableRipple)("disablePagination",i.disablePagination),k(2),L("ngForOf",i._tabs),k(1),Xe("_mat-animation-noopable","NoopAnimations"===i._animationMode),k(2),L("ngForOf",i._tabs))},directives:[rIe,x8,ul,A8,cf,Zse,Su,Er,Ru],styles:[".mat-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-tab-body-wrapper{transition:none;animation:none}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}\n"],encapsulation:2}),n})(),uIe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[_s,_t,C_,yT,U0,Jse],_t]}),n})(),P8=(()=>{class n{constructor(t){this.dialogRef=t}ngOnInit(){}onConfirm(){this.dialogRef.close(!0)}onDismiss(){this.dialogRef.close(!1)}}return n.\u0275fac=function(t){return new(t||n)(g(uf))},n.\u0275cmp=Ie({type:n,selectors:[["app-ConfirmDialog"]],decls:9,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,i){1&t&&(C(0,"h1",0),R(1,"Sure ?"),w(),C(2,"div",1),R(3," You really wanna delete the chat ?\n"),w(),C(4,"div",2)(5,"button",3),G("click",function(){return i.onDismiss()}),R(6,"No"),w(),C(7,"button",4),G("click",function(){return i.onConfirm()}),R(8,"Yes"),w()())},directives:[Bs],styles:[""]}),n})();const dIe=["chat"],hIe=function(n,e){return{righty:n,lefty:e}},fIe=function(n,e){return{s1:n,s2:e}};function pIe(n,e){if(1&n){const t=En();C(0,"div")(1,"div",14)(2,"div",14)(3,"b"),R(4),C(5,"mat-icon",15),G("click",function(){const s=st(t).$implicit;return Se().delete_chat(s.key)}),R(6,"delete"),w()(),j(7,"br"),R(8),w(),j(9,"br"),w()()}if(2&n){const t=e.$implicit,i=Se();k(1),L("ngClass",al(4,hIe,i.username==t.username,i.username!=t.username)),k(1),L("ngClass",al(7,fIe,i.username==t.username,i.username!=t.username)),k(2),Hn("",t.username," "),k(4),Hn(" ",t.chat," ")}}let mIe=(()=>{class n{constructor(t){this.dialog=t,this.username="",this.x=[],this.all_chats=[],this.app=xr(ii_firebase),this.database=Fi(this.app)}ngOnInit(){kr(Et(this.database,"/Chats"),i=>{this.x=[],i.forEach(r=>{const s=r.val();s.key=r.key,this.x.push(s)})})}add_to_chat(t){this.all_chats.push(t);let r=eD(Et(this.database,"Chats/"));""==t?alert("Trying to send empty text!"):(Is(r,{username:this.username,chat:t}),this.chat_line.nativeElement.value="",kr(Et(this.database,"/Chats"),o=>{this.x=[],o.forEach(a=>{const l=a.val();this.x.push(l),l.key=a.key})}))}delete_chat(t){this.dialog.open(P8,{width:"250px"}).afterClosed().subscribe(r=>{r&&Wj(Et(this.database,"/Chats/"+t+"/"))})}ngOnChanges(){kr(Et(this.database,"/Chats"),i=>{this.x=[],i.forEach(r=>{const s=r.val();this.x.push(s),s.key=r.key})})}}return n.\u0275fac=function(t){return new(t||n)(g(vl))},n.\u0275cmp=Ie({type:n,selectors:[["app-chat"]],viewQuery:function(t,i){if(1&t&&jt(dIe,5),2&t){let r;fe(r=pe())&&(i.chat_line=r.first)}},inputs:{username:"username"},features:[Kt],decls:21,vars:2,consts:[[1,"example-container"],["mode","push","hasBackdrop","true","position","end",1,"chat_sidenav"],["drawer",""],[1,"chat_title"],["mat-fab","",1,"back-but",3,"click"],[2,"cursor","pointer"],[1,"msgbox"],[4,"ngFor","ngForOf"],[1,"sendmsg"],["placeholder","Enter your text.....","id","chat_line",2,"width","max",3,"keyup.enter"],["chat",""],[3,"click"],[1,"example-sidenav-content"],["type","button","mat-raised-button","","color","primary",1,"chat-button",3,"disabled","click"],[3,"ngClass"],[2,"cursor","pointer",3,"click"]],template:function(t,i){if(1&t){const r=En();C(0,"mat-drawer-container",0)(1,"mat-drawer",1,2)(3,"div",3)(4,"button",4),G("click",function(){return st(r),mt(2).toggle()}),C(5,"mat-icon",5),R(6,"navigate_next"),w()()(),C(7,"div",6),be(8,pIe,10,10,"div",7),j(9,"br"),w(),C(10,"div",8)(11,"input",9,10),G("keyup.enter",function(){st(r);const o=mt(12);return i.add_to_chat(o.value)}),w(),C(13,"button",11),G("click",function(){st(r);const o=mt(12);return i.add_to_chat(o.value)}),C(14,"mat-icon",5),R(15,"send"),w()()()(),C(16,"div",12)(17,"button",13),G("click",function(){return st(r),mt(2).toggle()}),R(18," Open Chats "),C(19,"mat-icon"),R(20," message"),w()()()()}2&t&&(k(8),L("ngForOf",i.x.slice().reverse()),k(9),L("disabled",""==i.username))},directives:[Bb,Vb,Bs,So,ul,Su],styles:[".s1[_ngcontent-%COMP%]{color:#000;width:-moz-fit-content;width:fit-content;border:1px solid black;padding:10px;background-color:#f7e8a2;border-radius:20px}.s2[_ngcontent-%COMP%]{color:#000;width:-moz-fit-content;width:fit-content;border:1px solid black;padding:10px;background-color:#e9a2f7;border-radius:20px}.s1[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#c0f}.s2[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#8f032d}.s1[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{height:auto;width:50%}.s1[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:block;color:red;float:right;font-size:120%}.s2[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:none}.sendmsg[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;align-items:center;background-color:#fff}.sendmsg[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{vertical-align:middle;margin:5px 10px 5px 0;padding:10px;width:75%;background-color:#fff;border:1px solid #fff}.sendmsg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#1e8fff00;border:1px solid rgba(221,221,221,0);border-radius:50px;color:#c0f}.sendmsg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#869ca8}.hed[_ngcontent-%COMP%]{color:#000;text-align:center;size:large;position:fixed;background-color:#edc1ff;border-bottom:1px solid black}.msgbox[_ngcontent-%COMP%]{overflow-y:scroll;height:60vh;display:flex;flex-direction:column-reverse;background-color:#e2beff;margin-left:5px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:1px}.example-container[_ngcontent-%COMP%]{height:80vh;background-color:#e889f5;border-radius:20px}.chat_sidenav[_ngcontent-%COMP%]{width:100%}mat-drawer[_ngcontent-%COMP%]{background-color:#000}.example-sidenav-content[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center;justify-content:center}.chat-button[_ngcontent-%COMP%]{border-radius:30px;cursor:pointer}.chat_title[_ngcontent-%COMP%]{display:flex;justify-content:right}.back-but[_ngcontent-%COMP%]{border-radius:30px}.lefty[_ngcontent-%COMP%]{float:left}.righty[_ngcontent-%COMP%]{float:right}"]}),n})();const gIe=["chat"],_Ie=function(n,e){return{righty:n,lefty:e}},yIe=function(n,e){return{s1:n,s2:e}};function vIe(n,e){if(1&n){const t=En();C(0,"div")(1,"div",13)(2,"div",13)(3,"b"),R(4),C(5,"mat-icon",14),G("click",function(){const s=st(t).$implicit;return Se().delete_chat(s.key)}),R(6,"delete"),w()(),j(7,"br"),R(8),w(),j(9,"br"),w()()}if(2&n){const t=e.$implicit,i=Se();k(1),L("ngClass",al(4,_Ie,i.username==t.username,i.username!=t.username)),k(1),L("ngClass",al(7,yIe,i.username==t.username,i.username!=t.username)),k(2),Hn("",t.username," "),k(4),Hn(" ",t.chat," ")}}function bIe(n,e){if(1&n){const t=En();C(0,"div",15)(1,"button",16),G("click",function(){const s=st(t).$implicit,o=Se();return mt(2).toggle(),o.fetch_chats(s.email)}),R(2),C(3,"mat-icon"),R(4," message"),w()(),j(5,"br"),w()}if(2&n){const t=e.$implicit,i=Se();k(1),L("disabled",""==i.username),k(1),Hn(" ",t.username," ")}}let wIe=(()=>{class n{constructor(t,i){this.dialog=t,this.userdataserv=i,this.username="",this.keymail="",this.x=[],this.all_chats=[],this.app=xr(ii_firebase),this.database=Fi(this.app),this.userlist=[],this.message_key=""}ngOnInit(){this.keymail=this.keymail.replaceAll(".",""),this.userlist=this.userdataserv.get_all_users(this.keymail)}fetch_chats(t){let s=[this.keymail,t.replaceAll(".","")].sort().join("_");this.message_key=s,kr(Et(this.database,"/OneToOne/"+s),a=>{this.x=[],a.forEach(l=>{const c=l.val();c.key=l.key,this.x.push(c)})}),console.log(this.x)}add_to_chat(t){this.all_chats.push(t);let r=eD(Et(this.database,"/OneToOne/"+this.message_key));""==t?alert("Trying to send empty text!"):(Is(r,{username:this.username,chat:t}),this.chat_line.nativeElement.value="",kr(Et(this.database,"/OneToOne/"+this.message_key),o=>{this.x=[],o.forEach(a=>{const l=a.val();this.x.push(l),l.key=a.key})}))}delete_chat(t){this.dialog.open(P8,{width:"250px"}).afterClosed().subscribe(r=>{r&&(Wj(Et(this.database,"/OneToOne/"+this.message_key+"/"+t+"/")),kr(Et(this.database,"/OneToOne/"+this.message_key),a=>{this.x=[],a.forEach(l=>{const c=l.val();this.x.push(c),c.key=l.key})}))})}ngOnChanges(){kr(Et(this.database,"/OneToOne/"+this.message_key),i=>{this.x=[],i.forEach(r=>{const s=r.val();this.x.push(s),s.key=r.key})})}}return n.\u0275fac=function(t){return new(t||n)(g(vl),g(ts))},n.\u0275cmp=Ie({type:n,selectors:[["app-oneone"]],viewQuery:function(t,i){if(1&t&&jt(gIe,5),2&t){let r;fe(r=pe())&&(i.chat_line=r.first)}},inputs:{username:"username",keymail:"keymail"},features:[Kt],decls:17,vars:2,consts:[[1,"example-container"],["mode","push","hasBackdrop","true","position","end",1,"chat_sidenav"],["drawer",""],[1,"chat_title"],["mat-fab","",1,"back-but",3,"click"],[2,"cursor","pointer"],[1,"msgbox"],[4,"ngFor","ngForOf"],[1,"sendmsg"],["placeholder","Enter your text.....","id","chat_line",2,"width","max",3,"keyup.enter"],["chat",""],[3,"click"],["class","maincontent",4,"ngFor","ngForOf"],[3,"ngClass"],[2,"cursor","pointer",3,"click"],[1,"maincontent"],["type","button","mat-raised-button","","color","primary",1,"chat-button",3,"disabled","click"]],template:function(t,i){if(1&t){const r=En();C(0,"mat-drawer-container",0)(1,"mat-drawer",1,2)(3,"div",3)(4,"button",4),G("click",function(){return st(r),mt(2).toggle()}),C(5,"mat-icon",5),R(6,"navigate_next"),w()()(),C(7,"div",6),be(8,vIe,10,10,"div",7),j(9,"br"),w(),C(10,"div",8)(11,"input",9,10),G("keyup.enter",function(){st(r);const o=mt(12);return i.add_to_chat(o.value)}),w(),C(13,"button",11),G("click",function(){st(r);const o=mt(12);return i.add_to_chat(o.value)}),C(14,"mat-icon",5),R(15,"send"),w()()()(),be(16,bIe,6,2,"div",12),w()}2&t&&(k(8),L("ngForOf",i.x.slice().reverse()),k(8),L("ngForOf",i.userlist))},directives:[Bb,Vb,Bs,So,ul,Su],styles:[".s1[_ngcontent-%COMP%]{color:#000;width:-moz-fit-content;width:fit-content;border:1px solid black;padding:10px;background-color:#f7e8a2;border-radius:20px}.s2[_ngcontent-%COMP%]{color:#000;width:-moz-fit-content;width:fit-content;border:1px solid black;padding:10px;background-color:#e9a2f7;border-radius:20px}.s1[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#c0f}.s2[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#8f032d}.s1[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{height:auto;width:50%}.s1[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:block;color:red;float:right;font-size:120%}.s2[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:none}.sendmsg[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;align-items:center;background-color:#fff}.sendmsg[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{vertical-align:middle;margin:5px 10px 5px 0;padding:10px;width:75%;background-color:#fff;border:1px solid #fff}.sendmsg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#1e8fff00;border:1px solid rgba(221,221,221,0);border-radius:50px;color:#c0f}.sendmsg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#869ca8}.maincontent[_ngcontent-%COMP%]{padding:2px}.hed[_ngcontent-%COMP%]{color:#000;text-align:center;size:large;position:fixed;background-color:#edc1ff;border-bottom:1px solid black}.msgbox[_ngcontent-%COMP%]{overflow-y:scroll;height:60vh;display:flex;flex-direction:column-reverse;background-color:#e2beff;margin-left:5px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:1px}.example-container[_ngcontent-%COMP%]{height:80vh;background-color:#e889f5;border-radius:20px}.chat_sidenav[_ngcontent-%COMP%]{width:100%}mat-drawer[_ngcontent-%COMP%]{background-color:#000}.example-sidenav-content[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center;justify-content:center}.chat-button[_ngcontent-%COMP%]{cursor:pointer;padding:5px;width:100%;height:7vh;border-radius:20px;font-size:larger}.chat_title[_ngcontent-%COMP%]{display:flex;justify-content:right}.back-but[_ngcontent-%COMP%]{border-radius:30px}.lefty[_ngcontent-%COMP%]{float:left}.righty[_ngcontent-%COMP%]{float:right}"]}),n})();function CIe(n,e){1&n&&(C(0,"mat-icon"),R(1,"people"),w(),R(2," Global Chat "))}function EIe(n,e){1&n&&(C(0,"mat-icon"),R(1,"person"),w(),R(2," One on One Chat "))}function TIe(n,e){if(1&n&&(C(0,"div",4,5)(2,"h1"),R(3),w(),C(4,"mat-tab-group",6)(5,"mat-tab"),be(6,CIe,3,0,"ng-template",7),j(7,"app-chat",8),w(),C(8,"mat-tab"),be(9,EIe,3,0,"ng-template",7),j(10,"app-oneone",9),w()()()),2&n){const t=Se();k(3),Hn("Welcome ",t.logged_in_user.username,""),k(4),L("username",t.logged_in_user.username),k(3),L("username",t.logged_in_user.username)("keymail",t.email)}}const IIe=function(n,e){return{posts_col2:n,posts_col1:e}};let O8=(()=>{class n{constructor(t,i,r){this.route=t,this.router=i,this.ud=r,this.username=this.ud.username,this.email="",this.logged_in_user={username:""},this.app=xr(ii_firebase),this.db=Fi(this.app)}ngOnInit(){this.route.queryParamMap.subscribe(t=>this.email=t.get("email")),console.log("user_email:",this.ud.email),""==this.ud.email?console.log("Not Logged In"):this.fetch_user_details(this.ud.email)}fetch_user_details(t){let i=t.replaceAll(".","");this.ud.fetch_userdata_with_keymail(i),this.logged_in_user=this.ud}ngOnChanges(){console.log("Changed")}go_to_profile(){this.router.navigate(["/profile"])}}return n.\u0275fac=function(t){return new(t||n)(g(Co),g(wt),g(ts))},n.\u0275cmp=Ie({type:n,selectors:[["app-home"]],features:[Kt],decls:5,vars:5,consts:[[1,"main-row"],[3,"ngClass"],["posts",""],["class","chat_col",4,"ngIf"],[1,"chat_col"],["chats",""],["mat-align-tabs","center"],["mat-tab-label",""],[3,"username"],[3,"username","keymail"]],template:function(t,i){1&t&&(C(0,"div",0)(1,"div",1,2),j(3,"app-post_list"),w(),be(4,TIe,11,4,"div",3),w()),2&t&&(k(1),L("ngClass",al(2,IIe,""==i.logged_in_user.username,""!=i.logged_in_user.username)),k(3),L("ngIf",""!=i.logged_in_user.username))},directives:[Su,xTe,Er,cIe,S8,KTe,So,mIe,wIe],styles:['.main-row[_ngcontent-%COMP%]{width:100%}.posts_col1[_ngcontent-%COMP%]{float:left;height:100vh;width:70%}.posts_col2[_ngcontent-%COMP%]{float:left;height:100vh;width:100%}.chat_col[_ngcontent-%COMP%]{float:left;height:90vh;width:30%;background-color:#ffdaf6}.row[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}[_ngcontent-%COMP%]::-webkit-scrollbar{width:1px}.chat_button[_ngcontent-%COMP%]{float:right}.prof_button[_ngcontent-%COMP%]{float:left}h1[_ngcontent-%COMP%]{text-align:center;font-weight:700}']}),n})();const DIe=function N8(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},F8=new Sr("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),L8=new ra("@firebase/auth");function Hb(n,...e){L8.logLevel<=Be.ERROR&&L8.error(`Auth (${vs}): ${n}`,...e)}function $i(n,...e){throw tA(n,...e)}function Hs(n,...e){return tA(n,...e)}function V8(n,e,t){const i=Object.assign(Object.assign({},DIe()),{[e]:t});return new Sr("auth","Firebase",i).create(e,{appName:n.name})}function tA(n,...e){if("string"!=typeof n){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return F8.create(n,...e)}function V(n,e,...t){if(!n)throw tA(e,...t)}function js(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Hb(e),new Error(e)}function ja(n,e){n||js(e)}const B8=new Map;function xo(n){ja(n instanceof Function,"Expected a class definition");let e=B8.get(n);return e?(ja(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,B8.set(n,e),e)}function wm(){var n;return"undefined"!=typeof self&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function U8(){var n;return"undefined"!=typeof self&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class Cm{constructor(e,t){this.shortDelay=e,this.longDelay=t,ja(t>e,"Short delay should be less than long delay!"),this.isMobile=IT()||RU()}get(){return function MIe(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function nA(){return"http:"===U8()||"https:"===U8()}()||DT()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function iA(n,e){ja(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class H8{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void js("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void js("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void js("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const kIe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},RIe=new Cm(3e4,6e4);function vn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Fn(n,e,t,i){return rA.apply(this,arguments)}function rA(){return rA=m(function*(n,e,t,i,r={}){return j8(n,r,m(function*(){let s={},o={};i&&("GET"===e?o=i:s={body:JSON.stringify(i)});const a=pf(Object.assign({key:n.config.apiKey},o)).slice(1),l=yield n._getAdditionalHeaders();return l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode),H8.fetch()($8(n,n.config.apiHost,t,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))}))}),rA.apply(this,arguments)}function j8(n,e,t){return sA.apply(this,arguments)}function sA(){return sA=m(function*(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},kIe),e);try{const r=new PIe(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw Em(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===l)throw Em(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===l)throw Em(n,"email-already-in-use",o);if("USER_DISABLED"===l)throw Em(n,"user-disabled",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw V8(n,u,c);$i(n,u)}}catch(r){if(r instanceof Oi)throw r;$i(n,"network-request-failed")}}),sA.apply(this,arguments)}function Mo(n,e,t,i){return oA.apply(this,arguments)}function oA(){return oA=m(function*(n,e,t,i,r={}){const s=yield Fn(n,e,t,i,r);return"mfaPendingCredential"in s&&$i(n,"multi-factor-auth-required",{_serverResponse:s}),s}),oA.apply(this,arguments)}function $8(n,e,t,i){const r=`${e}${t}?${i}`;return n.config.emulator?iA(n.config,r):`${n.config.apiScheme}://${r}`}class PIe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Hs(this.auth,"network-request-failed")),RIe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Em(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=Hs(n,e,i);return r.customData._tokenResponse=t,r}function aA(){return aA=m(function*(n,e){return Fn(n,"POST","/v1/accounts:delete",e)}),aA.apply(this,arguments)}function FIe(n,e){return cA.apply(this,arguments)}function cA(){return cA=m(function*(n,e){return Fn(n,"POST","/v1/accounts:lookup",e)}),cA.apply(this,arguments)}function Tm(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function uA(){return uA=m(function*(n,e=!1){const t=Ce(n),i=yield t.getIdToken(e),r=jb(i);V(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const s="object"==typeof r.firebase?r.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Tm(dA(r.auth_time)),issuedAtTime:Tm(dA(r.iat)),expirationTime:Tm(dA(r.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}),uA.apply(this,arguments)}function dA(n){return 1e3*Number(n)}function jb(n){var e;const[t,i,r]=n.split(".");if(void 0===t||void 0===i||void 0===r)return Hb("JWT malformed, contained fewer than 3 sections"),null;try{const s=TT(i);return s?JSON.parse(s):(Hb("Failed to decode base64 JWT payload"),null)}catch(s){return Hb("Caught error parsing JWT payload as JSON",null===(e=s)||void 0===e?void 0:e.toString()),null}}function Ao(n,e){return hA.apply(this,arguments)}function hA(){return hA=m(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(i){throw i instanceof Oi&&BIe(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}}),hA.apply(this,arguments)}function BIe({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}class UIe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),i}{this.errorBackoff=3e4;const r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const i=this.getInterval(e);this.timerId=setTimeout(m(function*(){yield t.iteration()}),i)}iteration(){var e=this;return m(function*(){var t;try{yield e.user.getIdToken(!0)}catch(i){return void("auth/network-request-failed"===(null===(t=i)||void 0===t?void 0:t.code)&&e.schedule(!0))}e.schedule()})()}}class z8{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tm(this.lastLoginAt),this.creationTime=Tm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Im(n){return fA.apply(this,arguments)}function fA(){return fA=m(function*(n){var e;const t=n.auth,i=yield n.getIdToken(),r=yield Ao(n,FIe(t,{idToken:i}));V(null==r?void 0:r.users.length,t,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?$Ie(s.providerUserInfo):[],a=jIe(n.providerData,o),u=!!n.isAnonymous&&!(n.email&&s.passwordHash||(null==a?void 0:a.length)),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new z8(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)}),fA.apply(this,arguments)}function pA(){return pA=m(function*(n){const e=Ce(n);yield Im(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}),pA.apply(this,arguments)}function jIe(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function $Ie(n){return n.map(e=>{var{providerId:t}=e,i=CP(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function mA(){return mA=m(function*(n,e){const t=yield j8(n,{},m(function*(){const i=pf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=$8(n,r,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",H8.fetch()(o,{method:"POST",headers:a,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}),mA.apply(this,arguments)}class Dm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){V(e.idToken,"internal-error"),V(void 0!==e.idToken,"internal-error"),V(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function VIe(n){const e=jb(n);return V(e,"internal-error"),V(void 0!==e.exp,"internal-error"),V(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var i=this;return m(function*(){return V(!i.accessToken||i.refreshToken,e,"user-token-expired"),t||!i.accessToken||i.isExpired?i.refreshToken?(yield i.refresh(e,i.refreshToken),i.accessToken):null:i.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var i=this;return m(function*(){const{accessToken:r,refreshToken:s,expiresIn:o}=yield function zIe(n,e){return mA.apply(this,arguments)}(e,t);i.updateTokensAndExpiration(r,s,Number(o))})()}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*i}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new Dm;return i&&(V("string"==typeof i,"internal-error",{appName:e}),o.refreshToken=i),r&&(V("string"==typeof r,"internal-error",{appName:e}),o.accessToken=r),s&&(V("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Dm,this.toJSON())}_performRefresh(){return js("not implemented")}}function $a(n,e){V("string"==typeof n||void 0===n,"internal-error",{appName:e})}class bc{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=CP(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new UIe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new z8(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return m(function*(){const i=yield Ao(t,t.stsTokenManager.getToken(t.auth,e));return V(i,t.auth,"internal-error"),t.accessToken!==i&&(t.accessToken=i,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),i})()}getIdTokenResult(e){return function LIe(n){return uA.apply(this,arguments)}(this,e)}reload(){return function HIe(n){return pA.apply(this,arguments)}(this)}_assign(e){this!==e&&(V(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new bc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var i=this;return m(function*(){let r=!1;e.idToken&&e.idToken!==i.stsTokenManager.accessToken&&(i.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Im(i)),yield i.auth._persistUserIfCurrent(i),r&&i.auth._notifyListenersIfCurrent(i)})()}delete(){var e=this;return m(function*(){const t=yield e.getIdToken();return yield Ao(e,function OIe(n,e){return aA.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,a,l,c,u;const d=null!==(i=t.displayName)&&void 0!==i?i:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,_=null!==(a=t.tenantId)&&void 0!==a?a:void 0,y=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,b=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:D,emailVerified:S,isAnonymous:F,providerData:W,stsTokenManager:ae}=t;V(D&&ae,e,"internal-error");const ft=Dm.fromJSON(this.name,ae);V("string"==typeof D,e,"internal-error"),$a(d,e.name),$a(h,e.name),V("boolean"==typeof S,e,"internal-error"),V("boolean"==typeof F,e,"internal-error"),$a(f,e.name),$a(p,e.name),$a(_,e.name),$a(y,e.name),$a(b,e.name),$a(v,e.name);const en=new bc({uid:D,auth:e,email:h,emailVerified:S,displayName:d,isAnonymous:F,photoURL:p,phoneNumber:f,tenantId:_,stsTokenManager:ft,createdAt:b,lastLoginAt:v});return W&&Array.isArray(W)&&(en.providerData=W.map(Ii=>Object.assign({},Ii))),y&&(en._redirectEventId=y),en}static _fromIdTokenResponse(e,t,i=!1){return m(function*(){const r=new Dm;r.updateFromServerResponse(t);const s=new bc({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Im(s),s})()}}const G8=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(function*(){return!0})()}_set(t,i){var r=this;return m(function*(){r.storage[t]=i})()}_get(t){var i=this;return m(function*(){const r=i.storage[t];return void 0===r?null:r})()}_remove(t){var i=this;return m(function*(){delete i.storage[t]})()}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})();function $b(n,e,t){return`firebase:${n}:${e}:${t}`}class jd{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=$b(this.userKey,r.apiKey,s),this.fullPersistenceKey=$b("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return m(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?bc._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return m(function*(){if(t.persistence===e)return;const i=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,i?t.setCurrentUser(i):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return m(function*(){if(!t.length)return new jd(xo(G8),e,i);const r=(yield Promise.all(t.map(function(){var c=m(function*(u){if(yield u._isAvailable())return u});return function(u){return c.apply(this,arguments)}}()))).filter(c=>c);let s=r[0]||xo(G8);const o=$b(i,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=yield c._get(o);if(u){const d=bc._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch(u){}const l=r.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&l.length?(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var c=m(function*(u){if(u!==s)try{yield u._remove(o)}catch(d){}});return function(u){return c.apply(this,arguments)}}())),new jd(s,e,i)):new jd(s,e,i)})()}}function W8(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Q8(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(q8(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(X8(e))return"Blackberry";if(Z8(e))return"Webos";if(gA(e))return"Safari";if((e.includes("chrome/")||K8(e))&&!e.includes("edge/"))return"Chrome";if(Y8(e))return"Android";{const i=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==i?void 0:i.length))return i[1]}return"Other"}function q8(n=Xt()){return/firefox\//i.test(n)}function gA(n=Xt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function K8(n=Xt()){return/crios\//i.test(n)}function Q8(n=Xt()){return/iemobile/i.test(n)}function Y8(n=Xt()){return/android/i.test(n)}function X8(n=Xt()){return/blackberry/i.test(n)}function Z8(n=Xt()){return/webos/i.test(n)}function zb(n=Xt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function J8(n=Xt()){return zb(n)||Y8(n)||Z8(n)||X8(n)||/windows phone/i.test(n)||Q8(n)}function e6(n,e=[]){let t;switch(n){case"Browser":t=W8(Xt());break;case"Worker":t=`${W8(Xt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${vs}/${i}`}class KIe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=s=>new Promise((o,a)=>{try{o(e(s))}catch(l){a(l)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return m(function*(){var i;if(t.auth.currentUser===e)return;const r=[];try{for(const s of t.queue)yield s(e),s.onAbort&&r.push(s.onAbort)}catch(s){r.reverse();for(const o of r)try{o()}catch(a){}throw t.auth._errorFactory.create("login-blocked",{originalMessage:null===(i=s)||void 0===i?void 0:i.message})}})()}}class QIe{constructor(e,t,i){this.app=e,this.heartbeatServiceProvider=t,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new t6(this),this.idTokenSubscription=new t6(this),this.beforeStateQueue=new KIe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=F8,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var i=this;return t&&(this._popupRedirectResolver=xo(t)),this._initializationPromise=this.queue(m(function*(){var r,s;if(!i._deleted&&(i.persistenceManager=yield jd.create(i,e),!i._deleted)){if(null===(r=i._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{yield i._popupRedirectResolver._initialize(i)}catch(o){}yield i.initializeCurrentUser(t),i.lastNotifiedUid=(null===(s=i.currentUser)||void 0===s?void 0:s.uid)||null,!i._deleted&&(i._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return m(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return m(function*(){var i;const r=yield t.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId,l=null==s?void 0:s._redirectEventId,c=yield t.tryRedirectSignIn(e);(!a||a===l)&&(null==c?void 0:c.user)&&(s=c.user,o=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield t.beforeStateQueue.runMiddleware(s)}catch(a){s=r,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return V(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return m(function*(){let i=null;try{i=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(r){yield t._setRedirectUser(null)}return i})()}reloadAndSetCurrentUserOrClear(e){var t=this;return m(function*(){var i;try{yield Im(e)}catch(r){if("auth/network-request-failed"!==(null===(i=r)||void 0===i?void 0:i.code))return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function AIe(){if("undefined"==typeof navigator)return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return m(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return m(function*(){const i=e?Ce(e):null;return i&&V(i.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(i&&i._clone(t))})()}_updateCurrentUser(e,t=!1){var i=this;return m(function*(){if(!i._deleted)return e&&V(i.tenantId===e.tenantId,i,"tenant-id-mismatch"),t||(yield i.beforeStateQueue.runMiddleware(e)),i.queue(m(function*(){yield i.directlySetCurrentUser(e),i.notifyAuthListeners()}))})()}signOut(){var e=this;return m(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(m(function*(){yield t.assertedPersistence.setPersistence(xo(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Sr("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var i=this;return m(function*(){const r=yield i.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return m(function*(){if(!t.redirectPersistenceManager){const i=e&&xo(e)||t._popupRedirectResolver;V(i,t,"argument-error"),t.redirectPersistenceManager=yield jd.create(t,[xo(i._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return m(function*(){var i,r;return t._isInitialized&&(yield t.queue(m(function*(){}))),(null===(i=t._currentUser)||void 0===i?void 0:i._redirectEventId)===e?t._currentUser:(null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return m(function*(){if(e===t.currentUser)return t.queue(m(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return V(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof t?e.addObserver(t,i,r):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return m(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=e6(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return m(function*(){var t;const i={"X-Client-Version":e.clientVersion};e.app.options.appId&&(i["X-Firebase-gmpid"]=e.app.options.appId);const r=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();return r&&(i["X-Firebase-Client"]=r),i})()}}function zi(n){return Ce(n)}class t6{constructor(e){this.auth=e,this.observer=null,this.addObserver=OU(t=>this.observer=t)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class r6{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return js("not implemented")}_getIdTokenResponse(e){return js("not implemented")}_linkToIdToken(e,t){return js("not implemented")}_getReauthenticationResolver(e){return js("not implemented")}}function yA(){return yA=m(function*(n,e){return Fn(n,"POST","/v1/accounts:update",e)}),yA.apply(this,arguments)}function bA(){return bA=m(function*(n,e){return Mo(n,"POST","/v1/accounts:signInWithPassword",vn(n,e))}),bA.apply(this,arguments)}function Gb(n,e){return wA.apply(this,arguments)}function wA(){return wA=m(function*(n,e){return Fn(n,"POST","/v1/accounts:sendOobCode",vn(n,e))}),wA.apply(this,arguments)}function tDe(n,e){return EA.apply(this,arguments)}function EA(){return EA=m(function*(n,e){return Gb(n,e)}),EA.apply(this,arguments)}function DA(){return DA=m(function*(n,e){return Mo(n,"POST","/v1/accounts:signInWithEmailLink",vn(n,e))}),DA.apply(this,arguments)}function SA(){return SA=m(function*(n,e){return Mo(n,"POST","/v1/accounts:signInWithEmailLink",vn(n,e))}),SA.apply(this,arguments)}class Sm extends r6{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Sm(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Sm(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return m(function*(){switch(t.signInMethod){case"password":return function JIe(n,e){return bA.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function rDe(n,e){return DA.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:$i(e,"internal-error")}})()}_linkToIdToken(e,t){var i=this;return m(function*(){switch(i.signInMethod){case"password":return function o6(n,e){return yA.apply(this,arguments)}(e,{idToken:t,returnSecureToken:!0,email:i._email,password:i._password});case"emailLink":return function sDe(n,e){return SA.apply(this,arguments)}(e,{idToken:t,email:i._email,oobCode:i._password});default:$i(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function ko(n,e){return xA.apply(this,arguments)}function xA(){return xA=m(function*(n,e){return Mo(n,"POST","/v1/accounts:signInWithIdp",vn(n,e))}),xA.apply(this,arguments)}class Am{constructor(e){var t,i,r,s,o,a;const l=mf(gf(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(i=l.oobCode)&&void 0!==i?i:null,d=function hDe(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);V(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(s=l.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=l.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function fDe(n){const e=mf(gf(n)).link,t=e?mf(gf(e)).deep_link_id:null,i=mf(gf(n)).deep_link_id;return(i?mf(gf(i)).link:null)||i||t||e||n}(e);try{return new Am(t)}catch(i){return null}}}let a6=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return Sm._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const r=Am.parseLink(i);return V(r,"argument-error"),Sm._fromEmailAndCode(t,r.code,r.tenantId)}}return n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink",n})();class za{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class pDe extends za{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}function l6(n,e){return OA.apply(this,arguments)}function OA(){return OA=m(function*(n,e){return Mo(n,"POST","/v1/accounts:signUp",vn(n,e))}),OA.apply(this,arguments)}class Or{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return m(function*(){const s=yield bc._fromIdTokenResponse(e,i,r),o=c6(i);return new Or({user:s,providerId:o,_tokenResponse:i,operationType:t})})()}static _forOperation(e,t,i){return m(function*(){yield e._updateTokensIfNecessary(i,!0);const r=c6(i);return new Or({user:e,providerId:r,_tokenResponse:i,operationType:t})})()}}function c6(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class qb extends Oi{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,qb.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new qb(e,t,i,r)}}function u6(n,e,t,i){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?qb._fromErrorAndOperation(n,s,e,i):s})}function LA(n,e){return VA.apply(this,arguments)}function VA(){return VA=m(function*(n,e,t=!1){const i=yield Ao(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Or._forOperation(n,"link",i)}),VA.apply(this,arguments)}function UA(){return UA=m(function*(n,e,t=!1){var i;const{auth:r}=n,s="reauthenticate";try{const o=yield Ao(n,u6(r,s,e,n),t);V(o.idToken,r,"internal-error");const a=jb(o.idToken);V(a,r,"internal-error");const{sub:l}=a;return V(n.uid===l,r,"user-mismatch"),Or._forOperation(n,s,o)}catch(o){throw"auth/user-not-found"===(null===(i=o)||void 0===i?void 0:i.code)&&$i(r,"user-mismatch"),o}}),UA.apply(this,arguments)}function f6(n,e){return HA.apply(this,arguments)}function HA(){return HA=m(function*(n,e,t=!1){const i="signIn",r=yield u6(n,i,e),s=yield Or._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s}),HA.apply(this,arguments)}function $A(){return $A=m(function*(n,e){return f6(zi(n),e)}),$A.apply(this,arguments)}function Qb(n,e,t){var i;V((null===(i=t.url)||void 0===i?void 0:i.length)>0,n,"invalid-continue-uri"),V(void 0===t.dynamicLinkDomain||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(V(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(V(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function YA(){return YA=m(function*(n,e,t){const i=Ce(n),r={requestType:"PASSWORD_RESET",email:e};t&&Qb(i,r,t),yield tDe(i,r)}),YA.apply(this,arguments)}function tk(){return tk=m(function*(n,e,t){const i=zi(n),r=yield l6(i,{returnSecureToken:!0,email:e,password:t}),s=yield Or._fromIdTokenResponse(i,"signIn",r);return yield i._updateCurrentUser(s.user),s}),tk.apply(this,arguments)}const Yb="__sak";class m6{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Yb,"1"),this.storage.removeItem(Yb),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const VDe=(()=>{class n extends m6{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function NDe(){const n=Xt();return gA(n)||zb(n)}()&&function qIe(){try{return!(!window||window===window.top)}catch(n){return!1}}(),this.fallbackToPolling=J8(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key)return void this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});const r=t.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(r);if(t.newValue!==a)null!==t.newValue?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!i)return}const s=()=>{const a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);!function WIe(){return function kle(){const n=Xt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||o===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,i){var r=()=>super._set,s=this;return m(function*(){yield r().call(s,t,i),s.localCache[t]=JSON.stringify(i)})()}_get(t){var i=()=>super._get,r=this;return m(function*(){const s=yield i().call(r,t);return r.localCache[t]=JSON.stringify(s),s})()}_remove(t){var i=()=>super._remove,r=this;return m(function*(){yield i().call(r,t),delete r.localCache[t]})()}}return n.type="LOCAL",n})(),g6=(()=>{class n extends m6{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})();let UDe=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;const r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){var i=this;return m(function*(){const r=t,{eventId:s,eventType:o,data:a}=r.data,l=i.handlersMap[o];if(!(null==l?void 0:l.size))return;r.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const c=Array.from(l).map(function(){var d=m(function*(h){return h(r.origin,a)});return function(h){return d.apply(this,arguments)}}()),u=yield function BDe(n){return Promise.all(n.map(function(){var e=m(function*(t){try{return{fulfilled:!0,value:yield t}}catch(i){return{fulfilled:!1,reason:i}}});return function(t){return e.apply(this,arguments)}}()))}(c);r.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:u})})()}_subscribe(t,i){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function gk(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(10*Math.random());return n+t}class HDe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){var r=this;return m(function*(){const s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,c)=>{const u=gk("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(f.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"))}}},r.handlers.add(a),s.port1.addEventListener("message",a.onMessage),r.target.postMessage({eventType:e,eventId:u,data:t},[s.port2])}).finally(()=>{a&&r.removeMessageHandler(a)})})()}}function bn(){return window}function _k(){return void 0!==bn().WorkerGlobalScope&&"function"==typeof bn().importScripts}function yk(){return(yk=m(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(n){return null}})).apply(this,arguments)}const _6="firebaseLocalStorageDb",Xb="firebaseLocalStorage",y6="fbase_key";class Rm{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Zb(n,e){return n.transaction([Xb],e?"readwrite":"readonly").objectStore(Xb)}function vk(){const n=indexedDB.open(_6,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Xb,{keyPath:y6})}catch(r){t(r)}}),n.addEventListener("success",m(function*(){const i=n.result;i.objectStoreNames.contains(Xb)?e(i):(i.close(),yield function qDe(){const n=indexedDB.deleteDatabase(_6);return new Rm(n).toPromise()}(),e(yield vk()))}))})}function v6(n,e,t){return bk.apply(this,arguments)}function bk(){return bk=m(function*(n,e,t){const i=Zb(n,!0).put({[y6]:e,value:t});return new Rm(i).toPromise()}),bk.apply(this,arguments)}function wk(){return wk=m(function*(n,e){const t=Zb(n,!1).get(e),i=yield new Rm(t).toPromise();return void 0===i?null:i.value}),wk.apply(this,arguments)}function b6(n,e){const t=Zb(n,!0).delete(e);return new Rm(t).toPromise()}const XDe=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return m(function*(){return t.db||(t.db=yield vk()),t.db})()}_withRetries(t){var i=this;return m(function*(){let r=0;for(;;)try{const s=yield i._openDb();return yield t(s)}catch(s){if(r++>3)throw s;i.db&&(i.db.close(),i.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return m(function*(){return _k()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return m(function*(){t.receiver=UDe._getInstance(function GDe(){return _k()?self:null}()),t.receiver._subscribe("keyChanged",function(){var i=m(function*(r,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(r,s){return i.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var i=m(function*(r,s){return["keyChanged"]});return function(r,s){return i.apply(this,arguments)}}())})()}initializeSender(){var t=this;return m(function*(){var i,r;if(t.activeServiceWorker=yield function $De(){return yk.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new HDe(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);!s||(null===(i=s[0])||void 0===i?void 0:i.fulfilled)&&(null===(r=s[0])||void 0===r?void 0:r.value.includes("keyChanged"))&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var i=this;return m(function*(){if(i.sender&&i.activeServiceWorker&&function zDe(){var n;return(null===(n=null==navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null}()===i.activeServiceWorker)try{yield i.sender._send("keyChanged",{key:t},i.serviceWorkerReceiverAvailable?800:50)}catch(r){}})()}_isAvailable(){return m(function*(){try{if(!indexedDB)return!1;const t=yield vk();return yield v6(t,Yb,"1"),yield b6(t,Yb),!0}catch(t){}return!1})()}_withPendingWrite(t){var i=this;return m(function*(){i.pendingWrites++;try{yield t()}finally{i.pendingWrites--}})()}_set(t,i){var r=this;return m(function*(){return r._withPendingWrite(m(function*(){return yield r._withRetries(s=>v6(s,t,i)),r.localCache[t]=i,r.notifyServiceWorker(t)}))})()}_get(t){var i=this;return m(function*(){const r=yield i._withRetries(s=>function KDe(n,e){return wk.apply(this,arguments)}(s,t));return i.localCache[t]=r,r})()}_remove(t){var i=this;return m(function*(){return i._withPendingWrite(m(function*(){return yield i._withRetries(r=>b6(r,t)),delete i.localCache[t],i.notifyServiceWorker(t)}))})()}_poll(){var t=this;return m(function*(){const i=yield t._withRetries(o=>{const a=Zb(o,!1).getAll();return new Rm(a).toPromise()});if(!i)return[];if(0!==t.pendingWrites)return[];const r=[],s=new Set;for(const{fbase_key:o,value:a}of i)s.add(o),JSON.stringify(t.localCache[o])!==JSON.stringify(a)&&(t.notifyListeners(o,a),r.push(o));for(const o of Object.keys(t.localCache))t.localCache[o]&&!s.has(o)&&(t.notifyListeners(o,null),r.push(o));return r})()}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const s of Array.from(r))s(i)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(m(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function C6(n){return`__${n}${Math.floor(1e6*Math.random())}`}function Cc(n,e){return e?xo(e):(V(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}C6("rcb"),new Cm(3e4,6e4);class kk extends r6{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function pSe(n){return f6(n.auth,new kk(n),n.bypassAuthState)}function mSe(n){const{auth:e,user:t}=n;return V(t,e,"internal-error"),function h6(n,e){return UA.apply(this,arguments)}(t,new kk(n),n.bypassAuthState)}function gSe(n){return Rk.apply(this,arguments)}function Rk(){return Rk=m(function*(n){const{auth:e,user:t}=n;return V(t,e,"internal-error"),LA(t,new kk(n),n.bypassAuthState)}),Rk.apply(this,arguments)}new Cm(2e3,1e4);const Pm=new Map;class vSe extends class _Se{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=m(function*(i,r){e.pendingPromise={resolve:i,reject:r};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(i,r){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return m(function*(){const{urlResponse:i,sessionId:r,postBody:s,tenantId:o,error:a,type:l}=e;if(a)return void t.reject(a);const c={auth:t.auth,requestUri:i,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(l)(c))}catch(u){t.reject(u)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pSe;case"linkViaPopup":case"linkViaRedirect":return gSe;case"reauthViaPopup":case"reauthViaRedirect":return mSe;default:$i(this.auth,"internal-error")}}resolve(e){ja(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ja(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){var e=()=>super.execute,t=this;return m(function*(){let i=Pm.get(t.auth._key());if(!i){try{const s=(yield function bSe(n,e){return Lk.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;i=()=>Promise.resolve(s)}catch(r){i=()=>Promise.reject(r)}Pm.set(t.auth._key(),i)}return t.bypassAuthState||Pm.set(t.auth._key(),()=>Promise.resolve(null)),i()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,i=this;return m(function*(){if("signInViaRedirect"===e.type)return t().call(i,e);if("unknown"!==e.type){if(e.eventId){const r=yield i.auth._redirectUserForId(e.eventId);if(r)return i.user=r,t().call(i,e);i.resolve(null)}}else i.resolve(null)})()}onExecution(){return m(function*(){})()}cleanUp(){}}function Lk(){return Lk=m(function*(n,e){const t=I6(e),i=T6(n);if(!(yield i._isAvailable()))return!1;const r="true"===(yield i._get(t));return yield i._remove(t),r}),Lk.apply(this,arguments)}function wSe(n,e){Pm.set(n._key(),e)}function T6(n){return xo(n._redirectPersistence)}function I6(n){return $b("pendingRedirect",n.config.apiKey,n.name)}function D6(n,e){return zk.apply(this,arguments)}function zk(){return zk=m(function*(n,e,t=!1){const i=zi(n),r=Cc(i,e),o=yield new vSe(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o}),zk.apply(this,arguments)}class DSe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function SSe(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return M6(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!M6(e)){const r=(null===(i=e.error.code)||void 0===i?void 0:i.split("auth/")[1])||"internal-error";t.onError(Hs(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(x6(e))}saveEventToCache(e){this.cachedEventUids.add(x6(e)),this.lastProcessedEventTime=Date.now()}}function x6(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function M6({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===(null==e?void 0:e.code)}function xSe(n){return Wk.apply(this,arguments)}function Wk(){return Wk=m(function*(n,e={}){return Fn(n,"GET","/v1/projects",e)}),Wk.apply(this,arguments)}const MSe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ASe=/^https?/;function qk(){return qk=m(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield xSe(n);for(const t of e)try{if(RSe(t))return}catch(i){}$i(n,"unauthorized-domain")}),qk.apply(this,arguments)}function RSe(n){const e=wm(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return""===o.hostname&&""===i?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&o.hostname===i}if(!ASe.test(t))return!1;if(MSe.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const PSe=new Cm(3e4,6e4);function A6(){const n=bn().___jsl;if(null==n?void 0:n.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let ew=null;function NSe(n){return ew=ew||function OSe(n){return new Promise((e,t)=>{var i,r,s;function o(){A6(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{A6(),t(Hs(n,"network-request-failed"))},timeout:PSe.get()})}if(null===(r=null===(i=bn().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=bn().gapi)||void 0===s?void 0:s.load)){const a=C6("iframefcb");return bn()[a]=()=>{gapi.load?o():t(Hs(n,"network-request-failed"))},function w6(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const s=Hs("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",function tSe(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(i)})}(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>t(l))}o()}}).catch(e=>{throw ew=null,e})}(n),ew}const FSe=new Cm(5e3,15e3),BSe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},USe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HSe(n){const e=n.config;V(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?iA(e,"emulator/auth/iframe"):`https://${n.config.authDomain}/__/auth/iframe`,i={apiKey:e.apiKey,appName:n.name,v:vs},r=USe.get(n.config.apiHost);r&&(i.eid=r);const s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${pf(i).slice(1)}`}function Kk(){return Kk=m(function*(n){const e=yield NSe(n),t=bn().gapi;return V(t,n,"internal-error"),e.open({where:document.body,url:HSe(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BSe,dontclear:!0},i=>new Promise(function(){var r=m(function*(s,o){yield i.restyle({setHideOnLeave:!1});const a=Hs(n,"network-request-failed"),l=bn().setTimeout(()=>{o(a)},FSe.get());function c(){bn().clearTimeout(l),s(i)}i.ping(c).then(c,()=>{o(a)})});return function(s,o){return r.apply(this,arguments)}}()))}),Kk.apply(this,arguments)}const $Se={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class k6{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function R6(n,e,t,i,r,s){V(n.config.authDomain,n,"auth-domain-config-required"),V(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:vs,eventId:r};if(e instanceof za){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",xT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,c]of Object.entries(s||{}))o[l]=c}if(e instanceof pDe){const l=e.getScopes().filter(c=>""!==c);l.length>0&&(o.scopes=l.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];return`${function ZSe({config:n}){return n.emulator?iA(n,"emulator/auth/handler"):`https://${n.authDomain}/__/auth/handler`}(n)}?${pf(a).slice(1)}`}const Qk="webStorageSupport",exe=class JSe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=g6,this._completeRedirectFn=D6,this._overrideRedirectResult=wSe}_openPopup(e,t,i,r){var s=this;return m(function*(){var o;ja(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=R6(e,t,i,wm(),r);return function KSe(n,e,t,i=500,r=600){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},$Se),{width:i.toString(),height:r.toString(),top:s,left:o}),c=Xt().toLowerCase();t&&(a=K8(c)?"_blank":t),q8(c)&&(e=e||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(function GIe(n=Xt()){var e;return zb(n)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function QSe(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}(e||"",a),new k6(null);const d=window.open(e||"",a,u);V(d,n,"popup-blocked");try{d.focus()}catch(h){}return new k6(d)}(e,a,gk())})()}_openRedirect(e,t,i,r){var s=this;return m(function*(){return yield s._originValidation(e),function jDe(n){bn().location.href=n}(R6(e,t,i,wm(),r)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(ja(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){var t=this;return m(function*(){const i=yield function jSe(n){return Kk.apply(this,arguments)}(e),r=new DSe(e);return i.register("authEvent",s=>(V(null==s?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:r},t.iframes[e._key()]=i,r})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Qk,{type:Qk},r=>{var s;const o=null===(s=null==r?void 0:r[0])||void 0===s?void 0:s[Qk];void 0!==o&&t(!!o),$i(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function kSe(n){return qk.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return J8()||gA()||zb()}};var O6="@firebase/auth";class txe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return m(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{var r;e((null===(r=i)||void 0===r?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function tw(n=aa()){const e=Yr(n,"auth");return e.isInitialized()?e.getImmediate():function SIe(n,e){const t=Yr(n,"auth");if(t.isInitialized()){const r=t.getImmediate();if(Y_(t.getOptions(),null!=e?e:{}))return r;$i(r,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:exe,persistence:[XDe,VDe,g6]})}!function ixe(n){cn(new Zt("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=i.options;return((a,l)=>{V(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),V(!(null==o?void 0:o.includes(":")),"argument-error",{appName:a.name});const c={apiKey:s,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:e6(n)},u=new QIe(a,l,c);return function xIe(n,e){const t=(null==e?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(xo);(null==e?void 0:e.errorMap)&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,null==e?void 0:e.popupRedirectResolver)}(u,t),u})(i,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),cn(new Zt("auth-internal",e=>{const t=zi(e.getProvider("auth").getImmediate());return new txe(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$e(O6,"0.20.7",function nxe(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),$e(O6,"0.20.7","esm2017")}("Browser");let rxe=(()=>{class n{constructor(t,i){this.router=t,this.user_data_service=i,this.uname="",this.app=xr(ii_firebase),this.realdb=Fi(this.app),this.auth=tw(this.app),this.bg_url=""}ngOnInit(){}signIn(t,i){var r=this;return m(function*(){yield function EDe(n,e,t){return function jA(n,e){return $A.apply(this,arguments)}(Ce(n),a6.credential(e,t))}(r.auth,t,i).then(o=>{console.log(o.user),console.log("LogedIn"),r.user_data_service.email=t,r.router.navigate(["/home"],{queryParams:{email:t}})}).catch(o=>{alert("Username or Password incorrect"),console.log("There was some error logging in!")})})()}forgotPass(){var t=this;return m(function*(){let i;console.log("forgot password method called"),i=prompt("Enter your email:"),console.log("password reset email:",i),function bDe(n,e,t){return YA.apply(this,arguments)}(t.auth,i).then(()=>{console.log("password reset email2:",i),alert("Check your email for a reset password link.")}).catch(r=>{})})()}go_to_register(){this.router.navigate(["/register"]),console.log("Entered Registration Page")}}return n.\u0275fac=function(t){return new(t||n)(g(wt),g(ts))},n.\u0275cmp=Ie({type:n,selectors:[["app-login"]],decls:22,vars:0,consts:[[1,"login-reg-panel"],[1,"white-panel"],[1,"login-show"],[1,"t-color"],["type","text","placeholder","Email","autofocus",""],["email",""],["type","password","placeholder","Password"],["password",""],["type","button","value","Login",3,"click"],["mat-button","",1,"t-color",2,"border","0px","background-color","rgba(255, 255, 255, 0)",3,"click"],["type","button","value","Register",1,"t-color",3,"click"]],template:function(t,i){if(1&t){const r=En();C(0,"body")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1",3),R(5,"LOGIN"),w(),j(6,"input",4,5)(8,"input",6,7)(10,"br"),C(11,"input",8),G("click",function(){st(r);const o=mt(7),a=mt(9);return i.signIn(o.value,a.value)}),w(),C(12,"button",9),G("click",function(){return i.forgotPass()}),R(13,"Forgot Password ?"),w(),j(14,"br")(15,"br")(16,"br")(17,"br")(18,"br"),C(19,"div",3),R(20," Don't have an account? "),w(),C(21,"input",10),G("click",function(){return i.go_to_register()}),w()()()()()}},directives:[Bs],styles:['@import"https://fonts.googleapis.com/css?family=Mukta";.back[_ngcontent-%COMP%]{background:url(/assets/login_background.jpg);background-size:100% 100%}body[_ngcontent-%COMP%]{font-family:Mukta,sans-serif;height:100vh;min-height:550px;background-image:url(https://firebasestorage.googleapis.com/v0/b/site-wynyard.appspot.com/o/assets%2Flogin_background.jpg?alt=media&token=5028cb1f-7eff-4aa1-9483-10dcc908838a);background-repeat:no-repeat;background-size:cover;background-position:center;position:relative;overflow-y:hidden}a[_ngcontent-%COMP%]{text-decoration:none;color:#444}.t-color[_ngcontent-%COMP%]{color:#fff}.login-reg-panel[_ngcontent-%COMP%]{position:relative;top:50%;transform:translateY(-50%);text-align:center;width:70%;right:0;left:0;margin:auto;height:400px}.white-panel[_ngcontent-%COMP%]{background-color:#560896df;height:-moz-fit-content;height:fit-content;position:absolute;top:-45px;width:50%;right:calc(50% - 50px);transition:.3s ease-in-out;z-index:0;box-shadow:0 0 15px 9px #00000096}.login-reg-panel[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{position:relative;display:none}.login-reg-panel[_ngcontent-%COMP%]{color:#b8b8b8}.login-reg-panel[_ngcontent-%COMP%]   #label-login[_ngcontent-%COMP%], .login-reg-panel[_ngcontent-%COMP%]   #label-register[_ngcontent-%COMP%]{border:1px solid #9E9E9E;padding:5px;width:150px;display:block;text-align:center;border-radius:10px;cursor:pointer;font-weight:600;font-size:18px}.login-info-box[_ngcontent-%COMP%]{width:30%;padding:0 50px;top:20%;left:0;position:absolute;text-align:left}.register-info-box[_ngcontent-%COMP%]{width:30%;padding:0 50px;top:20%;right:0;position:absolute;text-align:left}.right-log[_ngcontent-%COMP%]{right:50px!important}.login-show[_ngcontent-%COMP%], .register-show[_ngcontent-%COMP%]{z-index:1;transition:.3s ease-in-out;color:#242424;text-align:left;padding:50px}.show-log-panel[_ngcontent-%COMP%]{display:block;opacity:.9}.login-show[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .login-show[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;display:block;margin:20px 0;padding:15px;border:1px solid #b5b5b5;outline:none;border-radius:10px;background-color:#e2d8f5}.login-show[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{max-width:150px;width:100%;background:#9c0000cc;color:#f9f9f9;border:none;padding:10px;text-transform:uppercase;border-radius:10px;float:right;cursor:pointer}.login-show[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;padding:10px 0}.register-show[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .register-show[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;display:block;margin:20px 0;padding:15px;border:1px solid #b5b5b5;outline:none}.register-show[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{max-width:150px;width:100%;background:#444444;color:#f9f9f9;border:none;padding:10px;text-transform:uppercase;border-radius:2px;float:right;cursor:pointer}.credit[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:10px;color:#3b3b25;margin:0;padding:0;font-family:Arial,sans-serif;text-transform:uppercase;font-size:12px;font-weight:700;letter-spacing:1px;z-index:99}a[_ngcontent-%COMP%]{text-decoration:none;color:#2c7715}']}),n})();function sxe(n,e){1&n&&(C(0,"div"),R(1," Passwords don't match "),w())}let oxe=(()=>{class n{constructor(t,i){this.router=t,this.route=i,this.pass_dont_match=!1,this.app=xr(ii_firebase),this.auth=tw(this.app)}ngOnInit(){}register(t,i,r,s,o){if(s==o){this.pass_dont_match=!1;let a=r.replaceAll(".","");Is(Et(Fi(),"users/"+a),{name:t,username:i,email:r}).then(()=>{console.log("Data updated in realtime database")}).catch(u=>{console.log("There was some error while adding user data in realtime database")}),function CDe(n,e,t){return tk.apply(this,arguments)}(this.auth,r,s).then(u=>{alert("User Registered successfully"),this.router.navigate(["/login"])}).catch(u=>{})}else this.pass_dont_match=!0}go_to_login(){this.router.navigate(["/login"])}}return n.\u0275fac=function(t){return new(t||n)(g(wt),g(Co))},n.\u0275cmp=Ie({type:n,selectors:[["app-register"]],decls:26,vars:1,consts:[[1,"login-reg-panel"],[1,"white-panel"],[1,"login-show"],[1,"t-color"],["type","text","placeholder","Name"],["name",""],["type","text","placeholder","Username"],["uname",""],["type","text","placeholder","Email"],["email",""],["type","password","placeholder","Password"],["password",""],["type","password","placeholder","Confirm Password"],["con_password",""],[4,"ngIf"],["type","button","value","Register",3,"click"],[1,"t-color",2,"margin-left","23%"],["type","button","value","Login",1,"t-color",3,"click"]],template:function(t,i){if(1&t){const r=En();C(0,"body")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1",3),R(5,"Register"),w(),j(6,"input",4,5)(8,"input",6,7)(10,"input",8,9)(12,"input",10,11)(14,"input",12,13),be(16,sxe,2,0,"div",14),C(17,"input",15),G("click",function(){st(r);const o=mt(7),a=mt(9),l=mt(11),c=mt(13),u=mt(15);return i.register(o.value,a.value,l.value,c.value,u.value)}),w(),j(18,"br")(19,"br")(20,"br"),C(21,"div",16),R(22," Already have an account? "),j(23,"br")(24,"br"),w(),C(25,"input",17),G("click",function(){return i.go_to_login()}),w()()()()()}2&t&&(k(16),L("ngIf",i.pass_dont_match))},directives:[Er],styles:['@import"https://fonts.googleapis.com/css?family=Mukta";.back[_ngcontent-%COMP%]{background:url(/assets/login_background.jpg);background-size:100% 100%}body[_ngcontent-%COMP%]{font-family:Mukta,sans-serif;height:100vh;min-height:550px;background-image:url(https://firebasestorage.googleapis.com/v0/b/site-wynyard.appspot.com/o/assets%2Flogin_background.jpg?alt=media&token=5028cb1f-7eff-4aa1-9483-10dcc908838a);background-repeat:no-repeat;background-size:cover;background-position:center;position:relative;overflow-y:hidden}a[_ngcontent-%COMP%]{text-decoration:none;color:#444}.t-color[_ngcontent-%COMP%]{color:#fff}.login-reg-panel[_ngcontent-%COMP%]{position:relative;top:40%;transform:translateY(-50%);text-align:center;width:70%;right:0;left:0;margin:auto;height:400px}.white-panel[_ngcontent-%COMP%]{background-color:#560896df;height:-moz-fit-content;height:fit-content;position:absolute;top:-45px;width:50%;right:calc(50% - 50px);transition:.3s ease-in-out;z-index:0;box-shadow:0 0 15px 9px #00000096}.login-reg-panel[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{position:relative;display:none}.login-reg-panel[_ngcontent-%COMP%]{color:#b8b8b8}.login-reg-panel[_ngcontent-%COMP%]   #label-login[_ngcontent-%COMP%], .login-reg-panel[_ngcontent-%COMP%]   #label-register[_ngcontent-%COMP%]{border:1px solid #9E9E9E;padding:5px;width:150px;display:block;text-align:center;border-radius:10px;cursor:pointer;font-weight:600;font-size:18px}.login-info-box[_ngcontent-%COMP%]{width:30%;padding:0 50px;top:10%;left:0;position:absolute;text-align:left}.register-info-box[_ngcontent-%COMP%]{width:30%;padding:0 50px;top:10%;right:0;position:absolute;text-align:left}.right-log[_ngcontent-%COMP%]{right:50px!important}.login-show[_ngcontent-%COMP%], .register-show[_ngcontent-%COMP%]{z-index:1;transition:.3s ease-in-out;color:#242424;text-align:left;padding:50px}.show-log-panel[_ngcontent-%COMP%]{display:block;opacity:.9}.login-show[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .login-show[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;display:block;margin:20px 0;padding:12px;border:1px solid #b5b5b5;background-color:#e2d8f5;border-radius:10px;outline:none}.login-show[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{max-width:150px;width:100%;background:#9c0000cc;color:#f9f9f9;border:none;padding:10px;text-transform:uppercase;border-radius:10px;margin-left:28%;float:center;cursor:pointer}.login-show[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;padding:10px 0}.register-show[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .register-show[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;display:block;margin:20px 0;padding:15px;border:1px solid #b5b5b5;outline:none}.register-show[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{max-width:150px;width:100%;background:#444444;color:#f9f9f9;border:none;padding:10px;text-transform:uppercase;border-radius:2px;float:right;cursor:pointer}.credit[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:10px;color:#3b3b25;margin:0;padding:0;font-family:Arial,sans-serif;text-transform:uppercase;font-size:12px;font-weight:700;letter-spacing:1px;z-index:99}a[_ngcontent-%COMP%]{text-decoration:none;color:#2c7715}']}),n})();class axe{constructor(e){this.post=e}}function lxe(n,e){1&n&&j(0,"img",17),2&n&&L("src",Se().url,Un)}function cxe(n,e){1&n&&j(0,"video",18),2&n&&L("src",Se().url,Un)}const uxe=[{path:"",component:O8},{path:"home",component:O8},{path:"login",component:rxe},{path:"register",component:oxe},{path:"profile",component:oTe},{path:"viewprofile/:profile",component:L0e},{path:"add-post",component:(()=>{class n{constructor(t,i,r,s){this.router=t,this.location=i,this.post_service=r,this.user_data=s,this.url="assets/images/prj_logo_colour.png",this.progress=0}ngOnInit(){}go_to_profile(){this.location.back()}onSelectFile(t){const i=t.target.files&&t.target.files[0];if(i){this.current_post_data=new axe(t.target.files[0]),this.current_post_data.name=t.target.files[0].name,console.log(this.current_post_data.name),console.log(i);var r=new FileReader;r.readAsDataURL(i),i.type.indexOf("image")>-1?this.format="image":i.type.indexOf("video")>-1&&(this.format="video"),this.current_post_data.fileType=this.format,r.onload=s=>{this.url=s.target.result}}}upload_post(t){this.current_post_data.caption=t,this.current_post_data.username=this.user_data.username,this.post_service.Upload_post(this.current_post_data),this.post_service.changeEmitted$.subscribe(i=>this.progress=i)}}return n.\u0275fac=function(t){return new(t||n)(g(wt),g(Xo),g(Bd),g(ts))},n.\u0275cmp=Ie({type:n,selectors:[["app-add-post"]],decls:26,vars:3,consts:[[1,"col"],[1,"row-1"],[1,"back-icon",3,"click"],["align","center",1,"new-post-text"],[1,"row-2"],[1,"preview"],[3,"src",4,"ngIf"],["onmouseover","this.play()","onmouseout","this.pause();this.currentTime=0;","loop","",3,"src",4,"ngIf"],["mat-raised-button","",1,"select-file-button"],["for","new-post","required","",1,"input-file-label"],["type","file","id","new-post","required","",1,"input-file-button",3,"change"],["type","range",1,"prog",3,"value"],[1,"text-caption"],["id","caption",1,"textarea-position"],["caption",""],["mat-raised-button","",1,"upload-button",3,"click"],["mat-raised-button","",1,"cancle-button"],[3,"src"],["onmouseover","this.play()","onmouseout","this.pause();this.currentTime=0;","loop","",3,"src"]],template:function(t,i){if(1&t){const r=En();C(0,"div")(1,"div",0)(2,"div",1)(3,"mat-icon",2),G("click",function(){return i.go_to_profile()}),R(4,"keyboard_arrow_left"),w(),C(5,"h2",3),R(6," New Post "),w()(),C(7,"div",4)(8,"div",5),be(9,lxe,1,1,"img",6),be(10,cxe,1,1,"video",7),w(),C(11,"div")(12,"button",8)(13,"label",9),R(14," Select File "),C(15,"input",10),G("change",function(o){return i.onSelectFile(o)}),w()()(),j(16,"input",11),C(17,"h3",12),R(18," Caption "),w(),C(19,"textarea",13,14),R(21,"\n                "),w()(),C(22,"button",15),G("click",function(){st(r);const o=mt(20);return i.upload_post(o.value)}),R(23," Upload "),w(),C(24,"button",16),R(25," Cancel "),w()()()()}2&t&&(k(9),L("ngIf","image"===i.format&&i.url),k(1),L("ngIf","video"===i.format&&i.url),k(6),L("value",i.progress))},directives:[So,Er,Bs],styles:[".row-1[_ngcontent-%COMP%]{width:100%;height:5vh;background-color:#da42f8}.row-2[_ngcontent-%COMP%]{height:90vh;background-color:#ea7fff}.preview[_ngcontent-%COMP%]{width:46%;height:60%;float:left;margin:2%;background-color:#fff;border:3px solid brown}.select-file-button[_ngcontent-%COMP%]{width:20%;height:8%;margin:4% 2% 2%;float:left;color:azure;background-color:navy;border:2px solid brown;cursor:pointer;text-align:center}.text-caption[_ngcontent-%COMP%]{float:left;margin-left:-21.5%;margin-top:15%;font-size:x-large}.textarea-position[_ngcontent-%COMP%]{float:left;margin-left:-21.5%;margin-top:20%;width:40%;height:12em}.upload-button[_ngcontent-%COMP%]{float:left;margin-top:38%;margin-left:-87%;width:38%;background-color:#05b905;color:azure;font-size:medium}.cancle-button[_ngcontent-%COMP%]{float:left;margin-top:38%;margin-left:-37%;width:38%;background-color:red;color:azure;font-size:medium}.back-icon[_ngcontent-%COMP%]{margin:.2%;cursor:pointer}.new-post-text[_ngcontent-%COMP%]{margin-top:-2%}.input-file-button[_ngcontent-%COMP%]{display:none}.input-file-label[_ngcontent-%COMP%]{margin:0;width:100%;height:100%;cursor:pointer}img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:5px;background-color:#f5f5f5;object-fit:contain}video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}"]}),n})()},{path:"ViewPost",component:X0e}];let dxe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[dM.forRoot(uxe)],dM]}),n})();const hxe=["*",[["mat-toolbar-row"]]],fxe=["*","mat-toolbar-row"],pxe=af(class{constructor(n){this._elementRef=n}});let mxe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=N({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),gxe=(()=>{class n extends pxe{constructor(t,i,r){super(t),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(g(ce),g(Dn),g(xe))},n.\u0275cmp=Ie({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,i,r){if(1&t&&St(r,mxe,5),2&t){let s;fe(s=pe())&&(i._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,i){2&t&&Xe("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[X],ngContentSelectors:fxe,decls:2,vars:0,template:function(t,i){1&t&&(Tn(hxe),He(0),He(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),_xe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[_t],_t]}),n})(),yxe=(()=>{class n{constructor(t,i){this.ud=t,this.router=i,this.auth=tw(),this.wynyard=""}ngOnInit(){this.fetch_wynyard()}logout(){(function kDe(n){return Ce(n).signOut()})(this.auth).then(()=>{window.location.reload()}).catch(t=>{alert("Error logging out.")})}fetch_wynyard(){Io(Vs(mc(),"assets/wynyard.png")).then(i=>{this.wynyard=i}).catch(i=>{console.log("Error while loading wynyard logo:",i)})}}return n.\u0275fac=function(t){return new(t||n)(g(ts),g(wt))},n.\u0275cmp=Ie({type:n,selectors:[["app-header"]],decls:21,vars:2,consts:[["routerLink","home"],["height","70px",1,"icon",3,"src"],[1,"example-spacer"],["mat-icon-button","",1,"example-icon",3,"matMenuTriggerFor"],["menu","matMenu"],["routerLink","/login","mat-menu-item","",1,"menubutton"],["aria-hidden","false"],["mat-menu-item","",1,"menubutton",3,"click"],["mat-menu-item","","routerLink","/profile",1,"menubutton"]],template:function(t,i){if(1&t&&(C(0,"mat-toolbar")(1,"span",0),j(2,"img",1),w(),j(3,"span",2),C(4,"button",3)(5,"mat-icon"),R(6,"menu"),w()()(),C(7,"mat-menu",null,4)(9,"button",5)(10,"mat-icon",6),R(11,"login"),w(),R(12," Login"),w(),C(13,"button",7),G("click",function(){return i.logout()}),C(14,"mat-icon"),R(15,"exit_to_app"),w(),R(16,"Logout"),w(),C(17,"button",8)(18,"mat-icon"),R(19,"person"),w(),R(20,"Profile"),w()()),2&t){const r=mt(8);k(2),L("src",i.wynyard,Un),k(2),L("matMenuTriggerFor",r)}},directives:[gxe,hb,Bs,h8,So,l8,vm],styles:[".example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-toolbar[_ngcontent-%COMP%]{background:rgb(155,0,194)}.example-icon[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{color:#fff}.menubutton[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgb(250,188,242) 7%,rgb(255,162,162) 100%);color:#fff}mat-icon[_ngcontent-%COMP%]{color:#fff}img[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,rgb(136,49,126) 7%,rgb(133,42,42) 99%);border-radius:30px}mat-icon[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,rgb(136,49,126) 7%,rgb(133,42,42) 99%);border-radius:30px}"]}),n})(),vxe=(()=>{class n{constructor(){this.title="wynyard"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ie({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"maindiv"]],template:function(t,i){1&t&&(C(0,"div",0)(1,"div"),j(2,"app-header"),w(),j(3,"router-outlet"),w())},directives:[yxe,rM],styles:[".maindiv[_ngcontent-%COMP%]{height:100%;overflow-y:auto}.maindiv[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}p[_ngcontent-%COMP%]{color:#fff}.footer[_ngcontent-%COMP%], .aboutus[_ngcontent-%COMP%]{background-color:#b885fa}"]}),n})();const F6="@firebase/installations",Yk="0.5.12",V6=`w:${Yk}`,B6="FIS_v2",Ro=new Sr("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function U6(n){return n instanceof Oi&&n.code.includes("request-failed")}function Xk({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function H6(n){return{token:n.token,requestStatus:2,expiresIn:Ixe(n.expiresIn),creationTime:Date.now()}}function Zk(n,e){return Jk.apply(this,arguments)}function Jk(){return Jk=m(function*(n,e){const i=(yield e.json()).error;return Ro.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}),Jk.apply(this,arguments)}function j6({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function $6(n,{refreshToken:e}){const t=j6(n);return t.append("Authorization",function Dxe(n){return`${B6} ${n}`}(e)),t}function eR(n){return tR.apply(this,arguments)}function tR(){return tR=m(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e}),tR.apply(this,arguments)}function Ixe(n){return Number(n.replace("s","000"))}function Sxe(n,e){return nR.apply(this,arguments)}function nR(){return nR=m(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=Xk(n),r=j6(n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const a={method:"POST",headers:r,body:JSON.stringify({fid:t,authVersion:B6,appId:n.appId,sdkVersion:V6})},l=yield eR(()=>fetch(i,a));if(l.ok){const c=yield l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:H6(c.authToken)}}throw yield Zk("Create Installation",l)}),nR.apply(this,arguments)}function z6(n){return new Promise(e=>{setTimeout(e,n)})}const Mxe=/^[cdef][\w-]{21}$/;function Axe(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function kxe(n){return function xxe(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return Mxe.test(t)?t:""}catch(n){return""}}function $d(n){return`${n.appName}!${n.appId}`}const zd=new Map;function G6(n,e){const t=$d(n);W6(t,e),function Oxe(n,e){const t=function q6(){return!Ec&&"BroadcastChannel"in self&&(Ec=new BroadcastChannel("[Firebase] FID Change"),Ec.onmessage=n=>{W6(n.data.key,n.data.fid)}),Ec}();t&&t.postMessage({key:n,fid:e}),function K6(){0===zd.size&&Ec&&(Ec.close(),Ec=null)}()}(t,e)}function W6(n,e){const t=zd.get(n);if(t)for(const i of t)i(e)}let Ec=null;const Tc="firebase-installations-store";let rR=null;function sR(){return rR||(rR=Z_("firebase-installations-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Tc)}})),rR}function nw(n,e){return oR.apply(this,arguments)}function oR(){return oR=m(function*(n,e){const t=$d(n),r=(yield sR()).transaction(Tc,"readwrite"),s=r.objectStore(Tc),o=yield s.get(t);return yield s.put(e,t),yield r.done,(!o||o.fid!==e.fid)&&G6(n,e.fid),e}),oR.apply(this,arguments)}function aR(n){return lR.apply(this,arguments)}function lR(){return lR=m(function*(n){const e=$d(n),i=(yield sR()).transaction(Tc,"readwrite");yield i.objectStore(Tc).delete(e),yield i.done}),lR.apply(this,arguments)}function Om(n,e){return cR.apply(this,arguments)}function cR(){return cR=m(function*(n,e){const t=$d(n),r=(yield sR()).transaction(Tc,"readwrite"),s=r.objectStore(Tc),o=yield s.get(t),a=e(o);return void 0===a?yield s.delete(t):yield s.put(a,t),yield r.done,a&&(!o||o.fid!==a.fid)&&G6(n,a.fid),a}),cR.apply(this,arguments)}function uR(n){return dR.apply(this,arguments)}function dR(){return dR=m(function*(n){let e;const t=yield Om(n.appConfig,i=>{const r=Lxe(i),s=Vxe(n,r);return e=s.registrationPromise,s.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),dR.apply(this,arguments)}function Lxe(n){return Y6(n||{fid:Axe(),registrationStatus:0})}function Vxe(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Ro.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=function Bxe(n,e){return hR.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Uxe(n)}:{installationEntry:e}}function hR(){return hR=m(function*(n,e){try{const t=yield Sxe(n,e);return nw(n.appConfig,t)}catch(t){throw U6(t)&&409===t.customData.serverCode?yield aR(n.appConfig):yield nw(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),hR.apply(this,arguments)}function Uxe(n){return fR.apply(this,arguments)}function fR(){return fR=m(function*(n){let e=yield Q6(n.appConfig);for(;1===e.registrationStatus;)yield z6(100),e=yield Q6(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:i}=yield uR(n);return i||t}return e}),fR.apply(this,arguments)}function Q6(n){return Om(n,e=>{if(!e)throw Ro.create("installation-not-found");return Y6(e)})}function Y6(n){return function Hxe(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function jxe(n,e){return pR.apply(this,arguments)}function pR(){return pR=m(function*({appConfig:n,heartbeatServiceProvider:e},t){const i=$xe(n,t),r=$6(n,t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const a={method:"POST",headers:r,body:JSON.stringify({installation:{sdkVersion:V6,appId:n.appId}})},l=yield eR(()=>fetch(i,a));if(l.ok)return H6(yield l.json());throw yield Zk("Generate Auth Token",l)}),pR.apply(this,arguments)}function $xe(n,{fid:e}){return`${Xk(n)}/${e}/authTokens:generate`}function mR(n){return gR.apply(this,arguments)}function gR(){return gR=m(function*(n,e=!1){let t;const i=yield Om(n.appConfig,s=>{if(!Z6(s))throw Ro.create("not-registered");const o=s.authToken;if(!e&&Wxe(o))return s;if(1===o.requestStatus)return t=zxe(n,e),s;{if(!navigator.onLine)throw Ro.create("app-offline");const a=Kxe(s);return t=Gxe(n,a),a}});return t?yield t:i.authToken}),gR.apply(this,arguments)}function zxe(n,e){return _R.apply(this,arguments)}function _R(){return _R=m(function*(n,e){let t=yield X6(n.appConfig);for(;1===t.authToken.requestStatus;)yield z6(100),t=yield X6(n.appConfig);const i=t.authToken;return 0===i.requestStatus?mR(n,e):i}),_R.apply(this,arguments)}function X6(n){return Om(n,e=>{if(!Z6(e))throw Ro.create("not-registered");return function Qxe(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Gxe(n,e){return yR.apply(this,arguments)}function yR(){return yR=m(function*(n,e){try{const t=yield jxe(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return yield nw(n.appConfig,i),t}catch(t){if(!U6(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield nw(n.appConfig,i)}else yield aR(n.appConfig);throw t}}),yR.apply(this,arguments)}function Z6(n){return void 0!==n&&2===n.registrationStatus}function Wxe(n){return 2===n.requestStatus&&!function qxe(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function Kxe(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function vR(){return vR=m(function*(n){const e=n,{installationEntry:t,registrationPromise:i}=yield uR(e);return i?i.catch(console.error):mR(e).catch(console.error),t.fid}),vR.apply(this,arguments)}function bR(){return bR=m(function*(n,e=!1){const t=n;return yield Zxe(t),(yield mR(t,e)).token}),bR.apply(this,arguments)}function Zxe(n){return wR.apply(this,arguments)}function wR(){return wR=m(function*(n){const{registrationPromise:e}=yield uR(n);e&&(yield e)}),wR.apply(this,arguments)}function TR(n){return Ro.create("missing-app-config-values",{valueName:n})}const J6="installations",iMe=n=>{const e=n.getProvider("app").getImmediate(),t=function tMe(n){if(!n||!n.options)throw TR("App Configuration");if(!n.name)throw TR("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw TR(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:Yr(e,"heartbeat"),_delete:()=>Promise.resolve()}},rMe=n=>{const t=Yr(n.getProvider("app").getImmediate(),J6).getImmediate();return{getId:()=>function Yxe(n){return vR.apply(this,arguments)}(t),getToken:r=>function Xxe(n){return bR.apply(this,arguments)}(t,r)}};(function sMe(){cn(new Zt(J6,iMe,"PUBLIC")),cn(new Zt("installations-internal",rMe,"PRIVATE"))})(),$e(F6,Yk),$e(F6,Yk,"esm2017");const IR="@firebase/remote-config",Gi=new Sr("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class gMe{constructor(e,t,i,r){this.client=e,this.storage=t,this.storageCache=i,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const i=Date.now()-t,r=i<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${i}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}fetch(e){var t=this;return m(function*(){const[i,r]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(r&&t.isCachedDataFresh(e.cacheMaxAgeMillis,i))return r;e.eTag=r&&r.eTag;const s=yield t.client.fetch(e),o=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function _Me(n=navigator){return n.languages&&n.languages[0]||n.language}class yMe{constructor(e,t,i,r,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=i,this.projectId=r,this.apiKey=s,this.appId=o}fetch(e){var t=this;return m(function*(){var i,r,s;const[o,a]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),c=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,u={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},d={sdk_version:t.sdkVersion,app_instance_id:o,app_instance_id_token:a,app_id:t.appId,language_code:_Me()},h={method:"POST",headers:u,body:JSON.stringify(d)},f=fetch(c,h),p=new Promise((S,F)=>{e.signal.addEventListener(()=>{const W=new Error("The operation was aborted.");W.name="AbortError",F(W)})});let _;try{yield Promise.race([f,p]),_=yield f}catch(S){let F="fetch-client-network";throw"AbortError"===(null===(i=S)||void 0===i?void 0:i.name)&&(F="fetch-timeout"),Gi.create(F,{originalErrorMessage:null===(r=S)||void 0===r?void 0:r.message})}let y=_.status;const b=_.headers.get("ETag")||void 0;let v,D;if(200===_.status){let S;try{S=yield _.json()}catch(F){throw Gi.create("fetch-client-parse",{originalErrorMessage:null===(s=F)||void 0===s?void 0:s.message})}v=S.entries,D=S.state}if("INSTANCE_STATE_UNSPECIFIED"===D?y=500:"NO_CHANGE"===D?y=304:("NO_TEMPLATE"===D||"EMPTY_CONFIG"===D)&&(v={}),304!==y&&200!==y)throw Gi.create("fetch-status",{httpStatus:y});return{status:y,eTag:b,config:v}})()}}class wMe{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return m(function*(){const i=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,i)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:i}){var r=this;return m(function*(){yield function vMe(n,e){return new Promise((t,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(s),i(Gi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield r.client.fetch(e);return yield r.storage.deleteThrottleMetadata(),s}catch(s){if(!function bMe(n){if(!(n instanceof Oi&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+AT(i),backoffCount:i+1};return yield r.storage.setThrottleMetadata(o),r.attemptFetch(e,o)}})()}}class TMe{constructor(e,t,i,r,s){this.app=e,this._client=t,this._storageCache=i,this._storage=r,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function rw(n,e){var t;const i=n.target.error||void 0;return Gi.create(e,{originalErrorMessage:i&&(null===(t=i)||void 0===t?void 0:t.message)})}const Ic="app_namespace_store";class xMe{constructor(e,t,i,r=function SMe(){return new Promise((n,e)=>{var t;try{const i=indexedDB.open("firebase_remote_config",1);i.onerror=r=>{e(rw(r,"storage-open"))},i.onsuccess=r=>{n(r.target.result)},i.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Ic,{keyPath:"compositeKey"})}}catch(i){e(Gi.create("storage-open",{originalErrorMessage:null===(t=i)||void 0===t?void 0:t.message}))}})}()){this.appId=e,this.appName=t,this.namespace=i,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return m(function*(){const i=yield t.openDbPromise;return new Promise((r,s)=>{var o;const l=i.transaction([Ic],"readonly").objectStore(Ic),c=t.createCompositeKey(e);try{const u=l.get(c);u.onerror=d=>{s(rw(d,"storage-get"))},u.onsuccess=d=>{const h=d.target.result;r(h?h.value:void 0)}}catch(u){s(Gi.create("storage-get",{originalErrorMessage:null===(o=u)||void 0===o?void 0:o.message}))}})})()}set(e,t){var i=this;return m(function*(){const r=yield i.openDbPromise;return new Promise((s,o)=>{var a;const c=r.transaction([Ic],"readwrite").objectStore(Ic),u=i.createCompositeKey(e);try{const d=c.put({compositeKey:u,value:t});d.onerror=h=>{o(rw(h,"storage-set"))},d.onsuccess=()=>{s()}}catch(d){o(Gi.create("storage-set",{originalErrorMessage:null===(a=d)||void 0===a?void 0:a.message}))}})})()}delete(e){var t=this;return m(function*(){const i=yield t.openDbPromise;return new Promise((r,s)=>{var o;const l=i.transaction([Ic],"readwrite").objectStore(Ic),c=t.createCompositeKey(e);try{const u=l.delete(c);u.onerror=d=>{s(rw(d,"storage-delete"))},u.onsuccess=()=>{r()}}catch(u){s(Gi.create("storage-delete",{originalErrorMessage:null===(o=u)||void 0===o?void 0:o.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class MMe{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return m(function*(){const t=e.storage.getLastFetchStatus(),i=e.storage.getLastSuccessfulFetchTimestampMillis(),r=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const o=yield i;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield r;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function kMe(){return AR.apply(this,arguments)}function AR(){return(AR=m(function*(){if(!ia())return!1;try{return yield hf()}catch(n){return!1}})).apply(this,arguments)}!function AMe(){cn(new Zt("remote-config",function n(e,{instanceIdentifier:t}){const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Gi.create("registration-window");if(!ia())throw Gi.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=i.options;if(!s)throw Gi.create("registration-project-id");if(!o)throw Gi.create("registration-api-key");if(!a)throw Gi.create("registration-app-id");const l=new xMe(a,i.name,t=t||"firebase"),c=new MMe(l),u=new ra(IR);u.logLevel=Be.ERROR;const d=new yMe(r,vs,t,s,o,a),h=new wMe(d,l),f=new gMe(h,l,c,u),p=new TMe(i,f,c,l,u);return function fMe(n){const e=Ce(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),$e(IR,"0.3.11"),$e(IR,"0.3.11","esm2017")}();const RMe="/firebase-messaging-sw.js",PMe="/firebase-cloud-messaging-push-scope",iK="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",rK="google.c.a.c_id",NMe="google.c.a.c_l",FMe="google.c.a.ts",LMe="google.c.a.e";var Gd=(()=>(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"}(Gd||(Gd={})),Gd))();function Po(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function VMe(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(t),r=new Uint8Array(i.length);for(let s=0;s<i.length;++s)r[s]=i.charCodeAt(s);return r}const kR="fcm_token_details_db",sK="fcm_token_object_Store";function UMe(n){return RR.apply(this,arguments)}function RR(){return RR=m(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(kR))return null;let e=null;return(yield Z_(kR,5,{upgrade:(i=m(function*(r,s,o,a){var l;if(s<2||!r.objectStoreNames.contains(sK))return;const c=a.objectStore(sK),u=yield c.index("fcmSenderId").get(n);if(yield c.clear(),u)if(2===s){const d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(l=d.createTime)&&void 0!==l?l:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:Po(d.vapidKey)}}}else if(3===s){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Po(d.auth),p256dh:Po(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Po(d.vapidKey)}}}else if(4===s){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Po(d.auth),p256dh:Po(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Po(d.vapidKey)}}}}),function(s,o,a,l){return i.apply(this,arguments)})})).close(),yield LT(kR),yield LT("fcm_vapid_details_db"),yield LT("undefined"),HMe(e)?e:null;var i}),RR.apply(this,arguments)}function HMe(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const Dc="firebase-messaging-store";let PR=null;function OR(){return PR||(PR=Z_("firebase-messaging-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Dc)}})),PR}function oK(n){return NR.apply(this,arguments)}function NR(){return NR=m(function*(n){const e=BR(n),i=yield(yield OR()).transaction(Dc).objectStore(Dc).get(e);if(i)return i;{const r=yield UMe(n.appConfig.senderId);if(r)return yield FR(n,r),r}}),NR.apply(this,arguments)}function FR(n,e){return LR.apply(this,arguments)}function LR(){return LR=m(function*(n,e){const t=BR(n),r=(yield OR()).transaction(Dc,"readwrite");return yield r.objectStore(Dc).put(e,t),yield r.done,e}),LR.apply(this,arguments)}function zMe(n){return VR.apply(this,arguments)}function VR(){return VR=m(function*(n){const e=BR(n),i=(yield OR()).transaction(Dc,"readwrite");yield i.objectStore(Dc).delete(e),yield i.done}),VR.apply(this,arguments)}function BR({appConfig:n}){return n.appId}const Qn=new Sr("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function WMe(n,e){return UR.apply(this,arguments)}function UR(){return UR=m(function*(n,e){var t;const i=yield zR(n),r=lK(e),s={method:"POST",headers:i,body:JSON.stringify(r)};let o;try{o=yield(yield fetch($R(n.appConfig),s)).json()}catch(a){throw Qn.create("token-subscribe-failed",{errorInfo:null===(t=a)||void 0===t?void 0:t.toString()})}if(o.error)throw Qn.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw Qn.create("token-subscribe-no-token");return o.token}),UR.apply(this,arguments)}function qMe(n,e){return HR.apply(this,arguments)}function HR(){return HR=m(function*(n,e){var t;const i=yield zR(n),r=lK(e.subscriptionOptions),s={method:"PATCH",headers:i,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(`${$R(n.appConfig)}/${e.token}`,s)).json()}catch(a){throw Qn.create("token-update-failed",{errorInfo:null===(t=a)||void 0===t?void 0:t.toString()})}if(o.error)throw Qn.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw Qn.create("token-update-no-token");return o.token}),HR.apply(this,arguments)}function aK(n,e){return jR.apply(this,arguments)}function jR(){return jR=m(function*(n,e){var t;const r={method:"DELETE",headers:yield zR(n)};try{const o=yield(yield fetch(`${$R(n.appConfig)}/${e}`,r)).json();if(o.error)throw Qn.create("token-unsubscribe-failed",{errorInfo:o.error.message})}catch(s){throw Qn.create("token-unsubscribe-failed",{errorInfo:null===(t=s)||void 0===t?void 0:t.toString()})}}),jR.apply(this,arguments)}function $R({projectId:n}){return`https://fcmregistrations.googleapis.com/v1/projects/${n}/registrations`}function zR(n){return GR.apply(this,arguments)}function GR(){return GR=m(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}),GR.apply(this,arguments)}function lK({p256dh:n,auth:e,endpoint:t,vapidKey:i}){const r={web:{endpoint:t,auth:e,p256dh:n}};return i!==iK&&(r.web.applicationPubKey=i),r}function QMe(n){return WR.apply(this,arguments)}function WR(){return WR=m(function*(n){const e=yield XMe(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Po(e.getKey("auth")),p256dh:Po(e.getKey("p256dh"))},i=yield oK(n.firebaseDependencies);if(i){if(ZMe(i.subscriptionOptions,t))return Date.now()>=i.createTime+6048e5?YMe(n,{token:i.token,createTime:Date.now(),subscriptionOptions:t}):i.token;try{yield aK(n.firebaseDependencies,i.token)}catch(r){console.warn(r)}return uK(n.firebaseDependencies,t)}return uK(n.firebaseDependencies,t)}),WR.apply(this,arguments)}function cK(n){return qR.apply(this,arguments)}function qR(){return qR=m(function*(n){const e=yield oK(n.firebaseDependencies);e&&(yield aK(n.firebaseDependencies,e.token),yield zMe(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),qR.apply(this,arguments)}function YMe(n,e){return KR.apply(this,arguments)}function KR(){return KR=m(function*(n,e){try{const t=yield qMe(n.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield FR(n.firebaseDependencies,i),t}catch(t){throw yield cK(n),t}}),KR.apply(this,arguments)}function uK(n,e){return QR.apply(this,arguments)}function QR(){return QR=m(function*(n,e){const i={token:yield WMe(n,e),createTime:Date.now(),subscriptionOptions:e};return yield FR(n,i),i.token}),QR.apply(this,arguments)}function XMe(n,e){return YR.apply(this,arguments)}function YR(){return YR=m(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:VMe(e)})}),YR.apply(this,arguments)}function ZMe(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}function dK(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function JMe(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const i=e.notification.body;i&&(n.notification.body=i);const r=e.notification.image;r&&(n.notification.image=r)}(e,n),function eAe(n,e){!e.data||(n.data=e.data)}(e,n),function tAe(n,e){var t,i,r,s,o;if(!e.fcmOptions&&!(null===(t=e.notification)||void 0===t?void 0:t.click_action))return;n.fcmOptions={};const a=null!==(r=null===(i=e.fcmOptions)||void 0===i?void 0:i.link)&&void 0!==r?r:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(n.fcmOptions.link=a);const l=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;l&&(n.fcmOptions.analyticsLabel=l)}(e,n),e}function nAe(n){return"object"==typeof n&&!!n&&rK in n}function hK(n,e){const t=[];for(let i=0;i<n.length;i++)t.push(n.charAt(i)),i<e.length&&t.push(e.charAt(i));return t.join("")}function XR(n){return Qn.create("missing-app-config-values",{valueName:n})}hK("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),hK("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class rAe{constructor(e,t,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function iAe(n){if(!n||!n.options)throw XR("App Configuration Object");if(!n.name)throw XR("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const i of e)if(!t[i])throw XR(i);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:i}}_delete(){return Promise.resolve()}}function fK(n){return ZR.apply(this,arguments)}function ZR(){return ZR=m(function*(n){var e;try{n.swRegistration=yield navigator.serviceWorker.register(RMe,{scope:PMe}),n.swRegistration.update().catch(()=>{})}catch(t){throw Qn.create("failed-service-worker-registration",{browserErrorMessage:null===(e=t)||void 0===e?void 0:e.message})}}),ZR.apply(this,arguments)}function sAe(n,e){return JR.apply(this,arguments)}function JR(){return JR=m(function*(n,e){if(!e&&!n.swRegistration&&(yield fK(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Qn.create("invalid-sw-registration");n.swRegistration=e}}),JR.apply(this,arguments)}function oAe(n,e){return e1.apply(this,arguments)}function e1(){return e1=m(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=iK)}),e1.apply(this,arguments)}function t1(){return t1=m(function*(n,e){if(!navigator)throw Qn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Qn.create("permission-blocked");return yield oAe(n,null==e?void 0:e.vapidKey),yield sAe(n,null==e?void 0:e.serviceWorkerRegistration),QMe(n)}),t1.apply(this,arguments)}function aAe(n,e,t){return n1.apply(this,arguments)}function n1(){return n1=m(function*(n,e,t){const i=lAe(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:t[rK],message_name:t[NMe],message_time:t[FMe],message_device_time:Math.floor(Date.now()/1e3)})}),n1.apply(this,arguments)}function lAe(n){switch(n){case Gd.NOTIFICATION_CLICKED:return"notification_open";case Gd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function r1(){return r1=m(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Gd.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(dK(t)):n.onMessageHandler.next(dK(t)));const i=t.data;nAe(i)&&"1"===i[LMe]&&(yield aAe(n,t.messageType,i))}),r1.apply(this,arguments)}const mK="@firebase/messaging",uAe=n=>{const e=new rAe(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function cAe(n,e){return r1.apply(this,arguments)}(e,t)),e},dAe=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:i=>function pK(n,e){return t1.apply(this,arguments)}(e,i)}};function _K(){return s1.apply(this,arguments)}function s1(){return(s1=m(function*(){try{yield hf()}catch(n){return!1}return"undefined"!=typeof window&&ia()&&ST()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function mAe(n=aa()){return _K().then(e=>{if(!e)throw Qn.create("unsupported-browser")},e=>{throw Qn.create("indexed-db-unsupported")}),Yr(Ce(n),"messaging").getImmediate()}!function hAe(){cn(new Zt("messaging",uAe,"PUBLIC")),cn(new Zt("messaging-internal",dAe,"PRIVATE")),$e(mK,"0.9.16"),$e(mK,"0.9.16","esm2017")}();const sw="analytics",gAe="firebase_id",vAe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",yK="https://www.googletagmanager.com/gtag/js",Yn=new ra("@firebase/analytics");function vK(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function bAe(n,e){const t=document.createElement("script");t.src=`${yK}?l=${n}&id=${e}`,t.async=!0,document.head.appendChild(t)}function CAe(n,e,t,i,r,s){return l1.apply(this,arguments)}function l1(){return l1=m(function*(n,e,t,i,r,s){const o=i[r];try{if(o)yield e[o];else{const l=(yield vK(t)).find(c=>c.measurementId===r);l&&(yield e[l.appId])}}catch(a){Yn.error(a)}n("config",r,s)}),l1.apply(this,arguments)}function EAe(n,e,t,i,r){return c1.apply(this,arguments)}function c1(){return c1=m(function*(n,e,t,i,r){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=yield vK(t);for(const l of o){const c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(!u){s=[];break}s.push(u)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",i,r||{})}catch(s){Yn.error(s)}}),c1.apply(this,arguments)}function DAe(){const n=window.document.getElementsByTagName("script");for(const e of Object.values(n))if(e.src&&e.src.includes(yK))return e;return null}const hr=new Sr("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),bK=new class AAe{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function kAe(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function RAe(n){return u1.apply(this,arguments)}function u1(){return u1=m(function*(n){var e;const{appId:t,apiKey:i}=n,r={method:"GET",headers:kAe(i)},s=vAe.replace("{app-id}",t),o=yield fetch(s,r);if(200!==o.status&&304!==o.status){let a="";try{const l=yield o.json();(null===(e=l.error)||void 0===e?void 0:e.message)&&(a=l.error.message)}catch(l){}throw hr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}),u1.apply(this,arguments)}function PAe(n){return d1.apply(this,arguments)}function d1(){return d1=m(function*(n,e=bK,t){const{appId:i,apiKey:r,measurementId:s}=n.options;if(!i)throw hr.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw hr.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new FAe;return setTimeout(m(function*(){a.abort()}),void 0!==t?t:6e4),wK({appId:i,apiKey:r,measurementId:s},o,a,e)}),d1.apply(this,arguments)}function wK(n,e,t){return h1.apply(this,arguments)}function h1(){return h1=m(function*(n,{throttleEndTimeMillis:e,backoffCount:t},i,r=bK){var s,o;const{appId:a,measurementId:l}=n;try{yield OAe(i,e)}catch(c){if(l)return Yn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===(s=c)||void 0===s?void 0:s.message}]`),{appId:a,measurementId:l};throw c}try{const c=yield RAe(n);return r.deleteThrottleMetadata(a),c}catch(c){const u=c;if(!NAe(u)){if(r.deleteThrottleMetadata(a),l)return Yn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null==u?void 0:u.message}]`),{appId:a,measurementId:l};throw c}const d=503===Number(null===(o=null==u?void 0:u.customData)||void 0===o?void 0:o.httpStatus)?AT(t,r.intervalMillis,30):AT(t,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:t+1};return r.setThrottleMetadata(a,h),Yn.debug(`Calling attemptFetch again in ${d} millis`),wK(n,h,i,r)}}),h1.apply(this,arguments)}function OAe(n,e){return new Promise((t,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(s),i(hr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function NAe(n){if(!(n instanceof Oi&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class FAe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let f1,v1;function p1(){return p1=m(function*(n,e,t,i,r){if(r&&r.global)n("event",t,i);else{const s=yield e;n("event",t,Object.assign(Object.assign({},i),{send_to:s}))}}),p1.apply(this,arguments)}function CK(n){v1=n}function EK(n){f1=n}function jAe(){return b1.apply(this,arguments)}function b1(){return b1=m(function*(){var n;if(!ia())return Yn.warn(hr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield hf()}catch(e){return Yn.warn(hr.create("indexeddb-unavailable",{errorInfo:null===(n=e)||void 0===n?void 0:n.toString()}).message),!1}return!0}),b1.apply(this,arguments)}function w1(){return w1=m(function*(n,e,t,i,r,s,o){var a;const l=PAe(n);l.then(f=>{t[f.measurementId]=f.appId,n.options.measurementId&&f.measurementId!==n.options.measurementId&&Yn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>Yn.error(f)),e.push(l);const c=jAe().then(f=>{if(f)return i.getId()}),[u,d]=yield Promise.all([l,c]);DAe()||bAe(s,u.measurementId),v1&&(r("consent","default",v1),CK(void 0)),r("js",new Date);const h=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return h.origin="firebase",h.update=!0,null!=d&&(h[gAe]=d),r("config",u.measurementId,h),f1&&(r("set",f1),EK(void 0)),u.measurementId}),w1.apply(this,arguments)}class zAe{constructor(e){this.app=e}_delete(){return delete Oo[this.app.options.appId],Promise.resolve()}}let Oo={},TK=[];const IK={};let SK,No,ow="dataLayer",C1=!1;function WAe(n,e,t){!function GAe(){const n=[];if(DT()&&n.push("This is a browser extension environment."),ST()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,r)=>`(${r+1}) ${i}`).join(" "),t=hr.create("invalid-analytics-context",{errorInfo:e});Yn.warn(t.message)}}();const i=n.options.appId;if(!i)throw hr.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw hr.create("no-api-key");Yn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Oo[i])throw hr.create("already-exists",{id:i});if(!C1){!function wAe(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(ow);const{wrappedGtag:s,gtagCore:o}=function IAe(n,e,t,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&"function"==typeof window[r]&&(s=window[r]),window[r]=function TAe(n,e,t,i){function s(){return(s=m(function*(o,a,l){try{"event"===o?yield EAe(n,e,t,a,l):"config"===o?yield CAe(n,e,t,i,a,l):"consent"===o?n("consent","update",l):n("set",a)}catch(c){Yn.error(c)}})).apply(this,arguments)}return function r(o,a,l){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[r]}}(Oo,TK,IK,ow,"gtag");No=s,SK=o,C1=!0}return Oo[i]=function $Ae(n,e,t,i,r,s,o){return w1.apply(this,arguments)}(n,TK,IK,e,SK,ow,t),new zAe(n)}function KAe(){return E1.apply(this,arguments)}function E1(){return(E1=m(function*(){if(DT()||!ST()||!ia())return!1;try{return yield hf()}catch(n){return!1}})).apply(this,arguments)}const xK="@firebase/analytics";!function YAe(){cn(new Zt(sw,(e,{options:t})=>WAe(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),cn(new Zt("analytics-internal",function n(e){try{const t=e.getProvider(sw).getImmediate();return{logEvent:(i,r,s)=>function QAe(n,e,t,i){n=Ce(n),function LAe(n,e,t,i,r){return p1.apply(this,arguments)}(No,Oo[n.app.options.appId],e,t,i).catch(r=>Yn.error(r))}(t,i,r,s)}}catch(t){throw hr.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),$e(xK,"0.8.0"),$e(xK,"0.8.0","esm2017")}();const JAe=new class ZAe extends y_{}(class XAe extends __{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!=i&&i>0||null==i&&this.delay>0?super.requestAsyncId(e,t,i):e.flush(this)}}),Ga=new Qo("7.4.1"),T1="__angularfire_symbol__analyticsIsSupportedValue",I1="__angularfire_symbol__analyticsIsSupported",D1="__angularfire_symbol__remoteConfigIsSupportedValue",S1="__angularfire_symbol__remoteConfigIsSupported",x1="__angularfire_symbol__messagingIsSupportedValue",M1="__angularfire_symbol__messagingIsSupported";globalThis[I1]||(globalThis[I1]=KAe().then(n=>globalThis[T1]=n).catch(()=>globalThis[T1]=!1)),globalThis[M1]||(globalThis[M1]=_K().then(n=>globalThis[x1]=n).catch(()=>globalThis[x1]=!1)),globalThis[S1]||(globalThis[S1]=kMe().then(n=>globalThis[D1]=n).catch(()=>globalThis[D1]=!1));const aw={async:()=>globalThis[M1],sync:()=>{const n=globalThis[x1];if(void 0===n)throw new Error((n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`)("Messaging"));return n}};function Sc(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const xc=(n,e)=>{const t=e?[e]:UT(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i};function Wd(){}class AK{constructor(e,t=JAe){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){const r=this.zone;return this.delegate.schedule(function(o){r.runGuarded(()=>{e.apply(this,[o])})},t,i)}}class eke{constructor(e){this.zone=e,this.task=null}call(e,t){const i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wd,{},Wd,Wd)),t.pipe(Sn({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Mc=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new AK(Zone.current)),this.insideAngular=t.run(()=>new AK(Zone.current,Xh)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(I(Z))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ac(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function tke(n){return Ac().ngZone.runOutsideAngular(()=>n())}function kc(n){return Ac().ngZone.run(()=>n())}function nke(n){return Ac(),function ike(n){return function(t){return(t=t.lift(new eke(n.ngZone))).pipe(zm(n.outsideAngular),$m(n.insideAngular))}}(Ac())(n)}const rke=(n,e)=>function(){const i=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),kc(()=>n.apply(void 0,i))},Rc=(n,e)=>function(){let t;const i=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof i[s]&&(e&&(t||(t=kc(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wd,{},Wd,Wd)))),i[s]=rke(i[s],t));const r=tke(()=>n.apply(this,i));if(!e){if(r instanceof nt){const s=Ac();return r.pipe(zm(s.outsideAngular),$m(s.insideAngular))}return kc(()=>r)}return r instanceof nt?r.pipe(nke):r instanceof Promise?kc(()=>new Promise((s,o)=>r.then(a=>kc(()=>s(a)),a=>kc(()=>o(a))))):"function"==typeof r&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),r.apply(this,arguments)}:kc(()=>r)};class $s{constructor(e){return e}}class Pc{constructor(){return UT()}}const k1=new P("angularfire2._apps"),oke={provide:$s,useFactory:function ske(n){return n&&1===n.length?n[0]:new $s(aa())},deps:[[new Le,k1]]},ake={provide:Pc,deps:[[new Le,k1]]};function lke(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new $s(i)}}let cke=(()=>{class n{constructor(t){$e("angularfire",Ga.full,"core"),$e("angularfire",Ga.full,"app"),$e("angular",o2.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(I(Iu))},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[oke,ake]}),n})();function uke(n,...e){return{ngModule:cke,providers:[{provide:k1,useFactory:lke(n),multi:!0,deps:[Z,ot,Mc,...e]}]}}const dke=Rc(xr,!0),kK=new Map,hke={activated:!1,tokenObservers:[]},fke={initialized:!1,enabled:!1};function Ln(n){return kK.get(n)||hke}function rs(n,e){kK.set(n,e)}function lw(){return fke}class yke{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return m(function*(){t.stop();try{t.pending=new bl,yield function vke(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new bl,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ti=new Sr("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function PK(n){if(!Ln(n).activated)throw Ti.create("use-before-activation",{appName:n.name})}function O1(n,e){return N1.apply(this,arguments)}function N1(){return N1=m(function*({url:n,body:e},t){var i,r;const s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const f=yield o.getHeartbeatsHeader();f&&(s["X-Firebase-Client"]=f)}const a={method:"POST",body:JSON.stringify(e),headers:s};let l,c;try{l=yield fetch(n,a)}catch(f){throw Ti.create("fetch-network-error",{originalErrorMessage:null===(i=f)||void 0===i?void 0:i.message})}if(200!==l.status)throw Ti.create("fetch-status-error",{httpStatus:l.status});try{c=yield l.json()}catch(f){throw Ti.create("fetch-parse-error",{originalErrorMessage:null===(r=f)||void 0===r?void 0:r.message})}const u=c.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Ti.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});const d=1e3*Number(u[1]),h=Date.now();return{token:c.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}}),N1.apply(this,arguments)}function Eke(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:e}}}const Nm="firebase-app-check-store";let dw=null;function NK(){return dw||(dw=new Promise((n,e)=>{var t;try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=r=>{n(r.target.result)},i.onerror=r=>{var s;e(Ti.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},i.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Nm,{keyPath:"compositeKey"})}}catch(i){e(Ti.create("storage-open",{originalErrorMessage:null===(t=i)||void 0===t?void 0:t.message}))}}),dw)}function F1(){return F1=m(function*(n,e){const i=(yield NK()).transaction(Nm,"readwrite"),s=i.objectStore(Nm).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},i.onerror=l=>{var c;a(Ti.create("storage-set",{originalErrorMessage:null===(c=l.target.error)||void 0===c?void 0:c.message}))}})}),F1.apply(this,arguments)}const Fm=new ra("@firebase/app-check");function BK(n,e){return ia()?function Ske(n,e){return function FK(n,e){return F1.apply(this,arguments)}(function VK(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Fm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function UK(){return lw().enabled}function HK(){return U1.apply(this,arguments)}function U1(){return U1=m(function*(){const n=lw();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),U1.apply(this,arguments)}const Pke={error:"UNKNOWN_ERROR"};function Oke(n){return W_.encodeString(JSON.stringify(n),!1)}function hw(n){return H1.apply(this,arguments)}function H1(){return H1=m(function*(n,e=!1){const t=n.app;PK(t);const i=Ln(t);let s,r=i.token;if(!r){const l=yield i.cachedTokenPromise;l&&fw(l)&&(r=l)}if(!e&&r&&fw(r))return{token:r.token};let a,o=!1;if(UK()){i.exchangeTokenPromise||(i.exchangeTokenPromise=O1(Eke(t,yield HK()),n.heartbeatServiceProvider).then(c=>(i.exchangeTokenPromise=void 0,c)),o=!0);const l=yield i.exchangeTokenPromise;return yield BK(t,l),rs(t,Object.assign(Object.assign({},i),{token:l})),{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(l=>(i.exchangeTokenPromise=void 0,l)),o=!0),r=yield i.exchangeTokenPromise}catch(l){"appCheck/throttled"===l.code?Fm.warn(l.message):Fm.error(l),s=l}return r?(a={token:r.token},rs(t,Object.assign(Object.assign({},i),{token:r})),yield BK(t,r)):a=Fke(s),o&&$K(t,a),a}),H1.apply(this,arguments)}function $1(n,e){const t=Ln(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),rs(n,Object.assign(Object.assign({},t),{tokenObservers:i}))}function jK(n){const{app:e}=n,t=Ln(e);let i=t.tokenRefresher;i||(i=function Nke(n){const{app:e}=n;return new yke(m(function*(){let i;if(i=Ln(e).token?yield hw(n,!0):yield hw(n),i.error)throw i.error}),()=>!0,()=>{const t=Ln(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),rs(e,Object.assign(Object.assign({},t),{tokenRefresher:i}))),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function $K(n,e){const t=Ln(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(r){}}function fw(n){return n.expireTimeMillis-Date.now()>0}function Fke(n){return{token:Oke(Pke),error:n}}class Lke{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ln(this.app);for(const t of e)$1(this.app,t.next);return Promise.resolve()}}const XK="app-check-internal";!function Xke(){cn(new Zt("app-check",n=>function Vke(n,e){return new Lke(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(XK).initialize()})),cn(new Zt(XK,n=>function Bke(n){return{getToken:e=>hw(n,e),addTokenListener:e=>function j1(n,e,t,i){const{app:r}=n,s=Ln(r),o={next:t,error:i,type:e};if(rs(r,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&fw(s.token)){const a=s.token;Promise.resolve().then(()=>{t({token:a.token}),jK(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>jK(n))}(n,"INTERNAL",e),removeTokenListener:e=>$1(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),$e("@firebase/app-check","0.5.12")}();class qd{constructor(){return xc("app-check")}}"undefined"!=typeof window&&window;class K1{constructor(e){return e}}class Lm{constructor(){return xc("auth")}}const Q1=new P("angularfire2.auth-instances");function iRe(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new K1(i)}}const rRe={provide:Lm,deps:[[new Le,Q1]]},sRe={provide:K1,useFactory:function nRe(n,e){const t=Sc("auth",n,e);return t&&new K1(t)},deps:[[new Le,Q1],$s]};let oRe=(()=>{class n{constructor(){$e("angularfire",Ga.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[sRe,rRe]}),n})();function aRe(n,...e){return{ngModule:oRe,providers:[{provide:Q1,useFactory:iRe(n),multi:!0,deps:[Z,ot,Mc,Pc,[new Le,qd],...e]}]}}const lRe=Rc(tw,!0);class Y1{constructor(e){return e}}const e7="database",X1=new P("angularfire2.database-instances");function dRe(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new Y1(i)}}const hRe={provide:class cRe{constructor(){return xc(e7)}},deps:[[new Le,X1]]},fRe={provide:Y1,useFactory:function uRe(n,e){const t=Sc(e7,n,e);return t&&new Y1(t)},deps:[[new Le,X1],$s]};let pRe=(()=>{class n{constructor(){$e("angularfire",Ga.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[fRe,hRe]}),n})();function mRe(n,...e){return{ngModule:pRe,providers:[{provide:X1,useFactory:dRe(n),multi:!0,deps:[Z,ot,Mc,Pc,[new Le,Lm],[new Le,qd],...e]}]}}const gRe=Rc(Fi,!0);class Z1{constructor(e){return e}}const t7="firestore",J1=new P("angularfire2.firestore-instances");function vRe(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new Z1(i)}}const bRe={provide:class _Re{constructor(){return xc(t7)}},deps:[[new Le,J1]]},wRe={provide:Z1,useFactory:function yRe(n,e){const t=Sc(t7,n,e);return t&&new Z1(t)},deps:[[new Le,J1],$s]};let CRe=(()=>{class n{constructor(){$e("angularfire",Ga.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[wRe,bRe]}),n})();function ERe(n,...e){return{ngModule:CRe,providers:[{provide:J1,useFactory:vRe(n),multi:!0,deps:[Z,ot,Mc,Pc,[new Le,Lm],[new Le,qd],...e]}]}}const TRe=Rc(eW,!0),tP="functions";class MRe{constructor(e,t,i){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(r=>this.auth=r,()=>{}),this.messaging||t.get().then(r=>this.messaging=r,()=>{}),this.appCheck||i.get().then(r=>this.appCheck=r,()=>{})}getAuthToken(){var e=this;return m(function*(){if(e.auth)try{const t=yield e.auth.getToken();return null==t?void 0:t.accessToken}catch(t){return}})()}getMessagingToken(){var e=this;return m(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch(t){return}})()}getAppCheckToken(){var e=this;return m(function*(){if(e.appCheck){const t=yield e.appCheck.getToken();return t.error?null:t.token}return null})()}getContext(){var e=this;return m(function*(){return{authToken:yield e.getAuthToken(),messagingToken:yield e.getMessagingToken(),appCheckToken:yield e.getAppCheckToken()}})()}}const nP="us-central1";class kRe{constructor(e,t,i,r,s=nP,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new MRe(t,i,r),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin,this.region=nP}catch(a){this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}const o7="@firebase/functions";function HRe(n=aa(),e=nP){return Yr(Ce(n),tP).getImmediate({identifier:e})}!function URe(n,e){cn(new Zt(tP,(i,{instanceIdentifier:r})=>{const s=i.getProvider("app").getImmediate(),o=i.getProvider("auth-internal"),a=i.getProvider("messaging-internal"),l=i.getProvider("app-check-internal");return new kRe(s,o,a,l,r,n)},"PUBLIC").setMultipleInstances(!0)),$e(o7,"0.8.4",e),$e(o7,"0.8.4","esm2017")}(fetch.bind(self));class sP{constructor(e){return e}}const l7="functions",oP=new P("angularfire2.functions-instances");function zRe(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new sP(i)}}const GRe={provide:class jRe{constructor(){return xc(l7)}},deps:[[new Le,oP]]},WRe={provide:sP,useFactory:function $Re(n,e){const t=Sc(l7,n,e);return t&&new sP(t)},deps:[[new Le,oP],$s]};let qRe=(()=>{class n{constructor(){$e("angularfire",Ga.full,"fn")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[WRe,GRe]}),n})();function KRe(n,...e){return{ngModule:qRe,providers:[{provide:oP,useFactory:zRe(n),multi:!0,deps:[Z,ot,Mc,Pc,[new Le,Lm],[new Le,qd],...e]}]}}const QRe=Rc(HRe,!0);class aP{constructor(e){return e}}const c7="messaging",lP=new P("angularfire2.messaging-instances");function ZRe(n){return(e,t)=>{if(!aw.sync())return null;const i=e.runOutsideAngular(()=>n(t));return new aP(i)}}const JRe={provide:class YRe{constructor(){return xc(c7)}},deps:[[new Le,lP]]},e1e={provide:aP,useFactory:function XRe(n,e){if(!aw.sync())return null;const t=Sc(c7,n,e);return t&&new aP(t)},deps:[[new Le,lP],$s]};let t1e=(()=>{class n{constructor(){$e("angularfire",Ga.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[e1e,JRe,{provide:Qg,useValue:aw.async,multi:!0}]}),n})();function n1e(n,...e){return{ngModule:t1e,providers:[{provide:lP,useFactory:ZRe(n),multi:!0,deps:[Z,ot,Mc,Pc,...e]}]}}const i1e=Rc(mAe,!0);class cP{constructor(e){return e}}const u7="storage",uP=new P("angularfire2.storage-instances");function o1e(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new cP(i)}}const a1e={provide:class r1e{constructor(){return xc(u7)}},deps:[[new Le,uP]]},l1e={provide:cP,useFactory:function s1e(n,e){const t=Sc(u7,n,e);return t&&new cP(t)},deps:[[new Le,uP],$s]};let c1e=(()=>{class n{constructor(){$e("angularfire",Ga.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[l1e,a1e]}),n})();function u1e(n,...e){return{ngModule:c1e,providers:[{provide:uP,useFactory:o1e(n),multi:!0,deps:[Z,ot,Mc,Pc,[new Le,Lm],[new Le,qd],...e]}]}}const d1e=Rc(mc,!0);let d7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[_s,ym,dm,Nb,Ub,Lb,vb,P5,eA]]}),n})(),dP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[_s,Ub,ym,CT,dm]]}),n})(),h7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[_s,dM,dP,ym,dP,Nb,d7,R0e,_xe,dm,Lb,uIe,eA]]}),n})(),h1e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[_s,ym,Ub,h7,Lb,dm,Nb,CT,vb,P5]]}),n})(),f1e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n,bootstrap:[vxe]}),n.\u0275inj=he({providers:[],imports:[[WV,dxe,Xae,h1e,h7,dP,d7,uke(()=>dke(ii_firebase)),aRe(()=>lRe()),mRe(()=>gRe()),ERe(()=>TRe()),KRe(()=>QRe()),n1e(()=>i1e()),u1e(()=>d1e()),ym,Ub,dm,Nb,Lb,CT,eA]]}),n})();(function Xte(){sV=!1})(),dre().bootstrapModule(f1e).catch(n=>console.error(n))}},Wi=>{Wi(Wi.s=275)}]);